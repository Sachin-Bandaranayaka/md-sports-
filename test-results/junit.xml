<?xml version="1.0" encoding="UTF-8"?>
<testsuites name="jest tests" tests="14" failures="7" errors="0" time="44.887">
  <testsuite name="Purchase Invoice API Integration Tests" errors="0" failures="7" skipped="0" timestamp="2025-06-19T11:32:14" time="44.832" tests="14">
    <testcase classname="Purchase Invoice API Integration Tests › POST /api/purchases (Create Purchase Invoice)" name="should create a purchase invoice for a new product, update inventory, and set WAC" time="4.972">
    </testcase>
    <testcase classname="Purchase Invoice API Integration Tests › POST /api/purchases (Create Purchase Invoice)" name="should create a purchase for an existing product, update inventory, and recalculate WACs" time="0.694">
      <failure>ReferenceError: NextRequest is not defined
    at Object.&lt;anonymous&gt; (/Users/sachin/Documents/md-sports-/tests/integration/purchaseInvoices.test.ts:217:32)
    at Promise.then.completed (/Users/sachin/Documents/md-sports-/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/sachin/Documents/md-sports-/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/sachin/Documents/md-sports-/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/Users/sachin/Documents/md-sports-/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/sachin/Documents/md-sports-/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/sachin/Documents/md-sports-/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/sachin/Documents/md-sports-/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/sachin/Documents/md-sports-/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/sachin/Documents/md-sports-/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/sachin/Documents/md-sports-/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/sachin/Documents/md-sports-/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/sachin/Documents/md-sports-/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Purchase Invoice API Integration Tests › POST /api/purchases (Create Purchase Invoice)" name="should create a purchase with multiple items and update inventory/WAC for each" time="0.852">
      <failure>ReferenceError: NextRequest is not defined
    at Object.&lt;anonymous&gt; (/Users/sachin/Documents/md-sports-/tests/integration/purchaseInvoices.test.ts:332:25)</failure>
    </testcase>
    <testcase classname="Purchase Invoice API Integration Tests › POST /api/purchases (Create Purchase Invoice)" name="should distribute a single purchase item to multiple shops" time="1.065">
      <failure>ReferenceError: NextRequest is not defined
    at Object.&lt;anonymous&gt; (/Users/sachin/Documents/md-sports-/tests/integration/purchaseInvoices.test.ts:416:25)</failure>
    </testcase>
    <testcase classname="Purchase Invoice API Integration Tests › POST /api/purchases (Create Purchase Invoice)" name="should fail to create a purchase if a productId does not exist" time="0.693">
      <failure>ReferenceError: NextRequest is not defined
    at Object.&lt;anonymous&gt; (/Users/sachin/Documents/md-sports-/tests/integration/purchaseInvoices.test.ts:470:25)
    at Promise.then.completed (/Users/sachin/Documents/md-sports-/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/sachin/Documents/md-sports-/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/sachin/Documents/md-sports-/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/Users/sachin/Documents/md-sports-/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/sachin/Documents/md-sports-/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/sachin/Documents/md-sports-/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/sachin/Documents/md-sports-/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/sachin/Documents/md-sports-/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/sachin/Documents/md-sports-/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/sachin/Documents/md-sports-/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/sachin/Documents/md-sports-/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/sachin/Documents/md-sports-/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Purchase Invoice API Integration Tests › POST /api/purchases (Create Purchase Invoice)" name="should fail to create a purchase if a supplierId does not exist" time="0.79">
      <failure>ReferenceError: NextRequest is not defined
    at Object.&lt;anonymous&gt; (/Users/sachin/Documents/md-sports-/tests/integration/purchaseInvoices.test.ts:520:25)</failure>
    </testcase>
    <testcase classname="Purchase Invoice API Integration Tests › PUT /api/purchases/:id (Update Purchase Invoice)" name="should update item quantity (increase), recalculate stock and WACs" time="2.218">
      <failure>ReferenceError: NextRequest is not defined
    at Object.&lt;anonymous&gt; (/Users/sachin/Documents/md-sports-/tests/integration/purchaseInvoices.test.ts:615:25)
    at Promise.then.completed (/Users/sachin/Documents/md-sports-/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/sachin/Documents/md-sports-/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/sachin/Documents/md-sports-/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/Users/sachin/Documents/md-sports-/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/sachin/Documents/md-sports-/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/sachin/Documents/md-sports-/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/sachin/Documents/md-sports-/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/sachin/Documents/md-sports-/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/sachin/Documents/md-sports-/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/sachin/Documents/md-sports-/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/sachin/Documents/md-sports-/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/sachin/Documents/md-sports-/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Purchase Invoice API Integration Tests › PUT /api/purchases/:id (Update Purchase Invoice)" name="should update item quantity (decrease), recalculate stock and WACs" time="4.347">
    </testcase>
    <testcase classname="Purchase Invoice API Integration Tests › PUT /api/purchases/:id (Update Purchase Invoice)" name="should update item price, recalculate stock and WACs" time="4.161">
    </testcase>
    <testcase classname="Purchase Invoice API Integration Tests › PUT /api/purchases/:id (Update Purchase Invoice)" name="should add a new item to an existing invoice, update stock and WACs" time="2.111">
      <failure>ReferenceError: NextRequest is not defined
    at Object.&lt;anonymous&gt; (/Users/sachin/Documents/md-sports-/tests/integration/purchaseInvoices.test.ts:827:25)</failure>
    </testcase>
    <testcase classname="Purchase Invoice API Integration Tests › PUT /api/purchases/:id (Update Purchase Invoice)" name="should remove an item from an existing invoice, update stock and WACs" time="7.142">
    </testcase>
    <testcase classname="Purchase Invoice API Integration Tests › DELETE /api/purchases/:id (Delete Purchase Invoice)" name="should delete a purchase invoice and correctly reverse stock and WACs for a single-item invoice with explicit distribution" time="3.356">
    </testcase>
    <testcase classname="Purchase Invoice API Integration Tests › DELETE /api/purchases/:id (Delete Purchase Invoice)" name="should delete a purchase and reverse stock/WAC when product is in a single inferred shop" time="5.636">
    </testcase>
    <testcase classname="Purchase Invoice API Integration Tests › DELETE /api/purchases/:id (Delete Purchase Invoice)" name="should delete an invoice with multiple items, reversing stock/WAC for each" time="5.852">
    </testcase>
  </testsuite>
</testsuites>