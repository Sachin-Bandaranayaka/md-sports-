523189b607b9d12c52900424d89f125a
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _globals = require("@jest/globals");
const _bcryptjs = /*#__PURE__*/ _interop_require_default(require("bcryptjs"));
const _jsonwebtoken = /*#__PURE__*/ _interop_require_default(require("jsonwebtoken"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Mock dependencies
_globals.jest.mock("bcryptjs");
_globals.jest.mock("jsonwebtoken", ()=>({
        sign: _globals.jest.fn(),
        verify: _globals.jest.fn()
    }));
_globals.jest.mock("@prisma/client");
const mockBcrypt = _bcryptjs.default;
const mockJwt = require("jsonwebtoken");
const mockPrisma = {
    user: {
        findUnique: _globals.jest.fn(),
        create: _globals.jest.fn(),
        update: _globals.jest.fn()
    },
    refreshToken: {
        create: _globals.jest.fn(),
        findUnique: _globals.jest.fn(),
        delete: _globals.jest.fn(),
        deleteMany: _globals.jest.fn()
    },
    $disconnect: _globals.jest.fn()
};
// Mock the auth service (we'll test the actual implementation)
class AuthService {
    constructor(){
        this.prisma = mockPrisma;
    }
    async login(email, password) {
        // Find user by email
        const user = await this.prisma.user.findUnique({
            where: {
                email
            },
            select: {
                id: true,
                email: true,
                password: true,
                name: true,
                permissions: true,
                isActive: true,
                shopId: true
            }
        });
        if (!user) {
            throw new Error("Invalid credentials");
        }
        if (!user.isActive) {
            throw new Error("Account is deactivated");
        }
        // Verify password
        const isValidPassword = await _bcryptjs.default.compare(password, user.password);
        if (!isValidPassword) {
            throw new Error("Invalid credentials");
        }
        // Generate tokens
        const accessToken = this.generateAccessToken(user);
        const refreshToken = await this.generateRefreshToken(user.id);
        return {
            user: {
                id: user.id,
                email: user.email,
                name: user.name,
                permissions: user.permissions,
                shopId: user.shopId
            },
            accessToken,
            refreshToken
        };
    }
    generateAccessToken(user) {
        return _jsonwebtoken.default.sign({
            userId: user.id,
            email: user.email,
            permissions: user.permissions,
            shopId: user.shopId
        }, process.env.JWT_SECRET || "test-secret", {
            expiresIn: "15m"
        });
    }
    async generateRefreshToken(userId) {
        const token = _jsonwebtoken.default.sign({
            userId
        }, process.env.JWT_REFRESH_SECRET || "test-refresh-secret", {
            expiresIn: "7d"
        });
        // Store refresh token in database
        await this.prisma.refreshToken.create({
            data: {
                userId,
                token,
                expiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000)
            }
        });
        return token;
    }
    async verifyToken(token) {
        try {
            const decoded = _jsonwebtoken.default.verify(token, process.env.JWT_SECRET || "test-secret");
            return decoded;
        } catch (error) {
            throw new Error("Invalid token");
        }
    }
    async refreshAccessToken(refreshToken) {
        // Verify refresh token
        const decoded = _jsonwebtoken.default.verify(refreshToken, process.env.JWT_REFRESH_SECRET || "test-refresh-secret");
        // Check if refresh token exists in database
        const storedToken = await this.prisma.refreshToken.findUnique({
            where: {
                token: refreshToken
            },
            include: {
                user: true
            }
        });
        if (!storedToken || storedToken.isRevoked) {
            throw new Error("Invalid refresh token");
        }
        if (new Date() > storedToken.expiresAt) {
            throw new Error("Refresh token expired");
        }
        // Generate new access token
        const newAccessToken = this.generateAccessToken(storedToken.user);
        return {
            accessToken: newAccessToken,
            user: {
                id: storedToken.user.id,
                email: storedToken.user.email,
                name: storedToken.user.name,
                permissions: storedToken.user.permissions,
                shopId: storedToken.user.shopId
            }
        };
    }
    async logout(refreshToken) {
        // Revoke refresh token
        await this.prisma.refreshToken.deleteMany({
            where: {
                token: refreshToken
            }
        });
    }
    async logoutAllDevices(userId) {
        // Revoke all refresh tokens for user
        await this.prisma.refreshToken.deleteMany({
            where: {
                userId
            }
        });
    }
}
(0, _globals.describe)("AuthService", ()=>{
    let authService;
    (0, _globals.beforeEach)(()=>{
        authService = new AuthService();
        _globals.jest.clearAllMocks();
        // Set up environment variables
        process.env.JWT_SECRET = "test-secret";
        process.env.JWT_REFRESH_SECRET = "test-refresh-secret";
        // Mock JWT methods
        mockJwt.sign.mockReturnValue("mock-token");
        mockJwt.verify.mockReturnValue({
            userId: 1,
            email: "test@example.com"
        });
    });
    (0, _globals.afterEach)(()=>{
        _globals.jest.resetAllMocks();
    });
    (0, _globals.describe)("login", ()=>{
        const mockUser = {
            id: 1,
            email: "test@example.com",
            password: "hashedPassword",
            name: "Test User",
            permissions: [
                "inventory:read",
                "sales:create"
            ],
            isActive: true,
            shopId: "shop-1"
        };
        (0, _globals.it)("should successfully login with valid credentials", async ()=>{
            // Arrange
            mockPrisma.user.findUnique.mockResolvedValue(mockUser);
            mockBcrypt.compare.mockResolvedValue(true);
            mockJwt.sign.mockReturnValue("mock-access-token");
            mockPrisma.refreshToken.create.mockResolvedValue({
                token: "mock-refresh-token"
            });
            // Act
            const result = await authService.login("test@example.com", "password123");
            // Assert
            (0, _globals.expect)(mockPrisma.user.findUnique).toHaveBeenCalledWith({
                where: {
                    email: "test@example.com"
                },
                select: {
                    id: true,
                    email: true,
                    password: true,
                    name: true,
                    permissions: true,
                    isActive: true,
                    shopId: true
                }
            });
            (0, _globals.expect)(mockBcrypt.compare).toHaveBeenCalledWith("password123", "hashedPassword");
            (0, _globals.expect)(result).toEqual({
                user: {
                    id: 1,
                    email: "test@example.com",
                    name: "Test User",
                    permissions: [
                        "inventory:read",
                        "sales:create"
                    ],
                    shopId: "shop-1"
                },
                accessToken: "mock-access-token",
                refreshToken: "mock-access-token"
            });
        });
        (0, _globals.it)("should throw error for non-existent user", async ()=>{
            // Arrange
            mockPrisma.user.findUnique.mockResolvedValue(null);
            // Act & Assert
            await (0, _globals.expect)(authService.login("nonexistent@example.com", "password123")).rejects.toThrow("Invalid credentials");
            (0, _globals.expect)(mockBcrypt.compare).not.toHaveBeenCalled();
        });
        (0, _globals.it)("should throw error for inactive user", async ()=>{
            // Arrange
            const inactiveUser = {
                ...mockUser,
                isActive: false
            };
            mockPrisma.user.findUnique.mockResolvedValue(inactiveUser);
            // Act & Assert
            await (0, _globals.expect)(authService.login("test@example.com", "password123")).rejects.toThrow("Account is deactivated");
            (0, _globals.expect)(mockBcrypt.compare).not.toHaveBeenCalled();
        });
        (0, _globals.it)("should throw error for invalid password", async ()=>{
            // Arrange
            mockPrisma.user.findUnique.mockResolvedValue(mockUser);
            mockBcrypt.compare.mockResolvedValue(false);
            // Act & Assert
            await (0, _globals.expect)(authService.login("test@example.com", "wrongpassword")).rejects.toThrow("Invalid credentials");
            (0, _globals.expect)(mockBcrypt.compare).toHaveBeenCalledWith("wrongpassword", "hashedPassword");
        });
        (0, _globals.it)("should handle database errors gracefully", async ()=>{
            // Arrange
            mockPrisma.user.findUnique.mockRejectedValue(new Error("Database connection failed"));
            // Act & Assert
            await (0, _globals.expect)(authService.login("test@example.com", "password123")).rejects.toThrow("Database connection failed");
        });
    });
    (0, _globals.describe)("verifyToken", ()=>{
        (0, _globals.it)("should successfully verify valid token", async ()=>{
            // Arrange
            const mockDecoded = {
                userId: 1,
                email: "test@example.com"
            };
            const jwtVerifySpy = _globals.jest.spyOn(_jsonwebtoken.default, "verify");
            jwtVerifySpy.mockReturnValue(mockDecoded);
            // Act
            const result = await authService.verifyToken("valid-token");
            // Assert
            (0, _globals.expect)(jwtVerifySpy).toHaveBeenCalledWith("valid-token", "test-secret");
            (0, _globals.expect)(result).toEqual(mockDecoded);
            jwtVerifySpy.mockRestore();
        });
        (0, _globals.it)("should throw error for invalid token", async ()=>{
            // Arrange
            const jwtVerifySpy = _globals.jest.spyOn(_jsonwebtoken.default, "verify");
            jwtVerifySpy.mockImplementation(()=>{
                throw new Error("jwt malformed");
            });
            // Act & Assert
            await (0, _globals.expect)(authService.verifyToken("invalid-token")).rejects.toThrow("Invalid token");
            jwtVerifySpy.mockRestore();
        });
        (0, _globals.it)("should throw error for expired token", async ()=>{
            // Arrange
            const jwtVerifySpy = _globals.jest.spyOn(_jsonwebtoken.default, "verify");
            jwtVerifySpy.mockImplementation(()=>{
                throw new Error("jwt expired");
            });
            // Act & Assert
            await (0, _globals.expect)(authService.verifyToken("expired-token")).rejects.toThrow("Invalid token");
            jwtVerifySpy.mockRestore();
        });
    });
    (0, _globals.describe)("refreshAccessToken", ()=>{
        const mockRefreshToken = {
            token: "valid-refresh-token",
            userId: 1,
            expiresAt: new Date(Date.now() + 24 * 60 * 60 * 1000),
            isRevoked: false,
            user: {
                id: 1,
                email: "test@example.com",
                name: "Test User",
                permissions: [
                    "inventory:read"
                ],
                shopId: "shop-1"
            }
        };
        (0, _globals.it)("should successfully refresh access token", async ()=>{
            // Arrange
            const jwtVerifySpy = _globals.jest.spyOn(_jsonwebtoken.default, "verify");
            const jwtSignSpy = _globals.jest.spyOn(_jsonwebtoken.default, "sign");
            jwtVerifySpy.mockReturnValue({
                userId: 1
            });
            mockPrisma.refreshToken.findUnique.mockResolvedValue(mockRefreshToken);
            jwtSignSpy.mockReturnValue("new-access-token");
            // Act
            const result = await authService.refreshAccessToken("valid-refresh-token");
            // Assert
            (0, _globals.expect)(jwtVerifySpy).toHaveBeenCalledWith("valid-refresh-token", "test-refresh-secret");
            (0, _globals.expect)(mockPrisma.refreshToken.findUnique).toHaveBeenCalledWith({
                where: {
                    token: "valid-refresh-token"
                },
                include: {
                    user: true
                }
            });
            (0, _globals.expect)(result).toEqual({
                accessToken: "new-access-token",
                user: {
                    id: 1,
                    email: "test@example.com",
                    name: "Test User",
                    permissions: [
                        "inventory:read"
                    ],
                    shopId: "shop-1"
                }
            });
            jwtVerifySpy.mockRestore();
            jwtSignSpy.mockRestore();
        });
        (0, _globals.it)("should throw error for revoked refresh token", async ()=>{
            // Arrange
            const revokedToken = {
                ...mockRefreshToken,
                isRevoked: true
            };
            const jwtVerifySpy = _globals.jest.spyOn(_jsonwebtoken.default, "verify");
            jwtVerifySpy.mockReturnValue({
                userId: 1
            });
            mockPrisma.refreshToken.findUnique.mockResolvedValue(revokedToken);
            // Act & Assert
            await (0, _globals.expect)(authService.refreshAccessToken("revoked-token")).rejects.toThrow("Invalid refresh token");
            jwtVerifySpy.mockRestore();
        });
        (0, _globals.it)("should throw error for expired refresh token", async ()=>{
            // Arrange
            const expiredToken = {
                ...mockRefreshToken,
                expiresAt: new Date(Date.now() - 24 * 60 * 60 * 1000)
            };
            const jwtVerifySpy = _globals.jest.spyOn(_jsonwebtoken.default, "verify");
            jwtVerifySpy.mockReturnValue({
                userId: 1
            });
            mockPrisma.refreshToken.findUnique.mockResolvedValue(expiredToken);
            // Act & Assert
            await (0, _globals.expect)(authService.refreshAccessToken("expired-token")).rejects.toThrow("Refresh token expired");
            jwtVerifySpy.mockRestore();
        });
        (0, _globals.it)("should throw error for non-existent refresh token", async ()=>{
            // Arrange
            const jwtVerifySpy = _globals.jest.spyOn(_jsonwebtoken.default, "verify");
            jwtVerifySpy.mockReturnValue({
                userId: 1
            });
            mockPrisma.refreshToken.findUnique.mockResolvedValue(null);
            // Act & Assert
            await (0, _globals.expect)(authService.refreshAccessToken("non-existent-token")).rejects.toThrow("Invalid refresh token");
            jwtVerifySpy.mockRestore();
        });
    });
    (0, _globals.describe)("logout", ()=>{
        (0, _globals.it)("should successfully logout user", async ()=>{
            // Arrange
            mockPrisma.refreshToken.deleteMany.mockResolvedValue({
                count: 1
            });
            // Act
            await authService.logout("refresh-token");
            // Assert
            (0, _globals.expect)(mockPrisma.refreshToken.deleteMany).toHaveBeenCalledWith({
                where: {
                    token: "refresh-token"
                }
            });
        });
        (0, _globals.it)("should handle logout even if token does not exist", async ()=>{
            // Arrange
            mockPrisma.refreshToken.deleteMany.mockResolvedValue({
                count: 0
            });
            // Act & Assert
            await (0, _globals.expect)(authService.logout("non-existent-token")).resolves.not.toThrow();
        });
    });
    (0, _globals.describe)("logoutAllDevices", ()=>{
        (0, _globals.it)("should successfully logout from all devices", async ()=>{
            // Arrange
            mockPrisma.refreshToken.deleteMany.mockResolvedValue({
                count: 3
            });
            // Act
            await authService.logoutAllDevices(1);
            // Assert
            (0, _globals.expect)(mockPrisma.refreshToken.deleteMany).toHaveBeenCalledWith({
                where: {
                    userId: 1
                }
            });
        });
        (0, _globals.it)("should handle logout all devices even if no tokens exist", async ()=>{
            // Arrange
            mockPrisma.refreshToken.deleteMany.mockResolvedValue({
                count: 0
            });
            // Act & Assert
            await (0, _globals.expect)(authService.logoutAllDevices(1)).resolves.not.toThrow();
        });
    });
    (0, _globals.describe)("security considerations", ()=>{
        (0, _globals.it)("should use secure JWT configuration", ()=>{
            // Arrange
            const mockUser = {
                id: 1,
                email: "test@example.com",
                permissions: [],
                shopId: "shop-1"
            };
            // Spy on jwt.sign to track calls
            const jwtSignSpy = _globals.jest.spyOn(_jsonwebtoken.default, "sign");
            jwtSignSpy.mockReturnValue("mock-token");
            // Act
            authService["generateAccessToken"](mockUser);
            // Assert
            (0, _globals.expect)(jwtSignSpy).toHaveBeenCalledWith(_globals.expect.objectContaining({
                userId: 1,
                email: "test@example.com",
                permissions: [],
                shopId: "shop-1"
            }), "test-secret", {
                expiresIn: "15m"
            });
            jwtSignSpy.mockRestore();
        });
        (0, _globals.it)("should not include password in token payload", ()=>{
            const mockUser = {
                id: 1,
                email: "test@example.com",
                password: "hashedPassword",
                permissions: [],
                shopId: "shop-1"
            };
            // Spy on jwt.sign to track calls
            const jwtSignSpy = _globals.jest.spyOn(_jsonwebtoken.default, "sign");
            jwtSignSpy.mockReturnValue("mock-token");
            // Act
            authService["generateAccessToken"](mockUser);
            // Assert
            const tokenPayload = jwtSignSpy.mock.calls[0][0];
            (0, _globals.expect)(tokenPayload).not.toHaveProperty("password");
            jwtSignSpy.mockRestore();
        });
        (0, _globals.it)("should use different secrets for access and refresh tokens", async ()=>{
            // This test ensures we're using different secrets for different token types
            const mockUser = {
                id: 1,
                email: "test@example.com",
                permissions: [],
                shopId: "shop-1"
            };
            // Spy on jwt.sign to track calls
            const jwtSignSpy = _globals.jest.spyOn(_jsonwebtoken.default, "sign");
            jwtSignSpy.mockReturnValue("mock-token");
            // Mock the database call for refresh token creation
            mockPrisma.refreshToken.create.mockResolvedValue({
                id: 1,
                userId: 1,
                token: "mock-refresh-token",
                expiresAt: new Date(),
                createdAt: new Date()
            });
            // Generate access token
            authService["generateAccessToken"](mockUser);
            // Generate refresh token
            await authService["generateRefreshToken"](1);
            // Assert different secrets are used
            (0, _globals.expect)(jwtSignSpy).toHaveBeenCalledTimes(2);
            const calls = jwtSignSpy.mock.calls;
            const accessTokenCall = calls[0];
            const refreshTokenCall = calls[1];
            (0, _globals.expect)(accessTokenCall[1]).toBe("test-secret");
            (0, _globals.expect)(refreshTokenCall[1]).toBe("test-refresh-secret");
            (0, _globals.expect)(accessTokenCall[1]).not.toBe(refreshTokenCall[1]);
            jwtSignSpy.mockRestore();
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zYWNoaW4vRG9jdW1lbnRzL21kLXNwb3J0cy0vdGVzdHMvdW5pdC9hdXRoLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVzY3JpYmUsIGl0LCBleHBlY3QsIGplc3QsIGJlZm9yZUVhY2gsIGFmdGVyRWFjaCB9IGZyb20gJ0BqZXN0L2dsb2JhbHMnO1xuaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHRqcyc7XG5pbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XG5pbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XG5cbi8vIE1vY2sgZGVwZW5kZW5jaWVzXG5qZXN0Lm1vY2soJ2JjcnlwdGpzJyk7XG5qZXN0Lm1vY2soJ2pzb253ZWJ0b2tlbicsICgpID0+ICh7XG4gIHNpZ246IGplc3QuZm4oKSxcbiAgdmVyaWZ5OiBqZXN0LmZuKCksXG59KSk7XG5qZXN0Lm1vY2soJ0BwcmlzbWEvY2xpZW50Jyk7XG5cbmNvbnN0IG1vY2tCY3J5cHQgPSBiY3J5cHQgYXMgamVzdC5Nb2NrZWQ8dHlwZW9mIGJjcnlwdD47XG5jb25zdCBtb2NrSnd0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7XG5jb25zdCBtb2NrUHJpc21hID0ge1xuICB1c2VyOiB7XG4gICAgZmluZFVuaXF1ZTogamVzdC5mbigpLFxuICAgIGNyZWF0ZTogamVzdC5mbigpLFxuICAgIHVwZGF0ZTogamVzdC5mbigpLFxuICB9LFxuICByZWZyZXNoVG9rZW46IHtcbiAgICBjcmVhdGU6IGplc3QuZm4oKSxcbiAgICBmaW5kVW5pcXVlOiBqZXN0LmZuKCksXG4gICAgZGVsZXRlOiBqZXN0LmZuKCksXG4gICAgZGVsZXRlTWFueTogamVzdC5mbigpLFxuICB9LFxuICAkZGlzY29ubmVjdDogamVzdC5mbigpLFxufSBhcyBhbnk7XG5cbi8vIE1vY2sgdGhlIGF1dGggc2VydmljZSAod2UnbGwgdGVzdCB0aGUgYWN0dWFsIGltcGxlbWVudGF0aW9uKVxuY2xhc3MgQXV0aFNlcnZpY2Uge1xuICBwcml2YXRlIHByaXNtYTogUHJpc21hQ2xpZW50O1xuICBcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5wcmlzbWEgPSBtb2NrUHJpc21hO1xuICB9XG5cbiAgYXN5bmMgbG9naW4oZW1haWw6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZykge1xuICAgIC8vIEZpbmQgdXNlciBieSBlbWFpbFxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB0aGlzLnByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHsgZW1haWwgfSxcbiAgICAgIHNlbGVjdDoge1xuICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgZW1haWw6IHRydWUsXG4gICAgICAgIHBhc3N3b3JkOiB0cnVlLFxuICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICBwZXJtaXNzaW9uczogdHJ1ZSxcbiAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAgIHNob3BJZDogdHJ1ZSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjcmVkZW50aWFscycpO1xuICAgIH1cblxuICAgIGlmICghdXNlci5pc0FjdGl2ZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdBY2NvdW50IGlzIGRlYWN0aXZhdGVkJyk7XG4gICAgfVxuXG4gICAgLy8gVmVyaWZ5IHBhc3N3b3JkXG4gICAgY29uc3QgaXNWYWxpZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpO1xuICAgIGlmICghaXNWYWxpZFBhc3N3b3JkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY3JlZGVudGlhbHMnKTtcbiAgICB9XG5cbiAgICAvLyBHZW5lcmF0ZSB0b2tlbnNcbiAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IHRoaXMuZ2VuZXJhdGVBY2Nlc3NUb2tlbih1c2VyKTtcbiAgICBjb25zdCByZWZyZXNoVG9rZW4gPSBhd2FpdCB0aGlzLmdlbmVyYXRlUmVmcmVzaFRva2VuKHVzZXIuaWQpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgaWQ6IHVzZXIuaWQsXG4gICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICBuYW1lOiB1c2VyLm5hbWUsXG4gICAgICAgIHBlcm1pc3Npb25zOiB1c2VyLnBlcm1pc3Npb25zLFxuICAgICAgICBzaG9wSWQ6IHVzZXIuc2hvcElkLFxuICAgICAgfSxcbiAgICAgIGFjY2Vzc1Rva2VuLFxuICAgICAgcmVmcmVzaFRva2VuLFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlQWNjZXNzVG9rZW4odXNlcjogYW55KSB7XG4gICAgcmV0dXJuIGp3dC5zaWduKFxuICAgICAge1xuICAgICAgICB1c2VySWQ6IHVzZXIuaWQsXG4gICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICBwZXJtaXNzaW9uczogdXNlci5wZXJtaXNzaW9ucyxcbiAgICAgICAgc2hvcElkOiB1c2VyLnNob3BJZCxcbiAgICAgIH0sXG4gICAgICBwcm9jZXNzLmVudi5KV1RfU0VDUkVUIHx8ICd0ZXN0LXNlY3JldCcsXG4gICAgICB7IGV4cGlyZXNJbjogJzE1bScgfVxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdlbmVyYXRlUmVmcmVzaFRva2VuKHVzZXJJZDogbnVtYmVyKSB7XG4gICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbihcbiAgICAgIHsgdXNlcklkIH0sXG4gICAgICBwcm9jZXNzLmVudi5KV1RfUkVGUkVTSF9TRUNSRVQgfHwgJ3Rlc3QtcmVmcmVzaC1zZWNyZXQnLFxuICAgICAgeyBleHBpcmVzSW46ICc3ZCcgfVxuICAgICk7XG5cbiAgICAvLyBTdG9yZSByZWZyZXNoIHRva2VuIGluIGRhdGFiYXNlXG4gICAgYXdhaXQgdGhpcy5wcmlzbWEucmVmcmVzaFRva2VuLmNyZWF0ZSh7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgdG9rZW4sXG4gICAgICAgIGV4cGlyZXNBdDogbmV3IERhdGUoRGF0ZS5ub3coKSArIDcgKiAyNCAqIDYwICogNjAgKiAxMDAwKSwgLy8gNyBkYXlzXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRva2VuO1xuICB9XG5cbiAgYXN5bmMgdmVyaWZ5VG9rZW4odG9rZW46IHN0cmluZykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCB8fCAndGVzdC1zZWNyZXQnKTtcbiAgICAgIHJldHVybiBkZWNvZGVkO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdG9rZW4nKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyByZWZyZXNoQWNjZXNzVG9rZW4ocmVmcmVzaFRva2VuOiBzdHJpbmcpIHtcbiAgICAvLyBWZXJpZnkgcmVmcmVzaCB0b2tlblxuICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KFxuICAgICAgcmVmcmVzaFRva2VuLFxuICAgICAgcHJvY2Vzcy5lbnYuSldUX1JFRlJFU0hfU0VDUkVUIHx8ICd0ZXN0LXJlZnJlc2gtc2VjcmV0J1xuICAgICkgYXMgYW55O1xuXG4gICAgLy8gQ2hlY2sgaWYgcmVmcmVzaCB0b2tlbiBleGlzdHMgaW4gZGF0YWJhc2VcbiAgICBjb25zdCBzdG9yZWRUb2tlbiA9IGF3YWl0IHRoaXMucHJpc21hLnJlZnJlc2hUb2tlbi5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IHRva2VuOiByZWZyZXNoVG9rZW4gfSxcbiAgICAgIGluY2x1ZGU6IHsgdXNlcjogdHJ1ZSB9LFxuICAgIH0pO1xuXG4gICAgaWYgKCFzdG9yZWRUb2tlbiB8fCBzdG9yZWRUb2tlbi5pc1Jldm9rZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCByZWZyZXNoIHRva2VuJyk7XG4gICAgfVxuXG4gICAgaWYgKG5ldyBEYXRlKCkgPiBzdG9yZWRUb2tlbi5leHBpcmVzQXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignUmVmcmVzaCB0b2tlbiBleHBpcmVkJyk7XG4gICAgfVxuXG4gICAgLy8gR2VuZXJhdGUgbmV3IGFjY2VzcyB0b2tlblxuICAgIGNvbnN0IG5ld0FjY2Vzc1Rva2VuID0gdGhpcy5nZW5lcmF0ZUFjY2Vzc1Rva2VuKHN0b3JlZFRva2VuLnVzZXIpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGFjY2Vzc1Rva2VuOiBuZXdBY2Nlc3NUb2tlbixcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgaWQ6IHN0b3JlZFRva2VuLnVzZXIuaWQsXG4gICAgICAgIGVtYWlsOiBzdG9yZWRUb2tlbi51c2VyLmVtYWlsLFxuICAgICAgICBuYW1lOiBzdG9yZWRUb2tlbi51c2VyLm5hbWUsXG4gICAgICAgIHBlcm1pc3Npb25zOiBzdG9yZWRUb2tlbi51c2VyLnBlcm1pc3Npb25zLFxuICAgICAgICBzaG9wSWQ6IHN0b3JlZFRva2VuLnVzZXIuc2hvcElkLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgYXN5bmMgbG9nb3V0KHJlZnJlc2hUb2tlbjogc3RyaW5nKSB7XG4gICAgLy8gUmV2b2tlIHJlZnJlc2ggdG9rZW5cbiAgICBhd2FpdCB0aGlzLnByaXNtYS5yZWZyZXNoVG9rZW4uZGVsZXRlTWFueSh7XG4gICAgICB3aGVyZTogeyB0b2tlbjogcmVmcmVzaFRva2VuIH0sXG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBsb2dvdXRBbGxEZXZpY2VzKHVzZXJJZDogbnVtYmVyKSB7XG4gICAgLy8gUmV2b2tlIGFsbCByZWZyZXNoIHRva2VucyBmb3IgdXNlclxuICAgIGF3YWl0IHRoaXMucHJpc21hLnJlZnJlc2hUb2tlbi5kZWxldGVNYW55KHtcbiAgICAgIHdoZXJlOiB7IHVzZXJJZCB9LFxuICAgIH0pO1xuICB9XG59XG5cbmRlc2NyaWJlKCdBdXRoU2VydmljZScsICgpID0+IHtcbiAgbGV0IGF1dGhTZXJ2aWNlOiBBdXRoU2VydmljZTtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBhdXRoU2VydmljZSA9IG5ldyBBdXRoU2VydmljZSgpO1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIFxuICAgIC8vIFNldCB1cCBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbiAgICBwcm9jZXNzLmVudi5KV1RfU0VDUkVUID0gJ3Rlc3Qtc2VjcmV0JztcbiAgICBwcm9jZXNzLmVudi5KV1RfUkVGUkVTSF9TRUNSRVQgPSAndGVzdC1yZWZyZXNoLXNlY3JldCc7XG4gICAgXG4gICAgLy8gTW9jayBKV1QgbWV0aG9kc1xuICAgIG1vY2tKd3Quc2lnbi5tb2NrUmV0dXJuVmFsdWUoJ21vY2stdG9rZW4nKTtcbiAgICBtb2NrSnd0LnZlcmlmeS5tb2NrUmV0dXJuVmFsdWUoeyB1c2VySWQ6IDEsIGVtYWlsOiAndGVzdEBleGFtcGxlLmNvbScgfSk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgamVzdC5yZXNldEFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdsb2dpbicsICgpID0+IHtcbiAgICBjb25zdCBtb2NrVXNlciA9IHtcbiAgICAgIGlkOiAxLFxuICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgIHBhc3N3b3JkOiAnaGFzaGVkUGFzc3dvcmQnLFxuICAgICAgbmFtZTogJ1Rlc3QgVXNlcicsXG4gICAgICBwZXJtaXNzaW9uczogWydpbnZlbnRvcnk6cmVhZCcsICdzYWxlczpjcmVhdGUnXSxcbiAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgc2hvcElkOiAnc2hvcC0xJyxcbiAgICB9O1xuXG4gICAgaXQoJ3Nob3VsZCBzdWNjZXNzZnVsbHkgbG9naW4gd2l0aCB2YWxpZCBjcmVkZW50aWFscycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIG1vY2tQcmlzbWEudXNlci5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tVc2VyKTtcbiAgICAgIG1vY2tCY3J5cHQuY29tcGFyZS5tb2NrUmVzb2x2ZWRWYWx1ZSh0cnVlIGFzIG5ldmVyKTtcbiAgICAgIG1vY2tKd3Quc2lnbi5tb2NrUmV0dXJuVmFsdWUoJ21vY2stYWNjZXNzLXRva2VuJyBhcyBuZXZlcik7XG4gICAgICBtb2NrUHJpc21hLnJlZnJlc2hUb2tlbi5jcmVhdGUubW9ja1Jlc29sdmVkVmFsdWUoeyB0b2tlbjogJ21vY2stcmVmcmVzaC10b2tlbicgfSk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYXV0aFNlcnZpY2UubG9naW4oJ3Rlc3RAZXhhbXBsZS5jb20nLCAncGFzc3dvcmQxMjMnKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QobW9ja1ByaXNtYS51c2VyLmZpbmRVbmlxdWUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgd2hlcmU6IHsgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyB9LFxuICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICBlbWFpbDogdHJ1ZSxcbiAgICAgICAgICBwYXNzd29yZDogdHJ1ZSxcbiAgICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICAgIHBlcm1pc3Npb25zOiB0cnVlLFxuICAgICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgICAgIHNob3BJZDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KG1vY2tCY3J5cHQuY29tcGFyZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3Bhc3N3b3JkMTIzJywgJ2hhc2hlZFBhc3N3b3JkJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgdXNlcjoge1xuICAgICAgICAgIGlkOiAxLFxuICAgICAgICAgIGVtYWlsOiAndGVzdEBleGFtcGxlLmNvbScsXG4gICAgICAgICAgbmFtZTogJ1Rlc3QgVXNlcicsXG4gICAgICAgICAgcGVybWlzc2lvbnM6IFsnaW52ZW50b3J5OnJlYWQnLCAnc2FsZXM6Y3JlYXRlJ10sXG4gICAgICAgICAgc2hvcElkOiAnc2hvcC0xJyxcbiAgICAgICAgfSxcbiAgICAgICAgYWNjZXNzVG9rZW46ICdtb2NrLWFjY2Vzcy10b2tlbicsXG4gICAgICAgIHJlZnJlc2hUb2tlbjogJ21vY2stYWNjZXNzLXRva2VuJywgLy8gVGhpcyB3b3VsZCBiZSB0aGUgcmVmcmVzaCB0b2tlbiBpbiByZWFsIGltcGxlbWVudGF0aW9uXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdGhyb3cgZXJyb3IgZm9yIG5vbi1leGlzdGVudCB1c2VyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbW9ja1ByaXNtYS51c2VyLmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG5cbiAgICAgIC8vIEFjdCAmIEFzc2VydFxuICAgICAgYXdhaXQgZXhwZWN0KGF1dGhTZXJ2aWNlLmxvZ2luKCdub25leGlzdGVudEBleGFtcGxlLmNvbScsICdwYXNzd29yZDEyMycpKVxuICAgICAgICAucmVqZWN0cy50b1Rocm93KCdJbnZhbGlkIGNyZWRlbnRpYWxzJyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChtb2NrQmNyeXB0LmNvbXBhcmUpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHRocm93IGVycm9yIGZvciBpbmFjdGl2ZSB1c2VyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgaW5hY3RpdmVVc2VyID0geyAuLi5tb2NrVXNlciwgaXNBY3RpdmU6IGZhbHNlIH07XG4gICAgICBtb2NrUHJpc21hLnVzZXIuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShpbmFjdGl2ZVVzZXIpO1xuXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGF3YWl0IGV4cGVjdChhdXRoU2VydmljZS5sb2dpbigndGVzdEBleGFtcGxlLmNvbScsICdwYXNzd29yZDEyMycpKVxuICAgICAgICAucmVqZWN0cy50b1Rocm93KCdBY2NvdW50IGlzIGRlYWN0aXZhdGVkJyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChtb2NrQmNyeXB0LmNvbXBhcmUpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHRocm93IGVycm9yIGZvciBpbnZhbGlkIHBhc3N3b3JkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbW9ja1ByaXNtYS51c2VyLmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUobW9ja1VzZXIpO1xuICAgICAgbW9ja0JjcnlwdC5jb21wYXJlLm1vY2tSZXNvbHZlZFZhbHVlKGZhbHNlIGFzIG5ldmVyKTtcblxuICAgICAgLy8gQWN0ICYgQXNzZXJ0XG4gICAgICBhd2FpdCBleHBlY3QoYXV0aFNlcnZpY2UubG9naW4oJ3Rlc3RAZXhhbXBsZS5jb20nLCAnd3JvbmdwYXNzd29yZCcpKVxuICAgICAgICAucmVqZWN0cy50b1Rocm93KCdJbnZhbGlkIGNyZWRlbnRpYWxzJyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChtb2NrQmNyeXB0LmNvbXBhcmUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCd3cm9uZ3Bhc3N3b3JkJywgJ2hhc2hlZFBhc3N3b3JkJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBkYXRhYmFzZSBlcnJvcnMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIG1vY2tQcmlzbWEudXNlci5maW5kVW5pcXVlLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQnKSk7XG5cbiAgICAgIC8vIEFjdCAmIEFzc2VydFxuICAgICAgYXdhaXQgZXhwZWN0KGF1dGhTZXJ2aWNlLmxvZ2luKCd0ZXN0QGV4YW1wbGUuY29tJywgJ3Bhc3N3b3JkMTIzJykpXG4gICAgICAgIC5yZWplY3RzLnRvVGhyb3coJ0RhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCd2ZXJpZnlUb2tlbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHN1Y2Nlc3NmdWxseSB2ZXJpZnkgdmFsaWQgdG9rZW4nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBtb2NrRGVjb2RlZCA9IHsgdXNlcklkOiAxLCBlbWFpbDogJ3Rlc3RAZXhhbXBsZS5jb20nIH07XG4gICAgICBjb25zdCBqd3RWZXJpZnlTcHkgPSBqZXN0LnNweU9uKGp3dCwgJ3ZlcmlmeScpO1xuICAgICAgand0VmVyaWZ5U3B5Lm1vY2tSZXR1cm5WYWx1ZShtb2NrRGVjb2RlZCBhcyBuZXZlcik7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYXV0aFNlcnZpY2UudmVyaWZ5VG9rZW4oJ3ZhbGlkLXRva2VuJyk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KGp3dFZlcmlmeVNweSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3ZhbGlkLXRva2VuJywgJ3Rlc3Qtc2VjcmV0Jyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG1vY2tEZWNvZGVkKTtcbiAgICAgIFxuICAgICAgand0VmVyaWZ5U3B5Lm1vY2tSZXN0b3JlKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHRocm93IGVycm9yIGZvciBpbnZhbGlkIHRva2VuJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3Qgand0VmVyaWZ5U3B5ID0gamVzdC5zcHlPbihqd3QsICd2ZXJpZnknKTtcbiAgICAgIGp3dFZlcmlmeVNweS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2p3dCBtYWxmb3JtZWQnKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGF3YWl0IGV4cGVjdChhdXRoU2VydmljZS52ZXJpZnlUb2tlbignaW52YWxpZC10b2tlbicpKVxuICAgICAgICAucmVqZWN0cy50b1Rocm93KCdJbnZhbGlkIHRva2VuJyk7XG4gICAgICAgIFxuICAgICAgand0VmVyaWZ5U3B5Lm1vY2tSZXN0b3JlKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHRocm93IGVycm9yIGZvciBleHBpcmVkIHRva2VuJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3Qgand0VmVyaWZ5U3B5ID0gamVzdC5zcHlPbihqd3QsICd2ZXJpZnknKTtcbiAgICAgIGp3dFZlcmlmeVNweS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2p3dCBleHBpcmVkJyk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQWN0ICYgQXNzZXJ0XG4gICAgICBhd2FpdCBleHBlY3QoYXV0aFNlcnZpY2UudmVyaWZ5VG9rZW4oJ2V4cGlyZWQtdG9rZW4nKSlcbiAgICAgICAgLnJlamVjdHMudG9UaHJvdygnSW52YWxpZCB0b2tlbicpO1xuICAgICAgICBcbiAgICAgIGp3dFZlcmlmeVNweS5tb2NrUmVzdG9yZSgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgncmVmcmVzaEFjY2Vzc1Rva2VuJywgKCkgPT4ge1xuICAgIGNvbnN0IG1vY2tSZWZyZXNoVG9rZW4gPSB7XG4gICAgICB0b2tlbjogJ3ZhbGlkLXJlZnJlc2gtdG9rZW4nLFxuICAgICAgdXNlcklkOiAxLFxuICAgICAgZXhwaXJlc0F0OiBuZXcgRGF0ZShEYXRlLm5vdygpICsgMjQgKiA2MCAqIDYwICogMTAwMCksIC8vIDEgZGF5IGZyb20gbm93XG4gICAgICBpc1Jldm9rZWQ6IGZhbHNlLFxuICAgICAgdXNlcjoge1xuICAgICAgICBpZDogMSxcbiAgICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgICAgbmFtZTogJ1Rlc3QgVXNlcicsXG4gICAgICAgIHBlcm1pc3Npb25zOiBbJ2ludmVudG9yeTpyZWFkJ10sXG4gICAgICAgIHNob3BJZDogJ3Nob3AtMScsXG4gICAgICB9LFxuICAgIH07XG5cbiAgICBpdCgnc2hvdWxkIHN1Y2Nlc3NmdWxseSByZWZyZXNoIGFjY2VzcyB0b2tlbicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGp3dFZlcmlmeVNweSA9IGplc3Quc3B5T24oand0LCAndmVyaWZ5Jyk7XG4gICAgICBjb25zdCBqd3RTaWduU3B5ID0gamVzdC5zcHlPbihqd3QsICdzaWduJyk7XG4gICAgICBqd3RWZXJpZnlTcHkubW9ja1JldHVyblZhbHVlKHsgdXNlcklkOiAxIH0gYXMgbmV2ZXIpO1xuICAgICAgbW9ja1ByaXNtYS5yZWZyZXNoVG9rZW4uZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUmVmcmVzaFRva2VuKTtcbiAgICAgIGp3dFNpZ25TcHkubW9ja1JldHVyblZhbHVlKCduZXctYWNjZXNzLXRva2VuJyBhcyBuZXZlcik7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYXV0aFNlcnZpY2UucmVmcmVzaEFjY2Vzc1Rva2VuKCd2YWxpZC1yZWZyZXNoLXRva2VuJyk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KGp3dFZlcmlmeVNweSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3ZhbGlkLXJlZnJlc2gtdG9rZW4nLCAndGVzdC1yZWZyZXNoLXNlY3JldCcpO1xuICAgICAgZXhwZWN0KG1vY2tQcmlzbWEucmVmcmVzaFRva2VuLmZpbmRVbmlxdWUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgd2hlcmU6IHsgdG9rZW46ICd2YWxpZC1yZWZyZXNoLXRva2VuJyB9LFxuICAgICAgICBpbmNsdWRlOiB7IHVzZXI6IHRydWUgfSxcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7XG4gICAgICAgIGFjY2Vzc1Rva2VuOiAnbmV3LWFjY2Vzcy10b2tlbicsXG4gICAgICAgIHVzZXI6IHtcbiAgICAgICAgICBpZDogMSxcbiAgICAgICAgICBlbWFpbDogJ3Rlc3RAZXhhbXBsZS5jb20nLFxuICAgICAgICAgIG5hbWU6ICdUZXN0IFVzZXInLFxuICAgICAgICAgIHBlcm1pc3Npb25zOiBbJ2ludmVudG9yeTpyZWFkJ10sXG4gICAgICAgICAgc2hvcElkOiAnc2hvcC0xJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBqd3RWZXJpZnlTcHkubW9ja1Jlc3RvcmUoKTtcbiAgICAgIGp3dFNpZ25TcHkubW9ja1Jlc3RvcmUoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdGhyb3cgZXJyb3IgZm9yIHJldm9rZWQgcmVmcmVzaCB0b2tlbicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHJldm9rZWRUb2tlbiA9IHsgLi4ubW9ja1JlZnJlc2hUb2tlbiwgaXNSZXZva2VkOiB0cnVlIH07XG4gICAgICBjb25zdCBqd3RWZXJpZnlTcHkgPSBqZXN0LnNweU9uKGp3dCwgJ3ZlcmlmeScpO1xuICAgICAgand0VmVyaWZ5U3B5Lm1vY2tSZXR1cm5WYWx1ZSh7IHVzZXJJZDogMSB9IGFzIG5ldmVyKTtcbiAgICAgIG1vY2tQcmlzbWEucmVmcmVzaFRva2VuLmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUocmV2b2tlZFRva2VuKTtcblxuICAgICAgLy8gQWN0ICYgQXNzZXJ0XG4gICAgICBhd2FpdCBleHBlY3QoYXV0aFNlcnZpY2UucmVmcmVzaEFjY2Vzc1Rva2VuKCdyZXZva2VkLXRva2VuJykpXG4gICAgICAgIC5yZWplY3RzLnRvVGhyb3coJ0ludmFsaWQgcmVmcmVzaCB0b2tlbicpO1xuICAgICAgICBcbiAgICAgIGp3dFZlcmlmeVNweS5tb2NrUmVzdG9yZSgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBlcnJvciBmb3IgZXhwaXJlZCByZWZyZXNoIHRva2VuJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgZXhwaXJlZFRva2VuID0ge1xuICAgICAgICAuLi5tb2NrUmVmcmVzaFRva2VuLFxuICAgICAgICBleHBpcmVzQXQ6IG5ldyBEYXRlKERhdGUubm93KCkgLSAyNCAqIDYwICogNjAgKiAxMDAwKSwgLy8gMSBkYXkgYWdvXG4gICAgICB9O1xuICAgICAgY29uc3Qgand0VmVyaWZ5U3B5ID0gamVzdC5zcHlPbihqd3QsICd2ZXJpZnknKTtcbiAgICAgIGp3dFZlcmlmeVNweS5tb2NrUmV0dXJuVmFsdWUoeyB1c2VySWQ6IDEgfSBhcyBuZXZlcik7XG4gICAgICBtb2NrUHJpc21hLnJlZnJlc2hUb2tlbi5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKGV4cGlyZWRUb2tlbik7XG5cbiAgICAgIC8vIEFjdCAmIEFzc2VydFxuICAgICAgYXdhaXQgZXhwZWN0KGF1dGhTZXJ2aWNlLnJlZnJlc2hBY2Nlc3NUb2tlbignZXhwaXJlZC10b2tlbicpKVxuICAgICAgICAucmVqZWN0cy50b1Rocm93KCdSZWZyZXNoIHRva2VuIGV4cGlyZWQnKTtcbiAgICAgICAgXG4gICAgICBqd3RWZXJpZnlTcHkubW9ja1Jlc3RvcmUoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdGhyb3cgZXJyb3IgZm9yIG5vbi1leGlzdGVudCByZWZyZXNoIHRva2VuJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3Qgand0VmVyaWZ5U3B5ID0gamVzdC5zcHlPbihqd3QsICd2ZXJpZnknKTtcbiAgICAgIGp3dFZlcmlmeVNweS5tb2NrUmV0dXJuVmFsdWUoeyB1c2VySWQ6IDEgfSBhcyBuZXZlcik7XG4gICAgICBtb2NrUHJpc21hLnJlZnJlc2hUb2tlbi5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGF3YWl0IGV4cGVjdChhdXRoU2VydmljZS5yZWZyZXNoQWNjZXNzVG9rZW4oJ25vbi1leGlzdGVudC10b2tlbicpKVxuICAgICAgICAucmVqZWN0cy50b1Rocm93KCdJbnZhbGlkIHJlZnJlc2ggdG9rZW4nKTtcbiAgICAgICAgXG4gICAgICBqd3RWZXJpZnlTcHkubW9ja1Jlc3RvcmUoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2xvZ291dCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHN1Y2Nlc3NmdWxseSBsb2dvdXQgdXNlcicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIG1vY2tQcmlzbWEucmVmcmVzaFRva2VuLmRlbGV0ZU1hbnkubW9ja1Jlc29sdmVkVmFsdWUoeyBjb3VudDogMSB9KTtcblxuICAgICAgLy8gQWN0XG4gICAgICBhd2FpdCBhdXRoU2VydmljZS5sb2dvdXQoJ3JlZnJlc2gtdG9rZW4nKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QobW9ja1ByaXNtYS5yZWZyZXNoVG9rZW4uZGVsZXRlTWFueSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB3aGVyZTogeyB0b2tlbjogJ3JlZnJlc2gtdG9rZW4nIH0sXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGxvZ291dCBldmVuIGlmIHRva2VuIGRvZXMgbm90IGV4aXN0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbW9ja1ByaXNtYS5yZWZyZXNoVG9rZW4uZGVsZXRlTWFueS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGNvdW50OiAwIH0pO1xuXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGF3YWl0IGV4cGVjdChhdXRoU2VydmljZS5sb2dvdXQoJ25vbi1leGlzdGVudC10b2tlbicpKS5yZXNvbHZlcy5ub3QudG9UaHJvdygpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbG9nb3V0QWxsRGV2aWNlcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHN1Y2Nlc3NmdWxseSBsb2dvdXQgZnJvbSBhbGwgZGV2aWNlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIG1vY2tQcmlzbWEucmVmcmVzaFRva2VuLmRlbGV0ZU1hbnkubW9ja1Jlc29sdmVkVmFsdWUoeyBjb3VudDogMyB9KTtcblxuICAgICAgLy8gQWN0XG4gICAgICBhd2FpdCBhdXRoU2VydmljZS5sb2dvdXRBbGxEZXZpY2VzKDEpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChtb2NrUHJpc21hLnJlZnJlc2hUb2tlbi5kZWxldGVNYW55KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHdoZXJlOiB7IHVzZXJJZDogMSB9LFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBsb2dvdXQgYWxsIGRldmljZXMgZXZlbiBpZiBubyB0b2tlbnMgZXhpc3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBtb2NrUHJpc21hLnJlZnJlc2hUb2tlbi5kZWxldGVNYW55Lm1vY2tSZXNvbHZlZFZhbHVlKHsgY291bnQ6IDAgfSk7XG5cbiAgICAgIC8vIEFjdCAmIEFzc2VydFxuICAgICAgYXdhaXQgZXhwZWN0KGF1dGhTZXJ2aWNlLmxvZ291dEFsbERldmljZXMoMSkpLnJlc29sdmVzLm5vdC50b1Rocm93KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdzZWN1cml0eSBjb25zaWRlcmF0aW9ucycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHVzZSBzZWN1cmUgSldUIGNvbmZpZ3VyYXRpb24nLCAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBtb2NrVXNlciA9IHsgaWQ6IDEsIGVtYWlsOiAndGVzdEBleGFtcGxlLmNvbScsIHBlcm1pc3Npb25zOiBbXSwgc2hvcElkOiAnc2hvcC0xJyB9O1xuICAgICAgXG4gICAgICAvLyBTcHkgb24gand0LnNpZ24gdG8gdHJhY2sgY2FsbHNcbiAgICAgIGNvbnN0IGp3dFNpZ25TcHkgPSBqZXN0LnNweU9uKGp3dCwgJ3NpZ24nKTtcbiAgICAgIGp3dFNpZ25TcHkubW9ja1JldHVyblZhbHVlKCdtb2NrLXRva2VuJyBhcyBhbnkpO1xuICAgICAgXG4gICAgICAvLyBBY3RcbiAgICAgIGF1dGhTZXJ2aWNlWydnZW5lcmF0ZUFjY2Vzc1Rva2VuJ10obW9ja1VzZXIpO1xuICAgICAgXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChqd3RTaWduU3B5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIHVzZXJJZDogMSxcbiAgICAgICAgICBlbWFpbDogJ3Rlc3RAZXhhbXBsZS5jb20nLFxuICAgICAgICAgIHBlcm1pc3Npb25zOiBbXSxcbiAgICAgICAgICBzaG9wSWQ6ICdzaG9wLTEnLFxuICAgICAgICB9KSxcbiAgICAgICAgJ3Rlc3Qtc2VjcmV0JyxcbiAgICAgICAgeyBleHBpcmVzSW46ICcxNW0nIH1cbiAgICAgICk7XG4gICAgICBcbiAgICAgIGp3dFNpZ25TcHkubW9ja1Jlc3RvcmUoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbm90IGluY2x1ZGUgcGFzc3dvcmQgaW4gdG9rZW4gcGF5bG9hZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tVc2VyID0ge1xuICAgICAgICBpZDogMSxcbiAgICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgICAgcGFzc3dvcmQ6ICdoYXNoZWRQYXNzd29yZCcsXG4gICAgICAgIHBlcm1pc3Npb25zOiBbXSxcbiAgICAgICAgc2hvcElkOiAnc2hvcC0xJyxcbiAgICAgIH07XG4gICAgICBcbiAgICAgIC8vIFNweSBvbiBqd3Quc2lnbiB0byB0cmFjayBjYWxsc1xuICAgICAgY29uc3Qgand0U2lnblNweSA9IGplc3Quc3B5T24oand0LCAnc2lnbicpO1xuICAgICAgand0U2lnblNweS5tb2NrUmV0dXJuVmFsdWUoJ21vY2stdG9rZW4nIGFzIGFueSk7XG4gICAgICBcbiAgICAgIC8vIEFjdFxuICAgICAgYXV0aFNlcnZpY2VbJ2dlbmVyYXRlQWNjZXNzVG9rZW4nXShtb2NrVXNlcik7XG4gICAgICBcbiAgICAgIC8vIEFzc2VydFxuICAgICAgY29uc3QgdG9rZW5QYXlsb2FkID0gand0U2lnblNweS5tb2NrLmNhbGxzWzBdWzBdO1xuICAgICAgZXhwZWN0KHRva2VuUGF5bG9hZCkubm90LnRvSGF2ZVByb3BlcnR5KCdwYXNzd29yZCcpO1xuICAgICAgXG4gICAgICBqd3RTaWduU3B5Lm1vY2tSZXN0b3JlKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHVzZSBkaWZmZXJlbnQgc2VjcmV0cyBmb3IgYWNjZXNzIGFuZCByZWZyZXNoIHRva2VucycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFRoaXMgdGVzdCBlbnN1cmVzIHdlJ3JlIHVzaW5nIGRpZmZlcmVudCBzZWNyZXRzIGZvciBkaWZmZXJlbnQgdG9rZW4gdHlwZXNcbiAgICAgIGNvbnN0IG1vY2tVc2VyID0geyBpZDogMSwgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJywgcGVybWlzc2lvbnM6IFtdLCBzaG9wSWQ6ICdzaG9wLTEnIH07XG4gICAgICBcbiAgICAgIC8vIFNweSBvbiBqd3Quc2lnbiB0byB0cmFjayBjYWxsc1xuICAgICAgY29uc3Qgand0U2lnblNweSA9IGplc3Quc3B5T24oand0LCAnc2lnbicpO1xuICAgICAgand0U2lnblNweS5tb2NrUmV0dXJuVmFsdWUoJ21vY2stdG9rZW4nIGFzIGFueSk7XG4gICAgICBcbiAgICAgIC8vIE1vY2sgdGhlIGRhdGFiYXNlIGNhbGwgZm9yIHJlZnJlc2ggdG9rZW4gY3JlYXRpb25cbiAgICAgIG1vY2tQcmlzbWEucmVmcmVzaFRva2VuLmNyZWF0ZS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGlkOiAxLFxuICAgICAgICB1c2VySWQ6IDEsXG4gICAgICAgIHRva2VuOiAnbW9jay1yZWZyZXNoLXRva2VuJyxcbiAgICAgICAgZXhwaXJlc0F0OiBuZXcgRGF0ZSgpLFxuICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gR2VuZXJhdGUgYWNjZXNzIHRva2VuXG4gICAgICBhdXRoU2VydmljZVsnZ2VuZXJhdGVBY2Nlc3NUb2tlbiddKG1vY2tVc2VyKTtcbiAgICAgIFxuICAgICAgLy8gR2VuZXJhdGUgcmVmcmVzaCB0b2tlblxuICAgICAgYXdhaXQgYXV0aFNlcnZpY2VbJ2dlbmVyYXRlUmVmcmVzaFRva2VuJ10oMSk7XG4gICAgICBcbiAgICAgIC8vIEFzc2VydCBkaWZmZXJlbnQgc2VjcmV0cyBhcmUgdXNlZFxuICAgICAgZXhwZWN0KGp3dFNpZ25TcHkpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygyKTtcbiAgICAgIFxuICAgICAgY29uc3QgY2FsbHMgPSBqd3RTaWduU3B5Lm1vY2suY2FsbHM7XG4gICAgICBjb25zdCBhY2Nlc3NUb2tlbkNhbGwgPSBjYWxsc1swXTtcbiAgICAgIGNvbnN0IHJlZnJlc2hUb2tlbkNhbGwgPSBjYWxsc1sxXTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGFjY2Vzc1Rva2VuQ2FsbFsxXSkudG9CZSgndGVzdC1zZWNyZXQnKTtcbiAgICAgIGV4cGVjdChyZWZyZXNoVG9rZW5DYWxsWzFdKS50b0JlKCd0ZXN0LXJlZnJlc2gtc2VjcmV0Jyk7XG4gICAgICBleHBlY3QoYWNjZXNzVG9rZW5DYWxsWzFdKS5ub3QudG9CZShyZWZyZXNoVG9rZW5DYWxsWzFdKTtcbiAgICAgIFxuICAgICAgand0U2lnblNweS5tb2NrUmVzdG9yZSgpO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsInNpZ24iLCJmbiIsInZlcmlmeSIsIm1vY2tCY3J5cHQiLCJiY3J5cHQiLCJtb2NrSnd0IiwicmVxdWlyZSIsIm1vY2tQcmlzbWEiLCJ1c2VyIiwiZmluZFVuaXF1ZSIsImNyZWF0ZSIsInVwZGF0ZSIsInJlZnJlc2hUb2tlbiIsImRlbGV0ZSIsImRlbGV0ZU1hbnkiLCIkZGlzY29ubmVjdCIsIkF1dGhTZXJ2aWNlIiwiY29uc3RydWN0b3IiLCJwcmlzbWEiLCJsb2dpbiIsImVtYWlsIiwicGFzc3dvcmQiLCJ3aGVyZSIsInNlbGVjdCIsImlkIiwibmFtZSIsInBlcm1pc3Npb25zIiwiaXNBY3RpdmUiLCJzaG9wSWQiLCJFcnJvciIsImlzVmFsaWRQYXNzd29yZCIsImNvbXBhcmUiLCJhY2Nlc3NUb2tlbiIsImdlbmVyYXRlQWNjZXNzVG9rZW4iLCJnZW5lcmF0ZVJlZnJlc2hUb2tlbiIsImp3dCIsInVzZXJJZCIsInByb2Nlc3MiLCJlbnYiLCJKV1RfU0VDUkVUIiwiZXhwaXJlc0luIiwidG9rZW4iLCJKV1RfUkVGUkVTSF9TRUNSRVQiLCJkYXRhIiwiZXhwaXJlc0F0IiwiRGF0ZSIsIm5vdyIsInZlcmlmeVRva2VuIiwiZGVjb2RlZCIsImVycm9yIiwicmVmcmVzaEFjY2Vzc1Rva2VuIiwic3RvcmVkVG9rZW4iLCJpbmNsdWRlIiwiaXNSZXZva2VkIiwibmV3QWNjZXNzVG9rZW4iLCJsb2dvdXQiLCJsb2dvdXRBbGxEZXZpY2VzIiwiZGVzY3JpYmUiLCJhdXRoU2VydmljZSIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwibW9ja1JldHVyblZhbHVlIiwiYWZ0ZXJFYWNoIiwicmVzZXRBbGxNb2NrcyIsIm1vY2tVc2VyIiwiaXQiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsInJlc3VsdCIsImV4cGVjdCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwidG9FcXVhbCIsInJlamVjdHMiLCJ0b1Rocm93Iiwibm90IiwidG9IYXZlQmVlbkNhbGxlZCIsImluYWN0aXZlVXNlciIsIm1vY2tSZWplY3RlZFZhbHVlIiwibW9ja0RlY29kZWQiLCJqd3RWZXJpZnlTcHkiLCJzcHlPbiIsIm1vY2tSZXN0b3JlIiwibW9ja0ltcGxlbWVudGF0aW9uIiwibW9ja1JlZnJlc2hUb2tlbiIsImp3dFNpZ25TcHkiLCJyZXZva2VkVG9rZW4iLCJleHBpcmVkVG9rZW4iLCJjb3VudCIsInJlc29sdmVzIiwib2JqZWN0Q29udGFpbmluZyIsInRva2VuUGF5bG9hZCIsImNhbGxzIiwidG9IYXZlUHJvcGVydHkiLCJjcmVhdGVkQXQiLCJ0b0hhdmVCZWVuQ2FsbGVkVGltZXMiLCJhY2Nlc3NUb2tlbkNhbGwiLCJyZWZyZXNoVG9rZW5DYWxsIiwidG9CZSJdLCJtYXBwaW5ncyI6Ijs7Ozt5QkFBa0U7aUVBQy9DO3FFQUNIOzs7Ozs7QUFHaEIsb0JBQW9CO0FBQ3BCQSxhQUFJLENBQUNDLElBQUksQ0FBQztBQUNWRCxhQUFJLENBQUNDLElBQUksQ0FBQyxnQkFBZ0IsSUFBTyxDQUFBO1FBQy9CQyxNQUFNRixhQUFJLENBQUNHLEVBQUU7UUFDYkMsUUFBUUosYUFBSSxDQUFDRyxFQUFFO0lBQ2pCLENBQUE7QUFDQUgsYUFBSSxDQUFDQyxJQUFJLENBQUM7QUFFVixNQUFNSSxhQUFhQyxpQkFBTTtBQUN6QixNQUFNQyxVQUFVQyxRQUFRO0FBQ3hCLE1BQU1DLGFBQWE7SUFDakJDLE1BQU07UUFDSkMsWUFBWVgsYUFBSSxDQUFDRyxFQUFFO1FBQ25CUyxRQUFRWixhQUFJLENBQUNHLEVBQUU7UUFDZlUsUUFBUWIsYUFBSSxDQUFDRyxFQUFFO0lBQ2pCO0lBQ0FXLGNBQWM7UUFDWkYsUUFBUVosYUFBSSxDQUFDRyxFQUFFO1FBQ2ZRLFlBQVlYLGFBQUksQ0FBQ0csRUFBRTtRQUNuQlksUUFBUWYsYUFBSSxDQUFDRyxFQUFFO1FBQ2ZhLFlBQVloQixhQUFJLENBQUNHLEVBQUU7SUFD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