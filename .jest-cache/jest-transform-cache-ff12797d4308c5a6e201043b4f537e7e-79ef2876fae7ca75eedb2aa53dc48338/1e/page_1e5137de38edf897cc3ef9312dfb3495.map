{"version":3,"names":["ViewQuotation","cov_1ezpjkslhd","f","router","s","_navigation","useRouter","params","useParams","quotationId","id","canViewQuotations","canEditQuotations","_usePermission","usePermission","quotation","setQuotation","_react","useState","loading","setLoading","error","setError","printRef","useRef","b","_jsxruntime","jsx","_MainLayout","default","className","jsxs","_Button","Button","variant","size","onClick","push","useEffect","fetchData","quotationResponse","fetch","ok","Error","quotationData","json","err","console","handleDuplicateQuotation","_id","quotationNumber","_quotationNumber","createdAt","_createdAt","updatedAt","_updatedAt","duplicatedQuotation","date","Date","toISOString","split","expiryDate","now","response","method","headers","body","JSON","stringify","newQuotation","alert","handlePrintQuotation","_reacttoprint","useReactToPrint","contentRef","documentTitle","onAfterPrint","log","_lucidereact","ArrowLeft","window","location","reload","Edit","Copy","current","Download","_QuotationTemplate","customerName","customer","name","customerId","validUntil","items","map","item","productId","product","sku","productName","quantity","unitPrice","price","total","subtotal","discount","tax","notes","termsAndConditions","ref"],"sources":["/Users/sachin/Documents/md-sports-/src/app/quotations/[id]/page.tsx"],"sourcesContent":["'use client';\nimport { useEffect, useState, useRef } from 'react';\nimport { useRouter, useParams } from 'next/navigation';\nimport MainLayout from '@/components/layout/MainLayout';\nimport { Button } from '@/components/ui/Button';\nimport { ArrowLeft, Edit, Copy, Download, Calendar, User, FileText, Printer } from 'lucide-react';\nimport { useReactToPrint } from 'react-to-print';\nimport QuotationTemplate from '@/components/templates/QuotationTemplate';\nimport { SalesQuotation } from '@/types';\nimport { usePermission } from '@/hooks/usePermission';\n\n\n\nexport default function ViewQuotation() {\n    const router = useRouter();\n    const params = useParams();\n    const quotationId = params.id as string;\n    const { canViewQuotations, canEditQuotations } = usePermission();\n\n    const [quotation, setQuotation] = useState<SalesQuotation | null>(null);\n    const [loading, setLoading] = useState<boolean>(true);\n    const [error, setError] = useState<string | null>(null);\n    const printRef = useRef<HTMLDivElement>(null);\n\n    // Check if user has permission to view quotations\n    if (!canViewQuotations()) {\n        return (\n            <MainLayout>\n                <div className=\"p-6\">\n                    <div className=\"text-center py-12\">\n                        <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">Access Denied</h2>\n                        <p className=\"text-gray-600\">You don't have permission to view quotations.</p>\n                        <Button \n                            variant=\"secondary\" \n                            size=\"sm\" \n                            onClick={() => router.push('/quotations')}\n                            className=\"mt-4\"\n                        >\n                            Back to Quotations\n                        </Button>\n                    </div>\n                </div>\n            </MainLayout>\n        );\n    }\n\n    // Fetch quotation\n    useEffect(() => {\n        const fetchData = async () => {\n            try {\n                setLoading(true);\n\n                // Fetch the quotation\n                const quotationResponse = await fetch(`/api/quotations/${quotationId}`);\n                if (!quotationResponse.ok) {\n                    throw new Error('Failed to fetch quotation');\n                }\n                const quotationData = await quotationResponse.json();\n                setQuotation(quotationData);\n\n                setError(null);\n            } catch (err) {\n                console.error('Error fetching data:', err);\n                setError('Failed to load data. Please try again later.');\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchData();\n    }, [quotationId]);\n\n    const handleDuplicateQuotation = async () => {\n        if (!quotation) return;\n\n        try {\n            // Create a copy of the quotation without the id and with a new date\n            const { id: _id, quotationNumber: _quotationNumber, createdAt: _createdAt, updatedAt: _updatedAt, ...quotationData } = quotation;\n\n            const duplicatedQuotation = {\n                ...quotationData,\n                date: new Date().toISOString().split('T')[0],\n                expiryDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0]\n            };\n\n            const response = await fetch('/api/quotations', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(duplicatedQuotation)\n            });\n\n            if (!response.ok) {\n                throw new Error('Failed to duplicate quotation');\n            }\n\n            const newQuotation = await response.json();\n            router.push(`/quotations/${newQuotation.id}`);\n            alert('Quotation duplicated successfully!');\n        } catch (err) {\n            console.error('Error duplicating quotation:', err);\n            alert('Failed to duplicate quotation. Please try again.');\n        }\n    };\n\n    const handlePrintQuotation = useReactToPrint({\n        contentRef: printRef,\n        documentTitle: `Quotation-${quotation?.quotationNumber}`,\n        onAfterPrint: () => console.log('Printed successfully'),\n    });\n\n    return (\n        <MainLayout>\n            <div className=\"space-y-6\">\n                {/* Header with actions */}\n                <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-4\">\n                    <div>\n                        <h1 className=\"text-2xl font-bold text-black\">Quotation Details</h1>\n                        <p className=\"text-black\">View and manage quotation information</p>\n                    </div>\n                    <div className=\"flex gap-3\">\n                        <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => router.push('/quotations')}\n                        >\n                            <ArrowLeft className=\"w-4 h-4 mr-2\" />\n                            Back to Quotations\n                        </Button>\n                    </div>\n                </div>\n\n                {/* Loading and error states */}\n                {loading ? (\n                    <div className=\"text-center py-4\">\n                        <p className=\"text-black\">Loading data...</p>\n                    </div>\n                ) : error ? (\n                    <div className=\"text-center py-4\">\n                        <p className=\"text-red-500\">{error}</p>\n                        <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => window.location.reload()}\n                            className=\"mt-2\"\n                        >\n                            Retry\n                        </Button>\n                    </div>\n                ) : quotation ? (\n                    <div className=\"bg-tertiary p-6 rounded-lg shadow-sm border border-gray-200\">\n                        {/* Action buttons */}\n                        <div className=\"flex flex-wrap gap-2 mb-6\">\n                            {canEditQuotations() && (\n                                <Button\n                                    variant=\"outline\"\n                                    size=\"sm\"\n                                    onClick={() => router.push(`/quotations/${quotationId}/edit`)}\n                                >\n                                    <Edit className=\"w-4 h-4 mr-2\" />\n                                    Edit\n                                </Button>\n                            )}\n                            <Button\n                                variant=\"outline\"\n                                size=\"sm\"\n                                onClick={handleDuplicateQuotation}\n                            >\n                                <Copy className=\"w-4 h-4 mr-2\" />\n                                Duplicate\n                            </Button>\n                            <Button\n                                variant=\"outline\"\n                                size=\"sm\"\n                                onClick={() => {\n                                    if (printRef.current) {\n                                        handlePrintQuotation();\n                                    } else {\n                                        console.error(\"Attempted to print but printRef.current is null. This should not happen if the button is correctly disabled.\");\n                                        // Optionally, you could alert the user or show a more formal notification\n                                        alert(\"Cannot print: a required component reference is missing. Please try reloading the page.\");\n                                    }\n                                }}\n                            >\n                                <Download className=\"w-4 h-4 mr-2\" />\n                                Print / Download\n                            </Button>\n                        </div>\n\n                        {/* Display Quotation Template */}\n                        <QuotationTemplate \n                            quotation={{\n                                quotationNumber: quotation.quotationNumber,\n                                customerName: quotation.customer?.name || 'N/A',\n                                customerId: quotation.customerId,\n                                date: quotation.createdAt || new Date().toISOString(),\n                                expiryDate: quotation.validUntil || new Date().toISOString(),\n                                items: quotation.items.map(item => ({\n                                    id: item.id,\n                                    productId: item.product?.sku || 'N/A',\n                                    productName: item.product?.name || 'N/A',\n                                    quantity: item.quantity,\n                                    unitPrice: item.price || 0,\n                                    total: item.total || 0\n                                })),\n                                subtotal: quotation.total || 0,\n                                discount: 0,\n                                tax: 0,\n                                total: quotation.total || 0,\n                                notes: '',\n                                termsAndConditions: 'Thank you for your business. This quotation is valid for 30 days from the issue date.'\n                            }}\n                        />\n                    </div>\n                ) : (\n                    <div className=\"text-center py-4\">\n                        <p className=\"text-black\">Quotation not found</p>\n                    </div>\n                )}\n\n                {/* Printable Quotation */}\n                {quotation && (\n                    <div ref={printRef} className=\"hidden print:block\">\n                        <QuotationTemplate \n                            quotation={{\n                                quotationNumber: quotation.quotationNumber,\n                                customerName: quotation.customer?.name || 'N/A',\n                                customerId: quotation.customerId,\n                                date: quotation.createdAt || new Date().toISOString(),\n                                expiryDate: quotation.validUntil || new Date().toISOString(),\n                                items: quotation.items.map(item => ({\n                                    id: item.id,\n                                    productId: item.product?.sku || 'N/A',\n                                    productName: item.product?.name || 'N/A',\n                                    quantity: item.quantity,\n                                    unitPrice: item.price || 0,\n                                    total: item.total || 0\n                                })),\n                                subtotal: quotation.total || 0,\n                                discount: 0,\n                                tax: 0,\n                                total: quotation.total || 0,\n                                notes: '',\n                                termsAndConditions: 'Thank you for your business. This quotation is valid for 30 days from the issue date.'\n                            }}\n                        />\n                    </div>\n                )}\n            </div>\n        </MainLayout>\n    );\n}"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}