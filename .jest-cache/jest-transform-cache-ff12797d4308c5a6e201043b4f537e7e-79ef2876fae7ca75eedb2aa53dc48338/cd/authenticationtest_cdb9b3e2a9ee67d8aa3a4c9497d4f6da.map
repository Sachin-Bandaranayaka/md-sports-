{"version":3,"sources":["/Users/sachin/Documents/md-sports-/tests/integration/authentication.test.ts"],"sourcesContent":["import { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport '@testing-library/jest-dom';\n\n// Mock the useAuth hook\nconst mockUseAuth = jest.fn();\njest.mock('@/hooks/useAuth', () => ({\n  useAuth: () => mockUseAuth(),\n}));\n\n// Mock next/navigation\njest.mock('next/navigation', () => ({\n  useRouter: () => ({\n    push: jest.fn(),\n    replace: jest.fn(),\n    back: jest.fn(),\n    forward: jest.fn(),\n    refresh: jest.fn(),\n    prefetch: jest.fn(),\n  }),\n}));\n\n// Mock fetch globally\nconst mockFetch = jest.fn();\nglobal.fetch = mockFetch;\n\n// Mock crypto for token generation\nObject.defineProperty(global, 'crypto', {\n  value: {\n    randomUUID: () => 'mock-uuid-123',\n    getRandomValues: (arr: any) => {\n      for (let i = 0; i < arr.length; i++) {\n        arr[i] = Math.floor(Math.random() * 256);\n      }\n      return arr;\n    }\n  }\n});\n\ndescribe('Authentication and Authorization System', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    \n    // Mock localStorage\n    Object.defineProperty(window, 'localStorage', {\n      value: {\n        getItem: jest.fn(),\n        setItem: jest.fn(),\n        removeItem: jest.fn(),\n        clear: jest.fn(),\n      },\n      writable: true,\n    });\n\n    // Mock sessionStorage\n    Object.defineProperty(window, 'sessionStorage', {\n      value: {\n        getItem: jest.fn(),\n        setItem: jest.fn(),\n        removeItem: jest.fn(),\n        clear: jest.fn(),\n      },\n      writable: true,\n    });\n  });\n\n  describe('User Authentication', () => {\n    test('should validate login credentials', () => {\n      const validateLoginCredentials = (email: string, password: string) => {\n        const errors: string[] = [];\n        \n        if (!email || email.trim().length === 0) {\n          errors.push('Email is required');\n        } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)) {\n          errors.push('Invalid email format');\n        }\n        \n        if (!password || password.length === 0) {\n          errors.push('Password is required');\n        } else if (password.length < 6) {\n          errors.push('Password must be at least 6 characters');\n        }\n        \n        return errors;\n      };\n\n      expect(validateLoginCredentials('user@example.com', 'password123')).toEqual([]);\n      expect(validateLoginCredentials('', 'password123')).toContain('Email is required');\n      expect(validateLoginCredentials('invalid-email', 'password123')).toContain('Invalid email format');\n      expect(validateLoginCredentials('user@example.com', '')).toContain('Password is required');\n      expect(validateLoginCredentials('user@example.com', '123')).toContain('Password must be at least 6 characters');\n    });\n\n    test('should handle successful login', async () => {\n      const login = async (email: string, password: string) => {\n        mockFetch.mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({\n            success: true,\n            token: 'mock-jwt-token',\n            user: {\n              id: '1',\n              email: 'user@example.com',\n              name: 'Test User',\n              permissions: ['sales:view', 'inventory:view']\n            },\n            expiresIn: 3600\n          })\n        });\n\n        const response = await fetch('/api/auth/login', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({ email, password })\n        });\n\n        return response.json();\n      };\n\n      const result = await login('user@example.com', 'password123');\n      \n      expect(result.success).toBe(true);\n      expect(result.token).toBe('mock-jwt-token');\n      expect(result.user.email).toBe('user@example.com');\n      expect(mockFetch).toHaveBeenCalledWith('/api/auth/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ email: 'user@example.com', password: 'password123' })\n      });\n    });\n\n    test('should handle login failure', async () => {\n      const login = async (email: string, password: string) => {\n        mockFetch.mockResolvedValueOnce({\n          ok: false,\n          status: 401,\n          json: async () => ({\n            success: false,\n            message: 'Invalid credentials'\n          })\n        });\n\n        const response = await fetch('/api/auth/login', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({ email, password })\n        });\n\n        return { ok: response.ok, data: await response.json() };\n      };\n\n      const result = await login('user@example.com', 'wrongpassword');\n      \n      expect(result.ok).toBe(false);\n      expect(result.data.success).toBe(false);\n      expect(result.data.message).toBe('Invalid credentials');\n    });\n\n    test('should handle logout', async () => {\n      const logout = async (token: string) => {\n        mockFetch.mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({\n            success: true,\n            message: 'Logged out successfully'\n          })\n        });\n\n        const response = await fetch('/api/auth/logout', {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n\n        // Clear local storage\n        localStorage.removeItem('token');\n        localStorage.removeItem('user');\n        sessionStorage.clear();\n\n        return response.json();\n      };\n\n      const result = await logout('mock-token');\n      \n      expect(result.success).toBe(true);\n      expect(localStorage.removeItem).toHaveBeenCalledWith('token');\n      expect(localStorage.removeItem).toHaveBeenCalledWith('user');\n      expect(sessionStorage.clear).toHaveBeenCalled();\n    });\n  });\n\n  describe('Token Management', () => {\n    test('should validate JWT token format', () => {\n      const isValidJWTFormat = (token: string) => {\n        if (!token) return false;\n        const parts = token.split('.');\n        return parts.length === 3;\n      };\n\n      expect(isValidJWTFormat('header.payload.signature')).toBe(true);\n      expect(isValidJWTFormat('invalid-token')).toBe(false);\n      expect(isValidJWTFormat('')).toBe(false);\n    });\n\n    test('should check token expiration', () => {\n      const isTokenExpired = (token: string) => {\n        try {\n          // Mock JWT decode\n          const payload = JSON.parse(atob(token.split('.')[1]));\n          const currentTime = Math.floor(Date.now() / 1000);\n          return payload.exp < currentTime;\n        } catch {\n          return true; // Invalid token is considered expired\n        }\n      };\n\n      // Mock valid token (expires in future)\n      const futureExp = Math.floor(Date.now() / 1000) + 3600; // 1 hour from now\n      const validToken = `header.${btoa(JSON.stringify({ exp: futureExp }))}.signature`;\n      \n      // Mock expired token\n      const pastExp = Math.floor(Date.now() / 1000) - 3600; // 1 hour ago\n      const expiredToken = `header.${btoa(JSON.stringify({ exp: pastExp }))}.signature`;\n\n      expect(isTokenExpired(validToken)).toBe(false);\n      expect(isTokenExpired(expiredToken)).toBe(true);\n      expect(isTokenExpired('invalid-token')).toBe(true);\n    });\n\n    test('should refresh token when near expiration', async () => {\n      const refreshToken = async (currentToken: string) => {\n        mockFetch.mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({\n            success: true,\n            token: 'new-jwt-token',\n            expiresIn: 3600\n          })\n        });\n\n        const response = await fetch('/api/auth/refresh', {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${currentToken}`\n          }\n        });\n\n        return response.json();\n      };\n\n      const result = await refreshToken('old-token');\n      \n      expect(result.success).toBe(true);\n      expect(result.token).toBe('new-jwt-token');\n    });\n\n    test('should store and retrieve tokens securely', () => {\n      const storeToken = (token: string, rememberMe: boolean = false) => {\n        if (rememberMe) {\n          localStorage.setItem('token', token);\n        } else {\n          sessionStorage.setItem('token', token);\n        }\n      };\n\n      const getStoredToken = () => {\n        return localStorage.getItem('token') || sessionStorage.getItem('token');\n      };\n\n      const clearStoredToken = () => {\n        localStorage.removeItem('token');\n        sessionStorage.removeItem('token');\n      };\n\n      // Test persistent storage\n      storeToken('persistent-token', true);\n      expect(localStorage.setItem).toHaveBeenCalledWith('token', 'persistent-token');\n\n      // Test session storage\n      storeToken('session-token', false);\n      expect(sessionStorage.setItem).toHaveBeenCalledWith('token', 'session-token');\n\n      // Mock return values for retrieval test\n      (localStorage.getItem as jest.Mock).mockReturnValue('stored-token');\n      expect(getStoredToken()).toBe('stored-token');\n\n      // Test clearing\n      clearStoredToken();\n      expect(localStorage.removeItem).toHaveBeenCalledWith('token');\n      expect(sessionStorage.removeItem).toHaveBeenCalledWith('token');\n    });\n  });\n\n  describe('Permission System', () => {\n    test('should check user permissions correctly', () => {\n      const hasPermission = (userPermissions: string[], requiredPermission: string) => {\n        return userPermissions.includes(requiredPermission) || userPermissions.includes('admin:all');\n      };\n\n      const userPermissions = ['sales:view', 'sales:create', 'inventory:view'];\n      \n      expect(hasPermission(userPermissions, 'sales:view')).toBe(true);\n      expect(hasPermission(userPermissions, 'sales:create')).toBe(true);\n      expect(hasPermission(userPermissions, 'sales:delete')).toBe(false);\n      expect(hasPermission(['admin:all'], 'any:permission')).toBe(true);\n    });\n\n    test('should check multiple permissions (AND logic)', () => {\n      const hasAllPermissions = (userPermissions: string[], requiredPermissions: string[]) => {\n        return requiredPermissions.every(permission => \n          userPermissions.includes(permission) || userPermissions.includes('admin:all')\n        );\n      };\n\n      const userPermissions = ['sales:view', 'sales:create', 'inventory:view'];\n      \n      expect(hasAllPermissions(userPermissions, ['sales:view', 'inventory:view'])).toBe(true);\n      expect(hasAllPermissions(userPermissions, ['sales:view', 'sales:delete'])).toBe(false);\n    });\n\n    test('should check any permission (OR logic)', () => {\n      const hasAnyPermission = (userPermissions: string[], requiredPermissions: string[]) => {\n        return requiredPermissions.some(permission => \n          userPermissions.includes(permission) || userPermissions.includes('admin:all')\n        );\n      };\n\n      const userPermissions = ['sales:view', 'inventory:view'];\n      \n      expect(hasAnyPermission(userPermissions, ['sales:view', 'sales:delete'])).toBe(true);\n      expect(hasAnyPermission(userPermissions, ['admin:delete', 'admin:create'])).toBe(false);\n    });\n\n    test('should validate role-based permissions', () => {\n      const getRolePermissions = (role: string) => {\n        const rolePermissions: Record<string, string[]> = {\n          'admin': ['admin:all'],\n          'manager': ['sales:all', 'inventory:all', 'customers:all'],\n          'sales': ['sales:view', 'sales:create', 'customers:view', 'customers:create'],\n          'inventory': ['inventory:view', 'inventory:create', 'inventory:edit'],\n          'viewer': ['sales:view', 'inventory:view', 'customers:view']\n        };\n        \n        return rolePermissions[role] || [];\n      };\n\n      expect(getRolePermissions('admin')).toContain('admin:all');\n      expect(getRolePermissions('sales')).toContain('sales:view');\n      expect(getRolePermissions('sales')).toContain('customers:create');\n      expect(getRolePermissions('viewer')).not.toContain('sales:create');\n      expect(getRolePermissions('unknown')).toEqual([]);\n    });\n  });\n\n  describe('Session Management', () => {\n    test('should track user session activity', () => {\n      const updateLastActivity = () => {\n        const timestamp = Date.now();\n        sessionStorage.setItem('lastActivity', timestamp.toString());\n        return timestamp;\n      };\n\n      const getLastActivity = () => {\n        const timestamp = sessionStorage.getItem('lastActivity');\n        return timestamp ? parseInt(timestamp) : null;\n      };\n\n      const isSessionExpired = (maxInactiveTime: number = 30 * 60 * 1000) => { // 30 minutes\n        const lastActivity = getLastActivity();\n        if (!lastActivity) return true;\n        \n        return Date.now() - lastActivity > maxInactiveTime;\n      };\n\n      // Mock sessionStorage behavior\n      let mockStorage: Record<string, string> = {};\n      (sessionStorage.setItem as jest.Mock).mockImplementation((key, value) => {\n        mockStorage[key] = value;\n      });\n      (sessionStorage.getItem as jest.Mock).mockImplementation((key) => {\n        return mockStorage[key] || null;\n      });\n\n      const timestamp = updateLastActivity();\n      expect(sessionStorage.setItem).toHaveBeenCalledWith('lastActivity', timestamp.toString());\n      \n      // Test session not expired\n      expect(isSessionExpired(60 * 60 * 1000)).toBe(false); // 1 hour limit\n      \n      // Test session expired\n      mockStorage['lastActivity'] = (Date.now() - 60 * 60 * 1000).toString(); // 1 hour ago\n      expect(isSessionExpired(30 * 60 * 1000)).toBe(true); // 30 minute limit\n    });\n\n    test('should handle concurrent sessions', () => {\n      const generateSessionId = () => {\n        return crypto.randomUUID();\n      };\n\n      const validateSessionId = (sessionId: string, userSessions: string[]) => {\n        return userSessions.includes(sessionId);\n      };\n\n      const addSession = (userSessions: string[], sessionId: string, maxSessions: number = 3) => {\n        const updatedSessions = [...userSessions, sessionId];\n        \n        // Remove oldest sessions if limit exceeded\n        if (updatedSessions.length > maxSessions) {\n          return updatedSessions.slice(-maxSessions);\n        }\n        \n        return updatedSessions;\n      };\n\n      const sessionId1 = generateSessionId();\n      const sessionId2 = generateSessionId();\n      \n      expect(sessionId1).toBe('mock-uuid-123');\n      expect(validateSessionId(sessionId1, [sessionId1, sessionId2])).toBe(true);\n      expect(validateSessionId('invalid-session', [sessionId1, sessionId2])).toBe(false);\n      \n      const sessions = addSession(['session1', 'session2', 'session3'], 'session4', 3);\n      expect(sessions).toEqual(['session2', 'session3', 'session4']);\n    });\n  });\n\n  describe('Password Security', () => {\n    test('should validate password strength', () => {\n      const validatePasswordStrength = (password: string) => {\n        const errors: string[] = [];\n        \n        if (password.length < 8) {\n          errors.push('Password must be at least 8 characters long');\n        }\n        \n        if (!/[A-Z]/.test(password)) {\n          errors.push('Password must contain at least one uppercase letter');\n        }\n        \n        if (!/[a-z]/.test(password)) {\n          errors.push('Password must contain at least one lowercase letter');\n        }\n        \n        if (!/\\d/.test(password)) {\n          errors.push('Password must contain at least one number');\n        }\n        \n        if (!/[!@#$%^&*(),.?\":{}|<>]/.test(password)) {\n          errors.push('Password must contain at least one special character');\n        }\n        \n        return {\n          isValid: errors.length === 0,\n          errors,\n          strength: errors.length === 0 ? 'strong' : errors.length <= 2 ? 'medium' : 'weak'\n        };\n      };\n\n      const strongPassword = validatePasswordStrength('StrongPass123!');\n      expect(strongPassword.isValid).toBe(true);\n      expect(strongPassword.strength).toBe('strong');\n      \n      const weakPassword = validatePasswordStrength('weak');\n      expect(weakPassword.isValid).toBe(false);\n      expect(weakPassword.strength).toBe('weak');\n      expect(weakPassword.errors).toContain('Password must be at least 8 characters long');\n    });\n\n    test('should handle password reset flow', async () => {\n      const requestPasswordReset = async (email: string) => {\n        mockFetch.mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({\n            success: true,\n            message: 'Password reset email sent',\n            resetToken: 'reset-token-123'\n          })\n        });\n\n        const response = await fetch('/api/auth/forgot-password', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({ email })\n        });\n\n        return response.json();\n      };\n\n      const resetPassword = async (token: string, newPassword: string) => {\n        mockFetch.mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({\n            success: true,\n            message: 'Password reset successfully'\n          })\n        });\n\n        const response = await fetch('/api/auth/reset-password', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({ token, newPassword })\n        });\n\n        return response.json();\n      };\n\n      const resetRequest = await requestPasswordReset('user@example.com');\n      expect(resetRequest.success).toBe(true);\n      expect(resetRequest.resetToken).toBe('reset-token-123');\n      \n      const passwordReset = await resetPassword('reset-token-123', 'NewPassword123!');\n      expect(passwordReset.success).toBe(true);\n    });\n  });\n\n  describe('Two-Factor Authentication', () => {\n    test('should generate and validate TOTP codes', () => {\n      // Mock TOTP generation (simplified)\n      const generateTOTP = (secret: string, timeStep: number = 30) => {\n        const time = Math.floor(Date.now() / 1000 / timeStep);\n        // Simplified TOTP generation for testing\n        return ((time + secret.length) % 1000000).toString().padStart(6, '0');\n      };\n\n      const validateTOTP = (code: string, secret: string, tolerance: number = 1) => {\n        const currentTime = Math.floor(Date.now() / 1000 / 30);\n        \n        for (let i = -tolerance; i <= tolerance; i++) {\n          const timeStep = currentTime + i;\n          const expectedCode = ((timeStep + secret.length) % 1000000).toString().padStart(6, '0');\n          if (code === expectedCode) {\n            return true;\n          }\n        }\n        \n        return false;\n      };\n\n      const secret = 'user-secret-key';\n      const code = generateTOTP(secret);\n      \n      expect(code).toHaveLength(6);\n      expect(validateTOTP(code, secret)).toBe(true);\n      expect(validateTOTP('000000', secret)).toBe(false);\n    });\n\n    test('should handle 2FA setup and verification', async () => {\n      const setup2FA = async (userId: string) => {\n        mockFetch.mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({\n            success: true,\n            secret: 'JBSWY3DPEHPK3PXP',\n            qrCode: 'data:image/png;base64,mock-qr-code',\n            backupCodes: ['123456', '789012', '345678']\n          })\n        });\n\n        const response = await fetch('/api/auth/2fa/setup', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer mock-token'\n          },\n          body: JSON.stringify({ userId })\n        });\n\n        return response.json();\n      };\n\n      const verify2FA = async (userId: string, code: string) => {\n        mockFetch.mockResolvedValueOnce({\n          ok: true,\n          json: async () => ({\n            success: true,\n            message: '2FA enabled successfully'\n          })\n        });\n\n        const response = await fetch('/api/auth/2fa/verify', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer mock-token'\n          },\n          body: JSON.stringify({ userId, code })\n        });\n\n        return response.json();\n      };\n\n      const setupResult = await setup2FA('user123');\n      expect(setupResult.success).toBe(true);\n      expect(setupResult.secret).toBe('JBSWY3DPEHPK3PXP');\n      expect(setupResult.backupCodes).toHaveLength(3);\n      \n      const verifyResult = await verify2FA('user123', '123456');\n      expect(verifyResult.success).toBe(true);\n    });\n  });\n});"],"names":["jest","mock","useAuth","mockUseAuth","useRouter","push","fn","replace","back","forward","refresh","prefetch","mockFetch","global","fetch","Object","defineProperty","value","randomUUID","getRandomValues","arr","i","length","Math","floor","random","describe","beforeEach","clearAllMocks","window","getItem","setItem","removeItem","clear","writable","test","validateLoginCredentials","email","password","errors","trim","expect","toEqual","toContain","login","mockResolvedValueOnce","ok","json","success","token","user","id","name","permissions","expiresIn","response","method","headers","body","JSON","stringify","result","toBe","toHaveBeenCalledWith","status","message","data","logout","localStorage","sessionStorage","toHaveBeenCalled","isValidJWTFormat","parts","split","isTokenExpired","payload","parse","atob","currentTime","Date","now","exp","futureExp","validToken","btoa","pastExp","expiredToken","refreshToken","currentToken","storeToken","rememberMe","getStoredToken","clearStoredToken","mockReturnValue","hasPermission","userPermissions","requiredPermission","includes","hasAllPermissions","requiredPermissions","every","permission","hasAnyPermission","some","getRolePermissions","role","rolePermissions","not","updateLastActivity","timestamp","toString","getLastActivity","parseInt","isSessionExpired","maxInactiveTime","lastActivity","mockStorage","mockImplementation","key","generateSessionId","crypto","validateSessionId","sessionId","userSessions","addSession","maxSessions","updatedSessions","slice","sessionId1","sessionId2","sessions","validatePasswordStrength","isValid","strength","strongPassword","weakPassword","requestPasswordReset","resetToken","resetPassword","newPassword","resetRequest","passwordReset","generateTOTP","secret","timeStep","time","padStart","validateTOTP","code","tolerance","expectedCode","toHaveLength","setup2FA","userId","qrCode","backupCodes","verify2FA","setupResult","verifyResult"],"mappings":"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"}