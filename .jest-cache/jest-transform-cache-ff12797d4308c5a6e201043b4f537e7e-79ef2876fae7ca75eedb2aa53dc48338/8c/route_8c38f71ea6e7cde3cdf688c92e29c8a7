dd03751b10c221e8ee7ec40b5cac4329
"use strict";

/* istanbul ignore next */
function cov_xqdg755ph() {
  var path = "/Users/sachin/Documents/md-sports-/src/app/api/reports/daily-sales/route.ts";
  var hash = "44894ea6d7edda9b37ca18039ffc15ee9aac1275";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Users/sachin/Documents/md-sports-/src/app/api/reports/daily-sales/route.ts",
    statementMap: {
      "0": {
        start: {
          line: 2,
          column: 0
        },
        end: {
          line: 4,
          column: 3
        }
      },
      "1": {
        start: {
          line: 5,
          column: 0
        },
        end: {
          line: 10,
          column: 3
        }
      },
      "2": {
        start: {
          line: 8,
          column: 8
        },
        end: {
          line: 8,
          column: 19
        }
      },
      "3": {
        start: {
          line: 11,
          column: 16
        },
        end: {
          line: 11,
          column: 38
        }
      },
      "4": {
        start: {
          line: 12,
          column: 16
        },
        end: {
          line: 12,
          column: 49
        }
      },
      "5": {
        start: {
          line: 14,
          column: 4
        },
        end: {
          line: 191,
          column: 5
        }
      },
      "6": {
        start: {
          line: 15,
          column: 33
        },
        end: {
          line: 15,
          column: 53
        }
      },
      "7": {
        start: {
          line: 16,
          column: 26
        },
        end: {
          line: 16,
          column: 50
        }
      },
      "8": {
        start: {
          line: 18,
          column: 27
        },
        end: {
          line: 18,
          column: 71
        }
      },
      "9": {
        start: {
          line: 20,
          column: 27
        },
        end: {
          line: 20,
          column: 47
        }
      },
      "10": {
        start: {
          line: 21,
          column: 8
        },
        end: {
          line: 21,
          column: 40
        }
      },
      "11": {
        start: {
          line: 22,
          column: 25
        },
        end: {
          line: 22,
          column: 45
        }
      },
      "12": {
        start: {
          line: 23,
          column: 8
        },
        end: {
          line: 23,
          column: 43
        }
      },
      "13": {
        start: {
          line: 25,
          column: 22
        },
        end: {
          line: 31,
          column: 10
        }
      },
      "14": {
        start: {
          line: 33,
          column: 30
        },
        end: {
          line: 153,
          column: 11
        }
      },
      "15": {
        start: {
          line: 35,
          column: 35
        },
        end: {
          line: 49,
          column: 14
        }
      },
      "16": {
        start: {
          line: 51,
          column: 34
        },
        end: {
          line: 66,
          column: 14
        }
      },
      "17": {
        start: {
          line: 67,
          column: 37
        },
        end: {
          line: 82,
          column: 14
        }
      },
      "18": {
        start: {
          line: 83,
          column: 37
        },
        end: {
          line: 98,
          column: 14
        }
      },
      "19": {
        start: {
          line: 100,
          column: 29
        },
        end: {
          line: 131,
          column: 14
        }
      },
      "20": {
        start: {
          line: 133,
          column: 34
        },
        end: {
          line: 135,
          column: 17
        }
      },
      "21": {
        start: {
          line: 134,
          column: 16
        },
        end: {
          line: 134,
          column: 101
        }
      },
      "22": {
        start: {
          line: 134,
          column: 71
        },
        end: {
          line: 134,
          column: 96
        }
      },
      "23": {
        start: {
          line: 136,
          column: 12
        },
        end: {
          line: 152,
          column: 14
        }
      },
      "24": {
        start: {
          line: 155,
          column: 30
        },
        end: {
          line: 163,
          column: 10
        }
      },
      "25": {
        start: {
          line: 155,
          column: 68
        },
        end: {
          line: 159,
          column: 13
        }
      },
      "26": {
        start: {
          line: 164,
          column: 8
        },
        end: {
          line: 182,
          column: 11
        }
      },
      "27": {
        start: {
          line: 184,
          column: 8
        },
        end: {
          line: 184,
          column: 67
        }
      },
      "28": {
        start: {
          line: 185,
          column: 8
        },
        end: {
          line: 190,
          column: 11
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 7,
            column: 9
          },
          end: {
            line: 7,
            column: 10
          }
        },
        loc: {
          start: {
            line: 7,
            column: 20
          },
          end: {
            line: 9,
            column: 5
          }
        },
        line: 7
      },
      "1": {
        name: "GET",
        decl: {
          start: {
            line: 13,
            column: 15
          },
          end: {
            line: 13,
            column: 18
          }
        },
        loc: {
          start: {
            line: 13,
            column: 28
          },
          end: {
            line: 192,
            column: 1
          }
        },
        line: 13
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 33,
            column: 58
          },
          end: {
            line: 33,
            column: 59
          }
        },
        loc: {
          start: {
            line: 33,
            column: 72
          },
          end: {
            line: 153,
            column: 9
          }
        },
        line: 33
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 133,
            column: 50
          },
          end: {
            line: 133,
            column: 51
          }
        },
        loc: {
          start: {
            line: 133,
            column: 68
          },
          end: {
            line: 135,
            column: 13
          }
        },
        line: 133
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 134,
            column: 52
          },
          end: {
            line: 134,
            column: 53
          }
        },
        loc: {
          start: {
            line: 134,
            column: 71
          },
          end: {
            line: 134,
            column: 96
          }
        },
        line: 134
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 155,
            column: 51
          },
          end: {
            line: 155,
            column: 52
          }
        },
        loc: {
          start: {
            line: 155,
            column: 68
          },
          end: {
            line: 159,
            column: 13
          }
        },
        line: 155
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 18,
            column: 27
          },
          end: {
            line: 18,
            column: 71
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 18,
            column: 39
          },
          end: {
            line: 18,
            column: 58
          }
        }, {
          start: {
            line: 18,
            column: 61
          },
          end: {
            line: 18,
            column: 71
          }
        }],
        line: 18
      },
      "1": {
        loc: {
          start: {
            line: 140,
            column: 28
          },
          end: {
            line: 140,
            column: 58
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 140,
            column: 28
          },
          end: {
            line: 140,
            column: 53
          }
        }, {
          start: {
            line: 140,
            column: 57
          },
          end: {
            line: 140,
            column: 58
          }
        }],
        line: 140
      },
      "2": {
        loc: {
          start: {
            line: 141,
            column: 34
          },
          end: {
            line: 141,
            column: 63
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 141,
            column: 34
          },
          end: {
            line: 141,
            column: 58
          }
        }, {
          start: {
            line: 141,
            column: 62
          },
          end: {
            line: 141,
            column: 63
          }
        }],
        line: 141
      },
      "3": {
        loc: {
          start: {
            line: 143,
            column: 41
          },
          end: {
            line: 143,
            column: 135
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 143,
            column: 72
          },
          end: {
            line: 143,
            column: 131
          }
        }, {
          start: {
            line: 143,
            column: 134
          },
          end: {
            line: 143,
            column: 135
          }
        }],
        line: 143
      },
      "4": {
        loc: {
          start: {
            line: 143,
            column: 73
          },
          end: {
            line: 143,
            column: 103
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 143,
            column: 73
          },
          end: {
            line: 143,
            column: 98
          }
        }, {
          start: {
            line: 143,
            column: 102
          },
          end: {
            line: 143,
            column: 103
          }
        }],
        line: 143
      },
      "5": {
        loc: {
          start: {
            line: 145,
            column: 27
          },
          end: {
            line: 145,
            column: 56
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 145,
            column: 27
          },
          end: {
            line: 145,
            column: 51
          }
        }, {
          start: {
            line: 145,
            column: 55
          },
          end: {
            line: 145,
            column: 56
          }
        }],
        line: 145
      },
      "6": {
        loc: {
          start: {
            line: 146,
            column: 30
          },
          end: {
            line: 146,
            column: 58
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 146,
            column: 30
          },
          end: {
            line: 146,
            column: 53
          }
        }, {
          start: {
            line: 146,
            column: 57
          },
          end: {
            line: 146,
            column: 58
          }
        }],
        line: 146
      },
      "7": {
        loc: {
          start: {
            line: 147,
            column: 30
          },
          end: {
            line: 147,
            column: 62
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 147,
            column: 30
          },
          end: {
            line: 147,
            column: 57
          }
        }, {
          start: {
            line: 147,
            column: 61
          },
          end: {
            line: 147,
            column: 62
          }
        }],
        line: 147
      },
      "8": {
        loc: {
          start: {
            line: 148,
            column: 33
          },
          end: {
            line: 148,
            column: 64
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 148,
            column: 33
          },
          end: {
            line: 148,
            column: 59
          }
        }, {
          start: {
            line: 148,
            column: 63
          },
          end: {
            line: 148,
            column: 64
          }
        }],
        line: 148
      },
      "9": {
        loc: {
          start: {
            line: 149,
            column: 30
          },
          end: {
            line: 149,
            column: 62
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 149,
            column: 30
          },
          end: {
            line: 149,
            column: 57
          }
        }, {
          start: {
            line: 149,
            column: 61
          },
          end: {
            line: 149,
            column: 62
          }
        }],
        line: 149
      },
      "10": {
        loc: {
          start: {
            line: 150,
            column: 33
          },
          end: {
            line: 150,
            column: 64
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 150,
            column: 33
          },
          end: {
            line: 150,
            column: 59
          }
        }, {
          start: {
            line: 150,
            column: 63
          },
          end: {
            line: 150,
            column: 64
          }
        }],
        line: 150
      },
      "11": {
        loc: {
          start: {
            line: 178,
            column: 32
          },
          end: {
            line: 178,
            column: 94
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 178,
            column: 51
          },
          end: {
            line: 178,
            column: 90
          }
        }, {
          start: {
            line: 178,
            column: 93
          },
          end: {
            line: 178,
            column: 94
          }
        }],
        line: 178
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["/Users/sachin/Documents/md-sports-/src/app/api/reports/daily-sales/route.ts"],
      sourcesContent: ["import { NextResponse } from 'next/server';\nimport { prisma } from '@/lib/prisma';\n\nexport async function GET(request: Request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const dateParam = searchParams.get('date');\n        \n        // Use provided date or default to today\n        const targetDate = dateParam ? new Date(dateParam) : new Date();\n        \n        // Set to start and end of the day\n        const startOfDay = new Date(targetDate);\n        startOfDay.setHours(0, 0, 0, 0);\n        \n        const endOfDay = new Date(targetDate);\n        endOfDay.setHours(23, 59, 59, 999);\n\n        // Get all shops\n        const shops = await prisma.shop.findMany({\n            select: {\n                id: true,\n                name: true,\n                location: true\n            }\n        });\n\n        // Get daily sales data for each shop\n        const shopSalesData = await Promise.all(\n            shops.map(async (shop) => {\n                // Get aggregated sales data for the shop (all invoices)\n                const salesAggregate = await prisma.invoice.aggregate({\n                    _sum: {\n                        total: true,\n                    },\n                    _count: {\n                        id: true,\n                    },\n                    where: {\n                        shopId: shop.id,\n                        createdAt: {\n                            gte: startOfDay,\n                            lte: endOfDay,\n                        },\n                        // Remove status filter to include all invoices\n                    },\n                });\n\n                // Get status-specific aggregates\n                const paidAggregate = await prisma.invoice.aggregate({\n                    _sum: { total: true },\n                    _count: { id: true },\n                    where: {\n                        shopId: shop.id,\n                        createdAt: { gte: startOfDay, lte: endOfDay },\n                        status: 'paid',\n                    },\n                });\n\n                const pendingAggregate = await prisma.invoice.aggregate({\n                    _sum: { total: true },\n                    _count: { id: true },\n                    where: {\n                        shopId: shop.id,\n                        createdAt: { gte: startOfDay, lte: endOfDay },\n                        status: 'pending',\n                    },\n                });\n\n                const partialAggregate = await prisma.invoice.aggregate({\n                    _sum: { total: true },\n                    _count: { id: true },\n                    where: {\n                        shopId: shop.id,\n                        createdAt: { gte: startOfDay, lte: endOfDay },\n                        status: 'partial',\n                    },\n                });\n\n                // Get detailed invoice data for the shop (all statuses)\n                const invoices = await prisma.invoice.findMany({\n                    where: {\n                        shopId: shop.id,\n                        createdAt: {\n                            gte: startOfDay,\n                            lte: endOfDay,\n                        },\n                        // Remove status filter to include all invoices\n                    },\n                    include: {\n                        customer: {\n                            select: {\n                                name: true,\n                                email: true,\n                                phone: true\n                            }\n                        },\n                        items: {\n                            include: {\n                                product: {\n                                    select: {\n                                        name: true,\n                                        sku: true,\n                                        category: true\n                                    }\n                                }\n                            }\n                        }\n                    },\n                    orderBy: {\n                        createdAt: 'desc',\n                    },\n                });\n\n                // Calculate total quantity sold\n                const totalQuantity = invoices.reduce((total, invoice) => {\n                    return total + invoice.items.reduce((itemTotal, item) => itemTotal + item.quantity, 0);\n                }, 0);\n\n                return {\n                    shopId: shop.id,\n                    shopName: shop.name,\n                    location: shop.location,\n                    totalSales: salesAggregate._sum.total || 0,\n                    numberOfInvoices: salesAggregate._count.id || 0,\n                    totalQuantitySold: totalQuantity,\n                    averageTransactionValue: salesAggregate._count.id > 0 \n                        ? (salesAggregate._sum.total || 0) / salesAggregate._count.id \n                        : 0,\n                    // Status breakdown\n                    paidSales: paidAggregate._sum.total || 0,\n                    paidInvoices: paidAggregate._count.id || 0,\n                    pendingSales: pendingAggregate._sum.total || 0,\n                    pendingInvoices: pendingAggregate._count.id || 0,\n                    partialSales: partialAggregate._sum.total || 0,\n                    partialInvoices: partialAggregate._count.id || 0,\n                    invoices: invoices\n                };\n            })\n        );\n\n        // Calculate overall totals\n        const overallTotals = shopSalesData.reduce(\n            (totals, shop) => ({\n                totalSales: totals.totalSales + shop.totalSales,\n                totalInvoices: totals.totalInvoices + shop.numberOfInvoices,\n                totalQuantity: totals.totalQuantity + shop.totalQuantitySold\n            }),\n            { totalSales: 0, totalInvoices: 0, totalQuantity: 0 }\n        );\n\n        return NextResponse.json({\n            success: true,\n            reportDate: targetDate.toISOString().split('T')[0],\n            summary: {\n                date: targetDate.toLocaleDateString('en-US', { \n                    weekday: 'long', \n                    year: 'numeric', \n                    month: 'long', \n                    day: 'numeric' \n                }),\n                totalSales: overallTotals.totalSales,\n                totalInvoices: overallTotals.totalInvoices,\n                totalQuantitySold: overallTotals.totalQuantity,\n                numberOfShops: shops.length,\n                averagePerShop: shops.length > 0 ? overallTotals.totalSales / shops.length : 0\n            },\n            shopData: shopSalesData,\n            generatedAt: new Date().toISOString()\n        });\n\n    } catch (error) {\n        console.error('Error fetching daily sales report:', error);\n        return NextResponse.json(\n            { success: false, message: 'Failed to fetch daily sales report' },\n            { status: 500 }\n        );\n    }\n}"],
      names: ["GET", "request", "searchParams", "URL", "url", "dateParam", "get", "targetDate", "Date", "startOfDay", "setHours", "endOfDay", "shops", "prisma", "shop", "findMany", "select", "id", "name", "location", "shopSalesData", "Promise", "all", "map", "salesAggregate", "invoice", "aggregate", "_sum", "total", "_count", "where", "shopId", "createdAt", "gte", "lte", "paidAggregate", "status", "pendingAggregate", "partialAggregate", "invoices", "include", "customer", "email", "phone", "items", "product", "sku", "category", "orderBy", "totalQuantity", "reduce", "itemTotal", "item", "quantity", "shopName", "totalSales", "numberOfInvoices", "totalQuantitySold", "averageTransactionValue", "paidSales", "paidInvoices", "pendingSales", "pendingInvoices", "partialSales", "partialInvoices", "overallTotals", "totals", "totalInvoices", "NextResponse", "json", "success", "reportDate", "toISOString", "split", "summary", "date", "toLocaleDateString", "weekday", "year", "month", "day", "numberOfShops", "length", "averagePerShop", "shopData", "generatedAt", "error", "console", "message"],
      mappings: "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"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "44894ea6d7edda9b37ca18039ffc15ee9aac1275"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_xqdg755ph = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_xqdg755ph();
cov_xqdg755ph().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
/* istanbul ignore next */
cov_xqdg755ph().s[1]++;
Object.defineProperty(exports, "GET", {
  enumerable: true,
  get: function () {
    /* istanbul ignore next */
    cov_xqdg755ph().f[0]++;
    cov_xqdg755ph().s[2]++;
    return GET;
  }
});
const _server =
/* istanbul ignore next */
(cov_xqdg755ph().s[3]++, require("next/server"));
const _prisma =
/* istanbul ignore next */
(cov_xqdg755ph().s[4]++, require("../../../../lib/prisma"));
async function GET(request) {
  /* istanbul ignore next */
  cov_xqdg755ph().f[1]++;
  cov_xqdg755ph().s[5]++;
  try {
    const {
      searchParams
    } =
    /* istanbul ignore next */
    (cov_xqdg755ph().s[6]++, new URL(request.url));
    const dateParam =
    /* istanbul ignore next */
    (cov_xqdg755ph().s[7]++, searchParams.get("date"));
    // Use provided date or default to today
    const targetDate =
    /* istanbul ignore next */
    (cov_xqdg755ph().s[8]++, dateParam ?
    /* istanbul ignore next */
    (cov_xqdg755ph().b[0][0]++, new Date(dateParam)) :
    /* istanbul ignore next */
    (cov_xqdg755ph().b[0][1]++, new Date()));
    // Set to start and end of the day
    const startOfDay =
    /* istanbul ignore next */
    (cov_xqdg755ph().s[9]++, new Date(targetDate));
    /* istanbul ignore next */
    cov_xqdg755ph().s[10]++;
    startOfDay.setHours(0, 0, 0, 0);
    const endOfDay =
    /* istanbul ignore next */
    (cov_xqdg755ph().s[11]++, new Date(targetDate));
    /* istanbul ignore next */
    cov_xqdg755ph().s[12]++;
    endOfDay.setHours(23, 59, 59, 999);
    // Get all shops
    const shops =
    /* istanbul ignore next */
    (cov_xqdg755ph().s[13]++, await _prisma.prisma.shop.findMany({
      select: {
        id: true,
        name: true,
        location: true
      }
    }));
    // Get daily sales data for each shop
    const shopSalesData =
    /* istanbul ignore next */
    (cov_xqdg755ph().s[14]++, await Promise.all(shops.map(async shop => {
      /* istanbul ignore next */
      cov_xqdg755ph().f[2]++;
      // Get aggregated sales data for the shop (all invoices)
      const salesAggregate =
      /* istanbul ignore next */
      (cov_xqdg755ph().s[15]++, await _prisma.prisma.invoice.aggregate({
        _sum: {
          total: true
        },
        _count: {
          id: true
        },
        where: {
          shopId: shop.id,
          createdAt: {
            gte: startOfDay,
            lte: endOfDay
          }
        }
      }));
      // Get status-specific aggregates
      const paidAggregate =
      /* istanbul ignore next */
      (cov_xqdg755ph().s[16]++, await _prisma.prisma.invoice.aggregate({
        _sum: {
          total: true
        },
        _count: {
          id: true
        },
        where: {
          shopId: shop.id,
          createdAt: {
            gte: startOfDay,
            lte: endOfDay
          },
          status: "paid"
        }
      }));
      const pendingAggregate =
      /* istanbul ignore next */
      (cov_xqdg755ph().s[17]++, await _prisma.prisma.invoice.aggregate({
        _sum: {
          total: true
        },
        _count: {
          id: true
        },
        where: {
          shopId: shop.id,
          createdAt: {
            gte: startOfDay,
            lte: endOfDay
          },
          status: "pending"
        }
      }));
      const partialAggregate =
      /* istanbul ignore next */
      (cov_xqdg755ph().s[18]++, await _prisma.prisma.invoice.aggregate({
        _sum: {
          total: true
        },
        _count: {
          id: true
        },
        where: {
          shopId: shop.id,
          createdAt: {
            gte: startOfDay,
            lte: endOfDay
          },
          status: "partial"
        }
      }));
      // Get detailed invoice data for the shop (all statuses)
      const invoices =
      /* istanbul ignore next */
      (cov_xqdg755ph().s[19]++, await _prisma.prisma.invoice.findMany({
        where: {
          shopId: shop.id,
          createdAt: {
            gte: startOfDay,
            lte: endOfDay
          }
        },
        include: {
          customer: {
            select: {
              name: true,
              email: true,
              phone: true
            }
          },
          items: {
            include: {
              product: {
                select: {
                  name: true,
                  sku: true,
                  category: true
                }
              }
            }
          }
        },
        orderBy: {
          createdAt: "desc"
        }
      }));
      // Calculate total quantity sold
      const totalQuantity =
      /* istanbul ignore next */
      (cov_xqdg755ph().s[20]++, invoices.reduce((total, invoice) => {
        /* istanbul ignore next */
        cov_xqdg755ph().f[3]++;
        cov_xqdg755ph().s[21]++;
        return total + invoice.items.reduce((itemTotal, item) => {
          /* istanbul ignore next */
          cov_xqdg755ph().f[4]++;
          cov_xqdg755ph().s[22]++;
          return itemTotal + item.quantity;
        }, 0);
      }, 0));
      /* istanbul ignore next */
      cov_xqdg755ph().s[23]++;
      return {
        shopId: shop.id,
        shopName: shop.name,
        location: shop.location,
        totalSales:
        /* istanbul ignore next */
        (cov_xqdg755ph().b[1][0]++, salesAggregate._sum.total) ||
        /* istanbul ignore next */
        (cov_xqdg755ph().b[1][1]++, 0),
        numberOfInvoices:
        /* istanbul ignore next */
        (cov_xqdg755ph().b[2][0]++, salesAggregate._count.id) ||
        /* istanbul ignore next */
        (cov_xqdg755ph().b[2][1]++, 0),
        totalQuantitySold: totalQuantity,
        averageTransactionValue: salesAggregate._count.id > 0 ?
        /* istanbul ignore next */
        (cov_xqdg755ph().b[3][0]++, (
        /* istanbul ignore next */
        (cov_xqdg755ph().b[4][0]++, salesAggregate._sum.total) ||
        /* istanbul ignore next */
        (cov_xqdg755ph().b[4][1]++, 0)) / salesAggregate._count.id) :
        /* istanbul ignore next */
        (cov_xqdg755ph().b[3][1]++, 0),
        // Status breakdown
        paidSales:
        /* istanbul ignore next */
        (cov_xqdg755ph().b[5][0]++, paidAggregate._sum.total) ||
        /* istanbul ignore next */
        (cov_xqdg755ph().b[5][1]++, 0),
        paidInvoices:
        /* istanbul ignore next */
        (cov_xqdg755ph().b[6][0]++, paidAggregate._count.id) ||
        /* istanbul ignore next */
        (cov_xqdg755ph().b[6][1]++, 0),
        pendingSales:
        /* istanbul ignore next */
        (cov_xqdg755ph().b[7][0]++, pendingAggregate._sum.total) ||
        /* istanbul ignore next */
        (cov_xqdg755ph().b[7][1]++, 0),
        pendingInvoices:
        /* istanbul ignore next */
        (cov_xqdg755ph().b[8][0]++, pendingAggregate._count.id) ||
        /* istanbul ignore next */
        (cov_xqdg755ph().b[8][1]++, 0),
        partialSales:
        /* istanbul ignore next */
        (cov_xqdg755ph().b[9][0]++, partialAggregate._sum.total) ||
        /* istanbul ignore next */
        (cov_xqdg755ph().b[9][1]++, 0),
        partialInvoices:
        /* istanbul ignore next */
        (cov_xqdg755ph().b[10][0]++, partialAggregate._count.id) ||
        /* istanbul ignore next */
        (cov_xqdg755ph().b[10][1]++, 0),
        invoices: invoices
      };
    })));
    // Calculate overall totals
    const overallTotals =
    /* istanbul ignore next */
    (cov_xqdg755ph().s[24]++, shopSalesData.reduce((totals, shop) => {
      /* istanbul ignore next */
      cov_xqdg755ph().f[5]++;
      cov_xqdg755ph().s[25]++;
      return {
        totalSales: totals.totalSales + shop.totalSales,
        totalInvoices: totals.totalInvoices + shop.numberOfInvoices,
        totalQuantity: totals.totalQuantity + shop.totalQuantitySold
      };
    }, {
      totalSales: 0,
      totalInvoices: 0,
      totalQuantity: 0
    }));
    /* istanbul ignore next */
    cov_xqdg755ph().s[26]++;
    return _server.NextResponse.json({
      success: true,
      reportDate: targetDate.toISOString().split("T")[0],
      summary: {
        date: targetDate.toLocaleDateString("en-US", {
          weekday: "long",
          year: "numeric",
          month: "long",
          day: "numeric"
        }),
        totalSales: overallTotals.totalSales,
        totalInvoices: overallTotals.totalInvoices,
        totalQuantitySold: overallTotals.totalQuantity,
        numberOfShops: shops.length,
        averagePerShop: shops.length > 0 ?
        /* istanbul ignore next */
        (cov_xqdg755ph().b[11][0]++, overallTotals.totalSales / shops.length) :
        /* istanbul ignore next */
        (cov_xqdg755ph().b[11][1]++, 0)
      },
      shopData: shopSalesData,
      generatedAt: new Date().toISOString()
    });
  } catch (error) {
    /* istanbul ignore next */
    cov_xqdg755ph().s[27]++;
    console.error("Error fetching daily sales report:", error);
    /* istanbul ignore next */
    cov_xqdg755ph().s[28]++;
    return _server.NextResponse.json({
      success: false,
      message: "Failed to fetch daily sales report"
    }, {
      status: 500
    });
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfeHFkZzc1NXBoIiwiYWN0dWFsQ292ZXJhZ2UiLCJzIiwiR0VUIiwicmVxdWVzdCIsImYiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJkYXRlUGFyYW0iLCJnZXQiLCJ0YXJnZXREYXRlIiwiYiIsIkRhdGUiLCJzdGFydE9mRGF5Iiwic2V0SG91cnMiLCJlbmRPZkRheSIsInNob3BzIiwiX3ByaXNtYSIsInByaXNtYSIsInNob3AiLCJmaW5kTWFueSIsInNlbGVjdCIsImlkIiwibmFtZSIsImxvY2F0aW9uIiwic2hvcFNhbGVzRGF0YSIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJzYWxlc0FnZ3JlZ2F0ZSIsImludm9pY2UiLCJhZ2dyZWdhdGUiLCJfc3VtIiwidG90YWwiLCJfY291bnQiLCJ3aGVyZSIsInNob3BJZCIsImNyZWF0ZWRBdCIsImd0ZSIsImx0ZSIsInBhaWRBZ2dyZWdhdGUiLCJzdGF0dXMiLCJwZW5kaW5nQWdncmVnYXRlIiwicGFydGlhbEFnZ3JlZ2F0ZSIsImludm9pY2VzIiwiaW5jbHVkZSIsImN1c3RvbWVyIiwiZW1haWwiLCJwaG9uZSIsIml0ZW1zIiwicHJvZHVjdCIsInNrdSIsImNhdGVnb3J5Iiwib3JkZXJCeSIsInRvdGFsUXVhbnRpdHkiLCJyZWR1Y2UiLCJpdGVtVG90YWwiLCJpdGVtIiwicXVhbnRpdHkiLCJzaG9wTmFtZSIsInRvdGFsU2FsZXMiLCJudW1iZXJPZkludm9pY2VzIiwidG90YWxRdWFudGl0eVNvbGQiLCJhdmVyYWdlVHJhbnNhY3Rpb25WYWx1ZSIsInBhaWRTYWxlcyIsInBhaWRJbnZvaWNlcyIsInBlbmRpbmdTYWxlcyIsInBlbmRpbmdJbnZvaWNlcyIsInBhcnRpYWxTYWxlcyIsInBhcnRpYWxJbnZvaWNlcyIsIm92ZXJhbGxUb3RhbHMiLCJ0b3RhbHMiLCJ0b3RhbEludm9pY2VzIiwiX3NlcnZlciIsIk5leHRSZXNwb25zZSIsImpzb24iLCJzdWNjZXNzIiwicmVwb3J0RGF0ZSIsInRvSVNPU3RyaW5nIiwic3BsaXQiLCJzdW1tYXJ5IiwiZGF0ZSIsInRvTG9jYWxlRGF0ZVN0cmluZyIsIndlZWtkYXkiLCJ5ZWFyIiwibW9udGgiLCJkYXkiLCJudW1iZXJPZlNob3BzIiwibGVuZ3RoIiwiYXZlcmFnZVBlclNob3AiLCJzaG9wRGF0YSIsImdlbmVyYXRlZEF0IiwiZXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSJdLCJzb3VyY2VzIjpbIi9Vc2Vycy9zYWNoaW4vRG9jdW1lbnRzL21kLXNwb3J0cy0vc3JjL2FwcC9hcGkvcmVwb3J0cy9kYWlseS1zYWxlcy9yb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICdAL2xpYi9wcmlzbWEnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XG4gICAgICAgIGNvbnN0IGRhdGVQYXJhbSA9IHNlYXJjaFBhcmFtcy5nZXQoJ2RhdGUnKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFVzZSBwcm92aWRlZCBkYXRlIG9yIGRlZmF1bHQgdG8gdG9kYXlcbiAgICAgICAgY29uc3QgdGFyZ2V0RGF0ZSA9IGRhdGVQYXJhbSA/IG5ldyBEYXRlKGRhdGVQYXJhbSkgOiBuZXcgRGF0ZSgpO1xuICAgICAgICBcbiAgICAgICAgLy8gU2V0IHRvIHN0YXJ0IGFuZCBlbmQgb2YgdGhlIGRheVxuICAgICAgICBjb25zdCBzdGFydE9mRGF5ID0gbmV3IERhdGUodGFyZ2V0RGF0ZSk7XG4gICAgICAgIHN0YXJ0T2ZEYXkuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBlbmRPZkRheSA9IG5ldyBEYXRlKHRhcmdldERhdGUpO1xuICAgICAgICBlbmRPZkRheS5zZXRIb3VycygyMywgNTksIDU5LCA5OTkpO1xuXG4gICAgICAgIC8vIEdldCBhbGwgc2hvcHNcbiAgICAgICAgY29uc3Qgc2hvcHMgPSBhd2FpdCBwcmlzbWEuc2hvcC5maW5kTWFueSh7XG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICAgICAgICAgIGxvY2F0aW9uOiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEdldCBkYWlseSBzYWxlcyBkYXRhIGZvciBlYWNoIHNob3BcbiAgICAgICAgY29uc3Qgc2hvcFNhbGVzRGF0YSA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICAgICAgc2hvcHMubWFwKGFzeW5jIChzaG9wKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gR2V0IGFnZ3JlZ2F0ZWQgc2FsZXMgZGF0YSBmb3IgdGhlIHNob3AgKGFsbCBpbnZvaWNlcylcbiAgICAgICAgICAgICAgICBjb25zdCBzYWxlc0FnZ3JlZ2F0ZSA9IGF3YWl0IHByaXNtYS5pbnZvaWNlLmFnZ3JlZ2F0ZSh7XG4gICAgICAgICAgICAgICAgICAgIF9zdW06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBfY291bnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hvcElkOiBzaG9wLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3RlOiBzdGFydE9mRGF5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGx0ZTogZW5kT2ZEYXksXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHN0YXR1cyBmaWx0ZXIgdG8gaW5jbHVkZSBhbGwgaW52b2ljZXNcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIEdldCBzdGF0dXMtc3BlY2lmaWMgYWdncmVnYXRlc1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhaWRBZ2dyZWdhdGUgPSBhd2FpdCBwcmlzbWEuaW52b2ljZS5hZ2dyZWdhdGUoe1xuICAgICAgICAgICAgICAgICAgICBfc3VtOiB7IHRvdGFsOiB0cnVlIH0sXG4gICAgICAgICAgICAgICAgICAgIF9jb3VudDogeyBpZDogdHJ1ZSB9LFxuICAgICAgICAgICAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hvcElkOiBzaG9wLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiB7IGd0ZTogc3RhcnRPZkRheSwgbHRlOiBlbmRPZkRheSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAncGFpZCcsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBwZW5kaW5nQWdncmVnYXRlID0gYXdhaXQgcHJpc21hLmludm9pY2UuYWdncmVnYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgX3N1bTogeyB0b3RhbDogdHJ1ZSB9LFxuICAgICAgICAgICAgICAgICAgICBfY291bnQ6IHsgaWQ6IHRydWUgfSxcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3BJZDogc2hvcC5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogeyBndGU6IHN0YXJ0T2ZEYXksIGx0ZTogZW5kT2ZEYXkgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcGFydGlhbEFnZ3JlZ2F0ZSA9IGF3YWl0IHByaXNtYS5pbnZvaWNlLmFnZ3JlZ2F0ZSh7XG4gICAgICAgICAgICAgICAgICAgIF9zdW06IHsgdG90YWw6IHRydWUgfSxcbiAgICAgICAgICAgICAgICAgICAgX2NvdW50OiB7IGlkOiB0cnVlIH0sXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG9wSWQ6IHNob3AuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IHsgZ3RlOiBzdGFydE9mRGF5LCBsdGU6IGVuZE9mRGF5IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdwYXJ0aWFsJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIEdldCBkZXRhaWxlZCBpbnZvaWNlIGRhdGEgZm9yIHRoZSBzaG9wIChhbGwgc3RhdHVzZXMpXG4gICAgICAgICAgICAgICAgY29uc3QgaW52b2ljZXMgPSBhd2FpdCBwcmlzbWEuaW52b2ljZS5maW5kTWFueSh7XG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG9wSWQ6IHNob3AuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBndGU6IHN0YXJ0T2ZEYXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbHRlOiBlbmRPZkRheSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgc3RhdHVzIGZpbHRlciB0byBpbmNsdWRlIGFsbCBpbnZvaWNlc1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21lcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3Q6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2t1OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyQnk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogJ2Rlc2MnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHRvdGFsIHF1YW50aXR5IHNvbGRcbiAgICAgICAgICAgICAgICBjb25zdCB0b3RhbFF1YW50aXR5ID0gaW52b2ljZXMucmVkdWNlKCh0b3RhbCwgaW52b2ljZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG90YWwgKyBpbnZvaWNlLml0ZW1zLnJlZHVjZSgoaXRlbVRvdGFsLCBpdGVtKSA9PiBpdGVtVG90YWwgKyBpdGVtLnF1YW50aXR5LCAwKTtcbiAgICAgICAgICAgICAgICB9LCAwKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHNob3BJZDogc2hvcC5pZCxcbiAgICAgICAgICAgICAgICAgICAgc2hvcE5hbWU6IHNob3AubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246IHNob3AubG9jYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsU2FsZXM6IHNhbGVzQWdncmVnYXRlLl9zdW0udG90YWwgfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZJbnZvaWNlczogc2FsZXNBZ2dyZWdhdGUuX2NvdW50LmlkIHx8IDAsXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsUXVhbnRpdHlTb2xkOiB0b3RhbFF1YW50aXR5LFxuICAgICAgICAgICAgICAgICAgICBhdmVyYWdlVHJhbnNhY3Rpb25WYWx1ZTogc2FsZXNBZ2dyZWdhdGUuX2NvdW50LmlkID4gMCBcbiAgICAgICAgICAgICAgICAgICAgICAgID8gKHNhbGVzQWdncmVnYXRlLl9zdW0udG90YWwgfHwgMCkgLyBzYWxlc0FnZ3JlZ2F0ZS5fY291bnQuaWQgXG4gICAgICAgICAgICAgICAgICAgICAgICA6IDAsXG4gICAgICAgICAgICAgICAgICAgIC8vIFN0YXR1cyBicmVha2Rvd25cbiAgICAgICAgICAgICAgICAgICAgcGFpZFNhbGVzOiBwYWlkQWdncmVnYXRlLl9zdW0udG90YWwgfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgcGFpZEludm9pY2VzOiBwYWlkQWdncmVnYXRlLl9jb3VudC5pZCB8fCAwLFxuICAgICAgICAgICAgICAgICAgICBwZW5kaW5nU2FsZXM6IHBlbmRpbmdBZ2dyZWdhdGUuX3N1bS50b3RhbCB8fCAwLFxuICAgICAgICAgICAgICAgICAgICBwZW5kaW5nSW52b2ljZXM6IHBlbmRpbmdBZ2dyZWdhdGUuX2NvdW50LmlkIHx8IDAsXG4gICAgICAgICAgICAgICAgICAgIHBhcnRpYWxTYWxlczogcGFydGlhbEFnZ3JlZ2F0ZS5fc3VtLnRvdGFsIHx8IDAsXG4gICAgICAgICAgICAgICAgICAgIHBhcnRpYWxJbnZvaWNlczogcGFydGlhbEFnZ3JlZ2F0ZS5fY291bnQuaWQgfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgaW52b2ljZXM6IGludm9pY2VzXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gQ2FsY3VsYXRlIG92ZXJhbGwgdG90YWxzXG4gICAgICAgIGNvbnN0IG92ZXJhbGxUb3RhbHMgPSBzaG9wU2FsZXNEYXRhLnJlZHVjZShcbiAgICAgICAgICAgICh0b3RhbHMsIHNob3ApID0+ICh7XG4gICAgICAgICAgICAgICAgdG90YWxTYWxlczogdG90YWxzLnRvdGFsU2FsZXMgKyBzaG9wLnRvdGFsU2FsZXMsXG4gICAgICAgICAgICAgICAgdG90YWxJbnZvaWNlczogdG90YWxzLnRvdGFsSW52b2ljZXMgKyBzaG9wLm51bWJlck9mSW52b2ljZXMsXG4gICAgICAgICAgICAgICAgdG90YWxRdWFudGl0eTogdG90YWxzLnRvdGFsUXVhbnRpdHkgKyBzaG9wLnRvdGFsUXVhbnRpdHlTb2xkXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHsgdG90YWxTYWxlczogMCwgdG90YWxJbnZvaWNlczogMCwgdG90YWxRdWFudGl0eTogMCB9XG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICByZXBvcnREYXRlOiB0YXJnZXREYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXSxcbiAgICAgICAgICAgIHN1bW1hcnk6IHtcbiAgICAgICAgICAgICAgICBkYXRlOiB0YXJnZXREYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygnZW4tVVMnLCB7IFxuICAgICAgICAgICAgICAgICAgICB3ZWVrZGF5OiAnbG9uZycsIFxuICAgICAgICAgICAgICAgICAgICB5ZWFyOiAnbnVtZXJpYycsIFxuICAgICAgICAgICAgICAgICAgICBtb250aDogJ2xvbmcnLCBcbiAgICAgICAgICAgICAgICAgICAgZGF5OiAnbnVtZXJpYycgXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgdG90YWxTYWxlczogb3ZlcmFsbFRvdGFscy50b3RhbFNhbGVzLFxuICAgICAgICAgICAgICAgIHRvdGFsSW52b2ljZXM6IG92ZXJhbGxUb3RhbHMudG90YWxJbnZvaWNlcyxcbiAgICAgICAgICAgICAgICB0b3RhbFF1YW50aXR5U29sZDogb3ZlcmFsbFRvdGFscy50b3RhbFF1YW50aXR5LFxuICAgICAgICAgICAgICAgIG51bWJlck9mU2hvcHM6IHNob3BzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBhdmVyYWdlUGVyU2hvcDogc2hvcHMubGVuZ3RoID4gMCA/IG92ZXJhbGxUb3RhbHMudG90YWxTYWxlcyAvIHNob3BzLmxlbmd0aCA6IDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzaG9wRGF0YTogc2hvcFNhbGVzRGF0YSxcbiAgICAgICAgICAgIGdlbmVyYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgfSk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBkYWlseSBzYWxlcyByZXBvcnQ6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnRmFpbGVkIHRvIGZldGNoIGRhaWx5IHNhbGVzIHJlcG9ydCcgfSxcbiAgICAgICAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICAgICApO1xuICAgIH1cbn0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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