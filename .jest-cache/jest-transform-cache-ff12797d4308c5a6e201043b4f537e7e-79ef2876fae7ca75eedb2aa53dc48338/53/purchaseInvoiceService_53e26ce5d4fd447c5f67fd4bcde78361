f3802f91b17c38ddf62d511d92851970
"use strict";

/* istanbul ignore next */
function cov_1eke7ev5ge() {
  var path = "/Users/sachin/Documents/md-sports-/src/services/purchaseInvoiceService.ts";
  var hash = "dcb391ea2efd92ded866cc112656baa80db805af";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Users/sachin/Documents/md-sports-/src/services/purchaseInvoiceService.ts",
    statementMap: {
      "0": {
        start: {
          line: 2,
          column: 0
        },
        end: {
          line: 4,
          column: 3
        }
      },
      "1": {
        start: {
          line: 6,
          column: 4
        },
        end: {
          line: 9,
          column: 7
        }
      },
      "2": {
        start: {
          line: 6,
          column: 24
        },
        end: {
          line: 9,
          column: 7
        }
      },
      "3": {
        start: {
          line: 11,
          column: 0
        },
        end: {
          line: 18,
          column: 3
        }
      },
      "4": {
        start: {
          line: 13,
          column: 8
        },
        end: {
          line: 13,
          column: 38
        }
      },
      "5": {
        start: {
          line: 16,
          column: 8
        },
        end: {
          line: 16,
          column: 24
        }
      },
      "6": {
        start: {
          line: 19,
          column: 16
        },
        end: {
          line: 19,
          column: 41
        }
      },
      "7": {
        start: {
          line: 20,
          column: 12
        },
        end: {
          line: 20,
          column: 32
        }
      },
      "8": {
        start: {
          line: 23,
          column: 8
        },
        end: {
          line: 23,
          column: 29
        }
      },
      "9": {
        start: {
          line: 26,
          column: 8
        },
        end: {
          line: 36,
          column: 11
        }
      },
      "10": {
        start: {
          line: 39,
          column: 42
        },
        end: {
          line: 39,
          column: 46
        }
      },
      "11": {
        start: {
          line: 40,
          column: 8
        },
        end: {
          line: 67,
          column: 11
        }
      },
      "12": {
        start: {
          line: 41,
          column: 28
        },
        end: {
          line: 43,
          column: 14
        }
      },
      "13": {
        start: {
          line: 44,
          column: 12
        },
        end: {
          line: 53,
          column: 13
        }
      },
      "14": {
        start: {
          line: 45,
          column: 16
        },
        end: {
          line: 52,
          column: 19
        }
      },
      "15": {
        start: {
          line: 46,
          column: 45
        },
        end: {
          line: 51,
          column: 25
        }
      },
      "16": {
        start: {
          line: 54,
          column: 12
        },
        end: {
          line: 66,
          column: 15
        }
      },
      "17": {
        start: {
          line: 71,
          column: 32
        },
        end: {
          line: 73,
          column: 13
        }
      },
      "18": {
        start: {
          line: 72,
          column: 12
        },
        end: {
          line: 72,
          column: 52
        }
      },
      "19": {
        start: {
          line: 74,
          column: 8
        },
        end: {
          line: 77,
          column: 11
        }
      },
      "20": {
        start: {
          line: 80,
          column: 8
        },
        end: {
          line: 92,
          column: 11
        }
      },
      "21": {
        start: {
          line: 95,
          column: 8
        },
        end: {
          line: 95,
          column: 53
        }
      },
      "22": {
        start: {
          line: 98,
          column: 83
        },
        end: {
          line: 98,
          column: 90
        }
      },
      "23": {
        start: {
          line: 99,
          column: 21
        },
        end: {
          line: 99,
          column: 39
        }
      },
      "24": {
        start: {
          line: 100,
          column: 8
        },
        end: {
          line: 114,
          column: 11
        }
      },
      "25": {
        start: {
          line: 117,
          column: 8
        },
        end: {
          line: 130,
          column: 11
        }
      },
      "26": {
        start: {
          line: 133,
          column: 8
        },
        end: {
          line: 135,
          column: 11
        }
      },
      "27": {
        start: {
          line: 138,
          column: 8
        },
        end: {
          line: 151,
          column: 11
        }
      },
      "28": {
        start: {
          line: 140,
          column: 12
        },
        end: {
          line: 144,
          column: 15
        }
      },
      "29": {
        start: {
          line: 146,
          column: 12
        },
        end: {
          line: 150,
          column: 15
        }
      },
      "30": {
        start: {
          line: 154,
          column: 22
        },
        end: {
          line: 154,
          column: 24
        }
      },
      "31": {
        start: {
          line: 155,
          column: 8
        },
        end: {
          line: 157,
          column: 9
        }
      },
      "32": {
        start: {
          line: 156,
          column: 12
        },
        end: {
          line: 156,
          column: 50
        }
      },
      "33": {
        start: {
          line: 158,
          column: 8
        },
        end: {
          line: 160,
          column: 9
        }
      },
      "34": {
        start: {
          line: 159,
          column: 12
        },
        end: {
          line: 159,
          column: 42
        }
      },
      "35": {
        start: {
          line: 161,
          column: 8
        },
        end: {
          line: 169,
          column: 9
        }
      },
      "36": {
        start: {
          line: 162,
          column: 12
        },
        end: {
          line: 162,
          column: 33
        }
      },
      "37": {
        start: {
          line: 163,
          column: 12
        },
        end: {
          line: 165,
          column: 13
        }
      },
      "38": {
        start: {
          line: 164,
          column: 16
        },
        end: {
          line: 164,
          column: 56
        }
      },
      "39": {
        start: {
          line: 166,
          column: 12
        },
        end: {
          line: 168,
          column: 13
        }
      },
      "40": {
        start: {
          line: 167,
          column: 16
        },
        end: {
          line: 167,
          column: 54
        }
      },
      "41": {
        start: {
          line: 170,
          column: 8
        },
        end: {
          line: 185,
          column: 9
        }
      },
      "42": {
        start: {
          line: 171,
          column: 12
        },
        end: {
          line: 184,
          column: 14
        }
      },
      "43": {
        start: {
          line: 186,
          column: 8
        },
        end: {
          line: 199,
          column: 11
        }
      },
      "44": {
        start: {
          line: 202,
          column: 8
        },
        end: {
          line: 202,
          column: 98
        }
      },
      "45": {
        start: {
          line: 205,
          column: 17
        },
        end: {
          line: 205,
          column: 39
        }
      }
    },
    fnMap: {
      "0": {
        name: "_export",
        decl: {
          start: {
            line: 5,
            column: 9
          },
          end: {
            line: 5,
            column: 16
          }
        },
        loc: {
          start: {
            line: 5,
            column: 30
          },
          end: {
            line: 10,
            column: 1
          }
        },
        line: 5
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 12,
            column: 28
          },
          end: {
            line: 12,
            column: 29
          }
        },
        loc: {
          start: {
            line: 12,
            column: 39
          },
          end: {
            line: 14,
            column: 5
          }
        },
        line: 12
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 15,
            column: 13
          },
          end: {
            line: 15,
            column: 14
          }
        },
        loc: {
          start: {
            line: 15,
            column: 24
          },
          end: {
            line: 17,
            column: 5
          }
        },
        line: 15
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 22,
            column: 4
          },
          end: {
            line: 22,
            column: 5
          }
        },
        loc: {
          start: {
            line: 22,
            column: 17
          },
          end: {
            line: 24,
            column: 5
          }
        },
        line: 22
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 25,
            column: 4
          },
          end: {
            line: 25,
            column: 5
          }
        },
        loc: {
          start: {
            line: 25,
            column: 38
          },
          end: {
            line: 37,
            column: 5
          }
        },
        line: 25
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 38,
            column: 4
          },
          end: {
            line: 38,
            column: 5
          }
        },
        loc: {
          start: {
            line: 38,
            column: 47
          },
          end: {
            line: 68,
            column: 5
          }
        },
        line: 38
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 40,
            column: 46
          },
          end: {
            line: 40,
            column: 47
          }
        },
        loc: {
          start: {
            line: 40,
            column: 58
          },
          end: {
            line: 67,
            column: 9
          }
        },
        line: 40
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 46,
            column: 36
          },
          end: {
            line: 46,
            column: 37
          }
        },
        loc: {
          start: {
            line: 46,
            column: 45
          },
          end: {
            line: 51,
            column: 25
          }
        },
        line: 46
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 69,
            column: 4
          },
          end: {
            line: 69,
            column: 5
          }
        },
        loc: {
          start: {
            line: 69,
            column: 54
          },
          end: {
            line: 78,
            column: 5
          }
        },
        line: 69
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 71,
            column: 50
          },
          end: {
            line: 71,
            column: 51
          }
        },
        loc: {
          start: {
            line: 71,
            column: 63
          },
          end: {
            line: 73,
            column: 9
          }
        },
        line: 71
      },
      "10": {
        name: "(anonymous_10)",
        decl: {
          start: {
            line: 79,
            column: 4
          },
          end: {
            line: 79,
            column: 5
          }
        },
        loc: {
          start: {
            line: 79,
            column: 37
          },
          end: {
            line: 93,
            column: 5
          }
        },
        line: 79
      },
      "11": {
        name: "(anonymous_11)",
        decl: {
          start: {
            line: 94,
            column: 4
          },
          end: {
            line: 94,
            column: 5
          }
        },
        loc: {
          start: {
            line: 94,
            column: 44
          },
          end: {
            line: 96,
            column: 5
          }
        },
        line: 94
      },
      "12": {
        name: "(anonymous_12)",
        decl: {
          start: {
            line: 97,
            column: 4
          },
          end: {
            line: 97,
            column: 5
          }
        },
        loc: {
          start: {
            line: 97,
            column: 44
          },
          end: {
            line: 115,
            column: 5
          }
        },
        line: 97
      },
      "13": {
        name: "(anonymous_13)",
        decl: {
          start: {
            line: 116,
            column: 4
          },
          end: {
            line: 116,
            column: 5
          }
        },
        loc: {
          start: {
            line: 116,
            column: 42
          },
          end: {
            line: 131,
            column: 5
          }
        },
        line: 116
      },
      "14": {
        name: "(anonymous_14)",
        decl: {
          start: {
            line: 132,
            column: 4
          },
          end: {
            line: 132,
            column: 5
          }
        },
        loc: {
          start: {
            line: 132,
            column: 50
          },
          end: {
            line: 136,
            column: 5
          }
        },
        line: 132
      },
      "15": {
        name: "(anonymous_15)",
        decl: {
          start: {
            line: 137,
            column: 4
          },
          end: {
            line: 137,
            column: 5
          }
        },
        loc: {
          start: {
            line: 137,
            column: 36
          },
          end: {
            line: 152,
            column: 5
          }
        },
        line: 137
      },
      "16": {
        name: "(anonymous_16)",
        decl: {
          start: {
            line: 138,
            column: 46
          },
          end: {
            line: 138,
            column: 47
          }
        },
        loc: {
          start: {
            line: 138,
            column: 58
          },
          end: {
            line: 151,
            column: 9
          }
        },
        line: 138
      },
      "17": {
        name: "(anonymous_17)",
        decl: {
          start: {
            line: 153,
            column: 4
          },
          end: {
            line: 153,
            column: 5
          }
        },
        loc: {
          start: {
            line: 153,
            column: 42
          },
          end: {
            line: 200,
            column: 5
          }
        },
        line: 153
      },
      "18": {
        name: "(anonymous_18)",
        decl: {
          start: {
            line: 201,
            column: 4
          },
          end: {
            line: 201,
            column: 5
          }
        },
        loc: {
          start: {
            line: 201,
            column: 37
          },
          end: {
            line: 203,
            column: 5
          }
        },
        line: 201
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 44,
            column: 12
          },
          end: {
            line: 53,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 44,
            column: 12
          },
          end: {
            line: 53,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 44
      },
      "1": {
        loc: {
          start: {
            line: 44,
            column: 16
          },
          end: {
            line: 44,
            column: 41
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 44,
            column: 16
          },
          end: {
            line: 44,
            column: 21
          }
        }, {
          start: {
            line: 44,
            column: 25
          },
          end: {
            line: 44,
            column: 41
          }
        }],
        line: 44
      },
      "2": {
        loc: {
          start: {
            line: 97,
            column: 30
          },
          end: {
            line: 97,
            column: 42
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 97,
            column: 40
          },
          end: {
            line: 97,
            column: 42
          }
        }],
        line: 97
      },
      "3": {
        loc: {
          start: {
            line: 98,
            column: 16
          },
          end: {
            line: 98,
            column: 24
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 98,
            column: 23
          },
          end: {
            line: 98,
            column: 24
          }
        }],
        line: 98
      },
      "4": {
        loc: {
          start: {
            line: 98,
            column: 26
          },
          end: {
            line: 98,
            column: 36
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 98,
            column: 34
          },
          end: {
            line: 98,
            column: 36
          }
        }],
        line: 98
      },
      "5": {
        loc: {
          start: {
            line: 98,
            column: 38
          },
          end: {
            line: 98,
            column: 58
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 98,
            column: 47
          },
          end: {
            line: 98,
            column: 58
          }
        }],
        line: 98
      },
      "6": {
        loc: {
          start: {
            line: 98,
            column: 60
          },
          end: {
            line: 98,
            column: 78
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 98,
            column: 72
          },
          end: {
            line: 98,
            column: 78
          }
        }],
        line: 98
      },
      "7": {
        loc: {
          start: {
            line: 155,
            column: 8
          },
          end: {
            line: 157,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 155,
            column: 8
          },
          end: {
            line: 157,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 155
      },
      "8": {
        loc: {
          start: {
            line: 158,
            column: 8
          },
          end: {
            line: 160,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 158,
            column: 8
          },
          end: {
            line: 160,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 158
      },
      "9": {
        loc: {
          start: {
            line: 161,
            column: 8
          },
          end: {
            line: 169,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 161,
            column: 8
          },
          end: {
            line: 169,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 161
      },
      "10": {
        loc: {
          start: {
            line: 161,
            column: 12
          },
          end: {
            line: 161,
            column: 48
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 161,
            column: 12
          },
          end: {
            line: 161,
            column: 29
          }
        }, {
          start: {
            line: 161,
            column: 33
          },
          end: {
            line: 161,
            column: 48
          }
        }],
        line: 161
      },
      "11": {
        loc: {
          start: {
            line: 163,
            column: 12
          },
          end: {
            line: 165,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 163,
            column: 12
          },
          end: {
            line: 165,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 163
      },
      "12": {
        loc: {
          start: {
            line: 166,
            column: 12
          },
          end: {
            line: 168,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 166,
            column: 12
          },
          end: {
            line: 168,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 166
      },
      "13": {
        loc: {
          start: {
            line: 170,
            column: 8
          },
          end: {
            line: 185,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 170,
            column: 8
          },
          end: {
            line: 185,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 170
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0],
      "3": [0],
      "4": [0],
      "5": [0],
      "6": [0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0, 0],
      "13": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["/Users/sachin/Documents/md-sports-/src/services/purchaseInvoiceService.ts"],
      sourcesContent: ["import { PrismaClient, PurchaseInvoiceStatus } from '@prisma/client';\nimport { db } from '@/lib/db';\n\ninterface CreatePurchaseInvoiceData {\n  invoiceNumber: string;\n  supplierId: number;\n  totalAmount: number;\n  status: PurchaseInvoiceStatus;\n  notes?: string;\n  shopId?: number;\n}\n\ninterface CreatePurchaseInvoiceWithItemsData extends CreatePurchaseInvoiceData {\n  items: {\n    productId: number;\n    quantity: number;\n    price: number;\n  }[];\n}\n\ninterface UpdatePurchaseInvoiceData {\n  invoiceNumber?: string;\n  supplierId?: number;\n  totalAmount?: number;\n  status?: PurchaseInvoiceStatus;\n  notes?: string;\n}\n\ninterface SearchFilters {\n  supplierId?: number;\n  status?: PurchaseInvoiceStatus;\n  startDate?: Date;\n  endDate?: Date;\n  search?: string;\n}\n\ninterface GetPurchaseInvoicesOptions {\n  page?: number;\n  limit?: number;\n  sortBy?: string;\n  sortOrder?: 'asc' | 'desc';\n}\n\nexport class PurchaseInvoiceService {\n  private prisma: PrismaClient;\n\n  constructor() {\n    this.prisma = db;\n  }\n\n  async createPurchaseInvoice(data: CreatePurchaseInvoiceData) {\n    return await this.prisma.purchaseInvoice.create({\n      data,\n      include: {\n        supplier: true,\n        items: {\n          include: {\n            product: true\n          }\n        }\n      }\n    });\n  }\n\n  async createPurchaseInvoiceWithItems(data: CreatePurchaseInvoiceWithItemsData) {\n    const { items, ...invoiceData } = data;\n    \n    return await this.prisma.$transaction(async (tx) => {\n      const invoice = await tx.purchaseInvoice.create({\n        data: invoiceData\n      });\n\n      if (items && items.length > 0) {\n        await tx.purchaseInvoiceItem.createMany({\n          data: items.map(item => ({\n            purchaseInvoiceId: invoice.id,\n            productId: item.productId,\n            quantity: item.quantity,\n            price: item.price\n          }))\n        });\n      }\n\n      return await tx.purchaseInvoice.findUnique({\n        where: { id: invoice.id },\n        include: {\n          supplier: true,\n          items: {\n            include: {\n              product: true\n            }\n          }\n        }\n      });\n    });\n  }\n\n  async createPurchaseInvoiceWithCalculations(data: CreatePurchaseInvoiceWithItemsData) {\n    // Calculate total from items\n    const calculatedTotal = data.items.reduce((sum, item) => {\n      return sum + (item.quantity * item.price);\n    }, 0);\n\n    return await this.createPurchaseInvoiceWithItems({\n      ...data,\n      totalAmount: calculatedTotal\n    });\n  }\n\n  async getPurchaseInvoiceById(id: number) {\n    return await this.prisma.purchaseInvoice.findUnique({\n      where: { id },\n      include: {\n        supplier: true,\n        items: {\n          include: {\n            product: true\n          }\n        }\n      }\n    });\n  }\n\n  async getPurchaseInvoiceWithDetails(id: number) {\n    return await this.getPurchaseInvoiceById(id);\n  }\n\n  async getPurchaseInvoices(options: GetPurchaseInvoicesOptions = {}) {\n    const { page = 1, limit = 10, sortBy = 'createdAt', sortOrder = 'desc' } = options;\n    const skip = (page - 1) * limit;\n\n    return await this.prisma.purchaseInvoice.findMany({\n      skip,\n      take: limit,\n      orderBy: {\n        [sortBy]: sortOrder\n      },\n      include: {\n        supplier: true,\n        items: {\n          include: {\n            product: true\n          }\n        }\n      }\n    });\n  }\n\n  async updatePurchaseInvoice(id: number, data: UpdatePurchaseInvoiceData) {\n    return await this.prisma.purchaseInvoice.update({\n      where: { id },\n      data,\n      include: {\n        supplier: true,\n        items: {\n          include: {\n            product: true\n          }\n        }\n      }\n    });\n  }\n\n  async updatePurchaseInvoiceStatus(id: number, status: PurchaseInvoiceStatus) {\n    return await this.updatePurchaseInvoice(id, { status });\n  }\n\n  async deletePurchaseInvoice(id: number) {\n    return await this.prisma.$transaction(async (tx) => {\n      // Delete related items first\n      await tx.purchaseInvoiceItem.deleteMany({\n        where: { purchaseInvoiceId: id }\n      });\n\n      // Delete the invoice\n      return await tx.purchaseInvoice.delete({\n        where: { id }\n      });\n    });\n  }\n\n  async searchPurchaseInvoices(filters: SearchFilters) {\n    const where: any = {};\n\n    if (filters.supplierId) {\n      where.supplierId = filters.supplierId;\n    }\n\n    if (filters.status) {\n      where.status = filters.status;\n    }\n\n    if (filters.startDate || filters.endDate) {\n      where.createdAt = {};\n      if (filters.startDate) {\n        where.createdAt.gte = filters.startDate;\n      }\n      if (filters.endDate) {\n        where.createdAt.lte = filters.endDate;\n      }\n    }\n\n    if (filters.search) {\n      where.OR = [\n        {\n          invoiceNumber: {\n            contains: filters.search,\n            mode: 'insensitive'\n          }\n        },\n        {\n          notes: {\n            contains: filters.search,\n            mode: 'insensitive'\n          }\n        }\n      ];\n    }\n\n    return await this.prisma.purchaseInvoice.findMany({\n      where,\n      include: {\n        supplier: true,\n        items: {\n          include: {\n            product: true\n          }\n        }\n      },\n      orderBy: {\n        createdAt: 'desc'\n      }\n    });\n  }\n\n  async approvePurchaseInvoice(id: number) {\n    return await this.updatePurchaseInvoiceStatus(id, PurchaseInvoiceStatus.APPROVED);\n  }\n}\n\nexport default PurchaseInvoiceService;"],
      names: ["PurchaseInvoiceService", "constructor", "prisma", "db", "createPurchaseInvoice", "data", "purchaseInvoice", "create", "include", "supplier", "items", "product", "createPurchaseInvoiceWithItems", "invoiceData", "$transaction", "tx", "invoice", "length", "purchaseInvoiceItem", "createMany", "map", "item", "purchaseInvoiceId", "id", "productId", "quantity", "price", "findUnique", "where", "createPurchaseInvoiceWithCalculations", "calculatedTotal", "reduce", "sum", "totalAmount", "getPurchaseInvoiceById", "getPurchaseInvoiceWithDetails", "getPurchaseInvoices", "options", "page", "limit", "sortBy", "sortOrder", "skip", "findMany", "take", "orderBy", "updatePurchaseInvoice", "update", "updatePurchaseInvoiceStatus", "status", "deletePurchaseInvoice", "deleteMany", "delete", "searchPurchaseInvoices", "filters", "supplierId", "startDate", "endDate", "createdAt", "gte", "lte", "search", "OR", "invoiceNumber", "contains", "mode", "notes", "approvePurchaseInvoice", "PurchaseInvoiceStatus", "APPROVED"],
      mappings: ";;;;;;;;;;;IA2CaA,sBAAsB;eAAtBA;;IAqMb,OAAsC;eAAtC;;;wBAhPoD;oBACjC;AA0CZ,MAAMA;IAGXC,aAAc;QACZ,IAAI,CAACC,MAAM,GAAGC,MAAE;IAClB;IAEA,MAAMC,sBAAsBC,IAA+B,EAAE;QAC3D,OAAO,MAAM,IAAI,CAACH,MAAM,CAACI,eAAe,CAACC,MAAM,CAAC;YAC9CF;YACAG,SAAS;gBACPC,UAAU;gBACVC,OAAO;oBACLF,SAAS;wBACPG,SAAS;oBACX;gBACF;YACF;QACF;IACF;IAEA,MAAMC,+BAA+BP,IAAwC,EAAE;QAC7E,MAAM,EAAEK,KAAK,EAAE,GAAGG,aAAa,GAAGR;QAElC,OAAO,MAAM,IAAI,CAACH,MAAM,CAACY,YAAY,CAAC,OAAOC;YAC3C,MAAMC,UAAU,MAAMD,GAAGT,eAAe,CAACC,MAAM,CAAC;gBAC9CF,MAAMQ;YACR;YAEA,IAAIH,SAASA,MAAMO,MAAM,GAAG,GAAG;gBAC7B,MAAMF,GAAGG,mBAAmB,CAACC,UAAU,CAAC;oBACtCd,MAAMK,MAAMU,GAAG,CAACC,CAAAA,OAAS,CAAA;4BACvBC,mBAAmBN,QAAQO,EAAE;4BAC7BC,WAAWH,KAAKG,SAAS;4BACzBC,UAAUJ,KAAKI,QAAQ;4BACvBC,OAAOL,KAAKK,KAAK;wBACnB,CAAA;gBACF;YACF;YAEA,OAAO,MAAMX,GAAGT,eAAe,CAACqB,UAAU,CAAC;gBACzCC,OAAO;oBAAEL,IAAIP,QAAQO,EAAE;gBAAC;gBACxBf,SAAS;oBACPC,UAAU;oBACVC,OAAO;wBACLF,SAAS;4BACPG,SAAS;wBACX;oBACF;gBACF;YACF;QACF;IACF;IAEA,MAAMkB,sCAAsCxB,IAAwC,EAAE;QACpF,6BAA6B;QAC7B,MAAMyB,kBAAkBzB,KAAKK,KAAK,CAACqB,MAAM,CAAC,CAACC,KAAKX;YAC9C,OAAOW,MAAOX,KAAKI,QAAQ,GAAGJ,KAAKK,KAAK;QAC1C,GAAG;QAEH,OAAO,MAAM,IAAI,CAACd,8BAA8B,CAAC;YAC/C,GAAGP,IAAI;YACP4B,aAAaH;QACf;IACF;IAEA,MAAMI,uBAAuBX,EAAU,EAAE;QACvC,OAAO,MAAM,IAAI,CAACrB,MAAM,CAACI,eAAe,CAACqB,UAAU,CAAC;YAClDC,OAAO;gBAAEL;YAAG;YACZf,SAAS;gBACPC,UAAU;gBACVC,OAAO;oBACLF,SAAS;wBACPG,SAAS;oBACX;gBACF;YACF;QACF;IACF;IAEA,MAAMwB,8BAA8BZ,EAAU,EAAE;QAC9C,OAAO,MAAM,IAAI,CAACW,sBAAsB,CAACX;IAC3C;IAEA,MAAMa,oBAAoBC,UAAsC,CAAC,CAAC,EAAE;QAClE,MAAM,EAAEC,OAAO,CAAC,EAAEC,QAAQ,EAAE,EAAEC,SAAS,WAAW,EAAEC,YAAY,MAAM,EAAE,GAAGJ;QAC3E,MAAMK,OAAO,AAACJ,CAAAA,OAAO,CAAA,IAAKC;QAE1B,OAAO,MAAM,IAAI,CAACrC,MAAM,CAACI,eAAe,CAACqC,QAAQ,CAAC;YAChDD;YACAE,MAAML;YACNM,SAAS;gBACP,CAACL,OAAO,EAAEC;YACZ;YACAjC,SAAS;gBACPC,UAAU;gBACVC,OAAO;oBACLF,SAAS;wBACPG,SAAS;oBACX;gBACF;YACF;QACF;IACF;IAEA,MAAMmC,sBAAsBvB,EAAU,EAAElB,IAA+B,EAAE;QACvE,OAAO,MAAM,IAAI,CAACH,MAAM,CAACI,eAAe,CAACyC,MAAM,CAAC;YAC9CnB,OAAO;gBAAEL;YAAG;YACZlB;YACAG,SAAS;gBACPC,UAAU;gBACVC,OAAO;oBACLF,SAAS;wBACPG,SAAS;oBACX;gBACF;YACF;QACF;IACF;IAEA,MAAMqC,4BAA4BzB,EAAU,EAAE0B,MAA6B,EAAE;QAC3E,OAAO,MAAM,IAAI,CAACH,qBAAqB,CAACvB,IAAI;YAAE0B;QAAO;IACvD;IAEA,MAAMC,sBAAsB3B,EAAU,EAAE;QACtC,OAAO,MAAM,IAAI,CAACrB,MAAM,CAACY,YAAY,CAAC,OAAOC;YAC3C,6BAA6B;YAC7B,MAAMA,GAAGG,mBAAmB,CAACiC,UAAU,CAAC;gBACtCvB,OAAO;oBAAEN,mBAAmBC;gBAAG;YACjC;YAEA,qBAAqB;YACrB,OAAO,MAAMR,GAAGT,eAAe,CAAC8C,MAAM,CAAC;gBACrCxB,OAAO;oBAAEL;gBAAG;YACd;QACF;IACF;IAEA,MAAM8B,uBAAuBC,OAAsB,EAAE;QACnD,MAAM1B,QAAa,CAAC;QAEpB,IAAI0B,QAAQC,UAAU,EAAE;YACtB3B,MAAM2B,UAAU,GAAGD,QAAQC,UAAU;QACvC;QAEA,IAAID,QAAQL,MAAM,EAAE;YAClBrB,MAAMqB,MAAM,GAAGK,QAAQL,MAAM;QAC/B;QAEA,IAAIK,QAAQE,SAAS,IAAIF,QAAQG,OAAO,EAAE;YACxC7B,MAAM8B,SAAS,GAAG,CAAC;YACnB,IAAIJ,QAAQE,SAAS,EAAE;gBACrB5B,MAAM8B,SAAS,CAACC,GAAG,GAAGL,QAAQE,SAAS;YACzC;YACA,IAAIF,QAAQG,OAAO,EAAE;gBACnB7B,MAAM8B,SAAS,CAACE,GAAG,GAAGN,QAAQG,OAAO;YACvC;QACF;QAEA,IAAIH,QAAQO,MAAM,EAAE;YAClBjC,MAAMkC,EAAE,GAAG;gBACT;oBACEC,eAAe;wBACbC,UAAUV,QAAQO,MAAM;wBACxBI,MAAM;oBACR;gBACF;gBACA;oBACEC,OAAO;wBACLF,UAAUV,QAAQO,MAAM;wBACxBI,MAAM;oBACR;gBACF;aACD;QACH;QAEA,OAAO,MAAM,IAAI,CAAC/D,MAAM,CAACI,eAAe,CAACqC,QAAQ,CAAC;YAChDf;YACApB,SAAS;gBACPC,UAAU;gBACVC,OAAO;oBACLF,SAAS;wBACPG,SAAS;oBACX;gBACF;YACF;YACAkC,SAAS;gBACPa,WAAW;YACb;QACF;IACF;IAEA,MAAMS,uBAAuB5C,EAAU,EAAE;QACvC,OAAO,MAAM,IAAI,CAACyB,2BAA2B,CAACzB,IAAI6C,6BAAqB,CAACC,QAAQ;IAClF;AACF;MAEA,WAAerE"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "dcb391ea2efd92ded866cc112656baa80db805af"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1eke7ev5ge = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1eke7ev5ge();
cov_1eke7ev5ge().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
function _export(target, all) {
  /* istanbul ignore next */
  cov_1eke7ev5ge().f[0]++;
  cov_1eke7ev5ge().s[1]++;
  for (var name in all) {
    /* istanbul ignore next */
    cov_1eke7ev5ge().s[2]++;
    Object.defineProperty(target, name, {
      enumerable: true,
      get: all[name]
    });
  }
}
/* istanbul ignore next */
cov_1eke7ev5ge().s[3]++;
_export(exports, {
  PurchaseInvoiceService: function () {
    /* istanbul ignore next */
    cov_1eke7ev5ge().f[1]++;
    cov_1eke7ev5ge().s[4]++;
    return PurchaseInvoiceService;
  },
  default: function () {
    /* istanbul ignore next */
    cov_1eke7ev5ge().f[2]++;
    cov_1eke7ev5ge().s[5]++;
    return _default;
  }
});
const _client =
/* istanbul ignore next */
(cov_1eke7ev5ge().s[6]++, require("@prisma/client"));
const _db =
/* istanbul ignore next */
(cov_1eke7ev5ge().s[7]++, require("../lib/db"));
class PurchaseInvoiceService {
  constructor() {
    /* istanbul ignore next */
    cov_1eke7ev5ge().f[3]++;
    cov_1eke7ev5ge().s[8]++;
    this.prisma = _db.db;
  }
  async createPurchaseInvoice(data) {
    /* istanbul ignore next */
    cov_1eke7ev5ge().f[4]++;
    cov_1eke7ev5ge().s[9]++;
    return await this.prisma.purchaseInvoice.create({
      data,
      include: {
        supplier: true,
        items: {
          include: {
            product: true
          }
        }
      }
    });
  }
  async createPurchaseInvoiceWithItems(data) {
    /* istanbul ignore next */
    cov_1eke7ev5ge().f[5]++;
    const {
      items,
      ...invoiceData
    } =
    /* istanbul ignore next */
    (cov_1eke7ev5ge().s[10]++, data);
    /* istanbul ignore next */
    cov_1eke7ev5ge().s[11]++;
    return await this.prisma.$transaction(async tx => {
      /* istanbul ignore next */
      cov_1eke7ev5ge().f[6]++;
      const invoice =
      /* istanbul ignore next */
      (cov_1eke7ev5ge().s[12]++, await tx.purchaseInvoice.create({
        data: invoiceData
      }));
      /* istanbul ignore next */
      cov_1eke7ev5ge().s[13]++;
      if (
      /* istanbul ignore next */
      (cov_1eke7ev5ge().b[1][0]++, items) &&
      /* istanbul ignore next */
      (cov_1eke7ev5ge().b[1][1]++, items.length > 0)) {
        /* istanbul ignore next */
        cov_1eke7ev5ge().b[0][0]++;
        cov_1eke7ev5ge().s[14]++;
        await tx.purchaseInvoiceItem.createMany({
          data: items.map(item => {
            /* istanbul ignore next */
            cov_1eke7ev5ge().f[7]++;
            cov_1eke7ev5ge().s[15]++;
            return {
              purchaseInvoiceId: invoice.id,
              productId: item.productId,
              quantity: item.quantity,
              price: item.price
            };
          })
        });
      } else
      /* istanbul ignore next */
      {
        cov_1eke7ev5ge().b[0][1]++;
      }
      cov_1eke7ev5ge().s[16]++;
      return await tx.purchaseInvoice.findUnique({
        where: {
          id: invoice.id
        },
        include: {
          supplier: true,
          items: {
            include: {
              product: true
            }
          }
        }
      });
    });
  }
  async createPurchaseInvoiceWithCalculations(data) {
    /* istanbul ignore next */
    cov_1eke7ev5ge().f[8]++;
    // Calculate total from items
    const calculatedTotal =
    /* istanbul ignore next */
    (cov_1eke7ev5ge().s[17]++, data.items.reduce((sum, item) => {
      /* istanbul ignore next */
      cov_1eke7ev5ge().f[9]++;
      cov_1eke7ev5ge().s[18]++;
      return sum + item.quantity * item.price;
    }, 0));
    /* istanbul ignore next */
    cov_1eke7ev5ge().s[19]++;
    return await this.createPurchaseInvoiceWithItems({
      ...data,
      totalAmount: calculatedTotal
    });
  }
  async getPurchaseInvoiceById(id) {
    /* istanbul ignore next */
    cov_1eke7ev5ge().f[10]++;
    cov_1eke7ev5ge().s[20]++;
    return await this.prisma.purchaseInvoice.findUnique({
      where: {
        id
      },
      include: {
        supplier: true,
        items: {
          include: {
            product: true
          }
        }
      }
    });
  }
  async getPurchaseInvoiceWithDetails(id) {
    /* istanbul ignore next */
    cov_1eke7ev5ge().f[11]++;
    cov_1eke7ev5ge().s[21]++;
    return await this.getPurchaseInvoiceById(id);
  }
  async getPurchaseInvoices(options =
  /* istanbul ignore next */
  (cov_1eke7ev5ge().b[2][0]++, {})) {
    /* istanbul ignore next */
    cov_1eke7ev5ge().f[12]++;
    const {
      page =
      /* istanbul ignore next */
      (cov_1eke7ev5ge().b[3][0]++, 1),
      limit =
      /* istanbul ignore next */
      (cov_1eke7ev5ge().b[4][0]++, 10),
      sortBy =
      /* istanbul ignore next */
      (cov_1eke7ev5ge().b[5][0]++, "createdAt"),
      sortOrder =
      /* istanbul ignore next */
      (cov_1eke7ev5ge().b[6][0]++, "desc")
    } =
    /* istanbul ignore next */
    (cov_1eke7ev5ge().s[22]++, options);
    const skip =
    /* istanbul ignore next */
    (cov_1eke7ev5ge().s[23]++, (page - 1) * limit);
    /* istanbul ignore next */
    cov_1eke7ev5ge().s[24]++;
    return await this.prisma.purchaseInvoice.findMany({
      skip,
      take: limit,
      orderBy: {
        [sortBy]: sortOrder
      },
      include: {
        supplier: true,
        items: {
          include: {
            product: true
          }
        }
      }
    });
  }
  async updatePurchaseInvoice(id, data) {
    /* istanbul ignore next */
    cov_1eke7ev5ge().f[13]++;
    cov_1eke7ev5ge().s[25]++;
    return await this.prisma.purchaseInvoice.update({
      where: {
        id
      },
      data,
      include: {
        supplier: true,
        items: {
          include: {
            product: true
          }
        }
      }
    });
  }
  async updatePurchaseInvoiceStatus(id, status) {
    /* istanbul ignore next */
    cov_1eke7ev5ge().f[14]++;
    cov_1eke7ev5ge().s[26]++;
    return await this.updatePurchaseInvoice(id, {
      status
    });
  }
  async deletePurchaseInvoice(id) {
    /* istanbul ignore next */
    cov_1eke7ev5ge().f[15]++;
    cov_1eke7ev5ge().s[27]++;
    return await this.prisma.$transaction(async tx => {
      /* istanbul ignore next */
      cov_1eke7ev5ge().f[16]++;
      cov_1eke7ev5ge().s[28]++;
      // Delete related items first
      await tx.purchaseInvoiceItem.deleteMany({
        where: {
          purchaseInvoiceId: id
        }
      });
      // Delete the invoice
      /* istanbul ignore next */
      cov_1eke7ev5ge().s[29]++;
      return await tx.purchaseInvoice.delete({
        where: {
          id
        }
      });
    });
  }
  async searchPurchaseInvoices(filters) {
    /* istanbul ignore next */
    cov_1eke7ev5ge().f[17]++;
    const where =
    /* istanbul ignore next */
    (cov_1eke7ev5ge().s[30]++, {});
    /* istanbul ignore next */
    cov_1eke7ev5ge().s[31]++;
    if (filters.supplierId) {
      /* istanbul ignore next */
      cov_1eke7ev5ge().b[7][0]++;
      cov_1eke7ev5ge().s[32]++;
      where.supplierId = filters.supplierId;
    } else
    /* istanbul ignore next */
    {
      cov_1eke7ev5ge().b[7][1]++;
    }
    cov_1eke7ev5ge().s[33]++;
    if (filters.status) {
      /* istanbul ignore next */
      cov_1eke7ev5ge().b[8][0]++;
      cov_1eke7ev5ge().s[34]++;
      where.status = filters.status;
    } else
    /* istanbul ignore next */
    {
      cov_1eke7ev5ge().b[8][1]++;
    }
    cov_1eke7ev5ge().s[35]++;
    if (
    /* istanbul ignore next */
    (cov_1eke7ev5ge().b[10][0]++, filters.startDate) ||
    /* istanbul ignore next */
    (cov_1eke7ev5ge().b[10][1]++, filters.endDate)) {
      /* istanbul ignore next */
      cov_1eke7ev5ge().b[9][0]++;
      cov_1eke7ev5ge().s[36]++;
      where.createdAt = {};
      /* istanbul ignore next */
      cov_1eke7ev5ge().s[37]++;
      if (filters.startDate) {
        /* istanbul ignore next */
        cov_1eke7ev5ge().b[11][0]++;
        cov_1eke7ev5ge().s[38]++;
        where.createdAt.gte = filters.startDate;
      } else
      /* istanbul ignore next */
      {
        cov_1eke7ev5ge().b[11][1]++;
      }
      cov_1eke7ev5ge().s[39]++;
      if (filters.endDate) {
        /* istanbul ignore next */
        cov_1eke7ev5ge().b[12][0]++;
        cov_1eke7ev5ge().s[40]++;
        where.createdAt.lte = filters.endDate;
      } else
      /* istanbul ignore next */
      {
        cov_1eke7ev5ge().b[12][1]++;
      }
    } else
    /* istanbul ignore next */
    {
      cov_1eke7ev5ge().b[9][1]++;
    }
    cov_1eke7ev5ge().s[41]++;
    if (filters.search) {
      /* istanbul ignore next */
      cov_1eke7ev5ge().b[13][0]++;
      cov_1eke7ev5ge().s[42]++;
      where.OR = [{
        invoiceNumber: {
          contains: filters.search,
          mode: "insensitive"
        }
      }, {
        notes: {
          contains: filters.search,
          mode: "insensitive"
        }
      }];
    } else
    /* istanbul ignore next */
    {
      cov_1eke7ev5ge().b[13][1]++;
    }
    cov_1eke7ev5ge().s[43]++;
    return await this.prisma.purchaseInvoice.findMany({
      where,
      include: {
        supplier: true,
        items: {
          include: {
            product: true
          }
        }
      },
      orderBy: {
        createdAt: "desc"
      }
    });
  }
  async approvePurchaseInvoice(id) {
    /* istanbul ignore next */
    cov_1eke7ev5ge().f[18]++;
    cov_1eke7ev5ge().s[44]++;
    return await this.updatePurchaseInvoiceStatus(id, _client.PurchaseInvoiceStatus.APPROVED);
  }
}
const _default =
/* istanbul ignore next */
(cov_1eke7ev5ge().s[45]++, PurchaseInvoiceService);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQdXJjaGFzZUludm9pY2VTZXJ2aWNlIiwiY292XzFla2U3ZXY1Z2UiLCJmIiwicyIsImRlZmF1bHQiLCJfZGVmYXVsdCIsImNvbnN0cnVjdG9yIiwicHJpc21hIiwiX2RiIiwiZGIiLCJjcmVhdGVQdXJjaGFzZUludm9pY2UiLCJkYXRhIiwicHVyY2hhc2VJbnZvaWNlIiwiY3JlYXRlIiwiaW5jbHVkZSIsInN1cHBsaWVyIiwiaXRlbXMiLCJwcm9kdWN0IiwiY3JlYXRlUHVyY2hhc2VJbnZvaWNlV2l0aEl0ZW1zIiwiaW52b2ljZURhdGEiLCIkdHJhbnNhY3Rpb24iLCJ0eCIsImludm9pY2UiLCJiIiwibGVuZ3RoIiwicHVyY2hhc2VJbnZvaWNlSXRlbSIsImNyZWF0ZU1hbnkiLCJtYXAiLCJpdGVtIiwicHVyY2hhc2VJbnZvaWNlSWQiLCJpZCIsInByb2R1Y3RJZCIsInF1YW50aXR5IiwicHJpY2UiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJjcmVhdGVQdXJjaGFzZUludm9pY2VXaXRoQ2FsY3VsYXRpb25zIiwiY2FsY3VsYXRlZFRvdGFsIiwicmVkdWNlIiwic3VtIiwidG90YWxBbW91bnQiLCJnZXRQdXJjaGFzZUludm9pY2VCeUlkIiwiZ2V0UHVyY2hhc2VJbnZvaWNlV2l0aERldGFpbHMiLCJnZXRQdXJjaGFzZUludm9pY2VzIiwib3B0aW9ucyIsInBhZ2UiLCJsaW1pdCIsInNvcnRCeSIsInNvcnRPcmRlciIsInNraXAiLCJmaW5kTWFueSIsInRha2UiLCJvcmRlckJ5IiwidXBkYXRlUHVyY2hhc2VJbnZvaWNlIiwidXBkYXRlIiwidXBkYXRlUHVyY2hhc2VJbnZvaWNlU3RhdHVzIiwic3RhdHVzIiwiZGVsZXRlUHVyY2hhc2VJbnZvaWNlIiwiZGVsZXRlTWFueSIsImRlbGV0ZSIsInNlYXJjaFB1cmNoYXNlSW52b2ljZXMiLCJmaWx0ZXJzIiwic3VwcGxpZXJJZCIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJjcmVhdGVkQXQiLCJndGUiLCJsdGUiLCJzZWFyY2giLCJPUiIsImludm9pY2VOdW1iZXIiLCJjb250YWlucyIsIm1vZGUiLCJub3RlcyIsImFwcHJvdmVQdXJjaGFzZUludm9pY2UiLCJfY2xpZW50IiwiUHVyY2hhc2VJbnZvaWNlU3RhdHVzIiwiQVBQUk9WRUQiXSwic291cmNlcyI6WyIvVXNlcnMvc2FjaGluL0RvY3VtZW50cy9tZC1zcG9ydHMtL3NyYy9zZXJ2aWNlcy9wdXJjaGFzZUludm9pY2VTZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCwgUHVyY2hhc2VJbnZvaWNlU3RhdHVzIH0gZnJvbSAnQHByaXNtYS9jbGllbnQnO1xuaW1wb3J0IHsgZGIgfSBmcm9tICdAL2xpYi9kYic7XG5cbmludGVyZmFjZSBDcmVhdGVQdXJjaGFzZUludm9pY2VEYXRhIHtcbiAgaW52b2ljZU51bWJlcjogc3RyaW5nO1xuICBzdXBwbGllcklkOiBudW1iZXI7XG4gIHRvdGFsQW1vdW50OiBudW1iZXI7XG4gIHN0YXR1czogUHVyY2hhc2VJbnZvaWNlU3RhdHVzO1xuICBub3Rlcz86IHN0cmluZztcbiAgc2hvcElkPzogbnVtYmVyO1xufVxuXG5pbnRlcmZhY2UgQ3JlYXRlUHVyY2hhc2VJbnZvaWNlV2l0aEl0ZW1zRGF0YSBleHRlbmRzIENyZWF0ZVB1cmNoYXNlSW52b2ljZURhdGEge1xuICBpdGVtczoge1xuICAgIHByb2R1Y3RJZDogbnVtYmVyO1xuICAgIHF1YW50aXR5OiBudW1iZXI7XG4gICAgcHJpY2U6IG51bWJlcjtcbiAgfVtdO1xufVxuXG5pbnRlcmZhY2UgVXBkYXRlUHVyY2hhc2VJbnZvaWNlRGF0YSB7XG4gIGludm9pY2VOdW1iZXI/OiBzdHJpbmc7XG4gIHN1cHBsaWVySWQ/OiBudW1iZXI7XG4gIHRvdGFsQW1vdW50PzogbnVtYmVyO1xuICBzdGF0dXM/OiBQdXJjaGFzZUludm9pY2VTdGF0dXM7XG4gIG5vdGVzPzogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgU2VhcmNoRmlsdGVycyB7XG4gIHN1cHBsaWVySWQ/OiBudW1iZXI7XG4gIHN0YXR1cz86IFB1cmNoYXNlSW52b2ljZVN0YXR1cztcbiAgc3RhcnREYXRlPzogRGF0ZTtcbiAgZW5kRGF0ZT86IERhdGU7XG4gIHNlYXJjaD86IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIEdldFB1cmNoYXNlSW52b2ljZXNPcHRpb25zIHtcbiAgcGFnZT86IG51bWJlcjtcbiAgbGltaXQ/OiBudW1iZXI7XG4gIHNvcnRCeT86IHN0cmluZztcbiAgc29ydE9yZGVyPzogJ2FzYycgfCAnZGVzYyc7XG59XG5cbmV4cG9ydCBjbGFzcyBQdXJjaGFzZUludm9pY2VTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBwcmlzbWE6IFByaXNtYUNsaWVudDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnByaXNtYSA9IGRiO1xuICB9XG5cbiAgYXN5bmMgY3JlYXRlUHVyY2hhc2VJbnZvaWNlKGRhdGE6IENyZWF0ZVB1cmNoYXNlSW52b2ljZURhdGEpIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5wcmlzbWEucHVyY2hhc2VJbnZvaWNlLmNyZWF0ZSh7XG4gICAgICBkYXRhLFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBzdXBwbGllcjogdHJ1ZSxcbiAgICAgICAgaXRlbXM6IHtcbiAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICBwcm9kdWN0OiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBjcmVhdGVQdXJjaGFzZUludm9pY2VXaXRoSXRlbXMoZGF0YTogQ3JlYXRlUHVyY2hhc2VJbnZvaWNlV2l0aEl0ZW1zRGF0YSkge1xuICAgIGNvbnN0IHsgaXRlbXMsIC4uLmludm9pY2VEYXRhIH0gPSBkYXRhO1xuICAgIFxuICAgIHJldHVybiBhd2FpdCB0aGlzLnByaXNtYS4kdHJhbnNhY3Rpb24oYXN5bmMgKHR4KSA9PiB7XG4gICAgICBjb25zdCBpbnZvaWNlID0gYXdhaXQgdHgucHVyY2hhc2VJbnZvaWNlLmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IGludm9pY2VEYXRhXG4gICAgICB9KTtcblxuICAgICAgaWYgKGl0ZW1zICYmIGl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgYXdhaXQgdHgucHVyY2hhc2VJbnZvaWNlSXRlbS5jcmVhdGVNYW55KHtcbiAgICAgICAgICBkYXRhOiBpdGVtcy5tYXAoaXRlbSA9PiAoe1xuICAgICAgICAgICAgcHVyY2hhc2VJbnZvaWNlSWQ6IGludm9pY2UuaWQsXG4gICAgICAgICAgICBwcm9kdWN0SWQ6IGl0ZW0ucHJvZHVjdElkLFxuICAgICAgICAgICAgcXVhbnRpdHk6IGl0ZW0ucXVhbnRpdHksXG4gICAgICAgICAgICBwcmljZTogaXRlbS5wcmljZVxuICAgICAgICAgIH0pKVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGF3YWl0IHR4LnB1cmNoYXNlSW52b2ljZS5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGludm9pY2UuaWQgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIHN1cHBsaWVyOiB0cnVlLFxuICAgICAgICAgIGl0ZW1zOiB7XG4gICAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICAgIHByb2R1Y3Q6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgY3JlYXRlUHVyY2hhc2VJbnZvaWNlV2l0aENhbGN1bGF0aW9ucyhkYXRhOiBDcmVhdGVQdXJjaGFzZUludm9pY2VXaXRoSXRlbXNEYXRhKSB7XG4gICAgLy8gQ2FsY3VsYXRlIHRvdGFsIGZyb20gaXRlbXNcbiAgICBjb25zdCBjYWxjdWxhdGVkVG90YWwgPSBkYXRhLml0ZW1zLnJlZHVjZSgoc3VtLCBpdGVtKSA9PiB7XG4gICAgICByZXR1cm4gc3VtICsgKGl0ZW0ucXVhbnRpdHkgKiBpdGVtLnByaWNlKTtcbiAgICB9LCAwKTtcblxuICAgIHJldHVybiBhd2FpdCB0aGlzLmNyZWF0ZVB1cmNoYXNlSW52b2ljZVdpdGhJdGVtcyh7XG4gICAgICAuLi5kYXRhLFxuICAgICAgdG90YWxBbW91bnQ6IGNhbGN1bGF0ZWRUb3RhbFxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZ2V0UHVyY2hhc2VJbnZvaWNlQnlJZChpZDogbnVtYmVyKSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMucHJpc21hLnB1cmNoYXNlSW52b2ljZS5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIHN1cHBsaWVyOiB0cnVlLFxuICAgICAgICBpdGVtczoge1xuICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgIHByb2R1Y3Q6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGdldFB1cmNoYXNlSW52b2ljZVdpdGhEZXRhaWxzKGlkOiBudW1iZXIpIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRQdXJjaGFzZUludm9pY2VCeUlkKGlkKTtcbiAgfVxuXG4gIGFzeW5jIGdldFB1cmNoYXNlSW52b2ljZXMob3B0aW9uczogR2V0UHVyY2hhc2VJbnZvaWNlc09wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHsgcGFnZSA9IDEsIGxpbWl0ID0gMTAsIHNvcnRCeSA9ICdjcmVhdGVkQXQnLCBzb3J0T3JkZXIgPSAnZGVzYycgfSA9IG9wdGlvbnM7XG4gICAgY29uc3Qgc2tpcCA9IChwYWdlIC0gMSkgKiBsaW1pdDtcblxuICAgIHJldHVybiBhd2FpdCB0aGlzLnByaXNtYS5wdXJjaGFzZUludm9pY2UuZmluZE1hbnkoe1xuICAgICAgc2tpcCxcbiAgICAgIHRha2U6IGxpbWl0LFxuICAgICAgb3JkZXJCeToge1xuICAgICAgICBbc29ydEJ5XTogc29ydE9yZGVyXG4gICAgICB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBzdXBwbGllcjogdHJ1ZSxcbiAgICAgICAgaXRlbXM6IHtcbiAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICBwcm9kdWN0OiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBhc3luYyB1cGRhdGVQdXJjaGFzZUludm9pY2UoaWQ6IG51bWJlciwgZGF0YTogVXBkYXRlUHVyY2hhc2VJbnZvaWNlRGF0YSkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLnByaXNtYS5wdXJjaGFzZUludm9pY2UudXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICBkYXRhLFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBzdXBwbGllcjogdHJ1ZSxcbiAgICAgICAgaXRlbXM6IHtcbiAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICBwcm9kdWN0OiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBhc3luYyB1cGRhdGVQdXJjaGFzZUludm9pY2VTdGF0dXMoaWQ6IG51bWJlciwgc3RhdHVzOiBQdXJjaGFzZUludm9pY2VTdGF0dXMpIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGVQdXJjaGFzZUludm9pY2UoaWQsIHsgc3RhdHVzIH0pO1xuICB9XG5cbiAgYXN5bmMgZGVsZXRlUHVyY2hhc2VJbnZvaWNlKGlkOiBudW1iZXIpIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5wcmlzbWEuJHRyYW5zYWN0aW9uKGFzeW5jICh0eCkgPT4ge1xuICAgICAgLy8gRGVsZXRlIHJlbGF0ZWQgaXRlbXMgZmlyc3RcbiAgICAgIGF3YWl0IHR4LnB1cmNoYXNlSW52b2ljZUl0ZW0uZGVsZXRlTWFueSh7XG4gICAgICAgIHdoZXJlOiB7IHB1cmNoYXNlSW52b2ljZUlkOiBpZCB9XG4gICAgICB9KTtcblxuICAgICAgLy8gRGVsZXRlIHRoZSBpbnZvaWNlXG4gICAgICByZXR1cm4gYXdhaXQgdHgucHVyY2hhc2VJbnZvaWNlLmRlbGV0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgc2VhcmNoUHVyY2hhc2VJbnZvaWNlcyhmaWx0ZXJzOiBTZWFyY2hGaWx0ZXJzKSB7XG4gICAgY29uc3Qgd2hlcmU6IGFueSA9IHt9O1xuXG4gICAgaWYgKGZpbHRlcnMuc3VwcGxpZXJJZCkge1xuICAgICAgd2hlcmUuc3VwcGxpZXJJZCA9IGZpbHRlcnMuc3VwcGxpZXJJZDtcbiAgICB9XG5cbiAgICBpZiAoZmlsdGVycy5zdGF0dXMpIHtcbiAgICAgIHdoZXJlLnN0YXR1cyA9IGZpbHRlcnMuc3RhdHVzO1xuICAgIH1cblxuICAgIGlmIChmaWx0ZXJzLnN0YXJ0RGF0ZSB8fCBmaWx0ZXJzLmVuZERhdGUpIHtcbiAgICAgIHdoZXJlLmNyZWF0ZWRBdCA9IHt9O1xuICAgICAgaWYgKGZpbHRlcnMuc3RhcnREYXRlKSB7XG4gICAgICAgIHdoZXJlLmNyZWF0ZWRBdC5ndGUgPSBmaWx0ZXJzLnN0YXJ0RGF0ZTtcbiAgICAgIH1cbiAgICAgIGlmIChmaWx0ZXJzLmVuZERhdGUpIHtcbiAgICAgICAgd2hlcmUuY3JlYXRlZEF0Lmx0ZSA9IGZpbHRlcnMuZW5kRGF0ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZmlsdGVycy5zZWFyY2gpIHtcbiAgICAgIHdoZXJlLk9SID0gW1xuICAgICAgICB7XG4gICAgICAgICAgaW52b2ljZU51bWJlcjoge1xuICAgICAgICAgICAgY29udGFpbnM6IGZpbHRlcnMuc2VhcmNoLFxuICAgICAgICAgICAgbW9kZTogJ2luc2Vuc2l0aXZlJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5vdGVzOiB7XG4gICAgICAgICAgICBjb250YWluczogZmlsdGVycy5zZWFyY2gsXG4gICAgICAgICAgICBtb2RlOiAnaW5zZW5zaXRpdmUnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBdO1xuICAgIH1cblxuICAgIHJldHVybiBhd2FpdCB0aGlzLnByaXNtYS5wdXJjaGFzZUludm9pY2UuZmluZE1hbnkoe1xuICAgICAgd2hlcmUsXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIHN1cHBsaWVyOiB0cnVlLFxuICAgICAgICBpdGVtczoge1xuICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgIHByb2R1Y3Q6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvcmRlckJ5OiB7XG4gICAgICAgIGNyZWF0ZWRBdDogJ2Rlc2MnXG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBhcHByb3ZlUHVyY2hhc2VJbnZvaWNlKGlkOiBudW1iZXIpIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGVQdXJjaGFzZUludm9pY2VTdGF0dXMoaWQsIFB1cmNoYXNlSW52b2ljZVN0YXR1cy5BUFBST1ZFRCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUHVyY2hhc2VJbnZvaWNlU2VydmljZTsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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