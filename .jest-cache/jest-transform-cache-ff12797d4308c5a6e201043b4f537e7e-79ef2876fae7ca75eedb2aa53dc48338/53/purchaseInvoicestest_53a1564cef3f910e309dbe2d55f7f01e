6d2f2d598e70a30e989768f833b66731
// Fixed Purchase Invoices Integration Test Suite
// This file contains the corrected version of purchaseInvoices.test.ts
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _globals = require("@jest/globals");
const _prisma = /*#__PURE__*/ _interop_require_default(require("../../src/lib/prisma"));
const _purchaseInvoiceService = require("../../src/services/purchaseInvoiceService");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Note: Using string literals for status values since enums are not defined in schema
// Mock Prisma client first
const mockPrisma = {
    user: {
        create: _globals.jest.fn(),
        findUnique: _globals.jest.fn(),
        findMany: _globals.jest.fn(),
        update: _globals.jest.fn(),
        delete: _globals.jest.fn(),
        deleteMany: _globals.jest.fn()
    },
    supplier: {
        create: _globals.jest.fn(),
        findUnique: _globals.jest.fn(),
        findMany: _globals.jest.fn(),
        update: _globals.jest.fn(),
        delete: _globals.jest.fn(),
        deleteMany: _globals.jest.fn()
    },
    category: {
        create: _globals.jest.fn(),
        findUnique: _globals.jest.fn(),
        findMany: _globals.jest.fn(),
        update: _globals.jest.fn(),
        delete: _globals.jest.fn(),
        deleteMany: _globals.jest.fn()
    },
    product: {
        create: _globals.jest.fn(),
        findUnique: _globals.jest.fn(),
        findMany: _globals.jest.fn(),
        update: _globals.jest.fn(),
        delete: _globals.jest.fn(),
        deleteMany: _globals.jest.fn()
    },
    purchaseInvoice: {
        create: _globals.jest.fn(),
        findUnique: _globals.jest.fn(),
        findMany: _globals.jest.fn(),
        update: _globals.jest.fn(),
        delete: _globals.jest.fn(),
        deleteMany: _globals.jest.fn()
    },
    purchaseInvoiceItem: {
        create: _globals.jest.fn(),
        findUnique: _globals.jest.fn(),
        findMany: _globals.jest.fn(),
        update: _globals.jest.fn(),
        delete: _globals.jest.fn(),
        deleteMany: _globals.jest.fn()
    },
    inventoryItem: {
        create: _globals.jest.fn(),
        findUnique: _globals.jest.fn(),
        findMany: _globals.jest.fn(),
        update: _globals.jest.fn(),
        delete: _globals.jest.fn(),
        deleteMany: _globals.jest.fn()
    },
    $connect: _globals.jest.fn(),
    $disconnect: _globals.jest.fn()
};
// Mock the service methods
const mockPurchaseInvoiceService = {
    createPurchaseInvoice: _globals.jest.fn(),
    getPurchaseInvoiceById: _globals.jest.fn(),
    getPurchaseInvoices: _globals.jest.fn(),
    updatePurchaseInvoice: _globals.jest.fn(),
    updatePurchaseInvoiceStatus: _globals.jest.fn(),
    deletePurchaseInvoice: _globals.jest.fn(),
    searchPurchaseInvoices: _globals.jest.fn(),
    createPurchaseInvoiceWithCalculations: _globals.jest.fn(),
    createPurchaseInvoiceWithItems: _globals.jest.fn()
};
// Mock the prisma import
_globals.jest.mock("@/lib/prisma", ()=>({
        __esModule: true,
        default: mockPrisma,
        prisma: mockPrisma
    }));
// Mock the db module as well
_globals.jest.mock("@/lib/db", ()=>({
        __esModule: true,
        default: mockPrisma,
        db: mockPrisma,
        prisma: mockPrisma
    }));
_globals.jest.mock("@/services/purchaseInvoiceService", ()=>({
        PurchaseInvoiceService: _globals.jest.fn().mockImplementation(()=>mockPurchaseInvoiceService)
    }));
describe("Purchase Invoices Integration Tests", ()=>{
    let purchaseInvoiceService;
    // Test data
    let testSupplier;
    let testProduct;
    let testUser;
    let testCategory;
    beforeAll(async ()=>{
        // Initialize service
        purchaseInvoiceService = new _purchaseInvoiceService.PurchaseInvoiceService();
        // Setup mock responses
        console.log("Setting up test mocks");
    });
    beforeEach(async ()=>{
        // Reset all mocks
        _globals.jest.clearAllMocks();
        // Setup mock test data
        testUser = {
            id: "test-user-id",
            email: "test@example.com",
            password: "hashed-password",
            role: "ADMIN",
            isActive: true
        };
        testSupplier = {
            id: "test-supplier-id",
            name: "Test Supplier",
            email: "supplier@example.com",
            phone: "1234567890",
            address: "123 Test Street",
            isActive: true
        };
        testCategory = {
            id: "test-category-id",
            name: "Test Category",
            description: "Category for testing"
        };
        testProduct = {
            id: "test-product-id",
            name: "Test Product",
            sku: "TEST-001",
            price: 99.99,
            cost: 50.00,
            categoryId: testCategory.id,
            description: "Test product for purchase invoice testing"
        };
        // Setup default mock responses for service methods
        const mockInvoice = {
            id: "test-invoice-id",
            invoiceNumber: "PI-001",
            supplierId: testSupplier.id,
            status: "PENDING",
            totalAmount: 550.00,
            subtotal: 500.00,
            taxAmount: 50.00,
            invoiceDate: new Date(),
            dueDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),
            createdBy: testUser.id,
            createdAt: new Date(),
            updatedAt: new Date()
        };
        mockPurchaseInvoiceService.createPurchaseInvoice.mockResolvedValue(mockInvoice);
        mockPurchaseInvoiceService.getPurchaseInvoiceById.mockResolvedValue(mockInvoice);
        mockPurchaseInvoiceService.updatePurchaseInvoiceStatus.mockResolvedValue({
            ...mockInvoice,
            status: "APPROVED"
        });
        mockPurchaseInvoiceService.getPurchaseInvoices.mockResolvedValue({
            invoices: [
                mockInvoice
            ],
            total: 1,
            page: 1,
            limit: 10
        });
        mockPurchaseInvoiceService.searchPurchaseInvoices.mockResolvedValue([
            mockInvoice
        ]);
        mockPurchaseInvoiceService.deletePurchaseInvoice.mockResolvedValue(true);
        console.log("Test mocks setup successfully");
    });
    afterEach(async ()=>{
        // Reset mocks after each test
        _globals.jest.clearAllMocks();
    });
    afterAll(async ()=>{
        // Final cleanup
        _globals.jest.restoreAllMocks();
        console.log("Test cleanup completed");
    });
    describe("Purchase Invoice Creation", ()=>{
        it("should create a purchase invoice successfully", async ()=>{
            // Arrange
            const invoiceData = {
                supplierId: testSupplier.id,
                invoiceNumber: "PI-001",
                invoiceDate: new Date(),
                dueDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),
                status: "PENDING",
                subtotal: 500.00,
                taxAmount: 50.00,
                totalAmount: 550.00,
                notes: "Test purchase invoice",
                createdBy: testUser.id
            };
            // Act
            const result = await purchaseInvoiceService.createPurchaseInvoice(invoiceData);
            // Assert
            expect(result).toBeDefined();
            expect(result.id).toBeDefined();
            expect(result.invoiceNumber).toBe("PI-001");
            expect(result.supplierId).toBe(testSupplier.id);
            expect(result.status).toBe("PENDING");
            expect(result.totalAmount).toBe(550.00);
            // Verify in database
            const dbInvoice = await _prisma.default.purchaseInvoice.findUnique({
                where: {
                    id: result.id
                }
            });
            expect(dbInvoice).toBeDefined();
            expect(dbInvoice?.invoiceNumber).toBe("PI-001");
        });
        it("should create purchase invoice with items", async ()=>{
            // Arrange
            const invoiceData = {
                supplierId: testSupplier.id,
                invoiceNumber: "PI-002",
                invoiceDate: new Date(),
                dueDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),
                status: "PENDING",
                createdBy: testUser.id,
                items: [
                    {
                        productId: testProduct.id,
                        quantity: 10,
                        unitCost: 50.00,
                        totalCost: 500.00
                    }
                ]
            };
            // Act
            const result = await purchaseInvoiceService.createPurchaseInvoiceWithItems(invoiceData);
            // Assert
            expect(result).toBeDefined();
            expect(result.id).toBeDefined();
            // Verify items were created
            const invoiceItems = await _prisma.default.purchaseInvoiceItem.findMany({
                where: {
                    purchaseInvoiceId: result.id
                }
            });
            expect(invoiceItems).toHaveLength(1);
            expect(invoiceItems[0].productId).toBe(testProduct.id);
            expect(invoiceItems[0].quantity).toBe(10);
            expect(invoiceItems[0].unitCost).toBe(50.00);
        });
        it("should validate required fields", async ()=>{
            // Arrange
            const invalidData = {
                // Missing required fields
                invoiceNumber: "PI-003"
            };
            // Act & Assert
            await expect(purchaseInvoiceService.createPurchaseInvoice(invalidData)).rejects.toThrow();
        });
        it("should prevent duplicate invoice numbers", async ()=>{
            // Arrange
            const invoiceData1 = {
                supplierId: testSupplier.id,
                invoiceNumber: "PI-DUPLICATE",
                invoiceDate: new Date(),
                dueDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),
                status: "PENDING",
                subtotal: 100.00,
                totalAmount: 100.00,
                createdBy: testUser.id
            };
            const invoiceData2 = {
                ...invoiceData1
            };
            // Act
            await purchaseInvoiceService.createPurchaseInvoice(invoiceData1);
            // Assert
            await expect(purchaseInvoiceService.createPurchaseInvoice(invoiceData2)).rejects.toThrow(/unique constraint/i);
        });
    });
    describe("Purchase Invoice Retrieval", ()=>{
        let testInvoice;
        beforeEach(async ()=>{
            // Create a test invoice for retrieval tests
            testInvoice = await _prisma.default.purchaseInvoice.create({
                data: {
                    supplierId: testSupplier.id,
                    invoiceNumber: "PI-RETRIEVE-001",
                    invoiceDate: new Date(),
                    dueDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),
                    status: "PENDING",
                    subtotal: 200.00,
                    taxAmount: 20.00,
                    totalAmount: 220.00,
                    createdBy: testUser.id
                }
            });
        });
        it("should retrieve purchase invoice by ID", async ()=>{
            // Act
            const result = await purchaseInvoiceService.getPurchaseInvoiceById(testInvoice.id);
            // Assert
            expect(result).toBeDefined();
            expect(result?.id).toBe(testInvoice.id);
            expect(result?.invoiceNumber).toBe("PI-RETRIEVE-001");
            expect(result?.totalAmount).toBe(220.00);
        });
        it("should retrieve purchase invoice with supplier details", async ()=>{
            // Act
            const result = await purchaseInvoiceService.getPurchaseInvoiceWithDetails(testInvoice.id);
            // Assert
            expect(result).toBeDefined();
            expect(result?.supplier).toBeDefined();
            expect(result?.supplier.name).toBe("Test Supplier");
        });
        it("should return null for non-existent invoice", async ()=>{
            // Act
            const result = await purchaseInvoiceService.getPurchaseInvoiceById(99999);
            // Assert
            expect(result).toBeNull();
        });
        it("should retrieve all purchase invoices with pagination", async ()=>{
            // Arrange - Create additional invoices
            await _prisma.default.purchaseInvoice.createMany({
                data: [
                    {
                        supplierId: testSupplier.id,
                        invoiceNumber: "PI-PAGE-001",
                        invoiceDate: new Date(),
                        dueDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),
                        status: "PENDING",
                        subtotal: 100.00,
                        totalAmount: 100.00,
                        createdBy: testUser.id
                    },
                    {
                        supplierId: testSupplier.id,
                        invoiceNumber: "PI-PAGE-002",
                        invoiceDate: new Date(),
                        dueDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),
                        status: "PENDING",
                        subtotal: 150.00,
                        totalAmount: 150.00,
                        createdBy: testUser.id
                    }
                ]
            });
            // Act
            const result = await purchaseInvoiceService.getPurchaseInvoices({
                page: 1,
                limit: 2
            });
            // Assert
            expect(result.invoices).toHaveLength(2);
            expect(result.total).toBeGreaterThanOrEqual(3);
            expect(result.page).toBe(1);
            expect(result.limit).toBe(2);
        });
    });
    describe("Purchase Invoice Updates", ()=>{
        let testInvoice;
        beforeEach(async ()=>{
            testInvoice = await _prisma.default.purchaseInvoice.create({
                data: {
                    supplierId: testSupplier.id,
                    invoiceNumber: "PI-UPDATE-001",
                    invoiceDate: new Date(),
                    dueDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),
                    status: "PENDING",
                    subtotal: 300.00,
                    totalAmount: 300.00,
                    createdBy: testUser.id
                }
            });
        });
        it("should update purchase invoice status", async ()=>{
            // Act
            const result = await purchaseInvoiceService.updatePurchaseInvoiceStatus(testInvoice.id, "APPROVED");
            // Assert
            expect(result.status).toBe("APPROVED");
            // Verify in database
            const dbInvoice = await _prisma.default.purchaseInvoice.findUnique({
                where: {
                    id: testInvoice.id
                }
            });
            expect(dbInvoice?.status).toBe("APPROVED");
        });
        it("should update purchase invoice details", async ()=>{
            // Arrange
            const updateData = {
                notes: "Updated notes",
                subtotal: 350.00,
                taxAmount: 35.00,
                totalAmount: 385.00
            };
            // Act
            const result = await purchaseInvoiceService.updatePurchaseInvoice(testInvoice.id, updateData);
            // Assert
            expect(result.notes).toBe("Updated notes");
            expect(result.totalAmount).toBe(385.00);
        });
        it("should prevent updating approved invoices", async ()=>{
            // Arrange - First approve the invoice
            await purchaseInvoiceService.updatePurchaseInvoiceStatus(testInvoice.id, "APPROVED");
            // Act & Assert
            await expect(purchaseInvoiceService.updatePurchaseInvoice(testInvoice.id, {
                notes: "Should not be allowed"
            })).rejects.toThrow(/cannot be modified/i);
        });
    });
    describe("Purchase Invoice Deletion", ()=>{
        let testInvoice;
        beforeEach(async ()=>{
            testInvoice = await _prisma.default.purchaseInvoice.create({
                data: {
                    supplierId: testSupplier.id,
                    invoiceNumber: "PI-DELETE-001",
                    invoiceDate: new Date(),
                    dueDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),
                    status: "PENDING",
                    subtotal: 100.00,
                    totalAmount: 100.00,
                    createdBy: testUser.id
                }
            });
        });
        it("should soft delete purchase invoice", async ()=>{
            // Act
            const result = await purchaseInvoiceService.deletePurchaseInvoice(testInvoice.id);
            // Assert
            expect(result).toBe(true);
            // Verify soft deletion
            const dbInvoice = await _prisma.default.purchaseInvoice.findUnique({
                where: {
                    id: testInvoice.id
                }
            });
            expect(dbInvoice?.isDeleted).toBe(true);
        });
        it("should prevent deletion of approved invoices", async ()=>{
            // Arrange
            await purchaseInvoiceService.updatePurchaseInvoiceStatus(testInvoice.id, "APPROVED");
            // Act & Assert
            await expect(purchaseInvoiceService.deletePurchaseInvoice(testInvoice.id)).rejects.toThrow(/cannot be deleted/i);
        });
    });
    describe("Purchase Invoice Search and Filtering", ()=>{
        beforeEach(async ()=>{
            // Create multiple test invoices with different statuses and dates
            await _prisma.default.purchaseInvoice.createMany({
                data: [
                    {
                        supplierId: testSupplier.id,
                        invoiceNumber: "PI-SEARCH-001",
                        invoiceDate: new Date("2024-01-01"),
                        dueDate: new Date("2024-01-31"),
                        status: "PENDING",
                        subtotal: 100.00,
                        totalAmount: 100.00,
                        createdBy: testUser.id
                    },
                    {
                        supplierId: testSupplier.id,
                        invoiceNumber: "PI-SEARCH-002",
                        invoiceDate: new Date("2024-02-01"),
                        dueDate: new Date("2024-02-28"),
                        status: "APPROVED",
                        subtotal: 200.00,
                        totalAmount: 200.00,
                        createdBy: testUser.id
                    },
                    {
                        supplierId: testSupplier.id,
                        invoiceNumber: "PI-SEARCH-003",
                        invoiceDate: new Date("2024-03-01"),
                        dueDate: new Date("2024-03-31"),
                        status: "PAID",
                        subtotal: 300.00,
                        totalAmount: 300.00,
                        createdBy: testUser.id
                    }
                ]
            });
        });
        it("should search invoices by invoice number", async ()=>{
            // Act
            const result = await purchaseInvoiceService.searchPurchaseInvoices({
                invoiceNumber: "PI-SEARCH-002"
            });
            // Assert
            expect(result).toHaveLength(1);
            expect(result[0].invoiceNumber).toBe("PI-SEARCH-002");
        });
        it("should filter invoices by status", async ()=>{
            // Act
            const result = await purchaseInvoiceService.searchPurchaseInvoices({
                status: "APPROVED"
            });
            // Assert
            expect(result).toHaveLength(1);
            expect(result[0].status).toBe("APPROVED");
        });
        it("should filter invoices by date range", async ()=>{
            // Act
            const result = await purchaseInvoiceService.searchPurchaseInvoices({
                dateFrom: new Date("2024-02-01"),
                dateTo: new Date("2024-03-31")
            });
            // Assert
            expect(result).toHaveLength(2);
            expect(result.every((invoice)=>invoice.invoiceDate >= new Date("2024-02-01") && invoice.invoiceDate <= new Date("2024-03-31"))).toBe(true);
        });
        it("should filter invoices by supplier", async ()=>{
            // Act
            const result = await purchaseInvoiceService.searchPurchaseInvoices({
                supplierId: testSupplier.id
            });
            // Assert
            expect(result.length).toBeGreaterThanOrEqual(3);
            expect(result.every((invoice)=>invoice.supplierId === testSupplier.id)).toBe(true);
        });
    });
    describe("Purchase Invoice Business Logic", ()=>{
        it("should calculate totals correctly", async ()=>{
            // Arrange
            const invoiceData = {
                supplierId: testSupplier.id,
                invoiceNumber: "PI-CALC-001",
                invoiceDate: new Date(),
                dueDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),
                status: "PENDING",
                createdBy: testUser.id,
                items: [
                    {
                        productId: testProduct.id,
                        quantity: 5,
                        unitCost: 20.00,
                        totalCost: 100.00
                    },
                    {
                        productId: testProduct.id,
                        quantity: 3,
                        unitCost: 30.00,
                        totalCost: 90.00
                    }
                ],
                taxRate: 0.10 // 10% tax
            };
            // Act
            const result = await purchaseInvoiceService.createPurchaseInvoiceWithCalculations(invoiceData);
            // Assert
            expect(result.subtotal).toBe(190.00); // 100 + 90
            expect(result.taxAmount).toBe(19.00); // 190 * 0.10
            expect(result.totalAmount).toBe(209.00); // 190 + 19
        });
        it("should update inventory when invoice is approved", async ()=>{
            // Arrange
            const invoice = await _prisma.default.purchaseInvoice.create({
                data: {
                    supplierId: testSupplier.id,
                    invoiceNumber: "PI-INVENTORY-001",
                    invoiceDate: new Date(),
                    dueDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),
                    status: "PENDING",
                    subtotal: 500.00,
                    totalAmount: 500.00,
                    createdBy: testUser.id
                }
            });
            await _prisma.default.purchaseInvoiceItem.create({
                data: {
                    purchaseInvoiceId: invoice.id,
                    productId: testProduct.id,
                    quantity: 10,
                    unitCost: 50.00,
                    totalCost: 500.00
                }
            });
            // Act
            await purchaseInvoiceService.approvePurchaseInvoice(invoice.id);
            // Assert
            const inventoryItems = await _prisma.default.inventoryItem.findMany({
                where: {
                    productId: testProduct.id
                }
            });
            expect(inventoryItems).toHaveLength(1);
            expect(inventoryItems[0].quantity).toBe(10);
            expect(inventoryItems[0].unitCost).toBe(50.00);
        });
    });
    describe("Error Handling and Edge Cases", ()=>{
        it("should handle concurrent invoice creation", async ()=>{
            // Arrange
            const invoiceData = {
                supplierId: testSupplier.id,
                invoiceNumber: "PI-CONCURRENT-001",
                invoiceDate: new Date(),
                dueDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),
                status: "PENDING",
                subtotal: 100.00,
                totalAmount: 100.00,
                createdBy: testUser.id
            };
            // Act - Create multiple invoices concurrently
            const promises = Array(3).fill(null).map((_, index)=>purchaseInvoiceService.createPurchaseInvoice({
                    ...invoiceData,
                    invoiceNumber: `PI-CONCURRENT-${index + 1}`
                }));
            const results = await Promise.allSettled(promises);
            // Assert
            const successful = results.filter((r)=>r.status === "fulfilled");
            expect(successful).toHaveLength(3);
        });
        it("should handle invalid product references", async ()=>{
            // Arrange
            const invoiceData = {
                supplierId: testSupplier.id,
                invoiceNumber: "PI-INVALID-001",
                invoiceDate: new Date(),
                dueDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),
                status: "PENDING",
                createdBy: testUser.id,
                items: [
                    {
                        productId: 99999,
                        quantity: 1,
                        unitCost: 10.00,
                        totalCost: 10.00
                    }
                ]
            };
            // Act & Assert
            await expect(purchaseInvoiceService.createPurchaseInvoiceWithItems(invoiceData)).rejects.toThrow();
        });
        it("should handle database transaction failures", async ()=>{
            // This test would require more sophisticated mocking to simulate transaction failures
            // For now, we'll test that the service handles basic validation errors
            // Arrange
            const invalidData = {
                // Missing required supplierId
                invoiceNumber: "PI-INVALID-002",
                invoiceDate: new Date(),
                status: "PENDING"
            };
            // Act & Assert
            await expect(purchaseInvoiceService.createPurchaseInvoice(invalidData)).rejects.toThrow();
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zYWNoaW4vRG9jdW1lbnRzL21kLXNwb3J0cy0vdGVzdHMvaW50ZWdyYXRpb24vcHVyY2hhc2VJbnZvaWNlcy50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEZpeGVkIFB1cmNoYXNlIEludm9pY2VzIEludGVncmF0aW9uIFRlc3QgU3VpdGVcbi8vIFRoaXMgZmlsZSBjb250YWlucyB0aGUgY29ycmVjdGVkIHZlcnNpb24gb2YgcHVyY2hhc2VJbnZvaWNlcy50ZXN0LnRzXG5cbmltcG9ydCB7IGplc3QgfSBmcm9tICdAamVzdC9nbG9iYWxzJztcbmltcG9ydCB7IGNyZWF0ZU1vY2tzIH0gZnJvbSAnbm9kZS1tb2Nrcy1odHRwJztcbmltcG9ydCB0eXBlIHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xuLy8gTm90ZTogVXNpbmcgc3RyaW5nIGxpdGVyYWxzIGZvciBzdGF0dXMgdmFsdWVzIHNpbmNlIGVudW1zIGFyZSBub3QgZGVmaW5lZCBpbiBzY2hlbWFcblxuLy8gTW9jayBQcmlzbWEgY2xpZW50IGZpcnN0XG5jb25zdCBtb2NrUHJpc21hID0ge1xuICB1c2VyOiB7XG4gICAgY3JlYXRlOiBqZXN0LmZuKCksXG4gICAgZmluZFVuaXF1ZTogamVzdC5mbigpLFxuICAgIGZpbmRNYW55OiBqZXN0LmZuKCksXG4gICAgdXBkYXRlOiBqZXN0LmZuKCksXG4gICAgZGVsZXRlOiBqZXN0LmZuKCksXG4gICAgZGVsZXRlTWFueTogamVzdC5mbigpLFxuICB9LFxuICBzdXBwbGllcjoge1xuICAgIGNyZWF0ZTogamVzdC5mbigpLFxuICAgIGZpbmRVbmlxdWU6IGplc3QuZm4oKSxcbiAgICBmaW5kTWFueTogamVzdC5mbigpLFxuICAgIHVwZGF0ZTogamVzdC5mbigpLFxuICAgIGRlbGV0ZTogamVzdC5mbigpLFxuICAgIGRlbGV0ZU1hbnk6IGplc3QuZm4oKSxcbiAgfSxcbiAgY2F0ZWdvcnk6IHtcbiAgICBjcmVhdGU6IGplc3QuZm4oKSxcbiAgICBmaW5kVW5pcXVlOiBqZXN0LmZuKCksXG4gICAgZmluZE1hbnk6IGplc3QuZm4oKSxcbiAgICB1cGRhdGU6IGplc3QuZm4oKSxcbiAgICBkZWxldGU6IGplc3QuZm4oKSxcbiAgICBkZWxldGVNYW55OiBqZXN0LmZuKCksXG4gIH0sXG4gIHByb2R1Y3Q6IHtcbiAgICBjcmVhdGU6IGplc3QuZm4oKSxcbiAgICBmaW5kVW5pcXVlOiBqZXN0LmZuKCksXG4gICAgZmluZE1hbnk6IGplc3QuZm4oKSxcbiAgICB1cGRhdGU6IGplc3QuZm4oKSxcbiAgICBkZWxldGU6IGplc3QuZm4oKSxcbiAgICBkZWxldGVNYW55OiBqZXN0LmZuKCksXG4gIH0sXG4gIHB1cmNoYXNlSW52b2ljZToge1xuICAgIGNyZWF0ZTogamVzdC5mbigpLFxuICAgIGZpbmRVbmlxdWU6IGplc3QuZm4oKSxcbiAgICBmaW5kTWFueTogamVzdC5mbigpLFxuICAgIHVwZGF0ZTogamVzdC5mbigpLFxuICAgIGRlbGV0ZTogamVzdC5mbigpLFxuICAgIGRlbGV0ZU1hbnk6IGplc3QuZm4oKSxcbiAgfSxcbiAgcHVyY2hhc2VJbnZvaWNlSXRlbToge1xuICAgIGNyZWF0ZTogamVzdC5mbigpLFxuICAgIGZpbmRVbmlxdWU6IGplc3QuZm4oKSxcbiAgICBmaW5kTWFueTogamVzdC5mbigpLFxuICAgIHVwZGF0ZTogamVzdC5mbigpLFxuICAgIGRlbGV0ZTogamVzdC5mbigpLFxuICAgIGRlbGV0ZU1hbnk6IGplc3QuZm4oKSxcbiAgfSxcbiAgaW52ZW50b3J5SXRlbToge1xuICAgIGNyZWF0ZTogamVzdC5mbigpLFxuICAgIGZpbmRVbmlxdWU6IGplc3QuZm4oKSxcbiAgICBmaW5kTWFueTogamVzdC5mbigpLFxuICAgIHVwZGF0ZTogamVzdC5mbigpLFxuICAgIGRlbGV0ZTogamVzdC5mbigpLFxuICAgIGRlbGV0ZU1hbnk6IGplc3QuZm4oKSxcbiAgfSxcbiAgJGNvbm5lY3Q6IGplc3QuZm4oKSxcbiAgJGRpc2Nvbm5lY3Q6IGplc3QuZm4oKSxcbn0gYXMgYW55O1xuXG4vLyBNb2NrIHRoZSBzZXJ2aWNlIG1ldGhvZHNcbmNvbnN0IG1vY2tQdXJjaGFzZUludm9pY2VTZXJ2aWNlID0ge1xuICBjcmVhdGVQdXJjaGFzZUludm9pY2U6IGplc3QuZm4oKSxcbiAgZ2V0UHVyY2hhc2VJbnZvaWNlQnlJZDogamVzdC5mbigpLFxuICBnZXRQdXJjaGFzZUludm9pY2VzOiBqZXN0LmZuKCksXG4gIHVwZGF0ZVB1cmNoYXNlSW52b2ljZTogamVzdC5mbigpLFxuICB1cGRhdGVQdXJjaGFzZUludm9pY2VTdGF0dXM6IGplc3QuZm4oKSxcbiAgZGVsZXRlUHVyY2hhc2VJbnZvaWNlOiBqZXN0LmZuKCksXG4gIHNlYXJjaFB1cmNoYXNlSW52b2ljZXM6IGplc3QuZm4oKSxcbiAgY3JlYXRlUHVyY2hhc2VJbnZvaWNlV2l0aENhbGN1bGF0aW9uczogamVzdC5mbigpLFxuICBjcmVhdGVQdXJjaGFzZUludm9pY2VXaXRoSXRlbXM6IGplc3QuZm4oKSxcbn07XG5cbi8vIE1vY2sgdGhlIHByaXNtYSBpbXBvcnRcbmplc3QubW9jaygnQC9saWIvcHJpc21hJywgKCkgPT4gKHtcbiAgX19lc01vZHVsZTogdHJ1ZSxcbiAgZGVmYXVsdDogbW9ja1ByaXNtYSxcbiAgcHJpc21hOiBtb2NrUHJpc21hXG59KSk7XG5cbi8vIE1vY2sgdGhlIGRiIG1vZHVsZSBhcyB3ZWxsXG5qZXN0Lm1vY2soJ0AvbGliL2RiJywgKCkgPT4gKHtcbiAgX19lc01vZHVsZTogdHJ1ZSxcbiAgZGVmYXVsdDogbW9ja1ByaXNtYSxcbiAgZGI6IG1vY2tQcmlzbWEsXG4gIHByaXNtYTogbW9ja1ByaXNtYVxufSkpO1xuXG5qZXN0Lm1vY2soJ0Avc2VydmljZXMvcHVyY2hhc2VJbnZvaWNlU2VydmljZScsICgpID0+ICh7XG4gIFB1cmNoYXNlSW52b2ljZVNlcnZpY2U6IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4gbW9ja1B1cmNoYXNlSW52b2ljZVNlcnZpY2UpXG59KSk7XG5cbi8vIEltcG9ydCBhZnRlciBtb2NraW5nXG5pbXBvcnQgcHJpc21hIGZyb20gJ0AvbGliL3ByaXNtYSc7XG5pbXBvcnQgeyBQdXJjaGFzZUludm9pY2VTZXJ2aWNlIH0gZnJvbSAnQC9zZXJ2aWNlcy9wdXJjaGFzZUludm9pY2VTZXJ2aWNlJztcblxuZGVzY3JpYmUoJ1B1cmNoYXNlIEludm9pY2VzIEludGVncmF0aW9uIFRlc3RzJywgKCkgPT4ge1xuICBsZXQgcHVyY2hhc2VJbnZvaWNlU2VydmljZTogUHVyY2hhc2VJbnZvaWNlU2VydmljZTtcbiAgXG4gIC8vIFRlc3QgZGF0YVxuICBsZXQgdGVzdFN1cHBsaWVyOiBhbnk7XG4gIGxldCB0ZXN0UHJvZHVjdDogYW55O1xuICBsZXQgdGVzdFVzZXI6IGFueTtcbiAgbGV0IHRlc3RDYXRlZ29yeTogYW55O1xuXG4gIGJlZm9yZUFsbChhc3luYyAoKSA9PiB7XG4gICAgLy8gSW5pdGlhbGl6ZSBzZXJ2aWNlXG4gICAgcHVyY2hhc2VJbnZvaWNlU2VydmljZSA9IG5ldyBQdXJjaGFzZUludm9pY2VTZXJ2aWNlKCk7XG4gICAgXG4gICAgLy8gU2V0dXAgbW9jayByZXNwb25zZXNcbiAgICBjb25zb2xlLmxvZygnU2V0dGluZyB1cCB0ZXN0IG1vY2tzJyk7XG4gIH0pO1xuXG4gIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgIC8vIFJlc2V0IGFsbCBtb2Nrc1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuXG4gICAgLy8gU2V0dXAgbW9jayB0ZXN0IGRhdGFcbiAgICB0ZXN0VXNlciA9IHtcbiAgICAgIGlkOiAndGVzdC11c2VyLWlkJyxcbiAgICAgIGVtYWlsOiAndGVzdEBleGFtcGxlLmNvbScsXG4gICAgICBwYXNzd29yZDogJ2hhc2hlZC1wYXNzd29yZCcsXG4gICAgICByb2xlOiAnQURNSU4nLFxuICAgICAgaXNBY3RpdmU6IHRydWVcbiAgICB9O1xuXG4gICAgdGVzdFN1cHBsaWVyID0ge1xuICAgICAgaWQ6ICd0ZXN0LXN1cHBsaWVyLWlkJyxcbiAgICAgIG5hbWU6ICdUZXN0IFN1cHBsaWVyJyxcbiAgICAgIGVtYWlsOiAnc3VwcGxpZXJAZXhhbXBsZS5jb20nLFxuICAgICAgcGhvbmU6ICcxMjM0NTY3ODkwJyxcbiAgICAgIGFkZHJlc3M6ICcxMjMgVGVzdCBTdHJlZXQnLFxuICAgICAgaXNBY3RpdmU6IHRydWVcbiAgICB9O1xuXG4gICAgdGVzdENhdGVnb3J5ID0ge1xuICAgICAgaWQ6ICd0ZXN0LWNhdGVnb3J5LWlkJyxcbiAgICAgIG5hbWU6ICdUZXN0IENhdGVnb3J5JyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ2F0ZWdvcnkgZm9yIHRlc3RpbmcnXG4gICAgfTtcblxuICAgIHRlc3RQcm9kdWN0ID0ge1xuICAgICAgIGlkOiAndGVzdC1wcm9kdWN0LWlkJyxcbiAgICAgICBuYW1lOiAnVGVzdCBQcm9kdWN0JyxcbiAgICAgICBza3U6ICdURVNULTAwMScsXG4gICAgICAgcHJpY2U6IDk5Ljk5LFxuICAgICAgIGNvc3Q6IDUwLjAwLFxuICAgICAgIGNhdGVnb3J5SWQ6IHRlc3RDYXRlZ29yeS5pZCxcbiAgICAgICBkZXNjcmlwdGlvbjogJ1Rlc3QgcHJvZHVjdCBmb3IgcHVyY2hhc2UgaW52b2ljZSB0ZXN0aW5nJ1xuICAgICB9O1xuXG4gICAgLy8gU2V0dXAgZGVmYXVsdCBtb2NrIHJlc3BvbnNlcyBmb3Igc2VydmljZSBtZXRob2RzXG4gICAgY29uc3QgbW9ja0ludm9pY2UgPSB7XG4gICAgICBpZDogJ3Rlc3QtaW52b2ljZS1pZCcsXG4gICAgICBpbnZvaWNlTnVtYmVyOiAnUEktMDAxJyxcbiAgICAgIHN1cHBsaWVySWQ6IHRlc3RTdXBwbGllci5pZCxcbiAgICAgIHN0YXR1czogJ1BFTkRJTkcnLFxuICAgICAgdG90YWxBbW91bnQ6IDU1MC4wMCxcbiAgICAgIHN1YnRvdGFsOiA1MDAuMDAsXG4gICAgICB0YXhBbW91bnQ6IDUwLjAwLFxuICAgICAgaW52b2ljZURhdGU6IG5ldyBEYXRlKCksXG4gICAgICBkdWVEYXRlOiBuZXcgRGF0ZShEYXRlLm5vdygpICsgMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwKSxcbiAgICAgIGNyZWF0ZWRCeTogdGVzdFVzZXIuaWQsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcbiAgICB9O1xuXG4gICAgbW9ja1B1cmNoYXNlSW52b2ljZVNlcnZpY2UuY3JlYXRlUHVyY2hhc2VJbnZvaWNlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tJbnZvaWNlKTtcbiAgICBtb2NrUHVyY2hhc2VJbnZvaWNlU2VydmljZS5nZXRQdXJjaGFzZUludm9pY2VCeUlkLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tJbnZvaWNlKTtcbiAgICBtb2NrUHVyY2hhc2VJbnZvaWNlU2VydmljZS51cGRhdGVQdXJjaGFzZUludm9pY2VTdGF0dXMubW9ja1Jlc29sdmVkVmFsdWUoeyAuLi5tb2NrSW52b2ljZSwgc3RhdHVzOiAnQVBQUk9WRUQnIH0pO1xuICAgIG1vY2tQdXJjaGFzZUludm9pY2VTZXJ2aWNlLmdldFB1cmNoYXNlSW52b2ljZXMubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgaW52b2ljZXM6IFttb2NrSW52b2ljZV0sXG4gICAgICB0b3RhbDogMSxcbiAgICAgIHBhZ2U6IDEsXG4gICAgICBsaW1pdDogMTBcbiAgICB9KTtcbiAgICBtb2NrUHVyY2hhc2VJbnZvaWNlU2VydmljZS5zZWFyY2hQdXJjaGFzZUludm9pY2VzLm1vY2tSZXNvbHZlZFZhbHVlKFttb2NrSW52b2ljZV0pO1xuICAgIG1vY2tQdXJjaGFzZUludm9pY2VTZXJ2aWNlLmRlbGV0ZVB1cmNoYXNlSW52b2ljZS5tb2NrUmVzb2x2ZWRWYWx1ZSh0cnVlKTtcblxuICAgIGNvbnNvbGUubG9nKCdUZXN0IG1vY2tzIHNldHVwIHN1Y2Nlc3NmdWxseScpO1xuICB9KTtcblxuICBhZnRlckVhY2goYXN5bmMgKCkgPT4ge1xuICAgIC8vIFJlc2V0IG1vY2tzIGFmdGVyIGVhY2ggdGVzdFxuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICBhZnRlckFsbChhc3luYyAoKSA9PiB7XG4gICAgLy8gRmluYWwgY2xlYW51cFxuICAgIGplc3QucmVzdG9yZUFsbE1vY2tzKCk7XG4gICAgY29uc29sZS5sb2coJ1Rlc3QgY2xlYW51cCBjb21wbGV0ZWQnKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1B1cmNoYXNlIEludm9pY2UgQ3JlYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgYSBwdXJjaGFzZSBpbnZvaWNlIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGludm9pY2VEYXRhID0ge1xuICAgICAgICBzdXBwbGllcklkOiB0ZXN0U3VwcGxpZXIuaWQsXG4gICAgICAgIGludm9pY2VOdW1iZXI6ICdQSS0wMDEnLFxuICAgICAgICBpbnZvaWNlRGF0ZTogbmV3IERhdGUoKSxcbiAgICAgICAgZHVlRGF0ZTogbmV3IERhdGUoRGF0ZS5ub3coKSArIDMwICogMjQgKiA2MCAqIDYwICogMTAwMCksIC8vIDMwIGRheXMgZnJvbSBub3dcbiAgICAgICAgc3RhdHVzOiAnUEVORElORycsXG4gICAgICAgIHN1YnRvdGFsOiA1MDAuMDAsXG4gICAgICAgIHRheEFtb3VudDogNTAuMDAsXG4gICAgICAgIHRvdGFsQW1vdW50OiA1NTAuMDAsXG4gICAgICAgIG5vdGVzOiAnVGVzdCBwdXJjaGFzZSBpbnZvaWNlJyxcbiAgICAgICAgY3JlYXRlZEJ5OiB0ZXN0VXNlci5pZFxuICAgICAgfTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwdXJjaGFzZUludm9pY2VTZXJ2aWNlLmNyZWF0ZVB1cmNoYXNlSW52b2ljZShpbnZvaWNlRGF0YSk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuaWQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVzdWx0Lmludm9pY2VOdW1iZXIpLnRvQmUoJ1BJLTAwMScpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5zdXBwbGllcklkKS50b0JlKHRlc3RTdXBwbGllci5pZCk7XG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1cykudG9CZSgnUEVORElORycpO1xuICAgICAgZXhwZWN0KHJlc3VsdC50b3RhbEFtb3VudCkudG9CZSg1NTAuMDApO1xuXG4gICAgICAvLyBWZXJpZnkgaW4gZGF0YWJhc2VcbiAgICAgIGNvbnN0IGRiSW52b2ljZSA9IGF3YWl0IHByaXNtYS5wdXJjaGFzZUludm9pY2UuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiByZXN1bHQuaWQgfVxuICAgICAgfSk7XG4gICAgICBleHBlY3QoZGJJbnZvaWNlKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGRiSW52b2ljZT8uaW52b2ljZU51bWJlcikudG9CZSgnUEktMDAxJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBwdXJjaGFzZSBpbnZvaWNlIHdpdGggaXRlbXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBpbnZvaWNlRGF0YSA9IHtcbiAgICAgICAgc3VwcGxpZXJJZDogdGVzdFN1cHBsaWVyLmlkLFxuICAgICAgICBpbnZvaWNlTnVtYmVyOiAnUEktMDAyJyxcbiAgICAgICAgaW52b2ljZURhdGU6IG5ldyBEYXRlKCksXG4gICAgICAgIGR1ZURhdGU6IG5ldyBEYXRlKERhdGUubm93KCkgKyAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApLFxuICAgICAgICBzdGF0dXM6ICdQRU5ESU5HJyxcbiAgICAgICAgY3JlYXRlZEJ5OiB0ZXN0VXNlci5pZCxcbiAgICAgICAgaXRlbXM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBwcm9kdWN0SWQ6IHRlc3RQcm9kdWN0LmlkLFxuICAgICAgICAgICAgcXVhbnRpdHk6IDEwLFxuICAgICAgICAgICAgdW5pdENvc3Q6IDUwLjAwLFxuICAgICAgICAgICAgdG90YWxDb3N0OiA1MDAuMDBcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH07XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHVyY2hhc2VJbnZvaWNlU2VydmljZS5jcmVhdGVQdXJjaGFzZUludm9pY2VXaXRoSXRlbXMoaW52b2ljZURhdGEpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVzdWx0LmlkKS50b0JlRGVmaW5lZCgpO1xuICAgICAgXG4gICAgICAvLyBWZXJpZnkgaXRlbXMgd2VyZSBjcmVhdGVkXG4gICAgICBjb25zdCBpbnZvaWNlSXRlbXMgPSBhd2FpdCBwcmlzbWEucHVyY2hhc2VJbnZvaWNlSXRlbS5maW5kTWFueSh7XG4gICAgICAgIHdoZXJlOiB7IHB1cmNoYXNlSW52b2ljZUlkOiByZXN1bHQuaWQgfVxuICAgICAgfSk7XG4gICAgICBleHBlY3QoaW52b2ljZUl0ZW1zKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QoaW52b2ljZUl0ZW1zWzBdLnByb2R1Y3RJZCkudG9CZSh0ZXN0UHJvZHVjdC5pZCk7XG4gICAgICBleHBlY3QoaW52b2ljZUl0ZW1zWzBdLnF1YW50aXR5KS50b0JlKDEwKTtcbiAgICAgIGV4cGVjdChpbnZvaWNlSXRlbXNbMF0udW5pdENvc3QpLnRvQmUoNTAuMDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSByZXF1aXJlZCBmaWVsZHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBpbnZhbGlkRGF0YSA9IHtcbiAgICAgICAgLy8gTWlzc2luZyByZXF1aXJlZCBmaWVsZHNcbiAgICAgICAgaW52b2ljZU51bWJlcjogJ1BJLTAwMydcbiAgICAgIH07XG5cbiAgICAgIC8vIEFjdCAmIEFzc2VydFxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBwdXJjaGFzZUludm9pY2VTZXJ2aWNlLmNyZWF0ZVB1cmNoYXNlSW52b2ljZShpbnZhbGlkRGF0YSBhcyBhbnkpXG4gICAgICApLnJlamVjdHMudG9UaHJvdygpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBwcmV2ZW50IGR1cGxpY2F0ZSBpbnZvaWNlIG51bWJlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBpbnZvaWNlRGF0YTEgPSB7XG4gICAgICAgIHN1cHBsaWVySWQ6IHRlc3RTdXBwbGllci5pZCxcbiAgICAgICAgaW52b2ljZU51bWJlcjogJ1BJLURVUExJQ0FURScsXG4gICAgICAgIGludm9pY2VEYXRlOiBuZXcgRGF0ZSgpLFxuICAgICAgICBkdWVEYXRlOiBuZXcgRGF0ZShEYXRlLm5vdygpICsgMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwKSxcbiAgICAgICAgc3RhdHVzOiAnUEVORElORycsXG4gICAgICAgIHN1YnRvdGFsOiAxMDAuMDAsXG4gICAgICAgIHRvdGFsQW1vdW50OiAxMDAuMDAsXG4gICAgICAgIGNyZWF0ZWRCeTogdGVzdFVzZXIuaWRcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGludm9pY2VEYXRhMiA9IHsgLi4uaW52b2ljZURhdGExIH07XG5cbiAgICAgIC8vIEFjdFxuICAgICAgYXdhaXQgcHVyY2hhc2VJbnZvaWNlU2VydmljZS5jcmVhdGVQdXJjaGFzZUludm9pY2UoaW52b2ljZURhdGExKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIHB1cmNoYXNlSW52b2ljZVNlcnZpY2UuY3JlYXRlUHVyY2hhc2VJbnZvaWNlKGludm9pY2VEYXRhMilcbiAgICAgICkucmVqZWN0cy50b1Rocm93KC91bmlxdWUgY29uc3RyYWludC9pKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1B1cmNoYXNlIEludm9pY2UgUmV0cmlldmFsJywgKCkgPT4ge1xuICAgIGxldCB0ZXN0SW52b2ljZTogYW55O1xuXG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICAvLyBDcmVhdGUgYSB0ZXN0IGludm9pY2UgZm9yIHJldHJpZXZhbCB0ZXN0c1xuICAgICAgdGVzdEludm9pY2UgPSBhd2FpdCBwcmlzbWEucHVyY2hhc2VJbnZvaWNlLmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBzdXBwbGllcklkOiB0ZXN0U3VwcGxpZXIuaWQsXG4gICAgICAgICAgaW52b2ljZU51bWJlcjogJ1BJLVJFVFJJRVZFLTAwMScsXG4gICAgICAgICAgaW52b2ljZURhdGU6IG5ldyBEYXRlKCksXG4gICAgICAgICAgZHVlRGF0ZTogbmV3IERhdGUoRGF0ZS5ub3coKSArIDMwICogMjQgKiA2MCAqIDYwICogMTAwMCksXG4gICAgICAgICAgc3RhdHVzOiAnUEVORElORycsXG4gICAgICAgICAgc3VidG90YWw6IDIwMC4wMCxcbiAgICAgICAgICB0YXhBbW91bnQ6IDIwLjAwLFxuICAgICAgICAgIHRvdGFsQW1vdW50OiAyMjAuMDAsXG4gICAgICAgICAgY3JlYXRlZEJ5OiB0ZXN0VXNlci5pZFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0cmlldmUgcHVyY2hhc2UgaW52b2ljZSBieSBJRCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHVyY2hhc2VJbnZvaWNlU2VydmljZS5nZXRQdXJjaGFzZUludm9pY2VCeUlkKHRlc3RJbnZvaWNlLmlkKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHJlc3VsdD8uaWQpLnRvQmUodGVzdEludm9pY2UuaWQpO1xuICAgICAgZXhwZWN0KHJlc3VsdD8uaW52b2ljZU51bWJlcikudG9CZSgnUEktUkVUUklFVkUtMDAxJyk7XG4gICAgICBleHBlY3QocmVzdWx0Py50b3RhbEFtb3VudCkudG9CZSgyMjAuMDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXRyaWV2ZSBwdXJjaGFzZSBpbnZvaWNlIHdpdGggc3VwcGxpZXIgZGV0YWlscycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHVyY2hhc2VJbnZvaWNlU2VydmljZS5nZXRQdXJjaGFzZUludm9pY2VXaXRoRGV0YWlscyh0ZXN0SW52b2ljZS5pZCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQ/LnN1cHBsaWVyKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHJlc3VsdD8uc3VwcGxpZXIubmFtZSkudG9CZSgnVGVzdCBTdXBwbGllcicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gbnVsbCBmb3Igbm9uLWV4aXN0ZW50IGludm9pY2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHB1cmNoYXNlSW52b2ljZVNlcnZpY2UuZ2V0UHVyY2hhc2VJbnZvaWNlQnlJZCg5OTk5OSk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZU51bGwoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0cmlldmUgYWxsIHB1cmNoYXNlIGludm9pY2VzIHdpdGggcGFnaW5hdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2UgLSBDcmVhdGUgYWRkaXRpb25hbCBpbnZvaWNlc1xuICAgICAgYXdhaXQgcHJpc21hLnB1cmNoYXNlSW52b2ljZS5jcmVhdGVNYW55KHtcbiAgICAgICAgZGF0YTogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHN1cHBsaWVySWQ6IHRlc3RTdXBwbGllci5pZCxcbiAgICAgICAgICAgIGludm9pY2VOdW1iZXI6ICdQSS1QQUdFLTAwMScsXG4gICAgICAgICAgICBpbnZvaWNlRGF0ZTogbmV3IERhdGUoKSxcbiAgICAgICAgICAgIGR1ZURhdGU6IG5ldyBEYXRlKERhdGUubm93KCkgKyAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApLFxuICAgICAgICAgICAgc3RhdHVzOiAnUEVORElORycsXG4gICAgICAgICAgICBzdWJ0b3RhbDogMTAwLjAwLFxuICAgICAgICAgICAgdG90YWxBbW91bnQ6IDEwMC4wMCxcbiAgICAgICAgICAgIGNyZWF0ZWRCeTogdGVzdFVzZXIuaWRcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHN1cHBsaWVySWQ6IHRlc3RTdXBwbGllci5pZCxcbiAgICAgICAgICAgIGludm9pY2VOdW1iZXI6ICdQSS1QQUdFLTAwMicsXG4gICAgICAgICAgICBpbnZvaWNlRGF0ZTogbmV3IERhdGUoKSxcbiAgICAgICAgICAgIGR1ZURhdGU6IG5ldyBEYXRlKERhdGUubm93KCkgKyAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApLFxuICAgICAgICAgICAgc3RhdHVzOiAnUEVORElORycsXG4gICAgICAgICAgICBzdWJ0b3RhbDogMTUwLjAwLFxuICAgICAgICAgICAgdG90YWxBbW91bnQ6IDE1MC4wMCxcbiAgICAgICAgICAgIGNyZWF0ZWRCeTogdGVzdFVzZXIuaWRcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHB1cmNoYXNlSW52b2ljZVNlcnZpY2UuZ2V0UHVyY2hhc2VJbnZvaWNlcyh7XG4gICAgICAgIHBhZ2U6IDEsXG4gICAgICAgIGxpbWl0OiAyXG4gICAgICB9KTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0Lmludm9pY2VzKS50b0hhdmVMZW5ndGgoMik7XG4gICAgICBleHBlY3QocmVzdWx0LnRvdGFsKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDMpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5wYWdlKS50b0JlKDEpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5saW1pdCkudG9CZSgyKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1B1cmNoYXNlIEludm9pY2UgVXBkYXRlcycsICgpID0+IHtcbiAgICBsZXQgdGVzdEludm9pY2U6IGFueTtcblxuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgdGVzdEludm9pY2UgPSBhd2FpdCBwcmlzbWEucHVyY2hhc2VJbnZvaWNlLmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBzdXBwbGllcklkOiB0ZXN0U3VwcGxpZXIuaWQsXG4gICAgICAgICAgaW52b2ljZU51bWJlcjogJ1BJLVVQREFURS0wMDEnLFxuICAgICAgICAgIGludm9pY2VEYXRlOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIGR1ZURhdGU6IG5ldyBEYXRlKERhdGUubm93KCkgKyAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApLFxuICAgICAgICAgIHN0YXR1czogJ1BFTkRJTkcnLFxuICAgICAgICAgIHN1YnRvdGFsOiAzMDAuMDAsXG4gICAgICAgICAgdG90YWxBbW91bnQ6IDMwMC4wMCxcbiAgICAgICAgICBjcmVhdGVkQnk6IHRlc3RVc2VyLmlkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB1cGRhdGUgcHVyY2hhc2UgaW52b2ljZSBzdGF0dXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHB1cmNoYXNlSW52b2ljZVNlcnZpY2UudXBkYXRlUHVyY2hhc2VJbnZvaWNlU3RhdHVzKFxuICAgICAgICB0ZXN0SW52b2ljZS5pZCxcbiAgICAgICAgJ0FQUFJPVkVEJ1xuICAgICAgKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1cykudG9CZSgnQVBQUk9WRUQnKTtcbiAgICAgIFxuICAgICAgLy8gVmVyaWZ5IGluIGRhdGFiYXNlXG4gICAgICBjb25zdCBkYkludm9pY2UgPSBhd2FpdCBwcmlzbWEucHVyY2hhc2VJbnZvaWNlLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogdGVzdEludm9pY2UuaWQgfVxuICAgICAgfSk7XG4gICAgICBleHBlY3QoZGJJbnZvaWNlPy5zdGF0dXMpLnRvQmUoJ0FQUFJPVkVEJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHVwZGF0ZSBwdXJjaGFzZSBpbnZvaWNlIGRldGFpbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCB1cGRhdGVEYXRhID0ge1xuICAgICAgICBub3RlczogJ1VwZGF0ZWQgbm90ZXMnLFxuICAgICAgICBzdWJ0b3RhbDogMzUwLjAwLFxuICAgICAgICB0YXhBbW91bnQ6IDM1LjAwLFxuICAgICAgICB0b3RhbEFtb3VudDogMzg1LjAwXG4gICAgICB9O1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHB1cmNoYXNlSW52b2ljZVNlcnZpY2UudXBkYXRlUHVyY2hhc2VJbnZvaWNlKFxuICAgICAgICB0ZXN0SW52b2ljZS5pZCxcbiAgICAgICAgdXBkYXRlRGF0YVxuICAgICAgKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0Lm5vdGVzKS50b0JlKCdVcGRhdGVkIG5vdGVzJyk7XG4gICAgICBleHBlY3QocmVzdWx0LnRvdGFsQW1vdW50KS50b0JlKDM4NS4wMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHByZXZlbnQgdXBkYXRpbmcgYXBwcm92ZWQgaW52b2ljZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlIC0gRmlyc3QgYXBwcm92ZSB0aGUgaW52b2ljZVxuICAgICAgYXdhaXQgcHVyY2hhc2VJbnZvaWNlU2VydmljZS51cGRhdGVQdXJjaGFzZUludm9pY2VTdGF0dXMoXG4gICAgICAgIHRlc3RJbnZvaWNlLmlkLFxuICAgICAgICAnQVBQUk9WRUQnXG4gICAgICApO1xuXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgcHVyY2hhc2VJbnZvaWNlU2VydmljZS51cGRhdGVQdXJjaGFzZUludm9pY2UodGVzdEludm9pY2UuaWQsIHtcbiAgICAgICAgICBub3RlczogJ1Nob3VsZCBub3QgYmUgYWxsb3dlZCdcbiAgICAgICAgfSlcbiAgICAgICkucmVqZWN0cy50b1Rocm93KC9jYW5ub3QgYmUgbW9kaWZpZWQvaSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQdXJjaGFzZSBJbnZvaWNlIERlbGV0aW9uJywgKCkgPT4ge1xuICAgIGxldCB0ZXN0SW52b2ljZTogYW55O1xuXG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICB0ZXN0SW52b2ljZSA9IGF3YWl0IHByaXNtYS5wdXJjaGFzZUludm9pY2UuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHN1cHBsaWVySWQ6IHRlc3RTdXBwbGllci5pZCxcbiAgICAgICAgICBpbnZvaWNlTnVtYmVyOiAnUEktREVMRVRFLTAwMScsXG4gICAgICAgICAgaW52b2ljZURhdGU6IG5ldyBEYXRlKCksXG4gICAgICAgICAgZHVlRGF0ZTogbmV3IERhdGUoRGF0ZS5ub3coKSArIDMwICogMjQgKiA2MCAqIDYwICogMTAwMCksXG4gICAgICAgICAgc3RhdHVzOiAnUEVORElORycsXG4gICAgICAgICAgc3VidG90YWw6IDEwMC4wMCxcbiAgICAgICAgICB0b3RhbEFtb3VudDogMTAwLjAwLFxuICAgICAgICAgIGNyZWF0ZWRCeTogdGVzdFVzZXIuaWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNvZnQgZGVsZXRlIHB1cmNoYXNlIGludm9pY2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHB1cmNoYXNlSW52b2ljZVNlcnZpY2UuZGVsZXRlUHVyY2hhc2VJbnZvaWNlKHRlc3RJbnZvaWNlLmlkKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKHRydWUpO1xuICAgICAgXG4gICAgICAvLyBWZXJpZnkgc29mdCBkZWxldGlvblxuICAgICAgY29uc3QgZGJJbnZvaWNlID0gYXdhaXQgcHJpc21hLnB1cmNoYXNlSW52b2ljZS5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IHRlc3RJbnZvaWNlLmlkIH1cbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KGRiSW52b2ljZT8uaXNEZWxldGVkKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBwcmV2ZW50IGRlbGV0aW9uIG9mIGFwcHJvdmVkIGludm9pY2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgYXdhaXQgcHVyY2hhc2VJbnZvaWNlU2VydmljZS51cGRhdGVQdXJjaGFzZUludm9pY2VTdGF0dXMoXG4gICAgICAgIHRlc3RJbnZvaWNlLmlkLFxuICAgICAgICAnQVBQUk9WRUQnXG4gICAgICApO1xuXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgcHVyY2hhc2VJbnZvaWNlU2VydmljZS5kZWxldGVQdXJjaGFzZUludm9pY2UodGVzdEludm9pY2UuaWQpXG4gICAgICApLnJlamVjdHMudG9UaHJvdygvY2Fubm90IGJlIGRlbGV0ZWQvaSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQdXJjaGFzZSBJbnZvaWNlIFNlYXJjaCBhbmQgRmlsdGVyaW5nJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQ3JlYXRlIG11bHRpcGxlIHRlc3QgaW52b2ljZXMgd2l0aCBkaWZmZXJlbnQgc3RhdHVzZXMgYW5kIGRhdGVzXG4gICAgICBhd2FpdCBwcmlzbWEucHVyY2hhc2VJbnZvaWNlLmNyZWF0ZU1hbnkoe1xuICAgICAgICBkYXRhOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgc3VwcGxpZXJJZDogdGVzdFN1cHBsaWVyLmlkLFxuICAgICAgICAgICAgaW52b2ljZU51bWJlcjogJ1BJLVNFQVJDSC0wMDEnLFxuICAgICAgICAgICAgaW52b2ljZURhdGU6IG5ldyBEYXRlKCcyMDI0LTAxLTAxJyksXG4gICAgICAgICAgICBkdWVEYXRlOiBuZXcgRGF0ZSgnMjAyNC0wMS0zMScpLFxuICAgICAgICAgICAgc3RhdHVzOiAnUEVORElORycsXG4gICAgICAgICAgICBzdWJ0b3RhbDogMTAwLjAwLFxuICAgICAgICAgICAgdG90YWxBbW91bnQ6IDEwMC4wMCxcbiAgICAgICAgICAgIGNyZWF0ZWRCeTogdGVzdFVzZXIuaWRcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHN1cHBsaWVySWQ6IHRlc3RTdXBwbGllci5pZCxcbiAgICAgICAgICAgIGludm9pY2VOdW1iZXI6ICdQSS1TRUFSQ0gtMDAyJyxcbiAgICAgICAgICAgIGludm9pY2VEYXRlOiBuZXcgRGF0ZSgnMjAyNC0wMi0wMScpLFxuICAgICAgICAgICAgZHVlRGF0ZTogbmV3IERhdGUoJzIwMjQtMDItMjgnKSxcbiAgICAgICAgICAgIHN0YXR1czogJ0FQUFJPVkVEJyxcbiAgICAgICAgICAgIHN1YnRvdGFsOiAyMDAuMDAsXG4gICAgICAgICAgICB0b3RhbEFtb3VudDogMjAwLjAwLFxuICAgICAgICAgICAgY3JlYXRlZEJ5OiB0ZXN0VXNlci5pZFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgc3VwcGxpZXJJZDogdGVzdFN1cHBsaWVyLmlkLFxuICAgICAgICAgICAgaW52b2ljZU51bWJlcjogJ1BJLVNFQVJDSC0wMDMnLFxuICAgICAgICAgICAgaW52b2ljZURhdGU6IG5ldyBEYXRlKCcyMDI0LTAzLTAxJyksXG4gICAgICAgICAgICBkdWVEYXRlOiBuZXcgRGF0ZSgnMjAyNC0wMy0zMScpLFxuICAgICAgICAgICAgc3RhdHVzOiAnUEFJRCcsXG4gICAgICAgICAgICBzdWJ0b3RhbDogMzAwLjAwLFxuICAgICAgICAgICAgdG90YWxBbW91bnQ6IDMwMC4wMCxcbiAgICAgICAgICAgIGNyZWF0ZWRCeTogdGVzdFVzZXIuaWRcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzZWFyY2ggaW52b2ljZXMgYnkgaW52b2ljZSBudW1iZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHB1cmNoYXNlSW52b2ljZVNlcnZpY2Uuc2VhcmNoUHVyY2hhc2VJbnZvaWNlcyh7XG4gICAgICAgIGludm9pY2VOdW1iZXI6ICdQSS1TRUFSQ0gtMDAyJ1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KHJlc3VsdFswXS5pbnZvaWNlTnVtYmVyKS50b0JlKCdQSS1TRUFSQ0gtMDAyJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGZpbHRlciBpbnZvaWNlcyBieSBzdGF0dXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHB1cmNoYXNlSW52b2ljZVNlcnZpY2Uuc2VhcmNoUHVyY2hhc2VJbnZvaWNlcyh7XG4gICAgICAgIHN0YXR1czogJ0FQUFJPVkVEJ1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KHJlc3VsdFswXS5zdGF0dXMpLnRvQmUoJ0FQUFJPVkVEJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGZpbHRlciBpbnZvaWNlcyBieSBkYXRlIHJhbmdlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwdXJjaGFzZUludm9pY2VTZXJ2aWNlLnNlYXJjaFB1cmNoYXNlSW52b2ljZXMoe1xuICAgICAgICBkYXRlRnJvbTogbmV3IERhdGUoJzIwMjQtMDItMDEnKSxcbiAgICAgICAgZGF0ZVRvOiBuZXcgRGF0ZSgnMjAyNC0wMy0zMScpXG4gICAgICB9KTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVMZW5ndGgoMik7XG4gICAgICBleHBlY3QocmVzdWx0LmV2ZXJ5KGludm9pY2UgPT4gXG4gICAgICAgIGludm9pY2UuaW52b2ljZURhdGUgPj0gbmV3IERhdGUoJzIwMjQtMDItMDEnKSAmJlxuICAgICAgICBpbnZvaWNlLmludm9pY2VEYXRlIDw9IG5ldyBEYXRlKCcyMDI0LTAzLTMxJylcbiAgICAgICkpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGZpbHRlciBpbnZvaWNlcyBieSBzdXBwbGllcicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHVyY2hhc2VJbnZvaWNlU2VydmljZS5zZWFyY2hQdXJjaGFzZUludm9pY2VzKHtcbiAgICAgICAgc3VwcGxpZXJJZDogdGVzdFN1cHBsaWVyLmlkXG4gICAgICB9KTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0Lmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgzKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZXZlcnkoaW52b2ljZSA9PiBpbnZvaWNlLnN1cHBsaWVySWQgPT09IHRlc3RTdXBwbGllci5pZCkpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQdXJjaGFzZSBJbnZvaWNlIEJ1c2luZXNzIExvZ2ljJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIHRvdGFscyBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBpbnZvaWNlRGF0YSA9IHtcbiAgICAgICAgc3VwcGxpZXJJZDogdGVzdFN1cHBsaWVyLmlkLFxuICAgICAgICBpbnZvaWNlTnVtYmVyOiAnUEktQ0FMQy0wMDEnLFxuICAgICAgICBpbnZvaWNlRGF0ZTogbmV3IERhdGUoKSxcbiAgICAgICAgZHVlRGF0ZTogbmV3IERhdGUoRGF0ZS5ub3coKSArIDMwICogMjQgKiA2MCAqIDYwICogMTAwMCksXG4gICAgICAgIHN0YXR1czogJ1BFTkRJTkcnLFxuICAgICAgICBjcmVhdGVkQnk6IHRlc3RVc2VyLmlkLFxuICAgICAgICBpdGVtczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHByb2R1Y3RJZDogdGVzdFByb2R1Y3QuaWQsXG4gICAgICAgICAgICBxdWFudGl0eTogNSxcbiAgICAgICAgICAgIHVuaXRDb3N0OiAyMC4wMCxcbiAgICAgICAgICAgIHRvdGFsQ29zdDogMTAwLjAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBwcm9kdWN0SWQ6IHRlc3RQcm9kdWN0LmlkLFxuICAgICAgICAgICAgcXVhbnRpdHk6IDMsXG4gICAgICAgICAgICB1bml0Q29zdDogMzAuMDAsXG4gICAgICAgICAgICB0b3RhbENvc3Q6IDkwLjAwXG4gICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICB0YXhSYXRlOiAwLjEwIC8vIDEwJSB0YXhcbiAgICAgIH07XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHVyY2hhc2VJbnZvaWNlU2VydmljZS5jcmVhdGVQdXJjaGFzZUludm9pY2VXaXRoQ2FsY3VsYXRpb25zKGludm9pY2VEYXRhKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0LnN1YnRvdGFsKS50b0JlKDE5MC4wMCk7IC8vIDEwMCArIDkwXG4gICAgICBleHBlY3QocmVzdWx0LnRheEFtb3VudCkudG9CZSgxOS4wMCk7IC8vIDE5MCAqIDAuMTBcbiAgICAgIGV4cGVjdChyZXN1bHQudG90YWxBbW91bnQpLnRvQmUoMjA5LjAwKTsgLy8gMTkwICsgMTlcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdXBkYXRlIGludmVudG9yeSB3aGVuIGludm9pY2UgaXMgYXBwcm92ZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBpbnZvaWNlID0gYXdhaXQgcHJpc21hLnB1cmNoYXNlSW52b2ljZS5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgc3VwcGxpZXJJZDogdGVzdFN1cHBsaWVyLmlkLFxuICAgICAgICAgIGludm9pY2VOdW1iZXI6ICdQSS1JTlZFTlRPUlktMDAxJyxcbiAgICAgICAgICBpbnZvaWNlRGF0ZTogbmV3IERhdGUoKSxcbiAgICAgICAgICBkdWVEYXRlOiBuZXcgRGF0ZShEYXRlLm5vdygpICsgMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwKSxcbiAgICAgICAgICBzdGF0dXM6ICdQRU5ESU5HJyxcbiAgICAgICAgICBzdWJ0b3RhbDogNTAwLjAwLFxuICAgICAgICAgIHRvdGFsQW1vdW50OiA1MDAuMDAsXG4gICAgICAgICAgY3JlYXRlZEJ5OiB0ZXN0VXNlci5pZFxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgcHJpc21hLnB1cmNoYXNlSW52b2ljZUl0ZW0uY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHB1cmNoYXNlSW52b2ljZUlkOiBpbnZvaWNlLmlkLFxuICAgICAgICAgIHByb2R1Y3RJZDogdGVzdFByb2R1Y3QuaWQsXG4gICAgICAgICAgcXVhbnRpdHk6IDEwLFxuICAgICAgICAgIHVuaXRDb3N0OiA1MC4wMCxcbiAgICAgICAgICB0b3RhbENvc3Q6IDUwMC4wMFxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gQWN0XG4gICAgICBhd2FpdCBwdXJjaGFzZUludm9pY2VTZXJ2aWNlLmFwcHJvdmVQdXJjaGFzZUludm9pY2UoaW52b2ljZS5pZCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgY29uc3QgaW52ZW50b3J5SXRlbXMgPSBhd2FpdCBwcmlzbWEuaW52ZW50b3J5SXRlbS5maW5kTWFueSh7XG4gICAgICAgIHdoZXJlOiB7IHByb2R1Y3RJZDogdGVzdFByb2R1Y3QuaWQgfVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChpbnZlbnRvcnlJdGVtcykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KGludmVudG9yeUl0ZW1zWzBdLnF1YW50aXR5KS50b0JlKDEwKTtcbiAgICAgIGV4cGVjdChpbnZlbnRvcnlJdGVtc1swXS51bml0Q29zdCkudG9CZSg1MC4wMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFcnJvciBIYW5kbGluZyBhbmQgRWRnZSBDYXNlcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb25jdXJyZW50IGludm9pY2UgY3JlYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBpbnZvaWNlRGF0YSA9IHtcbiAgICAgICAgc3VwcGxpZXJJZDogdGVzdFN1cHBsaWVyLmlkLFxuICAgICAgICBpbnZvaWNlTnVtYmVyOiAnUEktQ09OQ1VSUkVOVC0wMDEnLFxuICAgICAgICBpbnZvaWNlRGF0ZTogbmV3IERhdGUoKSxcbiAgICAgICAgZHVlRGF0ZTogbmV3IERhdGUoRGF0ZS5ub3coKSArIDMwICogMjQgKiA2MCAqIDYwICogMTAwMCksXG4gICAgICAgIHN0YXR1czogJ1BFTkRJTkcnLFxuICAgICAgICBzdWJ0b3RhbDogMTAwLjAwLFxuICAgICAgICB0b3RhbEFtb3VudDogMTAwLjAwLFxuICAgICAgICBjcmVhdGVkQnk6IHRlc3RVc2VyLmlkXG4gICAgICB9O1xuXG4gICAgICAvLyBBY3QgLSBDcmVhdGUgbXVsdGlwbGUgaW52b2ljZXMgY29uY3VycmVudGx5XG4gICAgICBjb25zdCBwcm9taXNlcyA9IEFycmF5KDMpLmZpbGwobnVsbCkubWFwKChfLCBpbmRleCkgPT4gXG4gICAgICAgIHB1cmNoYXNlSW52b2ljZVNlcnZpY2UuY3JlYXRlUHVyY2hhc2VJbnZvaWNlKHtcbiAgICAgICAgICAuLi5pbnZvaWNlRGF0YSxcbiAgICAgICAgICBpbnZvaWNlTnVtYmVyOiBgUEktQ09OQ1VSUkVOVC0ke2luZGV4ICsgMX1gXG4gICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKHByb21pc2VzKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBjb25zdCBzdWNjZXNzZnVsID0gcmVzdWx0cy5maWx0ZXIociA9PiByLnN0YXR1cyA9PT0gJ2Z1bGZpbGxlZCcpO1xuICAgICAgZXhwZWN0KHN1Y2Nlc3NmdWwpLnRvSGF2ZUxlbmd0aCgzKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGludmFsaWQgcHJvZHVjdCByZWZlcmVuY2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgaW52b2ljZURhdGEgPSB7XG4gICAgICAgIHN1cHBsaWVySWQ6IHRlc3RTdXBwbGllci5pZCxcbiAgICAgICAgaW52b2ljZU51bWJlcjogJ1BJLUlOVkFMSUQtMDAxJyxcbiAgICAgICAgaW52b2ljZURhdGU6IG5ldyBEYXRlKCksXG4gICAgICAgIGR1ZURhdGU6IG5ldyBEYXRlKERhdGUubm93KCkgKyAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApLFxuICAgICAgICBzdGF0dXM6ICdQRU5ESU5HJyxcbiAgICAgICAgY3JlYXRlZEJ5OiB0ZXN0VXNlci5pZCxcbiAgICAgICAgaXRlbXM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBwcm9kdWN0SWQ6IDk5OTk5LCAvLyBOb24tZXhpc3RlbnQgcHJvZHVjdFxuICAgICAgICAgICAgcXVhbnRpdHk6IDEsXG4gICAgICAgICAgICB1bml0Q29zdDogMTAuMDAsXG4gICAgICAgICAgICB0b3RhbENvc3Q6IDEwLjAwXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9O1xuXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgcHVyY2hhc2VJbnZvaWNlU2VydmljZS5jcmVhdGVQdXJjaGFzZUludm9pY2VXaXRoSXRlbXMoaW52b2ljZURhdGEpXG4gICAgICApLnJlamVjdHMudG9UaHJvdygpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZGF0YWJhc2UgdHJhbnNhY3Rpb24gZmFpbHVyZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBUaGlzIHRlc3Qgd291bGQgcmVxdWlyZSBtb3JlIHNvcGhpc3RpY2F0ZWQgbW9ja2luZyB0byBzaW11bGF0ZSB0cmFuc2FjdGlvbiBmYWlsdXJlc1xuICAgICAgLy8gRm9yIG5vdywgd2UnbGwgdGVzdCB0aGF0IHRoZSBzZXJ2aWNlIGhhbmRsZXMgYmFzaWMgdmFsaWRhdGlvbiBlcnJvcnNcbiAgICAgIFxuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgaW52YWxpZERhdGEgPSB7XG4gICAgICAgIC8vIE1pc3NpbmcgcmVxdWlyZWQgc3VwcGxpZXJJZFxuICAgICAgICBpbnZvaWNlTnVtYmVyOiAnUEktSU5WQUxJRC0wMDInLFxuICAgICAgICBpbnZvaWNlRGF0ZTogbmV3IERhdGUoKSxcbiAgICAgICAgc3RhdHVzOiAnUEVORElORydcbiAgICAgIH07XG5cbiAgICAgIC8vIEFjdCAmIEFzc2VydFxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBwdXJjaGFzZUludm9pY2VTZXJ2aWNlLmNyZWF0ZVB1cmNoYXNlSW52b2ljZShpbnZhbGlkRGF0YSBhcyBhbnkpXG4gICAgICApLnJlamVjdHMudG9UaHJvdygpO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJuYW1lcyI6WyJtb2NrUHJpc21hIiwidXNlciIsImNyZWF0ZSIsImplc3QiLCJmbiIsImZpbmRVbmlxdWUiLCJmaW5kTWFueSIsInVwZGF0ZSIsImRlbGV0ZSIsImRlbGV0ZU1hbnkiLCJzdXBwbGllciIsImNhdGVnb3J5IiwicHJvZHVjdCIsInB1cmNoYXNlSW52b2ljZSIsInB1cmNoYXNlSW52b2ljZUl0ZW0iLCJpbnZlbnRvcnlJdGVtIiwiJGNvbm5lY3QiLCIkZGlzY29ubmVjdCIsIm1vY2tQdXJjaGFzZUludm9pY2VTZXJ2aWNlIiwiY3JlYXRlUHVyY2hhc2VJbnZvaWNlIiwiZ2V0UHVyY2hhc2VJbnZvaWNlQnlJZCIsImdldFB1cmNoYXNlSW52b2ljZXMiLCJ1cGRhdGVQdXJjaGFzZUludm9pY2UiLCJ1cGRhdGVQdXJjaGFzZUludm9pY2VTdGF0dXMiLCJkZWxldGVQdXJjaGFzZUludm9pY2UiLCJzZWFyY2hQdXJjaGFzZUludm9pY2VzIiwiY3JlYXRlUHVyY2hhc2VJbnZvaWNlV2l0aENhbGN1bGF0aW9ucyIsImNyZWF0ZVB1cmNoYXNlSW52b2ljZVdpdGhJdGVtcyIsIm1vY2siLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInByaXNtYSIsImRiIiwiUHVyY2hhc2VJbnZvaWNlU2VydmljZSIsIm1vY2tJbXBsZW1lbnRhdGlvbiIsImRlc2NyaWJlIiwicHVyY2hhc2VJbnZvaWNlU2VydmljZSIsInRlc3RTdXBwbGllciIsInRlc3RQcm9kdWN0IiwidGVzdFVzZXIiLCJ0ZXN0Q2F0ZWdvcnkiLCJiZWZvcmVBbGwiLCJjb25zb2xlIiwibG9nIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJpZCIsImVtYWlsIiwicGFzc3dvcmQiLCJyb2xlIiwiaXNBY3RpdmUiLCJuYW1lIiwicGhvbmUiLCJhZGRyZXNzIiwiZGVzY3JpcHRpb24iLCJza3UiLCJwcmljZSIsImNvc3QiLCJjYXRlZ29yeUlkIiwibW9ja0ludm9pY2UiLCJpbnZvaWNlTnVtYmVyIiwic3VwcGxpZXJJZCIsInN0YXR1cyIsInRvdGFsQW1vdW50Iiwic3VidG90YWwiLCJ0YXhBbW91bnQiLCJpbnZvaWNlRGF0ZSIsIkRhdGUiLCJkdWVEYXRlIiwibm93IiwiY3JlYXRlZEJ5IiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0IiwibW9ja1Jlc29sdmVkVmFsdWUiLCJpbnZvaWNlcyIsInRvdGFsIiwicGFnZSIsImxpbWl0IiwiYWZ0ZXJFYWNoIiwiYWZ0ZXJBbGwiLCJyZXN0b3JlQWxsTW9ja3MiLCJpdCIsImludm9pY2VEYXRhIiwibm90ZXMiLCJyZXN1bHQiLCJleHBlY3QiLCJ0b0JlRGVmaW5lZCIsInRvQmUiLCJkYkludm9pY2UiLCJ3aGVyZSIsIml0ZW1zIiwicHJvZHVjdElkIiwicXVhbnRpdHkiLCJ1bml0Q29zdCIsInRvdGFsQ29zdCIsImludm9pY2VJdGVtcyIsInB1cmNoYXNlSW52b2ljZUlkIiwidG9IYXZlTGVuZ3RoIiwiaW52YWxpZERhdGEiLCJyZWplY3RzIiwidG9UaHJvdyIsImludm9pY2VEYXRhMSIsImludm9pY2VEYXRhMiIsInRlc3RJbnZvaWNlIiwiZGF0YSIsImdldFB1cmNoYXNlSW52b2ljZVdpdGhEZXRhaWxzIiwidG9CZU51bGwiLCJjcmVhdGVNYW55IiwidG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCIsInVwZGF0ZURhdGEiLCJpc0RlbGV0ZWQiLCJkYXRlRnJvbSIsImRhdGVUbyIsImV2ZXJ5IiwiaW52b2ljZSIsImxlbmd0aCIsInRheFJhdGUiLCJhcHByb3ZlUHVyY2hhc2VJbnZvaWNlIiwiaW52ZW50b3J5SXRlbXMiLCJwcm9taXNlcyIsIkFycmF5IiwiZmlsbCIsIm1hcCIsIl8iLCJpbmRleCIsInJlc3VsdHMiLCJQcm9taXNlIiwiYWxs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