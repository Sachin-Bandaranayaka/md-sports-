8d55de0579255c5ac0d754bd82047031
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _globals = require("@jest/globals");
const _purchaseInvoiceService = require("../../src/services/purchaseInvoiceService");
const _client = require("@prisma/client");
const _db = require("../../src/lib/db");
// Mock the database
_globals.jest.mock("@/lib/db", ()=>({
        db: {
            purchaseInvoice: {
                create: _globals.jest.fn(),
                findUnique: _globals.jest.fn(),
                findMany: _globals.jest.fn(),
                update: _globals.jest.fn(),
                delete: _globals.jest.fn()
            },
            purchaseInvoiceItem: {
                createMany: _globals.jest.fn(),
                deleteMany: _globals.jest.fn()
            },
            $transaction: _globals.jest.fn()
        }
    }));
const mockDb = _db.db;
(0, _globals.describe)("PurchaseInvoiceService", ()=>{
    let service;
    (0, _globals.beforeEach)(()=>{
        service = new _purchaseInvoiceService.PurchaseInvoiceService();
        _globals.jest.clearAllMocks();
    });
    (0, _globals.afterEach)(()=>{
        _globals.jest.resetAllMocks();
    });
    (0, _globals.describe)("createPurchaseInvoice", ()=>{
        (0, _globals.it)("should create a purchase invoice successfully", async ()=>{
            const invoiceData = {
                invoiceNumber: "PI-001",
                supplierId: 1,
                totalAmount: 1000,
                status: _client.PurchaseInvoiceStatus.PENDING,
                notes: "Test invoice",
                shopId: 1
            };
            const mockCreatedInvoice = {
                id: 1,
                ...invoiceData,
                createdAt: new Date(),
                updatedAt: new Date(),
                supplier: {
                    id: 1,
                    name: "Test Supplier"
                },
                items: []
            };
            mockDb.purchaseInvoice.create.mockResolvedValue(mockCreatedInvoice);
            const result = await service.createPurchaseInvoice(invoiceData);
            (0, _globals.expect)(mockDb.purchaseInvoice.create).toHaveBeenCalledWith({
                data: invoiceData,
                include: {
                    supplier: true,
                    items: {
                        include: {
                            product: true
                        }
                    }
                }
            });
            (0, _globals.expect)(result).toEqual(mockCreatedInvoice);
        });
        (0, _globals.it)("should handle database errors", async ()=>{
            const invoiceData = {
                invoiceNumber: "PI-001",
                supplierId: 1,
                totalAmount: 1000,
                status: _client.PurchaseInvoiceStatus.PENDING
            };
            mockDb.purchaseInvoice.create.mockRejectedValue(new Error("Database error"));
            await (0, _globals.expect)(service.createPurchaseInvoice(invoiceData)).rejects.toThrow("Database error");
        });
    });
    (0, _globals.describe)("createPurchaseInvoiceWithItems", ()=>{
        (0, _globals.it)("should create a purchase invoice with items successfully", async ()=>{
            const invoiceData = {
                invoiceNumber: "PI-002",
                supplierId: 1,
                totalAmount: 1500,
                status: _client.PurchaseInvoiceStatus.PENDING,
                items: [
                    {
                        productId: 1,
                        quantity: 10,
                        price: 100
                    },
                    {
                        productId: 2,
                        quantity: 5,
                        price: 100
                    }
                ]
            };
            const mockCreatedInvoice = {
                id: 1,
                invoiceNumber: "PI-002",
                supplierId: 1,
                totalAmount: 1500,
                status: _client.PurchaseInvoiceStatus.PENDING,
                createdAt: new Date(),
                updatedAt: new Date()
            };
            const mockFinalInvoice = {
                ...mockCreatedInvoice,
                supplier: {
                    id: 1,
                    name: "Test Supplier"
                },
                items: [
                    {
                        id: 1,
                        purchaseInvoiceId: 1,
                        productId: 1,
                        quantity: 10,
                        price: 100,
                        product: {
                            id: 1,
                            name: "Product 1"
                        }
                    },
                    {
                        id: 2,
                        purchaseInvoiceId: 1,
                        productId: 2,
                        quantity: 5,
                        price: 100,
                        product: {
                            id: 2,
                            name: "Product 2"
                        }
                    }
                ]
            };
            mockDb.$transaction.mockImplementation(async (callback)=>{
                const mockTx = {
                    purchaseInvoice: {
                        create: _globals.jest.fn().mockResolvedValue(mockCreatedInvoice),
                        findUnique: _globals.jest.fn().mockResolvedValue(mockFinalInvoice)
                    },
                    purchaseInvoiceItem: {
                        createMany: _globals.jest.fn().mockResolvedValue({
                            count: 2
                        })
                    }
                };
                return await callback(mockTx);
            });
            const result = await service.createPurchaseInvoiceWithItems(invoiceData);
            (0, _globals.expect)(mockDb.$transaction).toHaveBeenCalled();
            (0, _globals.expect)(result).toEqual(mockFinalInvoice);
        });
        (0, _globals.it)("should handle empty items array", async ()=>{
            const invoiceData = {
                invoiceNumber: "PI-003",
                supplierId: 1,
                totalAmount: 0,
                status: _client.PurchaseInvoiceStatus.PENDING,
                items: []
            };
            const mockCreatedInvoice = {
                id: 1,
                invoiceNumber: "PI-003",
                supplierId: 1,
                totalAmount: 0,
                status: _client.PurchaseInvoiceStatus.PENDING,
                supplier: {
                    id: 1,
                    name: "Test Supplier"
                },
                items: []
            };
            mockDb.$transaction.mockImplementation(async (callback)=>{
                const mockTx = {
                    purchaseInvoice: {
                        create: _globals.jest.fn().mockResolvedValue(mockCreatedInvoice),
                        findUnique: _globals.jest.fn().mockResolvedValue(mockCreatedInvoice)
                    },
                    purchaseInvoiceItem: {
                        createMany: _globals.jest.fn()
                    }
                };
                return await callback(mockTx);
            });
            const result = await service.createPurchaseInvoiceWithItems(invoiceData);
            (0, _globals.expect)(result).toEqual(mockCreatedInvoice);
        });
    });
    (0, _globals.describe)("createPurchaseInvoiceWithCalculations", ()=>{
        (0, _globals.it)("should calculate total amount from items and create invoice", async ()=>{
            const invoiceData = {
                invoiceNumber: "PI-004",
                supplierId: 1,
                totalAmount: 0,
                status: _client.PurchaseInvoiceStatus.PENDING,
                items: [
                    {
                        productId: 1,
                        quantity: 10,
                        price: 100
                    },
                    {
                        productId: 2,
                        quantity: 5,
                        price: 200
                    }
                ]
            };
            const mockFinalInvoice = {
                id: 1,
                invoiceNumber: "PI-004",
                supplierId: 1,
                totalAmount: 2000,
                status: _client.PurchaseInvoiceStatus.PENDING,
                supplier: {
                    id: 1,
                    name: "Test Supplier"
                },
                items: []
            };
            mockDb.$transaction.mockImplementation(async (callback)=>{
                const mockTx = {
                    purchaseInvoice: {
                        create: _globals.jest.fn().mockResolvedValue(mockFinalInvoice),
                        findUnique: _globals.jest.fn().mockResolvedValue(mockFinalInvoice)
                    },
                    purchaseInvoiceItem: {
                        createMany: _globals.jest.fn().mockResolvedValue({
                            count: 2
                        })
                    }
                };
                return await callback(mockTx);
            });
            const result = await service.createPurchaseInvoiceWithCalculations(invoiceData);
            (0, _globals.expect)(result.totalAmount).toBe(2000);
        });
    });
    (0, _globals.describe)("getPurchaseInvoiceById", ()=>{
        (0, _globals.it)("should retrieve a purchase invoice by ID", async ()=>{
            const invoiceId = 1;
            const mockInvoice = {
                id: invoiceId,
                invoiceNumber: "PI-001",
                supplierId: 1,
                totalAmount: 1000,
                status: _client.PurchaseInvoiceStatus.PENDING,
                supplier: {
                    id: 1,
                    name: "Test Supplier"
                },
                items: []
            };
            mockDb.purchaseInvoice.findUnique.mockResolvedValue(mockInvoice);
            const result = await service.getPurchaseInvoiceById(invoiceId);
            (0, _globals.expect)(mockDb.purchaseInvoice.findUnique).toHaveBeenCalledWith({
                where: {
                    id: invoiceId
                },
                include: {
                    supplier: true,
                    items: {
                        include: {
                            product: true
                        }
                    }
                }
            });
            (0, _globals.expect)(result).toEqual(mockInvoice);
        });
        (0, _globals.it)("should return null for non-existent invoice", async ()=>{
            const invoiceId = 999;
            mockDb.purchaseInvoice.findUnique.mockResolvedValue(null);
            const result = await service.getPurchaseInvoiceById(invoiceId);
            (0, _globals.expect)(result).toBeNull();
        });
    });
    (0, _globals.describe)("getPurchaseInvoices", ()=>{
        (0, _globals.it)("should retrieve purchase invoices with default pagination", async ()=>{
            const mockInvoices = [
                {
                    id: 1,
                    invoiceNumber: "PI-001",
                    supplierId: 1,
                    totalAmount: 1000,
                    status: _client.PurchaseInvoiceStatus.PENDING,
                    supplier: {
                        id: 1,
                        name: "Supplier 1"
                    },
                    items: []
                },
                {
                    id: 2,
                    invoiceNumber: "PI-002",
                    supplierId: 2,
                    totalAmount: 1500,
                    status: _client.PurchaseInvoiceStatus.APPROVED,
                    supplier: {
                        id: 2,
                        name: "Supplier 2"
                    },
                    items: []
                }
            ];
            mockDb.purchaseInvoice.findMany.mockResolvedValue(mockInvoices);
            const result = await service.getPurchaseInvoices();
            (0, _globals.expect)(mockDb.purchaseInvoice.findMany).toHaveBeenCalledWith({
                skip: 0,
                take: 10,
                orderBy: {
                    createdAt: "desc"
                },
                include: {
                    supplier: true,
                    items: {
                        include: {
                            product: true
                        }
                    }
                }
            });
            (0, _globals.expect)(result).toEqual(mockInvoices);
        });
        (0, _globals.it)("should retrieve purchase invoices with custom pagination and sorting", async ()=>{
            const options = {
                page: 2,
                limit: 5,
                sortBy: "totalAmount",
                sortOrder: "asc"
            };
            mockDb.purchaseInvoice.findMany.mockResolvedValue([]);
            await service.getPurchaseInvoices(options);
            (0, _globals.expect)(mockDb.purchaseInvoice.findMany).toHaveBeenCalledWith({
                skip: 5,
                take: 5,
                orderBy: {
                    totalAmount: "asc"
                },
                include: {
                    supplier: true,
                    items: {
                        include: {
                            product: true
                        }
                    }
                }
            });
        });
    });
    (0, _globals.describe)("updatePurchaseInvoice", ()=>{
        (0, _globals.it)("should update a purchase invoice successfully", async ()=>{
            const invoiceId = 1;
            const updateData = {
                totalAmount: 1200,
                status: _client.PurchaseInvoiceStatus.APPROVED,
                notes: "Updated notes"
            };
            const mockUpdatedInvoice = {
                id: invoiceId,
                invoiceNumber: "PI-001",
                supplierId: 1,
                ...updateData,
                supplier: {
                    id: 1,
                    name: "Test Supplier"
                },
                items: []
            };
            mockDb.purchaseInvoice.update.mockResolvedValue(mockUpdatedInvoice);
            const result = await service.updatePurchaseInvoice(invoiceId, updateData);
            (0, _globals.expect)(mockDb.purchaseInvoice.update).toHaveBeenCalledWith({
                where: {
                    id: invoiceId
                },
                data: updateData,
                include: {
                    supplier: true,
                    items: {
                        include: {
                            product: true
                        }
                    }
                }
            });
            (0, _globals.expect)(result).toEqual(mockUpdatedInvoice);
        });
    });
    (0, _globals.describe)("updatePurchaseInvoiceStatus", ()=>{
        (0, _globals.it)("should update purchase invoice status", async ()=>{
            const invoiceId = 1;
            const newStatus = _client.PurchaseInvoiceStatus.APPROVED;
            const mockUpdatedInvoice = {
                id: invoiceId,
                status: newStatus,
                supplier: {
                    id: 1,
                    name: "Test Supplier"
                },
                items: []
            };
            mockDb.purchaseInvoice.update.mockResolvedValue(mockUpdatedInvoice);
            const result = await service.updatePurchaseInvoiceStatus(invoiceId, newStatus);
            (0, _globals.expect)(mockDb.purchaseInvoice.update).toHaveBeenCalledWith({
                where: {
                    id: invoiceId
                },
                data: {
                    status: newStatus
                },
                include: {
                    supplier: true,
                    items: {
                        include: {
                            product: true
                        }
                    }
                }
            });
            (0, _globals.expect)(result).toEqual(mockUpdatedInvoice);
        });
    });
    (0, _globals.describe)("deletePurchaseInvoice", ()=>{
        (0, _globals.it)("should delete a purchase invoice and its items", async ()=>{
            const invoiceId = 1;
            const mockDeletedInvoice = {
                id: invoiceId,
                invoiceNumber: "PI-001"
            };
            mockDb.$transaction.mockImplementation(async (callback)=>{
                const mockTx = {
                    purchaseInvoiceItem: {
                        deleteMany: _globals.jest.fn().mockResolvedValue({
                            count: 2
                        })
                    },
                    purchaseInvoice: {
                        delete: _globals.jest.fn().mockResolvedValue(mockDeletedInvoice)
                    }
                };
                return await callback(mockTx);
            });
            const result = await service.deletePurchaseInvoice(invoiceId);
            (0, _globals.expect)(mockDb.$transaction).toHaveBeenCalled();
            (0, _globals.expect)(result).toEqual(mockDeletedInvoice);
        });
    });
    (0, _globals.describe)("searchPurchaseInvoices", ()=>{
        (0, _globals.it)("should search purchase invoices with supplier filter", async ()=>{
            const filters = {
                supplierId: 1
            };
            const mockInvoices = [
                {
                    id: 1,
                    supplierId: 1,
                    supplier: {
                        id: 1,
                        name: "Supplier 1"
                    },
                    items: []
                }
            ];
            mockDb.purchaseInvoice.findMany.mockResolvedValue(mockInvoices);
            const result = await service.searchPurchaseInvoices(filters);
            (0, _globals.expect)(mockDb.purchaseInvoice.findMany).toHaveBeenCalledWith({
                where: {
                    supplierId: 1
                },
                include: {
                    supplier: true,
                    items: {
                        include: {
                            product: true
                        }
                    }
                },
                orderBy: {
                    createdAt: "desc"
                }
            });
            (0, _globals.expect)(result).toEqual(mockInvoices);
        });
        (0, _globals.it)("should search purchase invoices with date range filter", async ()=>{
            const startDate = new Date("2024-01-01");
            const endDate = new Date("2024-01-31");
            const filters = {
                startDate,
                endDate
            };
            mockDb.purchaseInvoice.findMany.mockResolvedValue([]);
            await service.searchPurchaseInvoices(filters);
            (0, _globals.expect)(mockDb.purchaseInvoice.findMany).toHaveBeenCalledWith({
                where: {
                    createdAt: {
                        gte: startDate,
                        lte: endDate
                    }
                },
                include: {
                    supplier: true,
                    items: {
                        include: {
                            product: true
                        }
                    }
                },
                orderBy: {
                    createdAt: "desc"
                }
            });
        });
        (0, _globals.it)("should search purchase invoices with text search", async ()=>{
            const filters = {
                search: "test invoice"
            };
            mockDb.purchaseInvoice.findMany.mockResolvedValue([]);
            await service.searchPurchaseInvoices(filters);
            (0, _globals.expect)(mockDb.purchaseInvoice.findMany).toHaveBeenCalledWith({
                where: {
                    OR: [
                        {
                            invoiceNumber: {
                                contains: "test invoice",
                                mode: "insensitive"
                            }
                        },
                        {
                            notes: {
                                contains: "test invoice",
                                mode: "insensitive"
                            }
                        }
                    ]
                },
                include: {
                    supplier: true,
                    items: {
                        include: {
                            product: true
                        }
                    }
                },
                orderBy: {
                    createdAt: "desc"
                }
            });
        });
        (0, _globals.it)("should search purchase invoices with multiple filters", async ()=>{
            const filters = {
                supplierId: 1,
                status: _client.PurchaseInvoiceStatus.PENDING,
                search: "test",
                startDate: new Date("2024-01-01")
            };
            mockDb.purchaseInvoice.findMany.mockResolvedValue([]);
            await service.searchPurchaseInvoices(filters);
            (0, _globals.expect)(mockDb.purchaseInvoice.findMany).toHaveBeenCalledWith({
                where: {
                    supplierId: 1,
                    status: _client.PurchaseInvoiceStatus.PENDING,
                    createdAt: {
                        gte: new Date("2024-01-01")
                    },
                    OR: [
                        {
                            invoiceNumber: {
                                contains: "test",
                                mode: "insensitive"
                            }
                        },
                        {
                            notes: {
                                contains: "test",
                                mode: "insensitive"
                            }
                        }
                    ]
                },
                include: {
                    supplier: true,
                    items: {
                        include: {
                            product: true
                        }
                    }
                },
                orderBy: {
                    createdAt: "desc"
                }
            });
        });
    });
    (0, _globals.describe)("approvePurchaseInvoice", ()=>{
        (0, _globals.it)("should approve a purchase invoice", async ()=>{
            const invoiceId = 1;
            const mockApprovedInvoice = {
                id: invoiceId,
                status: _client.PurchaseInvoiceStatus.APPROVED,
                supplier: {
                    id: 1,
                    name: "Test Supplier"
                },
                items: []
            };
            mockDb.purchaseInvoice.update.mockResolvedValue(mockApprovedInvoice);
            const result = await service.approvePurchaseInvoice(invoiceId);
            (0, _globals.expect)(mockDb.purchaseInvoice.update).toHaveBeenCalledWith({
                where: {
                    id: invoiceId
                },
                data: {
                    status: _client.PurchaseInvoiceStatus.APPROVED
                },
                include: {
                    supplier: true,
                    items: {
                        include: {
                            product: true
                        }
                    }
                }
            });
            (0, _globals.expect)(result).toEqual(mockApprovedInvoice);
        });
    });
    (0, _globals.describe)("getPurchaseInvoiceWithDetails", ()=>{
        (0, _globals.it)("should get purchase invoice with details (alias for getPurchaseInvoiceById)", async ()=>{
            const invoiceId = 1;
            const mockInvoice = {
                id: invoiceId,
                invoiceNumber: "PI-001",
                supplier: {
                    id: 1,
                    name: "Test Supplier"
                },
                items: []
            };
            mockDb.purchaseInvoice.findUnique.mockResolvedValue(mockInvoice);
            const result = await service.getPurchaseInvoiceWithDetails(invoiceId);
            (0, _globals.expect)(mockDb.purchaseInvoice.findUnique).toHaveBeenCalledWith({
                where: {
                    id: invoiceId
                },
                include: {
                    supplier: true,
                    items: {
                        include: {
                            product: true
                        }
                    }
                }
            });
            (0, _globals.expect)(result).toEqual(mockInvoice);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zYWNoaW4vRG9jdW1lbnRzL21kLXNwb3J0cy0vdGVzdHMvdW5pdC9wdXJjaGFzZUludm9pY2VTZXJ2aWNlLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVzY3JpYmUsIGl0LCBleHBlY3QsIGJlZm9yZUVhY2gsIGFmdGVyRWFjaCwgamVzdCB9IGZyb20gJ0BqZXN0L2dsb2JhbHMnO1xuaW1wb3J0IHsgUHVyY2hhc2VJbnZvaWNlU2VydmljZSB9IGZyb20gJ0Avc2VydmljZXMvcHVyY2hhc2VJbnZvaWNlU2VydmljZSc7XG5pbXBvcnQgeyBQdXJjaGFzZUludm9pY2VTdGF0dXMgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XG5pbXBvcnQgeyBkYiB9IGZyb20gJ0AvbGliL2RiJztcblxuLy8gTW9jayB0aGUgZGF0YWJhc2Vcbmplc3QubW9jaygnQC9saWIvZGInLCAoKSA9PiAoe1xuICBkYjoge1xuICAgIHB1cmNoYXNlSW52b2ljZToge1xuICAgICAgY3JlYXRlOiBqZXN0LmZuKCksXG4gICAgICBmaW5kVW5pcXVlOiBqZXN0LmZuKCksXG4gICAgICBmaW5kTWFueTogamVzdC5mbigpLFxuICAgICAgdXBkYXRlOiBqZXN0LmZuKCksXG4gICAgICBkZWxldGU6IGplc3QuZm4oKSxcbiAgICB9LFxuICAgIHB1cmNoYXNlSW52b2ljZUl0ZW06IHtcbiAgICAgIGNyZWF0ZU1hbnk6IGplc3QuZm4oKSxcbiAgICAgIGRlbGV0ZU1hbnk6IGplc3QuZm4oKSxcbiAgICB9LFxuICAgICR0cmFuc2FjdGlvbjogamVzdC5mbigpLFxuICB9LFxufSkpO1xuXG5jb25zdCBtb2NrRGIgPSBkYiBhcyBqZXN0Lk1vY2tlZDx0eXBlb2YgZGI+O1xuXG5kZXNjcmliZSgnUHVyY2hhc2VJbnZvaWNlU2VydmljZScsICgpID0+IHtcbiAgbGV0IHNlcnZpY2U6IFB1cmNoYXNlSW52b2ljZVNlcnZpY2U7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgc2VydmljZSA9IG5ldyBQdXJjaGFzZUludm9pY2VTZXJ2aWNlKCk7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgamVzdC5yZXNldEFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdjcmVhdGVQdXJjaGFzZUludm9pY2UnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgYSBwdXJjaGFzZSBpbnZvaWNlIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGludm9pY2VEYXRhID0ge1xuICAgICAgICBpbnZvaWNlTnVtYmVyOiAnUEktMDAxJyxcbiAgICAgICAgc3VwcGxpZXJJZDogMSxcbiAgICAgICAgdG90YWxBbW91bnQ6IDEwMDAsXG4gICAgICAgIHN0YXR1czogUHVyY2hhc2VJbnZvaWNlU3RhdHVzLlBFTkRJTkcsXG4gICAgICAgIG5vdGVzOiAnVGVzdCBpbnZvaWNlJyxcbiAgICAgICAgc2hvcElkOiAxLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgbW9ja0NyZWF0ZWRJbnZvaWNlID0ge1xuICAgICAgICBpZDogMSxcbiAgICAgICAgLi4uaW52b2ljZURhdGEsXG4gICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICBzdXBwbGllcjoge1xuICAgICAgICAgIGlkOiAxLFxuICAgICAgICAgIG5hbWU6ICdUZXN0IFN1cHBsaWVyJyxcbiAgICAgICAgfSxcbiAgICAgICAgaXRlbXM6IFtdLFxuICAgICAgfTtcblxuICAgICAgbW9ja0RiLnB1cmNoYXNlSW52b2ljZS5jcmVhdGUubW9ja1Jlc29sdmVkVmFsdWUobW9ja0NyZWF0ZWRJbnZvaWNlIGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuY3JlYXRlUHVyY2hhc2VJbnZvaWNlKGludm9pY2VEYXRhKTtcblxuICAgICAgZXhwZWN0KG1vY2tEYi5wdXJjaGFzZUludm9pY2UuY3JlYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIGRhdGE6IGludm9pY2VEYXRhLFxuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgc3VwcGxpZXI6IHRydWUsXG4gICAgICAgICAgaXRlbXM6IHtcbiAgICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgICAgcHJvZHVjdDogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrQ3JlYXRlZEludm9pY2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZGF0YWJhc2UgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaW52b2ljZURhdGEgPSB7XG4gICAgICAgIGludm9pY2VOdW1iZXI6ICdQSS0wMDEnLFxuICAgICAgICBzdXBwbGllcklkOiAxLFxuICAgICAgICB0b3RhbEFtb3VudDogMTAwMCxcbiAgICAgICAgc3RhdHVzOiBQdXJjaGFzZUludm9pY2VTdGF0dXMuUEVORElORyxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tEYi5wdXJjaGFzZUludm9pY2UuY3JlYXRlLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignRGF0YWJhc2UgZXJyb3InKSk7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLmNyZWF0ZVB1cmNoYXNlSW52b2ljZShpbnZvaWNlRGF0YSkpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgJ0RhdGFiYXNlIGVycm9yJ1xuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2NyZWF0ZVB1cmNoYXNlSW52b2ljZVdpdGhJdGVtcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBhIHB1cmNoYXNlIGludm9pY2Ugd2l0aCBpdGVtcyBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZvaWNlRGF0YSA9IHtcbiAgICAgICAgaW52b2ljZU51bWJlcjogJ1BJLTAwMicsXG4gICAgICAgIHN1cHBsaWVySWQ6IDEsXG4gICAgICAgIHRvdGFsQW1vdW50OiAxNTAwLFxuICAgICAgICBzdGF0dXM6IFB1cmNoYXNlSW52b2ljZVN0YXR1cy5QRU5ESU5HLFxuICAgICAgICBpdGVtczogW1xuICAgICAgICAgIHsgcHJvZHVjdElkOiAxLCBxdWFudGl0eTogMTAsIHByaWNlOiAxMDAgfSxcbiAgICAgICAgICB7IHByb2R1Y3RJZDogMiwgcXVhbnRpdHk6IDUsIHByaWNlOiAxMDAgfSxcbiAgICAgICAgXSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IG1vY2tDcmVhdGVkSW52b2ljZSA9IHtcbiAgICAgICAgaWQ6IDEsXG4gICAgICAgIGludm9pY2VOdW1iZXI6ICdQSS0wMDInLFxuICAgICAgICBzdXBwbGllcklkOiAxLFxuICAgICAgICB0b3RhbEFtb3VudDogMTUwMCxcbiAgICAgICAgc3RhdHVzOiBQdXJjaGFzZUludm9pY2VTdGF0dXMuUEVORElORyxcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBtb2NrRmluYWxJbnZvaWNlID0ge1xuICAgICAgICAuLi5tb2NrQ3JlYXRlZEludm9pY2UsXG4gICAgICAgIHN1cHBsaWVyOiB7IGlkOiAxLCBuYW1lOiAnVGVzdCBTdXBwbGllcicgfSxcbiAgICAgICAgaXRlbXM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZDogMSxcbiAgICAgICAgICAgIHB1cmNoYXNlSW52b2ljZUlkOiAxLFxuICAgICAgICAgICAgcHJvZHVjdElkOiAxLFxuICAgICAgICAgICAgcXVhbnRpdHk6IDEwLFxuICAgICAgICAgICAgcHJpY2U6IDEwMCxcbiAgICAgICAgICAgIHByb2R1Y3Q6IHsgaWQ6IDEsIG5hbWU6ICdQcm9kdWN0IDEnIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZDogMixcbiAgICAgICAgICAgIHB1cmNoYXNlSW52b2ljZUlkOiAxLFxuICAgICAgICAgICAgcHJvZHVjdElkOiAyLFxuICAgICAgICAgICAgcXVhbnRpdHk6IDUsXG4gICAgICAgICAgICBwcmljZTogMTAwLFxuICAgICAgICAgICAgcHJvZHVjdDogeyBpZDogMiwgbmFtZTogJ1Byb2R1Y3QgMicgfSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfTtcblxuICAgICAgbW9ja0RiLiR0cmFuc2FjdGlvbi5tb2NrSW1wbGVtZW50YXRpb24oYXN5bmMgKGNhbGxiYWNrKSA9PiB7XG4gICAgICAgIGNvbnN0IG1vY2tUeCA9IHtcbiAgICAgICAgICBwdXJjaGFzZUludm9pY2U6IHtcbiAgICAgICAgICAgIGNyZWF0ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tDcmVhdGVkSW52b2ljZSksXG4gICAgICAgICAgICBmaW5kVW5pcXVlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUobW9ja0ZpbmFsSW52b2ljZSksXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwdXJjaGFzZUludm9pY2VJdGVtOiB7XG4gICAgICAgICAgICBjcmVhdGVNYW55OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoeyBjb3VudDogMiB9KSxcbiAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gYXdhaXQgY2FsbGJhY2sobW9ja1R4IGFzIGFueSk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5jcmVhdGVQdXJjaGFzZUludm9pY2VXaXRoSXRlbXMoaW52b2ljZURhdGEpO1xuXG4gICAgICBleHBlY3QobW9ja0RiLiR0cmFuc2FjdGlvbikudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrRmluYWxJbnZvaWNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IGl0ZW1zIGFycmF5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaW52b2ljZURhdGEgPSB7XG4gICAgICAgIGludm9pY2VOdW1iZXI6ICdQSS0wMDMnLFxuICAgICAgICBzdXBwbGllcklkOiAxLFxuICAgICAgICB0b3RhbEFtb3VudDogMCxcbiAgICAgICAgc3RhdHVzOiBQdXJjaGFzZUludm9pY2VTdGF0dXMuUEVORElORyxcbiAgICAgICAgaXRlbXM6IFtdLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgbW9ja0NyZWF0ZWRJbnZvaWNlID0ge1xuICAgICAgICBpZDogMSxcbiAgICAgICAgaW52b2ljZU51bWJlcjogJ1BJLTAwMycsXG4gICAgICAgIHN1cHBsaWVySWQ6IDEsXG4gICAgICAgIHRvdGFsQW1vdW50OiAwLFxuICAgICAgICBzdGF0dXM6IFB1cmNoYXNlSW52b2ljZVN0YXR1cy5QRU5ESU5HLFxuICAgICAgICBzdXBwbGllcjogeyBpZDogMSwgbmFtZTogJ1Rlc3QgU3VwcGxpZXInIH0sXG4gICAgICAgIGl0ZW1zOiBbXSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tEYi4kdHJhbnNhY3Rpb24ubW9ja0ltcGxlbWVudGF0aW9uKGFzeW5jIChjYWxsYmFjaykgPT4ge1xuICAgICAgICBjb25zdCBtb2NrVHggPSB7XG4gICAgICAgICAgcHVyY2hhc2VJbnZvaWNlOiB7XG4gICAgICAgICAgICBjcmVhdGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQ3JlYXRlZEludm9pY2UpLFxuICAgICAgICAgICAgZmluZFVuaXF1ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tDcmVhdGVkSW52b2ljZSksXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwdXJjaGFzZUludm9pY2VJdGVtOiB7XG4gICAgICAgICAgICBjcmVhdGVNYW55OiBqZXN0LmZuKCksXG4gICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGNhbGxiYWNrKG1vY2tUeCBhcyBhbnkpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuY3JlYXRlUHVyY2hhc2VJbnZvaWNlV2l0aEl0ZW1zKGludm9pY2VEYXRhKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrQ3JlYXRlZEludm9pY2UpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnY3JlYXRlUHVyY2hhc2VJbnZvaWNlV2l0aENhbGN1bGF0aW9ucycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSB0b3RhbCBhbW91bnQgZnJvbSBpdGVtcyBhbmQgY3JlYXRlIGludm9pY2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZvaWNlRGF0YSA9IHtcbiAgICAgICAgaW52b2ljZU51bWJlcjogJ1BJLTAwNCcsXG4gICAgICAgIHN1cHBsaWVySWQ6IDEsXG4gICAgICAgIHRvdGFsQW1vdW50OiAwLCAvLyBUaGlzIHNob3VsZCBiZSBvdmVycmlkZGVuIGJ5IGNhbGN1bGF0aW9uXG4gICAgICAgIHN0YXR1czogUHVyY2hhc2VJbnZvaWNlU3RhdHVzLlBFTkRJTkcsXG4gICAgICAgIGl0ZW1zOiBbXG4gICAgICAgICAgeyBwcm9kdWN0SWQ6IDEsIHF1YW50aXR5OiAxMCwgcHJpY2U6IDEwMCB9LCAvLyAxMDAwXG4gICAgICAgICAgeyBwcm9kdWN0SWQ6IDIsIHF1YW50aXR5OiA1LCBwcmljZTogMjAwIH0sICAvLyAxMDAwXG4gICAgICAgIF0sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBtb2NrRmluYWxJbnZvaWNlID0ge1xuICAgICAgICBpZDogMSxcbiAgICAgICAgaW52b2ljZU51bWJlcjogJ1BJLTAwNCcsXG4gICAgICAgIHN1cHBsaWVySWQ6IDEsXG4gICAgICAgIHRvdGFsQW1vdW50OiAyMDAwLCAvLyBDYWxjdWxhdGVkIHRvdGFsXG4gICAgICAgIHN0YXR1czogUHVyY2hhc2VJbnZvaWNlU3RhdHVzLlBFTkRJTkcsXG4gICAgICAgIHN1cHBsaWVyOiB7IGlkOiAxLCBuYW1lOiAnVGVzdCBTdXBwbGllcicgfSxcbiAgICAgICAgaXRlbXM6IFtdLFxuICAgICAgfTtcblxuICAgICAgbW9ja0RiLiR0cmFuc2FjdGlvbi5tb2NrSW1wbGVtZW50YXRpb24oYXN5bmMgKGNhbGxiYWNrKSA9PiB7XG4gICAgICAgIGNvbnN0IG1vY2tUeCA9IHtcbiAgICAgICAgICBwdXJjaGFzZUludm9pY2U6IHtcbiAgICAgICAgICAgIGNyZWF0ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tGaW5hbEludm9pY2UpLFxuICAgICAgICAgICAgZmluZFVuaXF1ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tGaW5hbEludm9pY2UpLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcHVyY2hhc2VJbnZvaWNlSXRlbToge1xuICAgICAgICAgICAgY3JlYXRlTWFueTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHsgY291bnQ6IDIgfSksXG4gICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGNhbGxiYWNrKG1vY2tUeCBhcyBhbnkpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuY3JlYXRlUHVyY2hhc2VJbnZvaWNlV2l0aENhbGN1bGF0aW9ucyhpbnZvaWNlRGF0YSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQudG90YWxBbW91bnQpLnRvQmUoMjAwMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZXRQdXJjaGFzZUludm9pY2VCeUlkJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0cmlldmUgYSBwdXJjaGFzZSBpbnZvaWNlIGJ5IElEJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaW52b2ljZUlkID0gMTtcbiAgICAgIGNvbnN0IG1vY2tJbnZvaWNlID0ge1xuICAgICAgICBpZDogaW52b2ljZUlkLFxuICAgICAgICBpbnZvaWNlTnVtYmVyOiAnUEktMDAxJyxcbiAgICAgICAgc3VwcGxpZXJJZDogMSxcbiAgICAgICAgdG90YWxBbW91bnQ6IDEwMDAsXG4gICAgICAgIHN0YXR1czogUHVyY2hhc2VJbnZvaWNlU3RhdHVzLlBFTkRJTkcsXG4gICAgICAgIHN1cHBsaWVyOiB7IGlkOiAxLCBuYW1lOiAnVGVzdCBTdXBwbGllcicgfSxcbiAgICAgICAgaXRlbXM6IFtdLFxuICAgICAgfTtcblxuICAgICAgbW9ja0RiLnB1cmNoYXNlSW52b2ljZS5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tJbnZvaWNlIGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZ2V0UHVyY2hhc2VJbnZvaWNlQnlJZChpbnZvaWNlSWQpO1xuXG4gICAgICBleHBlY3QobW9ja0RiLnB1cmNoYXNlSW52b2ljZS5maW5kVW5pcXVlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBpbnZvaWNlSWQgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIHN1cHBsaWVyOiB0cnVlLFxuICAgICAgICAgIGl0ZW1zOiB7XG4gICAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICAgIHByb2R1Y3Q6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwobW9ja0ludm9pY2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gbnVsbCBmb3Igbm9uLWV4aXN0ZW50IGludm9pY2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZvaWNlSWQgPSA5OTk7XG4gICAgICBtb2NrRGIucHVyY2hhc2VJbnZvaWNlLmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZ2V0UHVyY2hhc2VJbnZvaWNlQnlJZChpbnZvaWNlSWQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlTnVsbCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0UHVyY2hhc2VJbnZvaWNlcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHJpZXZlIHB1cmNoYXNlIGludm9pY2VzIHdpdGggZGVmYXVsdCBwYWdpbmF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0ludm9pY2VzID0gW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6IDEsXG4gICAgICAgICAgaW52b2ljZU51bWJlcjogJ1BJLTAwMScsXG4gICAgICAgICAgc3VwcGxpZXJJZDogMSxcbiAgICAgICAgICB0b3RhbEFtb3VudDogMTAwMCxcbiAgICAgICAgICBzdGF0dXM6IFB1cmNoYXNlSW52b2ljZVN0YXR1cy5QRU5ESU5HLFxuICAgICAgICAgIHN1cHBsaWVyOiB7IGlkOiAxLCBuYW1lOiAnU3VwcGxpZXIgMScgfSxcbiAgICAgICAgICBpdGVtczogW10sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogMixcbiAgICAgICAgICBpbnZvaWNlTnVtYmVyOiAnUEktMDAyJyxcbiAgICAgICAgICBzdXBwbGllcklkOiAyLFxuICAgICAgICAgIHRvdGFsQW1vdW50OiAxNTAwLFxuICAgICAgICAgIHN0YXR1czogUHVyY2hhc2VJbnZvaWNlU3RhdHVzLkFQUFJPVkVELFxuICAgICAgICAgIHN1cHBsaWVyOiB7IGlkOiAyLCBuYW1lOiAnU3VwcGxpZXIgMicgfSxcbiAgICAgICAgICBpdGVtczogW10sXG4gICAgICAgIH0sXG4gICAgICBdO1xuXG4gICAgICBtb2NrRGIucHVyY2hhc2VJbnZvaWNlLmZpbmRNYW55Lm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tJbnZvaWNlcyBhcyBhbnkpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmdldFB1cmNoYXNlSW52b2ljZXMoKTtcblxuICAgICAgZXhwZWN0KG1vY2tEYi5wdXJjaGFzZUludm9pY2UuZmluZE1hbnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgc2tpcDogMCxcbiAgICAgICAgdGFrZTogMTAsXG4gICAgICAgIG9yZGVyQnk6IHtcbiAgICAgICAgICBjcmVhdGVkQXQ6ICdkZXNjJyxcbiAgICAgICAgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIHN1cHBsaWVyOiB0cnVlLFxuICAgICAgICAgIGl0ZW1zOiB7XG4gICAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICAgIHByb2R1Y3Q6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwobW9ja0ludm9pY2VzKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0cmlldmUgcHVyY2hhc2UgaW52b2ljZXMgd2l0aCBjdXN0b20gcGFnaW5hdGlvbiBhbmQgc29ydGluZycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgIHBhZ2U6IDIsXG4gICAgICAgIGxpbWl0OiA1LFxuICAgICAgICBzb3J0Qnk6ICd0b3RhbEFtb3VudCcsXG4gICAgICAgIHNvcnRPcmRlcjogJ2FzYycgYXMgY29uc3QsXG4gICAgICB9O1xuXG4gICAgICBtb2NrRGIucHVyY2hhc2VJbnZvaWNlLmZpbmRNYW55Lm1vY2tSZXNvbHZlZFZhbHVlKFtdKTtcblxuICAgICAgYXdhaXQgc2VydmljZS5nZXRQdXJjaGFzZUludm9pY2VzKG9wdGlvbnMpO1xuXG4gICAgICBleHBlY3QobW9ja0RiLnB1cmNoYXNlSW52b2ljZS5maW5kTWFueSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBza2lwOiA1LCAvLyAocGFnZSAtIDEpICogbGltaXRcbiAgICAgICAgdGFrZTogNSxcbiAgICAgICAgb3JkZXJCeToge1xuICAgICAgICAgIHRvdGFsQW1vdW50OiAnYXNjJyxcbiAgICAgICAgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIHN1cHBsaWVyOiB0cnVlLFxuICAgICAgICAgIGl0ZW1zOiB7XG4gICAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICAgIHByb2R1Y3Q6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3VwZGF0ZVB1cmNoYXNlSW52b2ljZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHVwZGF0ZSBhIHB1cmNoYXNlIGludm9pY2Ugc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaW52b2ljZUlkID0gMTtcbiAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7XG4gICAgICAgIHRvdGFsQW1vdW50OiAxMjAwLFxuICAgICAgICBzdGF0dXM6IFB1cmNoYXNlSW52b2ljZVN0YXR1cy5BUFBST1ZFRCxcbiAgICAgICAgbm90ZXM6ICdVcGRhdGVkIG5vdGVzJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IG1vY2tVcGRhdGVkSW52b2ljZSA9IHtcbiAgICAgICAgaWQ6IGludm9pY2VJZCxcbiAgICAgICAgaW52b2ljZU51bWJlcjogJ1BJLTAwMScsXG4gICAgICAgIHN1cHBsaWVySWQ6IDEsXG4gICAgICAgIC4uLnVwZGF0ZURhdGEsXG4gICAgICAgIHN1cHBsaWVyOiB7IGlkOiAxLCBuYW1lOiAnVGVzdCBTdXBwbGllcicgfSxcbiAgICAgICAgaXRlbXM6IFtdLFxuICAgICAgfTtcblxuICAgICAgbW9ja0RiLnB1cmNoYXNlSW52b2ljZS51cGRhdGUubW9ja1Jlc29sdmVkVmFsdWUobW9ja1VwZGF0ZWRJbnZvaWNlIGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UudXBkYXRlUHVyY2hhc2VJbnZvaWNlKGludm9pY2VJZCwgdXBkYXRlRGF0YSk7XG5cbiAgICAgIGV4cGVjdChtb2NrRGIucHVyY2hhc2VJbnZvaWNlLnVwZGF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB3aGVyZTogeyBpZDogaW52b2ljZUlkIH0sXG4gICAgICAgIGRhdGE6IHVwZGF0ZURhdGEsXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICBzdXBwbGllcjogdHJ1ZSxcbiAgICAgICAgICBpdGVtczoge1xuICAgICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgICBwcm9kdWN0OiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG1vY2tVcGRhdGVkSW52b2ljZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCd1cGRhdGVQdXJjaGFzZUludm9pY2VTdGF0dXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCB1cGRhdGUgcHVyY2hhc2UgaW52b2ljZSBzdGF0dXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZvaWNlSWQgPSAxO1xuICAgICAgY29uc3QgbmV3U3RhdHVzID0gUHVyY2hhc2VJbnZvaWNlU3RhdHVzLkFQUFJPVkVEO1xuXG4gICAgICBjb25zdCBtb2NrVXBkYXRlZEludm9pY2UgPSB7XG4gICAgICAgIGlkOiBpbnZvaWNlSWQsXG4gICAgICAgIHN0YXR1czogbmV3U3RhdHVzLFxuICAgICAgICBzdXBwbGllcjogeyBpZDogMSwgbmFtZTogJ1Rlc3QgU3VwcGxpZXInIH0sXG4gICAgICAgIGl0ZW1zOiBbXSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tEYi5wdXJjaGFzZUludm9pY2UudXBkYXRlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tVcGRhdGVkSW52b2ljZSBhcyBhbnkpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLnVwZGF0ZVB1cmNoYXNlSW52b2ljZVN0YXR1cyhpbnZvaWNlSWQsIG5ld1N0YXR1cyk7XG5cbiAgICAgIGV4cGVjdChtb2NrRGIucHVyY2hhc2VJbnZvaWNlLnVwZGF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB3aGVyZTogeyBpZDogaW52b2ljZUlkIH0sXG4gICAgICAgIGRhdGE6IHsgc3RhdHVzOiBuZXdTdGF0dXMgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIHN1cHBsaWVyOiB0cnVlLFxuICAgICAgICAgIGl0ZW1zOiB7XG4gICAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICAgIHByb2R1Y3Q6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwobW9ja1VwZGF0ZWRJbnZvaWNlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2RlbGV0ZVB1cmNoYXNlSW52b2ljZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRlbGV0ZSBhIHB1cmNoYXNlIGludm9pY2UgYW5kIGl0cyBpdGVtcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGludm9pY2VJZCA9IDE7XG4gICAgICBjb25zdCBtb2NrRGVsZXRlZEludm9pY2UgPSB7XG4gICAgICAgIGlkOiBpbnZvaWNlSWQsXG4gICAgICAgIGludm9pY2VOdW1iZXI6ICdQSS0wMDEnLFxuICAgICAgfTtcblxuICAgICAgbW9ja0RiLiR0cmFuc2FjdGlvbi5tb2NrSW1wbGVtZW50YXRpb24oYXN5bmMgKGNhbGxiYWNrKSA9PiB7XG4gICAgICAgIGNvbnN0IG1vY2tUeCA9IHtcbiAgICAgICAgICBwdXJjaGFzZUludm9pY2VJdGVtOiB7XG4gICAgICAgICAgICBkZWxldGVNYW55OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoeyBjb3VudDogMiB9KSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHB1cmNoYXNlSW52b2ljZToge1xuICAgICAgICAgICAgZGVsZXRlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUobW9ja0RlbGV0ZWRJbnZvaWNlKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gYXdhaXQgY2FsbGJhY2sobW9ja1R4IGFzIGFueSk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5kZWxldGVQdXJjaGFzZUludm9pY2UoaW52b2ljZUlkKTtcblxuICAgICAgZXhwZWN0KG1vY2tEYi4kdHJhbnNhY3Rpb24pLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwobW9ja0RlbGV0ZWRJbnZvaWNlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3NlYXJjaFB1cmNoYXNlSW52b2ljZXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBzZWFyY2ggcHVyY2hhc2UgaW52b2ljZXMgd2l0aCBzdXBwbGllciBmaWx0ZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBmaWx0ZXJzID0geyBzdXBwbGllcklkOiAxIH07XG4gICAgICBjb25zdCBtb2NrSW52b2ljZXMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogMSxcbiAgICAgICAgICBzdXBwbGllcklkOiAxLFxuICAgICAgICAgIHN1cHBsaWVyOiB7IGlkOiAxLCBuYW1lOiAnU3VwcGxpZXIgMScgfSxcbiAgICAgICAgICBpdGVtczogW10sXG4gICAgICAgIH0sXG4gICAgICBdO1xuXG4gICAgICBtb2NrRGIucHVyY2hhc2VJbnZvaWNlLmZpbmRNYW55Lm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tJbnZvaWNlcyBhcyBhbnkpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLnNlYXJjaFB1cmNoYXNlSW52b2ljZXMoZmlsdGVycyk7XG5cbiAgICAgIGV4cGVjdChtb2NrRGIucHVyY2hhc2VJbnZvaWNlLmZpbmRNYW55KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHdoZXJlOiB7IHN1cHBsaWVySWQ6IDEgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIHN1cHBsaWVyOiB0cnVlLFxuICAgICAgICAgIGl0ZW1zOiB7XG4gICAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICAgIHByb2R1Y3Q6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIG9yZGVyQnk6IHtcbiAgICAgICAgICBjcmVhdGVkQXQ6ICdkZXNjJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrSW52b2ljZXMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzZWFyY2ggcHVyY2hhc2UgaW52b2ljZXMgd2l0aCBkYXRlIHJhbmdlIGZpbHRlcicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKCcyMDI0LTAxLTAxJyk7XG4gICAgICBjb25zdCBlbmREYXRlID0gbmV3IERhdGUoJzIwMjQtMDEtMzEnKTtcbiAgICAgIGNvbnN0IGZpbHRlcnMgPSB7IHN0YXJ0RGF0ZSwgZW5kRGF0ZSB9O1xuXG4gICAgICBtb2NrRGIucHVyY2hhc2VJbnZvaWNlLmZpbmRNYW55Lm1vY2tSZXNvbHZlZFZhbHVlKFtdKTtcblxuICAgICAgYXdhaXQgc2VydmljZS5zZWFyY2hQdXJjaGFzZUludm9pY2VzKGZpbHRlcnMpO1xuXG4gICAgICBleHBlY3QobW9ja0RiLnB1cmNoYXNlSW52b2ljZS5maW5kTWFueSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIGNyZWF0ZWRBdDoge1xuICAgICAgICAgICAgZ3RlOiBzdGFydERhdGUsXG4gICAgICAgICAgICBsdGU6IGVuZERhdGUsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIHN1cHBsaWVyOiB0cnVlLFxuICAgICAgICAgIGl0ZW1zOiB7XG4gICAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICAgIHByb2R1Y3Q6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIG9yZGVyQnk6IHtcbiAgICAgICAgICBjcmVhdGVkQXQ6ICdkZXNjJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzZWFyY2ggcHVyY2hhc2UgaW52b2ljZXMgd2l0aCB0ZXh0IHNlYXJjaCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGZpbHRlcnMgPSB7IHNlYXJjaDogJ3Rlc3QgaW52b2ljZScgfTtcblxuICAgICAgbW9ja0RiLnB1cmNoYXNlSW52b2ljZS5maW5kTWFueS5tb2NrUmVzb2x2ZWRWYWx1ZShbXSk7XG5cbiAgICAgIGF3YWl0IHNlcnZpY2Uuc2VhcmNoUHVyY2hhc2VJbnZvaWNlcyhmaWx0ZXJzKTtcblxuICAgICAgZXhwZWN0KG1vY2tEYi5wdXJjaGFzZUludm9pY2UuZmluZE1hbnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBPUjogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBpbnZvaWNlTnVtYmVyOiB7XG4gICAgICAgICAgICAgICAgY29udGFpbnM6ICd0ZXN0IGludm9pY2UnLFxuICAgICAgICAgICAgICAgIG1vZGU6ICdpbnNlbnNpdGl2ZScsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBub3Rlczoge1xuICAgICAgICAgICAgICAgIGNvbnRhaW5zOiAndGVzdCBpbnZvaWNlJyxcbiAgICAgICAgICAgICAgICBtb2RlOiAnaW5zZW5zaXRpdmUnLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgc3VwcGxpZXI6IHRydWUsXG4gICAgICAgICAgaXRlbXM6IHtcbiAgICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgICAgcHJvZHVjdDogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgb3JkZXJCeToge1xuICAgICAgICAgIGNyZWF0ZWRBdDogJ2Rlc2MnLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNlYXJjaCBwdXJjaGFzZSBpbnZvaWNlcyB3aXRoIG11bHRpcGxlIGZpbHRlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBmaWx0ZXJzID0ge1xuICAgICAgICBzdXBwbGllcklkOiAxLFxuICAgICAgICBzdGF0dXM6IFB1cmNoYXNlSW52b2ljZVN0YXR1cy5QRU5ESU5HLFxuICAgICAgICBzZWFyY2g6ICd0ZXN0JyxcbiAgICAgICAgc3RhcnREYXRlOiBuZXcgRGF0ZSgnMjAyNC0wMS0wMScpLFxuICAgICAgfTtcblxuICAgICAgbW9ja0RiLnB1cmNoYXNlSW52b2ljZS5maW5kTWFueS5tb2NrUmVzb2x2ZWRWYWx1ZShbXSk7XG5cbiAgICAgIGF3YWl0IHNlcnZpY2Uuc2VhcmNoUHVyY2hhc2VJbnZvaWNlcyhmaWx0ZXJzKTtcblxuICAgICAgZXhwZWN0KG1vY2tEYi5wdXJjaGFzZUludm9pY2UuZmluZE1hbnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBzdXBwbGllcklkOiAxLFxuICAgICAgICAgIHN0YXR1czogUHVyY2hhc2VJbnZvaWNlU3RhdHVzLlBFTkRJTkcsXG4gICAgICAgICAgY3JlYXRlZEF0OiB7XG4gICAgICAgICAgICBndGU6IG5ldyBEYXRlKCcyMDI0LTAxLTAxJyksXG4gICAgICAgICAgfSxcbiAgICAgICAgICBPUjogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBpbnZvaWNlTnVtYmVyOiB7XG4gICAgICAgICAgICAgICAgY29udGFpbnM6ICd0ZXN0JyxcbiAgICAgICAgICAgICAgICBtb2RlOiAnaW5zZW5zaXRpdmUnLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbm90ZXM6IHtcbiAgICAgICAgICAgICAgICBjb250YWluczogJ3Rlc3QnLFxuICAgICAgICAgICAgICAgIG1vZGU6ICdpbnNlbnNpdGl2ZScsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICBzdXBwbGllcjogdHJ1ZSxcbiAgICAgICAgICBpdGVtczoge1xuICAgICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgICBwcm9kdWN0OiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBvcmRlckJ5OiB7XG4gICAgICAgICAgY3JlYXRlZEF0OiAnZGVzYycsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2FwcHJvdmVQdXJjaGFzZUludm9pY2UnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBhcHByb3ZlIGEgcHVyY2hhc2UgaW52b2ljZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGludm9pY2VJZCA9IDE7XG4gICAgICBjb25zdCBtb2NrQXBwcm92ZWRJbnZvaWNlID0ge1xuICAgICAgICBpZDogaW52b2ljZUlkLFxuICAgICAgICBzdGF0dXM6IFB1cmNoYXNlSW52b2ljZVN0YXR1cy5BUFBST1ZFRCxcbiAgICAgICAgc3VwcGxpZXI6IHsgaWQ6IDEsIG5hbWU6ICdUZXN0IFN1cHBsaWVyJyB9LFxuICAgICAgICBpdGVtczogW10sXG4gICAgICB9O1xuXG4gICAgICBtb2NrRGIucHVyY2hhc2VJbnZvaWNlLnVwZGF0ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQXBwcm92ZWRJbnZvaWNlIGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuYXBwcm92ZVB1cmNoYXNlSW52b2ljZShpbnZvaWNlSWQpO1xuXG4gICAgICBleHBlY3QobW9ja0RiLnB1cmNoYXNlSW52b2ljZS51cGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGludm9pY2VJZCB9LFxuICAgICAgICBkYXRhOiB7IHN0YXR1czogUHVyY2hhc2VJbnZvaWNlU3RhdHVzLkFQUFJPVkVEIH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICBzdXBwbGllcjogdHJ1ZSxcbiAgICAgICAgICBpdGVtczoge1xuICAgICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgICBwcm9kdWN0OiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG1vY2tBcHByb3ZlZEludm9pY2UpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0UHVyY2hhc2VJbnZvaWNlV2l0aERldGFpbHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBnZXQgcHVyY2hhc2UgaW52b2ljZSB3aXRoIGRldGFpbHMgKGFsaWFzIGZvciBnZXRQdXJjaGFzZUludm9pY2VCeUlkKScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGludm9pY2VJZCA9IDE7XG4gICAgICBjb25zdCBtb2NrSW52b2ljZSA9IHtcbiAgICAgICAgaWQ6IGludm9pY2VJZCxcbiAgICAgICAgaW52b2ljZU51bWJlcjogJ1BJLTAwMScsXG4gICAgICAgIHN1cHBsaWVyOiB7IGlkOiAxLCBuYW1lOiAnVGVzdCBTdXBwbGllcicgfSxcbiAgICAgICAgaXRlbXM6IFtdLFxuICAgICAgfTtcblxuICAgICAgbW9ja0RiLnB1cmNoYXNlSW52b2ljZS5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tJbnZvaWNlIGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZ2V0UHVyY2hhc2VJbnZvaWNlV2l0aERldGFpbHMoaW52b2ljZUlkKTtcblxuICAgICAgZXhwZWN0KG1vY2tEYi5wdXJjaGFzZUludm9pY2UuZmluZFVuaXF1ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB3aGVyZTogeyBpZDogaW52b2ljZUlkIH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICBzdXBwbGllcjogdHJ1ZSxcbiAgICAgICAgICBpdGVtczoge1xuICAgICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgICBwcm9kdWN0OiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG1vY2tJbnZvaWNlKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJkYiIsInB1cmNoYXNlSW52b2ljZSIsImNyZWF0ZSIsImZuIiwiZmluZFVuaXF1ZSIsImZpbmRNYW55IiwidXBkYXRlIiwiZGVsZXRlIiwicHVyY2hhc2VJbnZvaWNlSXRlbSIsImNyZWF0ZU1hbnkiLCJkZWxldGVNYW55IiwiJHRyYW5zYWN0aW9uIiwibW9ja0RiIiwiZGVzY3JpYmUiLCJzZXJ2aWNlIiwiYmVmb3JlRWFjaCIsIlB1cmNoYXNlSW52b2ljZVNlcnZpY2UiLCJjbGVhckFsbE1vY2tzIiwiYWZ0ZXJFYWNoIiwicmVzZXRBbGxNb2NrcyIsIml0IiwiaW52b2ljZURhdGEiLCJpbnZvaWNlTnVtYmVyIiwic3VwcGxpZXJJZCIsInRvdGFsQW1vdW50Iiwic3RhdHVzIiwiUHVyY2hhc2VJbnZvaWNlU3RhdHVzIiwiUEVORElORyIsIm5vdGVzIiwic2hvcElkIiwibW9ja0NyZWF0ZWRJbnZvaWNlIiwiaWQiLCJjcmVhdGVkQXQiLCJEYXRlIiwidXBkYXRlZEF0Iiwic3VwcGxpZXIiLCJuYW1lIiwiaXRlbXMiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsInJlc3VsdCIsImNyZWF0ZVB1cmNoYXNlSW52b2ljZSIsImV4cGVjdCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwiZGF0YSIsImluY2x1ZGUiLCJwcm9kdWN0IiwidG9FcXVhbCIsIm1vY2tSZWplY3RlZFZhbHVlIiwiRXJyb3IiLCJyZWplY3RzIiwidG9UaHJvdyIsInByb2R1Y3RJZCIsInF1YW50aXR5IiwicHJpY2UiLCJtb2NrRmluYWxJbnZvaWNlIiwicHVyY2hhc2VJbnZvaWNlSWQiLCJtb2NrSW1wbGVtZW50YXRpb24iLCJjYWxsYmFjayIsIm1vY2tUeCIsImNvdW50IiwiY3JlYXRlUHVyY2hhc2VJbnZvaWNlV2l0aEl0ZW1zIiwidG9IYXZlQmVlbkNhbGxlZCIsImNyZWF0ZVB1cmNoYXNlSW52b2ljZVdpdGhDYWxjdWxhdGlvbnMiLCJ0b0JlIiwiaW52b2ljZUlkIiwibW9ja0ludm9pY2UiLCJnZXRQdXJjaGFzZUludm9pY2VCeUlkIiwid2hlcmUiLCJ0b0JlTnVsbCIsIm1vY2tJbnZvaWNlcyIsIkFQUFJPVkVEIiwiZ2V0UHVyY2hhc2VJbnZvaWNlcyIsInNraXAiLCJ0YWtlIiwib3JkZXJCeSIsIm9wdGlvbnMiLCJwYWdlIiwibGltaXQiLCJzb3J0QnkiLCJzb3J0T3JkZXIiLCJ1cGRhdGVEYXRhIiwibW9ja1VwZGF0ZWRJbnZvaWNlIiwidXBkYXRlUHVyY2hhc2VJbnZvaWNlIiwibmV3U3RhdHVzIiwidXBkYXRlUHVyY2hhc2VJbnZvaWNlU3RhdHVzIiwibW9ja0RlbGV0ZWRJbnZvaWNlIiwiZGVsZXRlUHVyY2hhc2VJbnZvaWNlIiwiZmlsdGVycyIsInNlYXJjaFB1cmNoYXNlSW52b2ljZXMiLCJzdGFydERhdGUiLCJlbmREYXRlIiwiZ3RlIiwibHRlIiwic2VhcmNoIiwiT1IiLCJjb250YWlucyIsIm1vZGUiLCJtb2NrQXBwcm92ZWRJbnZvaWNlIiwiYXBwcm92ZVB1cmNoYXNlSW52b2ljZSIsImdldFB1cmNoYXNlSW52b2ljZVdpdGhEZXRhaWxzIl0sIm1hcHBpbmdzIjoiOzs7O3lCQUFrRTt3Q0FDM0I7d0JBQ0Q7b0JBQ25CO0FBRW5CLG9CQUFvQjtBQUNwQkEsYUFBSSxDQUFDQyxJQUFJLENBQUMsWUFBWSxJQUFPLENBQUE7UUFDM0JDLElBQUk7WUFDRkMsaUJBQWlCO2dCQUNmQyxRQUFRSixhQUFJLENBQUNLLEVBQUU7Z0JBQ2ZDLFlBQVlOLGFBQUksQ0FBQ0ssRUFBRTtnQkFDbkJFLFVBQVVQLGFBQUksQ0FBQ0ssRUFBRTtnQkFDakJHLFFBQVFSLGFBQUksQ0FBQ0ssRUFBRTtnQkFDZkksUUFBUVQsYUFBSSxDQUFDSyxFQUFFO1lBQ2pCO1lBQ0FLLHFCQUFxQjtnQkFDbkJDLFlBQVlYLGFBQUksQ0FBQ0ssRUFBRTtnQkFDbkJPLFlBQVlaLGFBQUksQ0FBQ0ssRUFBRTtZQUNyQjtZQUNBUSxjQUFjYixhQUFJLENBQUNLLEVBQUU7UUFDdkI7SUFDRixDQUFBO0FBRUEsTUFBTVMsU0FBU1osTUFBRTtBQUVqQmEsSUFBQUEsaUJBQVEsRUFBQywwQkFBMEI7SUFDakMsSUFBSUM7SUFFSkMsSUFBQUEsbUJBQVUsRUFBQztRQUNURCxVQUFVLElBQUlFLDhDQUFzQjtRQUNwQ2xCLGFBQUksQ0FBQ21CLGFBQWE7SUFDcEI7SUFFQUMsSUFBQUEsa0JBQVMsRUFBQztRQUNScEIsYUFBSSxDQUFDcUIsYUFBYTtJQUNwQjtJQUVBTixJQUFBQSxpQkFBUSxFQUFDLHlCQUF5QjtRQUNoQ08sSUFBQUEsV0FB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