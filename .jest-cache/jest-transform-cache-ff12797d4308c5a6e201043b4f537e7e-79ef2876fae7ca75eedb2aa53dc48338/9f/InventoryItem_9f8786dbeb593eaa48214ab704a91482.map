{"version":3,"names":["_default","InventoryItem","_sequelize","Model","adjustQuantity","amount","cov_4fd81xjsv","f","s","quantity","lastUpdated","Date","save","isLowStock","reorderLevel","b","init","id","type","DataTypes","INTEGER","autoIncrement","primaryKey","shopId","allowNull","references","model","key","productId","defaultValue","DATE","NOW","sequelize","_db","default","modelName","tableName","timestamps","indexes","unique","fields","_Shop","hasMany","sourceKey","foreignKey","as","belongsTo","_Product"],"sources":["/Users/sachin/Documents/md-sports-/src/lib/models/InventoryItem.ts"],"sourcesContent":["import { DataTypes, Model, Optional } from 'sequelize';\nimport sequelize from '../db';\nimport Shop from './Shop';\nimport Product from './Product';\n\ninterface InventoryItemAttributes {\n    id: number;\n    shopId: number;\n    productId: number;\n    quantity: number;\n    reorderLevel?: number;\n    lastUpdated: Date;\n}\n\ninterface InventoryItemCreationAttributes extends Optional<InventoryItemAttributes, 'id' | 'lastUpdated'> { }\n\nclass InventoryItem extends Model<InventoryItemAttributes, InventoryItemCreationAttributes> implements InventoryItemAttributes {\n    public id!: number;\n    public shopId!: number;\n    public productId!: number;\n    public quantity!: number;\n    public reorderLevel!: number;\n    public lastUpdated!: Date;\n\n    // Methods defined in the design document\n    public async adjustQuantity(amount: number): Promise<void> {\n        this.quantity += amount;\n        this.lastUpdated = new Date();\n        await this.save();\n    }\n\n    public isLowStock(): boolean {\n        if (!this.reorderLevel) return false;\n        return this.quantity <= this.reorderLevel;\n    }\n}\n\nInventoryItem.init({\n    id: {\n        type: DataTypes.INTEGER,\n        autoIncrement: true,\n        primaryKey: true,\n    },\n    shopId: {\n        type: DataTypes.INTEGER,\n        allowNull: false,\n        references: {\n            model: 'shops',\n            key: 'id'\n        }\n    },\n    productId: {\n        type: DataTypes.INTEGER,\n        allowNull: false,\n        references: {\n            model: 'products',\n            key: 'id'\n        }\n    },\n    quantity: {\n        type: DataTypes.INTEGER,\n        allowNull: false,\n        defaultValue: 0,\n    },\n    reorderLevel: {\n        type: DataTypes.INTEGER,\n        allowNull: true,\n    },\n    lastUpdated: {\n        type: DataTypes.DATE,\n        allowNull: false,\n        defaultValue: DataTypes.NOW,\n    },\n}, {\n    sequelize,\n    modelName: 'InventoryItem',\n    tableName: 'inventory_items',\n    timestamps: false,\n    indexes: [\n        {\n            unique: true,\n            fields: ['shopId', 'productId']\n        }\n    ]\n});\n\n// Set up associations\nShop.hasMany(InventoryItem, {\n    sourceKey: 'id',\n    foreignKey: 'shopId',\n    as: 'inventoryItems'\n});\n\nInventoryItem.belongsTo(Shop, {\n    foreignKey: 'shopId',\n    as: 'shop'\n});\n\nProduct.hasMany(InventoryItem, {\n    sourceKey: 'id',\n    foreignKey: 'productId',\n    as: 'inventoryItems'\n});\n\nInventoryItem.belongsTo(Product, {\n    foreignKey: 'productId',\n    as: 'product'\n});\n\nexport default InventoryItem; "],"mappings":"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","ignoreList":[]}