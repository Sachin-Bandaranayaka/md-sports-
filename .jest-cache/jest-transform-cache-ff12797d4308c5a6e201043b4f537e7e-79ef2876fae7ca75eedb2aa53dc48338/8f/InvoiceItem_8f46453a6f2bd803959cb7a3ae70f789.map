{"version":3,"names":["_default","InvoiceItem","_sequelize","Model","calculateSubtotal","cov_pkhwac4bv","f","discountAmount","s","unitPrice","discount","netPrice","quantity","init","id","type","DataTypes","INTEGER","autoIncrement","primaryKey","invoiceId","allowNull","productId","validate","min","DECIMAL","defaultValue","max","subtotal","sequelize","_db","default","modelName","tableName","timestamps","hooks","beforeValidate","item"],"sources":["/Users/sachin/Documents/md-sports-/src/lib/models/InvoiceItem.ts"],"sourcesContent":["import { Model, DataTypes } from 'sequelize';\nimport sequelize from '../db';\n\nclass InvoiceItem extends Model {\n    public id!: number;\n    public invoiceId!: number;\n    public productId!: number;\n    public quantity!: number;\n    public unitPrice!: number;\n    public discount!: number;\n    public subtotal!: number;\n\n    // Custom instance methods\n    public calculateSubtotal(): number {\n        const discountAmount = this.unitPrice * (this.discount / 100);\n        const netPrice = this.unitPrice - discountAmount;\n        return this.quantity * netPrice;\n    }\n}\n\nInvoiceItem.init({\n    id: {\n        type: DataTypes.INTEGER,\n        autoIncrement: true,\n        primaryKey: true\n    },\n    invoiceId: {\n        type: DataTypes.INTEGER,\n        allowNull: false\n    },\n    productId: {\n        type: DataTypes.INTEGER,\n        allowNull: false\n    },\n    quantity: {\n        type: DataTypes.INTEGER,\n        allowNull: false,\n        validate: {\n            min: 1\n        }\n    },\n    unitPrice: {\n        type: DataTypes.DECIMAL(10, 2),\n        allowNull: false,\n        validate: {\n            min: 0\n        }\n    },\n    discount: {\n        type: DataTypes.DECIMAL(5, 2),\n        allowNull: false,\n        defaultValue: 0.00,\n        validate: {\n            min: 0,\n            max: 100\n        }\n    },\n    subtotal: {\n        type: DataTypes.DECIMAL(10, 2),\n        allowNull: false\n    }\n}, {\n    sequelize,\n    modelName: 'invoice_item',\n    tableName: 'invoice_items',\n    timestamps: false,\n    hooks: {\n        beforeValidate: (item: InvoiceItem) => {\n            // Calculate subtotal before saving\n            item.subtotal = item.calculateSubtotal();\n        }\n    }\n});\n\nexport default InvoiceItem; "],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+BA0EA;;;;;;WAAAA,QAAA;;;;;iCA1EiC;;;uEACX;;;;;;;;;;;;;;;AAEtB,MAAMC,WAAA;AAAA;AAAA,CAAoBC,UAAA,CAAAC,KAAK;EAS3B;EACOC,kBAAA,EAA4B;IAAA;IAAAC,aAAA,GAAAC,CAAA;IAC/B,MAAMC,cAAA;IAAA;IAAA,CAAAF,aAAA,GAAAG,CAAA,OAAiB,IAAI,CAACC,SAAS,IAAI,IAAI,CAACC,QAAQ,GAAG,GAAE;IAC3D,MAAMC,QAAA;IAAA;IAAA,CAAAN,aAAA,GAAAG,CAAA,OAAW,IAAI,CAACC,SAAS,GAAGF,cAAA;IAAA;IAAAF,aAAA,GAAAG,CAAA;IAClC,OAAO,IAAI,CAACI,QAAQ,GAAGD,QAAA;EAC3B;AACJ;AAAA;AAAAN,aAAA,GAAAG,CAAA;AAEAP,WAAA,CAAYY,IAAI,CAAC;EACbC,EAAA,EAAI;IACAC,IAAA,EAAMb,UAAA,CAAAc,SAAS,CAACC,OAAO;IACvBC,aAAA,EAAe;IACfC,UAAA,EAAY;EAChB;EACAC,SAAA,EAAW;IACPL,IAAA,EAAMb,UAAA,CAAAc,SAAS,CAACC,OAAO;IACvBI,SAAA,EAAW;EACf;EACAC,SAAA,EAAW;IACPP,IAAA,EAAMb,UAAA,CAAAc,SAAS,CAACC,OAAO;IACvBI,SAAA,EAAW;EACf;EACAT,QAAA,EAAU;IACNG,IAAA,EAAMb,UAAA,CAAAc,SAAS,CAACC,OAAO;IACvBI,SAAA,EAAW;IACXE,QAAA,EAAU;MACNC,GAAA,EAAK;IACT;EACJ;EACAf,SAAA,EAAW;IACPM,IAAA,EAAMb,UAAA,CAAAc,SAAS,CAACS,OAAO,CAAC,IAAI;IAC5BJ,SAAA,EAAW;IACXE,QAAA,EAAU;MACNC,GAAA,EAAK;IACT;EACJ;EACAd,QAAA,EAAU;IACNK,IAAA,EAAMb,UAAA,CAAAc,SAAS,CAACS,OAAO,CAAC,GAAG;IAC3BJ,SAAA,EAAW;IACXK,YAAA,EAAc;IACdH,QAAA,EAAU;MACNC,GAAA,EAAK;MACLG,GAAA,EAAK;IACT;EACJ;EACAC,QAAA,EAAU;IACNb,IAAA,EAAMb,UAAA,CAAAc,SAAS,CAACS,OAAO,CAAC,IAAI;IAC5BJ,SAAA,EAAW;EACf;AACJ,GAAG;EACCQ,SAAA,EAAAC,GAAA,CAAAC,OAAS;EACTC,SAAA,EAAW;EACXC,SAAA,EAAW;EACXC,UAAA,EAAY;EACZC,KAAA,EAAO;IACHC,cAAA,EAAiBC,IAAA;MAAA;MAAAhC,aAAA,GAAAC,CAAA;MAAAD,aAAA,GAAAG,CAAA;MACb;MACA6B,IAAA,CAAKT,QAAQ,GAAGS,IAAA,CAAKjC,iBAAiB;IAC1C;EACJ;AACJ;MAEAJ,QAAA;AAAA;AAAA,CAAAK,aAAA,GAAAG,CAAA,QAAeP,WAAA","ignoreList":[]}