{"version":3,"sources":["/Users/sachin/Documents/md-sports-/jest.setup.js"],"sourcesContent":["// jest-dom adds custom jest matchers for asserting on DOM nodes.\nimport '@testing-library/jest-dom';\nimport { cleanupCache } from './src/lib/cache';\n\n// Set up environment variables for testing\nprocess.env.JWT_SECRET = 'test-secret-key';\nprocess.env.JWT_ACCESS_TOKEN_EXPIRES_IN = '12h';\nprocess.env.NEXTAUTH_SECRET = 'test-nextauth-secret';\nprocess.env.NODE_ENV = 'test';\nprocess.env.DATABASE_URL = 'postgresql://test:test@localhost:5432/test';\n\n// Mock console.log to reduce noise during tests\n// console.log = jest.fn();\n// global.console = {\n//   ...console,\n//   log: jest.fn(),\n// };\n\n// Temporarily enable console.log for debugging\nconsole.log = console.log;\n\n// Mock cache module\njest.mock('./src/lib/cache', () => ({\n  cache: {\n    get: jest.fn(),\n    set: jest.fn(),\n    delete: jest.fn(),\n    clear: jest.fn(),\n    generateKey: jest.fn(),\n    invalidatePattern: jest.fn(),\n  },\n  cacheService: {\n    get: jest.fn(),\n    set: jest.fn(),\n    delete: jest.fn(),\n    clear: jest.fn(),\n    generateKey: jest.fn(),\n    invalidatePattern: jest.fn(),\n  },\n  cleanupCache: jest.fn(),\n  CACHE_CONFIG: {\n    KEYS: {\n      USER_SESSION: 'user_session',\n      TOKEN_VALIDATION: 'token_validation',\n    },\n    TTL: {\n      USER_SESSION: 3600,\n      TOKEN_VALIDATION: 1800,\n    },\n  },\n}));\n\n// Mock Prisma client for testing\njest.mock('@prisma/client', () => ({\n  PrismaClient: jest.fn().mockImplementation(() => ({\n    user: {\n      findMany: jest.fn(),\n      findUnique: jest.fn(),\n      create: jest.fn(),\n      update: jest.fn(),\n      delete: jest.fn()\n    },\n    product: {\n      findMany: jest.fn(),\n      findUnique: jest.fn(),\n      create: jest.fn(),\n      update: jest.fn(),\n      delete: jest.fn()\n    },\n    auditLog: {\n      findMany: jest.fn(),\n      findUnique: jest.fn(),\n      create: jest.fn(),\n      update: jest.fn(),\n      delete: jest.fn()\n    },\n    refreshToken: {\n      findMany: jest.fn(),\n      findUnique: jest.fn(),\n      create: jest.fn(),\n      update: jest.fn(),\n      updateMany: jest.fn(),\n      delete: jest.fn(),\n      deleteMany: jest.fn()\n    }\n  }))\n}));\n\njest.mock('@/lib/prisma', () => ({\n  prisma: {\n    user: {\n      findMany: jest.fn(),\n      findUnique: jest.fn(),\n      create: jest.fn(),\n      update: jest.fn(),\n      delete: jest.fn()\n    },\n    product: {\n      findMany: jest.fn(),\n      findUnique: jest.fn(),\n      create: jest.fn(),\n      update: jest.fn(),\n      delete: jest.fn()\n    },\n    auditLog: {\n      findMany: jest.fn(),\n      findUnique: jest.fn(),\n      create: jest.fn(),\n      update: jest.fn(),\n      delete: jest.fn()\n    },\n    refreshToken: {\n      findMany: jest.fn(),\n      findUnique: jest.fn(),\n      create: jest.fn(),\n      update: jest.fn(),\n      updateMany: jest.fn(),\n      delete: jest.fn(),\n      deleteMany: jest.fn()\n    }\n  }\n}));\n\n// Mock Sequelize models for testing\njest.mock('@/lib/models', () => ({\n  Product: {\n    findAll: jest.fn(),\n    findByPk: jest.fn(),\n    create: jest.fn(),\n    update: jest.fn(),\n    destroy: jest.fn()\n  },\n  User: {\n    findAll: jest.fn(),\n    findByPk: jest.fn(),\n    create: jest.fn(),\n    update: jest.fn(),\n    destroy: jest.fn()\n  },\n  Customer: {\n    findAll: jest.fn(),\n    findByPk: jest.fn(),\n    create: jest.fn(),\n    update: jest.fn(),\n    destroy: jest.fn()\n  },\n  Invoice: {\n    findAll: jest.fn(),\n    findByPk: jest.fn(),\n    create: jest.fn(),\n    update: jest.fn(),\n    destroy: jest.fn()\n  },\n  AuditLog: {\n    findAll: jest.fn(),\n    findByPk: jest.fn(),\n    create: jest.fn(),\n    update: jest.fn(),\n    destroy: jest.fn()\n  }\n}));\n\n// Mock IntersectionObserver\nglobal.IntersectionObserver = class IntersectionObserver {\n  constructor() {}\n  disconnect() {}\n  observe() {}\n  unobserve() {}\n};\n\n// Mock ResizeObserver\nglobal.ResizeObserver = class ResizeObserver {\n  constructor() {}\n  disconnect() {}\n  observe() {}\n  unobserve() {}\n};\n\n// Mock window.matchMedia\nif (typeof window !== 'undefined') {\n  Object.defineProperty(window, 'matchMedia', {\n    writable: true,\n    value: jest.fn().mockImplementation(query => ({\n      matches: false,\n      media: query,\n      onchange: null,\n      addListener: jest.fn(), // deprecated\n      removeListener: jest.fn(), // deprecated\n      addEventListener: jest.fn(),\n      removeEventListener: jest.fn(),\n      dispatchEvent: jest.fn(),\n    })),\n  });\n}\n\n// Clean up cache after all tests\nafterAll(() => {\n  cleanupCache();\n});"],"names":["jest","mock","cache","get","fn","set","delete","clear","generateKey","invalidatePattern","cacheService","cleanupCache","CACHE_CONFIG","KEYS","USER_SESSION","TOKEN_VALIDATION","TTL","PrismaClient","mockImplementation","user","findMany","findUnique","create","update","product","auditLog","refreshToken","updateMany","deleteMany","prisma","Product","findAll","findByPk","destroy","User","Customer","Invoice","AuditLog","process","env","JWT_SECRET","JWT_ACCESS_TOKEN_EXPIRES_IN","NEXTAUTH_SECRET","NODE_ENV","DATABASE_URL","console","log","global","IntersectionObserver","constructor","disconnect","observe","unobserve","ResizeObserver","window","Object","defineProperty","writable","value","query","matches","media","onchange","addListener","removeListener","addEventListener","removeEventListener","dispatchEvent","afterAll"],"mappings":"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"}