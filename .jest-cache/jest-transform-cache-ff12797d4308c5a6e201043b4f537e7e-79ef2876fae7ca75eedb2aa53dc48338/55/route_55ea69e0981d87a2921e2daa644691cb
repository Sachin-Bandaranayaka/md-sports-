956cab58fa1f659722fe591820c72626
"use strict";

/* istanbul ignore next */
function cov_1vlzy1434f() {
  var path = "/Users/sachin/Documents/md-sports-/src/app/api/products/[id]/route.ts";
  var hash = "c0a3ee53d7795e6db157eebefc87ba00fe3e3843";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Users/sachin/Documents/md-sports-/src/app/api/products/[id]/route.ts",
    statementMap: {
      "0": {
        start: {
          line: 2,
          column: 0
        },
        end: {
          line: 4,
          column: 3
        }
      },
      "1": {
        start: {
          line: 6,
          column: 4
        },
        end: {
          line: 9,
          column: 7
        }
      },
      "2": {
        start: {
          line: 6,
          column: 24
        },
        end: {
          line: 9,
          column: 7
        }
      },
      "3": {
        start: {
          line: 11,
          column: 0
        },
        end: {
          line: 21,
          column: 3
        }
      },
      "4": {
        start: {
          line: 13,
          column: 8
        },
        end: {
          line: 13,
          column: 22
        }
      },
      "5": {
        start: {
          line: 16,
          column: 8
        },
        end: {
          line: 16,
          column: 19
        }
      },
      "6": {
        start: {
          line: 19,
          column: 8
        },
        end: {
          line: 19,
          column: 19
        }
      },
      "7": {
        start: {
          line: 22,
          column: 16
        },
        end: {
          line: 22,
          column: 38
        }
      },
      "8": {
        start: {
          line: 23,
          column: 15
        },
        end: {
          line: 23,
          column: 36
        }
      },
      "9": {
        start: {
          line: 24,
          column: 16
        },
        end: {
          line: 24,
          column: 49
        }
      },
      "10": {
        start: {
          line: 25,
          column: 16
        },
        end: {
          line: 25,
          column: 41
        }
      },
      "11": {
        start: {
          line: 26,
          column: 16
        },
        end: {
          line: 26,
          column: 48
        }
      },
      "12": {
        start: {
          line: 28,
          column: 26
        },
        end: {
          line: 45,
          column: 6
        }
      },
      "13": {
        start: {
          line: 28,
          column: 33
        },
        end: {
          line: 45,
          column: 5
        }
      },
      "14": {
        start: {
          line: 47,
          column: 28
        },
        end: {
          line: 47,
          column: 34
        }
      },
      "15": {
        start: {
          line: 48,
          column: 4
        },
        end: {
          line: 108,
          column: 5
        }
      },
      "16": {
        start: {
          line: 49,
          column: 19
        },
        end: {
          line: 49,
          column: 36
        }
      },
      "17": {
        start: {
          line: 50,
          column: 8
        },
        end: {
          line: 57,
          column: 9
        }
      },
      "18": {
        start: {
          line: 51,
          column: 12
        },
        end: {
          line: 56,
          column: 15
        }
      },
      "19": {
        start: {
          line: 58,
          column: 24
        },
        end: {
          line: 89,
          column: 94
        }
      },
      "20": {
        start: {
          line: 60,
          column: 32
        },
        end: {
          line: 72,
          column: 14
        }
      },
      "21": {
        start: {
          line: 73,
          column: 12
        },
        end: {
          line: 75,
          column: 13
        }
      },
      "22": {
        start: {
          line: 74,
          column: 16
        },
        end: {
          line: 74,
          column: 28
        }
      },
      "23": {
        start: {
          line: 77,
          column: 12
        },
        end: {
          line: 88,
          column: 14
        }
      },
      "24": {
        start: {
          line: 80,
          column: 67
        },
        end: {
          line: 87,
          column: 21
        }
      },
      "25": {
        start: {
          line: 90,
          column: 8
        },
        end: {
          line: 97,
          column: 9
        }
      },
      "26": {
        start: {
          line: 91,
          column: 12
        },
        end: {
          line: 96,
          column: 15
        }
      },
      "27": {
        start: {
          line: 98,
          column: 8
        },
        end: {
          line: 101,
          column: 11
        }
      },
      "28": {
        start: {
          line: 103,
          column: 8
        },
        end: {
          line: 103,
          column: 56
        }
      },
      "29": {
        start: {
          line: 104,
          column: 8
        },
        end: {
          line: 107,
          column: 11
        }
      },
      "30": {
        start: {
          line: 111,
          column: 28
        },
        end: {
          line: 111,
          column: 34
        }
      },
      "31": {
        start: {
          line: 112,
          column: 4
        },
        end: {
          line: 212,
          column: 5
        }
      },
      "32": {
        start: {
          line: 113,
          column: 19
        },
        end: {
          line: 113,
          column: 36
        }
      },
      "33": {
        start: {
          line: 114,
          column: 8
        },
        end: {
          line: 121,
          column: 9
        }
      },
      "34": {
        start: {
          line: 115,
          column: 12
        },
        end: {
          line: 120,
          column: 15
        }
      },
      "35": {
        start: {
          line: 122,
          column: 28
        },
        end: {
          line: 122,
          column: 44
        }
      },
      "36": {
        start: {
          line: 123,
          column: 23
        },
        end: {
          line: 123,
          column: 51
        }
      },
      "37": {
        start: {
          line: 125,
          column: 32
        },
        end: {
          line: 129,
          column: 10
        }
      },
      "38": {
        start: {
          line: 130,
          column: 8
        },
        end: {
          line: 137,
          column: 9
        }
      },
      "39": {
        start: {
          line: 131,
          column: 12
        },
        end: {
          line: 136,
          column: 15
        }
      },
      "40": {
        start: {
          line: 139,
          column: 29
        },
        end: {
          line: 139,
          column: 31
        }
      },
      "41": {
        start: {
          line: 140,
          column: 8
        },
        end: {
          line: 140,
          column: 81
        }
      },
      "42": {
        start: {
          line: 140,
          column: 44
        },
        end: {
          line: 140,
          column: 81
        }
      },
      "43": {
        start: {
          line: 141,
          column: 8
        },
        end: {
          line: 141,
          column: 78
        }
      },
      "44": {
        start: {
          line: 141,
          column: 43
        },
        end: {
          line: 141,
          column: 78
        }
      },
      "45": {
        start: {
          line: 142,
          column: 8
        },
        end: {
          line: 142,
          column: 98
        }
      },
      "46": {
        start: {
          line: 142,
          column: 47
        },
        end: {
          line: 142,
          column: 98
        }
      },
      "47": {
        start: {
          line: 143,
          column: 8
        },
        end: {
          line: 143,
          column: 110
        }
      },
      "48": {
        start: {
          line: 143,
          column: 51
        },
        end: {
          line: 143,
          column: 110
        }
      },
      "49": {
        start: {
          line: 144,
          column: 8
        },
        end: {
          line: 144,
          column: 106
        }
      },
      "50": {
        start: {
          line: 144,
          column: 49
        },
        end: {
          line: 144,
          column: 106
        }
      },
      "51": {
        start: {
          line: 145,
          column: 8
        },
        end: {
          line: 145,
          column: 96
        }
      },
      "52": {
        start: {
          line: 145,
          column: 51
        },
        end: {
          line: 145,
          column: 96
        }
      },
      "53": {
        start: {
          line: 146,
          column: 8
        },
        end: {
          line: 154,
          column: 9
        }
      },
      "54": {
        start: {
          line: 147,
          column: 12
        },
        end: {
          line: 153,
          column: 14
        }
      },
      "55": {
        start: {
          line: 155,
          column: 31
        },
        end: {
          line: 160,
          column: 10
        }
      },
      "56": {
        start: {
          line: 162,
          column: 24
        },
        end: {
          line: 162,
          column: 26
        }
      },
      "57": {
        start: {
          line: 163,
          column: 8
        },
        end: {
          line: 172,
          column: 11
        }
      },
      "58": {
        start: {
          line: 165,
          column: 29
        },
        end: {
          line: 165,
          column: 32
        }
      },
      "59": {
        start: {
          line: 166,
          column: 12
        },
        end: {
          line: 171,
          column: 13
        }
      },
      "60": {
        start: {
          line: 167,
          column: 16
        },
        end: {
          line: 170,
          column: 18
        }
      },
      "61": {
        start: {
          line: 173,
          column: 8
        },
        end: {
          line: 188,
          column: 9
        }
      },
      "62": {
        start: {
          line: 174,
          column: 12
        },
        end: {
          line: 187,
          column: 13
        }
      },
      "63": {
        start: {
          line: 175,
          column: 16
        },
        end: {
          line: 183,
          column: 19
        }
      },
      "64": {
        start: {
          line: 185,
          column: 16
        },
        end: {
          line: 185,
          column: 92
        }
      },
      "65": {
        start: {
          line: 190,
          column: 8
        },
        end: {
          line: 190,
          column: 57
        }
      },
      "66": {
        start: {
          line: 192,
          column: 8
        },
        end: {
          line: 192,
          column: 46
        }
      },
      "67": {
        start: {
          line: 193,
          column: 8
        },
        end: {
          line: 193,
          column: 47
        }
      },
      "68": {
        start: {
          line: 194,
          column: 8
        },
        end: {
          line: 194,
          column: 56
        }
      },
      "69": {
        start: {
          line: 195,
          column: 8
        },
        end: {
          line: 195,
          column: 49
        }
      },
      "70": {
        start: {
          line: 196,
          column: 8
        },
        end: {
          line: 196,
          column: 48
        }
      },
      "71": {
        start: {
          line: 198,
          column: 8
        },
        end: {
          line: 202,
          column: 11
        }
      },
      "72": {
        start: {
          line: 204,
          column: 8
        },
        end: {
          line: 204,
          column: 56
        }
      },
      "73": {
        start: {
          line: 205,
          column: 8
        },
        end: {
          line: 211,
          column: 11
        }
      },
      "74": {
        start: {
          line: 215,
          column: 28
        },
        end: {
          line: 215,
          column: 34
        }
      },
      "75": {
        start: {
          line: 216,
          column: 4
        },
        end: {
          line: 349,
          column: 5
        }
      },
      "76": {
        start: {
          line: 218,
          column: 19
        },
        end: {
          line: 218,
          column: 36
        }
      },
      "77": {
        start: {
          line: 219,
          column: 8
        },
        end: {
          line: 226,
          column: 9
        }
      },
      "78": {
        start: {
          line: 220,
          column: 12
        },
        end: {
          line: 225,
          column: 15
        }
      },
      "79": {
        start: {
          line: 227,
          column: 8
        },
        end: {
          line: 339,
          column: 9
        }
      },
      "80": {
        start: {
          line: 229,
          column: 36
        },
        end: {
          line: 233,
          column: 14
        }
      },
      "81": {
        start: {
          line: 234,
          column: 12
        },
        end: {
          line: 241,
          column: 13
        }
      },
      "82": {
        start: {
          line: 235,
          column: 16
        },
        end: {
          line: 240,
          column: 19
        }
      },
      "83": {
        start: {
          line: 243,
          column: 35
        },
        end: {
          line: 243,
          column: 37
        }
      },
      "84": {
        start: {
          line: 245,
          column: 46
        },
        end: {
          line: 249,
          column: 14
        }
      },
      "85": {
        start: {
          line: 250,
          column: 12
        },
        end: {
          line: 252,
          column: 13
        }
      },
      "86": {
        start: {
          line: 251,
          column: 16
        },
        end: {
          line: 251,
          column: 93
        }
      },
      "87": {
        start: {
          line: 254,
          column: 43
        },
        end: {
          line: 258,
          column: 14
        }
      },
      "88": {
        start: {
          line: 259,
          column: 12
        },
        end: {
          line: 261,
          column: 13
        }
      },
      "89": {
        start: {
          line: 260,
          column: 16
        },
        end: {
          line: 260,
          column: 87
        }
      },
      "90": {
        start: {
          line: 263,
          column: 40
        },
        end: {
          line: 267,
          column: 14
        }
      },
      "91": {
        start: {
          line: 268,
          column: 12
        },
        end: {
          line: 270,
          column: 13
        }
      },
      "92": {
        start: {
          line: 269,
          column: 16
        },
        end: {
          line: 269,
          column: 80
        }
      },
      "93": {
        start: {
          line: 272,
          column: 12
        },
        end: {
          line: 284,
          column: 13
        }
      },
      "94": {
        start: {
          line: 273,
          column: 16
        },
        end: {
          line: 283,
          column: 19
        }
      },
      "95": {
        start: {
          line: 286,
          column: 12
        },
        end: {
          line: 299,
          column: 15
        }
      },
      "96": {
        start: {
          line: 288,
          column: 16
        },
        end: {
          line: 292,
          column: 19
        }
      },
      "97": {
        start: {
          line: 294,
          column: 16
        },
        end: {
          line: 298,
          column: 19
        }
      },
      "98": {
        start: {
          line: 301,
          column: 12
        },
        end: {
          line: 301,
          column: 71
        }
      },
      "99": {
        start: {
          line: 302,
          column: 12
        },
        end: {
          line: 302,
          column: 61
        }
      },
      "100": {
        start: {
          line: 304,
          column: 12
        },
        end: {
          line: 304,
          column: 50
        }
      },
      "101": {
        start: {
          line: 305,
          column: 12
        },
        end: {
          line: 305,
          column: 51
        }
      },
      "102": {
        start: {
          line: 306,
          column: 12
        },
        end: {
          line: 306,
          column: 60
        }
      },
      "103": {
        start: {
          line: 307,
          column: 12
        },
        end: {
          line: 307,
          column: 53
        }
      },
      "104": {
        start: {
          line: 308,
          column: 12
        },
        end: {
          line: 308,
          column: 52
        }
      },
      "105": {
        start: {
          line: 310,
          column: 12
        },
        end: {
          line: 313,
          column: 15
        }
      },
      "106": {
        start: {
          line: 316,
          column: 12
        },
        end: {
          line: 337,
          column: 13
        }
      },
      "107": {
        start: {
          line: 317,
          column: 16
        },
        end: {
          line: 336,
          column: 17
        }
      },
      "108": {
        start: {
          line: 319,
          column: 43
        },
        end: {
          line: 319,
          column: 67
        }
      },
      "109": {
        start: {
          line: 321,
          column: 42
        },
        end: {
          line: 321,
          column: 77
        }
      },
      "110": {
        start: {
          line: 322,
          column: 20
        },
        end: {
          line: 328,
          column: 21
        }
      },
      "111": {
        start: {
          line: 323,
          column: 24
        },
        end: {
          line: 323,
          column: 89
        }
      },
      "112": {
        start: {
          line: 324,
          column: 27
        },
        end: {
          line: 328,
          column: 21
        }
      },
      "113": {
        start: {
          line: 325,
          column: 24
        },
        end: {
          line: 325,
          column: 86
        }
      },
      "114": {
        start: {
          line: 326,
          column: 27
        },
        end: {
          line: 328,
          column: 21
        }
      },
      "115": {
        start: {
          line: 327,
          column: 24
        },
        end: {
          line: 327,
          column: 94
        }
      },
      "116": {
        start: {
          line: 329,
          column: 20
        },
        end: {
          line: 335,
          column: 23
        }
      },
      "117": {
        start: {
          line: 338,
          column: 12
        },
        end: {
          line: 338,
          column: 24
        }
      },
      "118": {
        start: {
          line: 341,
          column: 8
        },
        end: {
          line: 341,
          column: 56
        }
      },
      "119": {
        start: {
          line: 342,
          column: 8
        },
        end: {
          line: 348,
          column: 11
        }
      }
    },
    fnMap: {
      "0": {
        name: "_export",
        decl: {
          start: {
            line: 5,
            column: 9
          },
          end: {
            line: 5,
            column: 16
          }
        },
        loc: {
          start: {
            line: 5,
            column: 30
          },
          end: {
            line: 10,
            column: 1
          }
        },
        line: 5
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 12,
            column: 12
          },
          end: {
            line: 12,
            column: 13
          }
        },
        loc: {
          start: {
            line: 12,
            column: 23
          },
          end: {
            line: 14,
            column: 5
          }
        },
        line: 12
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 15,
            column: 9
          },
          end: {
            line: 15,
            column: 10
          }
        },
        loc: {
          start: {
            line: 15,
            column: 20
          },
          end: {
            line: 17,
            column: 5
          }
        },
        line: 15
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 18,
            column: 9
          },
          end: {
            line: 18,
            column: 10
          }
        },
        loc: {
          start: {
            line: 18,
            column: 20
          },
          end: {
            line: 20,
            column: 5
          }
        },
        line: 18
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 28,
            column: 26
          },
          end: {
            line: 28,
            column: 27
          }
        },
        loc: {
          start: {
            line: 28,
            column: 33
          },
          end: {
            line: 45,
            column: 5
          }
        },
        line: 28
      },
      "5": {
        name: "GET",
        decl: {
          start: {
            line: 46,
            column: 15
          },
          end: {
            line: 46,
            column: 18
          }
        },
        loc: {
          start: {
            line: 46,
            column: 36
          },
          end: {
            line: 109,
            column: 1
          }
        },
        line: 46
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 58,
            column: 53
          },
          end: {
            line: 58,
            column: 54
          }
        },
        loc: {
          start: {
            line: 58,
            column: 63
          },
          end: {
            line: 89,
            column: 9
          }
        },
        line: 58
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 80,
            column: 58
          },
          end: {
            line: 80,
            column: 59
          }
        },
        loc: {
          start: {
            line: 80,
            column: 67
          },
          end: {
            line: 87,
            column: 21
          }
        },
        line: 80
      },
      "8": {
        name: "PUT",
        decl: {
          start: {
            line: 110,
            column: 15
          },
          end: {
            line: 110,
            column: 18
          }
        },
        loc: {
          start: {
            line: 110,
            column: 36
          },
          end: {
            line: 213,
            column: 1
          }
        },
        line: 110
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 163,
            column: 42
          },
          end: {
            line: 163,
            column: 43
          }
        },
        loc: {
          start: {
            line: 163,
            column: 49
          },
          end: {
            line: 172,
            column: 9
          }
        },
        line: 163
      },
      "10": {
        name: "DELETE",
        decl: {
          start: {
            line: 214,
            column: 15
          },
          end: {
            line: 214,
            column: 21
          }
        },
        loc: {
          start: {
            line: 214,
            column: 39
          },
          end: {
            line: 350,
            column: 1
          }
        },
        line: 214
      },
      "11": {
        name: "(anonymous_11)",
        decl: {
          start: {
            line: 286,
            column: 46
          },
          end: {
            line: 286,
            column: 47
          }
        },
        loc: {
          start: {
            line: 286,
            column: 58
          },
          end: {
            line: 299,
            column: 13
          }
        },
        line: 286
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 50,
            column: 8
          },
          end: {
            line: 57,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 50,
            column: 8
          },
          end: {
            line: 57,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 50
      },
      "1": {
        loc: {
          start: {
            line: 73,
            column: 12
          },
          end: {
            line: 75,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 73,
            column: 12
          },
          end: {
            line: 75,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 73
      },
      "2": {
        loc: {
          start: {
            line: 86,
            column: 44
          },
          end: {
            line: 86,
            column: 70
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 86,
            column: 44
          },
          end: {
            line: 86,
            column: 65
          }
        }, {
          start: {
            line: 86,
            column: 69
          },
          end: {
            line: 86,
            column: 70
          }
        }],
        line: 86
      },
      "3": {
        loc: {
          start: {
            line: 90,
            column: 8
          },
          end: {
            line: 97,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 90,
            column: 8
          },
          end: {
            line: 97,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 90
      },
      "4": {
        loc: {
          start: {
            line: 114,
            column: 8
          },
          end: {
            line: 121,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 114,
            column: 8
          },
          end: {
            line: 121,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 114
      },
      "5": {
        loc: {
          start: {
            line: 130,
            column: 8
          },
          end: {
            line: 137,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 130,
            column: 8
          },
          end: {
            line: 137,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 130
      },
      "6": {
        loc: {
          start: {
            line: 140,
            column: 8
          },
          end: {
            line: 140,
            column: 81
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 140,
            column: 8
          },
          end: {
            line: 140,
            column: 81
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 140
      },
      "7": {
        loc: {
          start: {
            line: 141,
            column: 8
          },
          end: {
            line: 141,
            column: 78
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 141,
            column: 8
          },
          end: {
            line: 141,
            column: 78
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 141
      },
      "8": {
        loc: {
          start: {
            line: 142,
            column: 8
          },
          end: {
            line: 142,
            column: 98
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 142,
            column: 8
          },
          end: {
            line: 142,
            column: 98
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 142
      },
      "9": {
        loc: {
          start: {
            line: 142,
            column: 70
          },
          end: {
            line: 142,
            column: 97
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 142,
            column: 70
          },
          end: {
            line: 142,
            column: 89
          }
        }, {
          start: {
            line: 142,
            column: 93
          },
          end: {
            line: 142,
            column: 97
          }
        }],
        line: 142
      },
      "10": {
        loc: {
          start: {
            line: 143,
            column: 8
          },
          end: {
            line: 143,
            column: 110
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 143,
            column: 8
          },
          end: {
            line: 143,
            column: 110
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 143
      },
      "11": {
        loc: {
          start: {
            line: 143,
            column: 78
          },
          end: {
            line: 143,
            column: 109
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 143,
            column: 78
          },
          end: {
            line: 143,
            column: 101
          }
        }, {
          start: {
            line: 143,
            column: 105
          },
          end: {
            line: 143,
            column: 109
          }
        }],
        line: 143
      },
      "12": {
        loc: {
          start: {
            line: 144,
            column: 8
          },
          end: {
            line: 144,
            column: 106
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 144,
            column: 8
          },
          end: {
            line: 144,
            column: 106
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 144
      },
      "13": {
        loc: {
          start: {
            line: 145,
            column: 8
          },
          end: {
            line: 145,
            column: 96
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 145,
            column: 8
          },
          end: {
            line: 145,
            column: 96
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 145
      },
      "14": {
        loc: {
          start: {
            line: 146,
            column: 8
          },
          end: {
            line: 154,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 146,
            column: 8
          },
          end: {
            line: 154,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 146
      },
      "15": {
        loc: {
          start: {
            line: 147,
            column: 36
          },
          end: {
            line: 153,
            column: 13
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 147,
            column: 61
          },
          end: {
            line: 151,
            column: 13
          }
        }, {
          start: {
            line: 151,
            column: 16
          },
          end: {
            line: 153,
            column: 13
          }
        }],
        line: 147
      },
      "16": {
        loc: {
          start: {
            line: 166,
            column: 12
          },
          end: {
            line: 171,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 166,
            column: 12
          },
          end: {
            line: 171,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 166
      },
      "17": {
        loc: {
          start: {
            line: 173,
            column: 8
          },
          end: {
            line: 188,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 173,
            column: 8
          },
          end: {
            line: 188,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 173
      },
      "18": {
        loc: {
          start: {
            line: 177,
            column: 32
          },
          end: {
            line: 177,
            column: 68
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 177,
            column: 41
          },
          end: {
            line: 177,
            column: 61
          }
        }, {
          start: {
            line: 177,
            column: 64
          },
          end: {
            line: 177,
            column: 68
          }
        }],
        line: 177
      },
      "19": {
        loc: {
          start: {
            line: 208,
            column: 19
          },
          end: {
            line: 208,
            column: 73
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 208,
            column: 44
          },
          end: {
            line: 208,
            column: 57
          }
        }, {
          start: {
            line: 208,
            column: 60
          },
          end: {
            line: 208,
            column: 73
          }
        }],
        line: 208
      },
      "20": {
        loc: {
          start: {
            line: 219,
            column: 8
          },
          end: {
            line: 226,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 219,
            column: 8
          },
          end: {
            line: 226,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 219
      },
      "21": {
        loc: {
          start: {
            line: 234,
            column: 12
          },
          end: {
            line: 241,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 234,
            column: 12
          },
          end: {
            line: 241,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 234
      },
      "22": {
        loc: {
          start: {
            line: 250,
            column: 12
          },
          end: {
            line: 252,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 250,
            column: 12
          },
          end: {
            line: 252,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 250
      },
      "23": {
        loc: {
          start: {
            line: 259,
            column: 12
          },
          end: {
            line: 261,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 259,
            column: 12
          },
          end: {
            line: 261,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 259
      },
      "24": {
        loc: {
          start: {
            line: 268,
            column: 12
          },
          end: {
            line: 270,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 268,
            column: 12
          },
          end: {
            line: 270,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 268
      },
      "25": {
        loc: {
          start: {
            line: 272,
            column: 12
          },
          end: {
            line: 284,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 272,
            column: 12
          },
          end: {
            line: 284,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 272
      },
      "26": {
        loc: {
          start: {
            line: 316,
            column: 12
          },
          end: {
            line: 337,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 316,
            column: 12
          },
          end: {
            line: 337,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 316
      },
      "27": {
        loc: {
          start: {
            line: 317,
            column: 16
          },
          end: {
            line: 336,
            column: 17
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 317,
            column: 16
          },
          end: {
            line: 336,
            column: 17
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 317
      },
      "28": {
        loc: {
          start: {
            line: 319,
            column: 43
          },
          end: {
            line: 319,
            column: 67
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 319,
            column: 43
          },
          end: {
            line: 319,
            column: 61
          }
        }, {
          start: {
            line: 319,
            column: 65
          },
          end: {
            line: 319,
            column: 67
          }
        }],
        line: 319
      },
      "29": {
        loc: {
          start: {
            line: 322,
            column: 20
          },
          end: {
            line: 328,
            column: 21
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 322,
            column: 20
          },
          end: {
            line: 328,
            column: 21
          }
        }, {
          start: {
            line: 324,
            column: 27
          },
          end: {
            line: 328,
            column: 21
          }
        }],
        line: 322
      },
      "30": {
        loc: {
          start: {
            line: 324,
            column: 27
          },
          end: {
            line: 328,
            column: 21
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 324,
            column: 27
          },
          end: {
            line: 328,
            column: 21
          }
        }, {
          start: {
            line: 326,
            column: 27
          },
          end: {
            line: 328,
            column: 21
          }
        }],
        line: 324
      },
      "31": {
        loc: {
          start: {
            line: 326,
            column: 27
          },
          end: {
            line: 328,
            column: 21
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 326,
            column: 27
          },
          end: {
            line: 328,
            column: 21
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 326
      },
      "32": {
        loc: {
          start: {
            line: 345,
            column: 19
          },
          end: {
            line: 345,
            column: 73
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 345,
            column: 44
          },
          end: {
            line: 345,
            column: 57
          }
        }, {
          start: {
            line: 345,
            column: 60
          },
          end: {
            line: 345,
            column: 73
          }
        }],
        line: 345
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0,
      "66": 0,
      "67": 0,
      "68": 0,
      "69": 0,
      "70": 0,
      "71": 0,
      "72": 0,
      "73": 0,
      "74": 0,
      "75": 0,
      "76": 0,
      "77": 0,
      "78": 0,
      "79": 0,
      "80": 0,
      "81": 0,
      "82": 0,
      "83": 0,
      "84": 0,
      "85": 0,
      "86": 0,
      "87": 0,
      "88": 0,
      "89": 0,
      "90": 0,
      "91": 0,
      "92": 0,
      "93": 0,
      "94": 0,
      "95": 0,
      "96": 0,
      "97": 0,
      "98": 0,
      "99": 0,
      "100": 0,
      "101": 0,
      "102": 0,
      "103": 0,
      "104": 0,
      "105": 0,
      "106": 0,
      "107": 0,
      "108": 0,
      "109": 0,
      "110": 0,
      "111": 0,
      "112": 0,
      "113": 0,
      "114": 0,
      "115": 0,
      "116": 0,
      "117": 0,
      "118": 0,
      "119": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0, 0],
      "13": [0, 0],
      "14": [0, 0],
      "15": [0, 0],
      "16": [0, 0],
      "17": [0, 0],
      "18": [0, 0],
      "19": [0, 0],
      "20": [0, 0],
      "21": [0, 0],
      "22": [0, 0],
      "23": [0, 0],
      "24": [0, 0],
      "25": [0, 0],
      "26": [0, 0],
      "27": [0, 0],
      "28": [0, 0],
      "29": [0, 0],
      "30": [0, 0],
      "31": [0, 0],
      "32": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["/Users/sachin/Documents/md-sports-/src/app/api/products/[id]/route.ts"],
      sourcesContent: ["import { NextRequest, NextResponse } from 'next/server';\nimport { revalidateTag, revalidatePath } from 'next/cache';\nimport { prisma, safeQuery } from '@/lib/prisma';\nimport { Prisma } from '@prisma/client';\n\nimport { cacheService } from '@/lib/cache';\n\n// Default fallback for a single product\nconst getDefaultProduct = (id: number) => ({\n    id,\n    name: 'Sample Product',\n    sku: `SKU-${id}`,\n    description: 'Product description not available',\n    price: 1000,\n    weightedAverageCost: 800,\n    category_name: 'General',\n    inventory: [],\n    inventoryItems: [],\n    category: null,\n    barcode: null,\n    categoryId: null,\n    createdAt: new Date(),\n    updatedAt: new Date(),\n    shopId: null,\n    minStockLevel: null,\n});\n\nexport async function GET(\n    req: NextRequest,\n    { params }: { params: { id: string } }\n) {\n    const { id: paramId } = params;\n    try {\n        const id = parseInt(paramId);\n\n        if (isNaN(id)) {\n            return NextResponse.json({\n                success: false,\n                message: 'Invalid product ID'\n            }, { status: 400 });\n        }\n\n        const product = await safeQuery(\n            async () => {\n                // Get product with its category\n                const productData = await prisma.product.findUnique({\n                    where: { id },\n                    include: {\n                        category: true,\n                        inventoryItems: {\n                            include: {\n                                shop: true\n                            }\n                        }\n                    }\n                });\n\n                if (!productData) {\n                    return null;\n                }\n\n                // Format the product data\n                return {\n                    ...productData,\n                    category_name: productData.category?.name,\n                    inventory: productData.inventoryItems.map(item => ({\n                        id: item.id,\n                        quantity: item.quantity,\n                        shop_id: item.shopId,\n                        shop_name: item.shop.name,\n                        shop_location: item.shop.location,\n                        shop_specific_cost: item.shopSpecificCost || 0\n                    }))\n                };\n            },\n            getDefaultProduct(parseInt(paramId)),\n            `Failed to fetch product with ID ${paramId}`\n        );\n\n        if (!product) {\n            return NextResponse.json({\n                success: false,\n                message: `Product with ID ${paramId} not found`\n            }, { status: 404 });\n        }\n\n        return NextResponse.json({\n            success: true,\n            data: product\n        });\n    } catch (error) {\n        console.error(`Error fetching product:`, error);\n        return NextResponse.json({\n            success: true,\n            data: getDefaultProduct(parseInt(paramId))\n        });\n    }\n}\n\nexport async function PUT(\n    req: NextRequest,\n    { params }: { params: { id: string } }\n) {\n    const { id: paramId } = params;\n    try {\n        const id = parseInt(paramId);\n        if (isNaN(id)) {\n            return NextResponse.json({ success: false, message: 'Invalid product ID' }, { status: 400 });\n        }\n\n        const productData = await req.json();\n        const userId = req.headers.get('x-user-id'); // Assuming you pass userId in headers\n\n        // Fetch existing product first to compare changes for audit log\n        const existingProduct = await prisma.product.findUnique({\n            where: { id }\n        });\n\n        if (!existingProduct) {\n            return NextResponse.json({ success: false, message: `Product with ID ${id} not found` }, { status: 404 });\n        }\n\n        // Prepare data for update, only including fields present in productData\n        const dataToUpdate: Prisma.ProductUpdateInput = {};\n        if (productData.name !== undefined) dataToUpdate.name = productData.name;\n        if (productData.sku !== undefined) dataToUpdate.sku = productData.sku;\n        if (productData.barcode !== undefined) dataToUpdate.barcode = productData.barcode || null;\n        if (productData.description !== undefined) dataToUpdate.description = productData.description || null;\n        if (productData.basePrice !== undefined) dataToUpdate.weightedAverageCost = productData.basePrice; // Assuming basePrice maps to WAC\n        if (productData.retailPrice !== undefined) dataToUpdate.price = productData.retailPrice;\n        if (productData.categoryId !== undefined) {\n            dataToUpdate.category = productData.categoryId ? { connect: { id: parseInt(productData.categoryId) } } : { disconnect: true };\n        }\n\n        const updatedProduct = await prisma.product.update({\n            where: { id },\n            data: dataToUpdate\n        });\n\n        // Audit Log Generation\n        const changes: Record<string, { old: any, new: any }> = {};\n        (Object.keys(dataToUpdate) as Array<keyof typeof dataToUpdate>).forEach(key => {\n            // Type assertion for existingProduct keys\n            const typedKey = key as keyof typeof existingProduct;\n            if (existingProduct[typedKey] !== updatedProduct[typedKey]) {\n                changes[typedKey] = {\n                    old: existingProduct[typedKey],\n                    new: updatedProduct[typedKey]\n                };\n            }\n        });\n\n        if (Object.keys(changes).length > 0) {\n            try {\n                await prisma.auditLog.create({\n                    data: {\n                        userId: userId ? parseInt(userId, 10) : null,\n                        action: 'UPDATE_PRODUCT',\n                        entity: 'Product',\n                        entityId: id,\n                        details: changes\n                    }\n                });\n            } catch (auditError) {\n                console.error('Failed to create audit log for product update:', auditError);\n                // Do not fail the main operation if audit logging fails\n            }\n        }\n\n        // Invalidate inventory cache\n        await cacheService.invalidateInventory();\n\n        // Revalidate Next.js cached pages\n        revalidateTag('products');\n        revalidateTag('inventory');\n        revalidateTag(`product-${paramId}`);\n        revalidatePath('/inventory');\n        revalidatePath('/products');\n\n        // Real-time updates now handled by polling system\n\n        return NextResponse.json({\n            success: true,\n            message: 'Product updated successfully',\n            data: updatedProduct\n        });\n    } catch (error) {\n        console.error(`Error updating product:`, error);\n        return NextResponse.json({\n            success: false,\n            message: 'Error updating product',\n            error: error instanceof Error ? error.message : String(error)\n        }, { status: 500 });\n    }\n}\n\nexport async function DELETE(\n    req: NextRequest,\n    { params }: { params: { id: string } }\n) {\n    const { id: paramId } = params;\n    try {\n        // Ensure params.id is properly awaited in Next.js 14+\n        const id = parseInt(paramId);\n\n        if (isNaN(id)) {\n            return NextResponse.json({\n                success: false,\n                message: 'Invalid product ID'\n            }, { status: 400 });\n        }\n\n        try {\n            // Check if product exists first\n            const existingProduct = await prisma.product.findUnique({\n                where: { id }\n            });\n\n            if (!existingProduct) {\n                return NextResponse.json({\n                    success: false,\n                    message: `Product with ID ${paramId} not found`\n                }, { status: 404 });\n            }\n\n            // Check for related records that prevent deletion\n            const relatedRecords = [];\n            \n            // Check if product is referenced in purchase invoices\n            const purchaseInvoiceItemsCount = await prisma.purchaseInvoiceItem.count({\n                where: { productId: id }\n            });\n            \n            if (purchaseInvoiceItemsCount > 0) {\n                relatedRecords.push(`${purchaseInvoiceItemsCount} purchase invoice item(s)`);\n            }\n\n            // Check if product is referenced in sales invoices\n            const salesInvoiceItemsCount = await prisma.invoiceItem.count({\n                where: { productId: id }\n            });\n            \n            if (salesInvoiceItemsCount > 0) {\n                relatedRecords.push(`${salesInvoiceItemsCount} sales invoice item(s)`);\n            }\n\n            // Check if product is referenced in quotations\n            const quotationItemsCount = await prisma.quotationItem.count({\n                where: { productId: id }\n            });\n            \n            if (quotationItemsCount > 0) {\n                relatedRecords.push(`${quotationItemsCount} quotation item(s)`);\n            }\n\n            // If any related records exist, prevent deletion\n            if (relatedRecords.length > 0) {\n                return NextResponse.json({\n                    success: false,\n                    message: `Cannot delete product \"${existingProduct.name}\" because it is referenced in: ${relatedRecords.join(', ')}. Please remove these references first.`,\n                    relatedRecords: {\n                        purchaseInvoiceItems: purchaseInvoiceItemsCount,\n                        salesInvoiceItems: salesInvoiceItemsCount,\n                        quotationItems: quotationItemsCount\n                    }\n                }, { status: 409 });\n            }\n\n            // Use a transaction to delete inventory items and then the product\n            await prisma.$transaction(async (tx) => {\n                // Delete all inventory items associated with this product\n                await tx.inventoryItem.deleteMany({\n                    where: { productId: id }\n                });\n\n                // Then, delete the product itself\n                await tx.product.delete({\n                    where: { id }\n                });\n            });\n\n            // Invalidate product cache\n            await cacheService.invalidatePattern('products:*');\n            await cacheService.invalidateInventory();\n\n            // Revalidate Next.js cached pages\n            revalidateTag('products');\n            revalidateTag('inventory');\n            revalidateTag(`product-${paramId}`);\n            revalidatePath('/inventory');\n            revalidatePath('/products');\n\n            // Real-time updates now handled by polling system\n\n            return NextResponse.json({\n                success: true,\n                message: 'Product deleted successfully'\n            });\n        } catch (error) {\n            // Handle foreign key constraint violations\n            if (error instanceof Prisma.PrismaClientKnownRequestError) {\n                if (error.code === 'P2003') {\n                    // Foreign key constraint violation\n                    const constraintName = error.meta?.target as string || '';\n\n                    // Determine which relation is causing the constraint violation\n                    let relationMessage = 'it is referenced in other records';\n\n                    if (constraintName.includes('PurchaseInvoiceItem')) {\n                        relationMessage = 'it is referenced in purchase invoice records';\n                    } else if (constraintName.includes('SalesInvoiceItem')) {\n                        relationMessage = 'it is referenced in sales invoice records';\n                    } else if (constraintName.includes('InventoryTransaction')) {\n                        relationMessage = 'it is referenced in inventory transaction records';\n                    }\n\n                    return NextResponse.json({\n                        success: false,\n                        message: `Cannot delete this product because ${relationMessage}.`,\n                        error: 'FOREIGN_KEY_CONSTRAINT'\n                    }, { status: 409 });\n                }\n            }\n\n            throw error; // Re-throw for the outer catch block\n        }\n    } catch (error) {\n        console.error(`Error deleting product:`, error);\n        return NextResponse.json({\n            success: false,\n            message: 'Error deleting product',\n            error: error instanceof Error ? error.message : String(error)\n        }, { status: 500 });\n    }\n}"],
      names: ["DELETE", "GET", "PUT", "getDefaultProduct", "id", "name", "sku", "description", "price", "weightedAverageCost", "category_name", "inventory", "inventoryItems", "category", "barcode", "categoryId", "createdAt", "Date", "updatedAt", "shopId", "minStockLevel", "req", "params", "paramId", "parseInt", "isNaN", "NextResponse", "json", "success", "message", "status", "product", "safeQuery", "productData", "prisma", "findUnique", "where", "include", "shop", "map", "item", "quantity", "shop_id", "shop_name", "shop_location", "location", "shop_specific_cost", "shopSpecificCost", "data", "error", "console", "userId", "headers", "get", "existingProduct", "dataToUpdate", "undefined", "basePrice", "retailPrice", "connect", "disconnect", "updatedProduct", "update", "changes", "Object", "keys", "forEach", "key", "typedKey", "old", "new", "length", "auditLog", "create", "action", "entity", "entityId", "details", "auditError", "cacheService", "invalidateInventory", "revalidateTag", "revalidatePath", "Error", "String", "relatedRecords", "purchaseInvoiceItemsCount", "purchaseInvoiceItem", "count", "productId", "push", "salesInvoiceItemsCount", "invoiceItem", "quotationItemsCount", "quotationItem", "join", "purchaseInvoiceItems", "salesInvoiceItems", "quotationItems", "$transaction", "tx", "inventoryItem", "deleteMany", "delete", "invalidatePattern", "Prisma", "PrismaClientKnownRequestError", "code", "constraintName", "meta", "target", "relationMessage", "includes"],
      mappings: "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"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "c0a3ee53d7795e6db157eebefc87ba00fe3e3843"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1vlzy1434f = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1vlzy1434f();
cov_1vlzy1434f().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
function _export(target, all) {
  /* istanbul ignore next */
  cov_1vlzy1434f().f[0]++;
  cov_1vlzy1434f().s[1]++;
  for (var name in all) {
    /* istanbul ignore next */
    cov_1vlzy1434f().s[2]++;
    Object.defineProperty(target, name, {
      enumerable: true,
      get: all[name]
    });
  }
}
/* istanbul ignore next */
cov_1vlzy1434f().s[3]++;
_export(exports, {
  DELETE: function () {
    /* istanbul ignore next */
    cov_1vlzy1434f().f[1]++;
    cov_1vlzy1434f().s[4]++;
    return DELETE;
  },
  GET: function () {
    /* istanbul ignore next */
    cov_1vlzy1434f().f[2]++;
    cov_1vlzy1434f().s[5]++;
    return GET;
  },
  PUT: function () {
    /* istanbul ignore next */
    cov_1vlzy1434f().f[3]++;
    cov_1vlzy1434f().s[6]++;
    return PUT;
  }
});
const _server =
/* istanbul ignore next */
(cov_1vlzy1434f().s[7]++, require("next/server"));
const _cache =
/* istanbul ignore next */
(cov_1vlzy1434f().s[8]++, require("next/cache"));
const _prisma =
/* istanbul ignore next */
(cov_1vlzy1434f().s[9]++, require("../../../../lib/prisma"));
const _client =
/* istanbul ignore next */
(cov_1vlzy1434f().s[10]++, require("@prisma/client"));
const _cache1 =
/* istanbul ignore next */
(cov_1vlzy1434f().s[11]++, require("../../../../lib/cache"));
// Default fallback for a single product
/* istanbul ignore next */
cov_1vlzy1434f().s[12]++;
const getDefaultProduct = id => {
  /* istanbul ignore next */
  cov_1vlzy1434f().f[4]++;
  cov_1vlzy1434f().s[13]++;
  return {
    id,
    name: "Sample Product",
    sku: `SKU-${id}`,
    description: "Product description not available",
    price: 1000,
    weightedAverageCost: 800,
    category_name: "General",
    inventory: [],
    inventoryItems: [],
    category: null,
    barcode: null,
    categoryId: null,
    createdAt: new Date(),
    updatedAt: new Date(),
    shopId: null,
    minStockLevel: null
  };
};
async function GET(req, {
  params
}) {
  /* istanbul ignore next */
  cov_1vlzy1434f().f[5]++;
  const {
    id: paramId
  } =
  /* istanbul ignore next */
  (cov_1vlzy1434f().s[14]++, params);
  /* istanbul ignore next */
  cov_1vlzy1434f().s[15]++;
  try {
    const id =
    /* istanbul ignore next */
    (cov_1vlzy1434f().s[16]++, parseInt(paramId));
    /* istanbul ignore next */
    cov_1vlzy1434f().s[17]++;
    if (isNaN(id)) {
      /* istanbul ignore next */
      cov_1vlzy1434f().b[0][0]++;
      cov_1vlzy1434f().s[18]++;
      return _server.NextResponse.json({
        success: false,
        message: "Invalid product ID"
      }, {
        status: 400
      });
    } else
    /* istanbul ignore next */
    {
      cov_1vlzy1434f().b[0][1]++;
    }
    const product =
    /* istanbul ignore next */
    (cov_1vlzy1434f().s[19]++, await (0, _prisma.safeQuery)(async () => {
      /* istanbul ignore next */
      cov_1vlzy1434f().f[6]++;
      // Get product with its category
      const productData =
      /* istanbul ignore next */
      (cov_1vlzy1434f().s[20]++, await _prisma.prisma.product.findUnique({
        where: {
          id
        },
        include: {
          category: true,
          inventoryItems: {
            include: {
              shop: true
            }
          }
        }
      }));
      /* istanbul ignore next */
      cov_1vlzy1434f().s[21]++;
      if (!productData) {
        /* istanbul ignore next */
        cov_1vlzy1434f().b[1][0]++;
        cov_1vlzy1434f().s[22]++;
        return null;
      } else
      /* istanbul ignore next */
      {
        cov_1vlzy1434f().b[1][1]++;
      }
      // Format the product data
      cov_1vlzy1434f().s[23]++;
      return {
        ...productData,
        category_name: productData.category?.name,
        inventory: productData.inventoryItems.map(item => {
          /* istanbul ignore next */
          cov_1vlzy1434f().f[7]++;
          cov_1vlzy1434f().s[24]++;
          return {
            id: item.id,
            quantity: item.quantity,
            shop_id: item.shopId,
            shop_name: item.shop.name,
            shop_location: item.shop.location,
            shop_specific_cost:
            /* istanbul ignore next */
            (cov_1vlzy1434f().b[2][0]++, item.shopSpecificCost) ||
            /* istanbul ignore next */
            (cov_1vlzy1434f().b[2][1]++, 0)
          };
        })
      };
    }, getDefaultProduct(parseInt(paramId)), `Failed to fetch product with ID ${paramId}`));
    /* istanbul ignore next */
    cov_1vlzy1434f().s[25]++;
    if (!product) {
      /* istanbul ignore next */
      cov_1vlzy1434f().b[3][0]++;
      cov_1vlzy1434f().s[26]++;
      return _server.NextResponse.json({
        success: false,
        message: `Product with ID ${paramId} not found`
      }, {
        status: 404
      });
    } else
    /* istanbul ignore next */
    {
      cov_1vlzy1434f().b[3][1]++;
    }
    cov_1vlzy1434f().s[27]++;
    return _server.NextResponse.json({
      success: true,
      data: product
    });
  } catch (error) {
    /* istanbul ignore next */
    cov_1vlzy1434f().s[28]++;
    console.error(`Error fetching product:`, error);
    /* istanbul ignore next */
    cov_1vlzy1434f().s[29]++;
    return _server.NextResponse.json({
      success: true,
      data: getDefaultProduct(parseInt(paramId))
    });
  }
}
async function PUT(req, {
  params
}) {
  /* istanbul ignore next */
  cov_1vlzy1434f().f[8]++;
  const {
    id: paramId
  } =
  /* istanbul ignore next */
  (cov_1vlzy1434f().s[30]++, params);
  /* istanbul ignore next */
  cov_1vlzy1434f().s[31]++;
  try {
    const id =
    /* istanbul ignore next */
    (cov_1vlzy1434f().s[32]++, parseInt(paramId));
    /* istanbul ignore next */
    cov_1vlzy1434f().s[33]++;
    if (isNaN(id)) {
      /* istanbul ignore next */
      cov_1vlzy1434f().b[4][0]++;
      cov_1vlzy1434f().s[34]++;
      return _server.NextResponse.json({
        success: false,
        message: "Invalid product ID"
      }, {
        status: 400
      });
    } else
    /* istanbul ignore next */
    {
      cov_1vlzy1434f().b[4][1]++;
    }
    const productData =
    /* istanbul ignore next */
    (cov_1vlzy1434f().s[35]++, await req.json());
    const userId =
    /* istanbul ignore next */
    (cov_1vlzy1434f().s[36]++, req.headers.get("x-user-id")); // Assuming you pass userId in headers
    // Fetch existing product first to compare changes for audit log
    const existingProduct =
    /* istanbul ignore next */
    (cov_1vlzy1434f().s[37]++, await _prisma.prisma.product.findUnique({
      where: {
        id
      }
    }));
    /* istanbul ignore next */
    cov_1vlzy1434f().s[38]++;
    if (!existingProduct) {
      /* istanbul ignore next */
      cov_1vlzy1434f().b[5][0]++;
      cov_1vlzy1434f().s[39]++;
      return _server.NextResponse.json({
        success: false,
        message: `Product with ID ${id} not found`
      }, {
        status: 404
      });
    } else
    /* istanbul ignore next */
    {
      cov_1vlzy1434f().b[5][1]++;
    }
    // Prepare data for update, only including fields present in productData
    const dataToUpdate =
    /* istanbul ignore next */
    (cov_1vlzy1434f().s[40]++, {});
    /* istanbul ignore next */
    cov_1vlzy1434f().s[41]++;
    if (productData.name !== undefined) {
      /* istanbul ignore next */
      cov_1vlzy1434f().b[6][0]++;
      cov_1vlzy1434f().s[42]++;
      dataToUpdate.name = productData.name;
    } else
    /* istanbul ignore next */
    {
      cov_1vlzy1434f().b[6][1]++;
    }
    cov_1vlzy1434f().s[43]++;
    if (productData.sku !== undefined) {
      /* istanbul ignore next */
      cov_1vlzy1434f().b[7][0]++;
      cov_1vlzy1434f().s[44]++;
      dataToUpdate.sku = productData.sku;
    } else
    /* istanbul ignore next */
    {
      cov_1vlzy1434f().b[7][1]++;
    }
    cov_1vlzy1434f().s[45]++;
    if (productData.barcode !== undefined) {
      /* istanbul ignore next */
      cov_1vlzy1434f().b[8][0]++;
      cov_1vlzy1434f().s[46]++;
      dataToUpdate.barcode =
      /* istanbul ignore next */
      (cov_1vlzy1434f().b[9][0]++, productData.barcode) ||
      /* istanbul ignore next */
      (cov_1vlzy1434f().b[9][1]++, null);
    } else
    /* istanbul ignore next */
    {
      cov_1vlzy1434f().b[8][1]++;
    }
    cov_1vlzy1434f().s[47]++;
    if (productData.description !== undefined) {
      /* istanbul ignore next */
      cov_1vlzy1434f().b[10][0]++;
      cov_1vlzy1434f().s[48]++;
      dataToUpdate.description =
      /* istanbul ignore next */
      (cov_1vlzy1434f().b[11][0]++, productData.description) ||
      /* istanbul ignore next */
      (cov_1vlzy1434f().b[11][1]++, null);
    } else
    /* istanbul ignore next */
    {
      cov_1vlzy1434f().b[10][1]++;
    }
    cov_1vlzy1434f().s[49]++;
    if (productData.basePrice !== undefined) {
      /* istanbul ignore next */
      cov_1vlzy1434f().b[12][0]++;
      cov_1vlzy1434f().s[50]++;
      dataToUpdate.weightedAverageCost = productData.basePrice;
    } else
    /* istanbul ignore next */
    {
      cov_1vlzy1434f().b[12][1]++;
    } // Assuming basePrice maps to WAC
    cov_1vlzy1434f().s[51]++;
    if (productData.retailPrice !== undefined) {
      /* istanbul ignore next */
      cov_1vlzy1434f().b[13][0]++;
      cov_1vlzy1434f().s[52]++;
      dataToUpdate.price = productData.retailPrice;
    } else
    /* istanbul ignore next */
    {
      cov_1vlzy1434f().b[13][1]++;
    }
    cov_1vlzy1434f().s[53]++;
    if (productData.categoryId !== undefined) {
      /* istanbul ignore next */
      cov_1vlzy1434f().b[14][0]++;
      cov_1vlzy1434f().s[54]++;
      dataToUpdate.category = productData.categoryId ?
      /* istanbul ignore next */
      (cov_1vlzy1434f().b[15][0]++, {
        connect: {
          id: parseInt(productData.categoryId)
        }
      }) :
      /* istanbul ignore next */
      (cov_1vlzy1434f().b[15][1]++, {
        disconnect: true
      });
    } else
    /* istanbul ignore next */
    {
      cov_1vlzy1434f().b[14][1]++;
    }
    const updatedProduct =
    /* istanbul ignore next */
    (cov_1vlzy1434f().s[55]++, await _prisma.prisma.product.update({
      where: {
        id
      },
      data: dataToUpdate
    }));
    // Audit Log Generation
    const changes =
    /* istanbul ignore next */
    (cov_1vlzy1434f().s[56]++, {});
    /* istanbul ignore next */
    cov_1vlzy1434f().s[57]++;
    Object.keys(dataToUpdate).forEach(key => {
      /* istanbul ignore next */
      cov_1vlzy1434f().f[9]++;
      // Type assertion for existingProduct keys
      const typedKey =
      /* istanbul ignore next */
      (cov_1vlzy1434f().s[58]++, key);
      /* istanbul ignore next */
      cov_1vlzy1434f().s[59]++;
      if (existingProduct[typedKey] !== updatedProduct[typedKey]) {
        /* istanbul ignore next */
        cov_1vlzy1434f().b[16][0]++;
        cov_1vlzy1434f().s[60]++;
        changes[typedKey] = {
          old: existingProduct[typedKey],
          new: updatedProduct[typedKey]
        };
      } else
      /* istanbul ignore next */
      {
        cov_1vlzy1434f().b[16][1]++;
      }
    });
    /* istanbul ignore next */
    cov_1vlzy1434f().s[61]++;
    if (Object.keys(changes).length > 0) {
      /* istanbul ignore next */
      cov_1vlzy1434f().b[17][0]++;
      cov_1vlzy1434f().s[62]++;
      try {
        /* istanbul ignore next */
        cov_1vlzy1434f().s[63]++;
        await _prisma.prisma.auditLog.create({
          data: {
            userId: userId ?
            /* istanbul ignore next */
            (cov_1vlzy1434f().b[18][0]++, parseInt(userId, 10)) :
            /* istanbul ignore next */
            (cov_1vlzy1434f().b[18][1]++, null),
            action: "UPDATE_PRODUCT",
            entity: "Product",
            entityId: id,
            details: changes
          }
        });
      } catch (auditError) {
        /* istanbul ignore next */
        cov_1vlzy1434f().s[64]++;
        console.error("Failed to create audit log for product update:", auditError);
        // Do not fail the main operation if audit logging fails
      }
    } else
    /* istanbul ignore next */
    {
      cov_1vlzy1434f().b[17][1]++;
    }
    // Invalidate inventory cache
    cov_1vlzy1434f().s[65]++;
    await _cache1.cacheService.invalidateInventory();
    // Revalidate Next.js cached pages
    /* istanbul ignore next */
    cov_1vlzy1434f().s[66]++;
    (0, _cache.revalidateTag)("products");
    /* istanbul ignore next */
    cov_1vlzy1434f().s[67]++;
    (0, _cache.revalidateTag)("inventory");
    /* istanbul ignore next */
    cov_1vlzy1434f().s[68]++;
    (0, _cache.revalidateTag)(`product-${paramId}`);
    /* istanbul ignore next */
    cov_1vlzy1434f().s[69]++;
    (0, _cache.revalidatePath)("/inventory");
    /* istanbul ignore next */
    cov_1vlzy1434f().s[70]++;
    (0, _cache.revalidatePath)("/products");
    // Real-time updates now handled by polling system
    /* istanbul ignore next */
    cov_1vlzy1434f().s[71]++;
    return _server.NextResponse.json({
      success: true,
      message: "Product updated successfully",
      data: updatedProduct
    });
  } catch (error) {
    /* istanbul ignore next */
    cov_1vlzy1434f().s[72]++;
    console.error(`Error updating product:`, error);
    /* istanbul ignore next */
    cov_1vlzy1434f().s[73]++;
    return _server.NextResponse.json({
      success: false,
      message: "Error updating product",
      error: error instanceof Error ?
      /* istanbul ignore next */
      (cov_1vlzy1434f().b[19][0]++, error.message) :
      /* istanbul ignore next */
      (cov_1vlzy1434f().b[19][1]++, String(error))
    }, {
      status: 500
    });
  }
}
async function DELETE(req, {
  params
}) {
  /* istanbul ignore next */
  cov_1vlzy1434f().f[10]++;
  const {
    id: paramId
  } =
  /* istanbul ignore next */
  (cov_1vlzy1434f().s[74]++, params);
  /* istanbul ignore next */
  cov_1vlzy1434f().s[75]++;
  try {
    // Ensure params.id is properly awaited in Next.js 14+
    const id =
    /* istanbul ignore next */
    (cov_1vlzy1434f().s[76]++, parseInt(paramId));
    /* istanbul ignore next */
    cov_1vlzy1434f().s[77]++;
    if (isNaN(id)) {
      /* istanbul ignore next */
      cov_1vlzy1434f().b[20][0]++;
      cov_1vlzy1434f().s[78]++;
      return _server.NextResponse.json({
        success: false,
        message: "Invalid product ID"
      }, {
        status: 400
      });
    } else
    /* istanbul ignore next */
    {
      cov_1vlzy1434f().b[20][1]++;
    }
    cov_1vlzy1434f().s[79]++;
    try {
      // Check if product exists first
      const existingProduct =
      /* istanbul ignore next */
      (cov_1vlzy1434f().s[80]++, await _prisma.prisma.product.findUnique({
        where: {
          id
        }
      }));
      /* istanbul ignore next */
      cov_1vlzy1434f().s[81]++;
      if (!existingProduct) {
        /* istanbul ignore next */
        cov_1vlzy1434f().b[21][0]++;
        cov_1vlzy1434f().s[82]++;
        return _server.NextResponse.json({
          success: false,
          message: `Product with ID ${paramId} not found`
        }, {
          status: 404
        });
      } else
      /* istanbul ignore next */
      {
        cov_1vlzy1434f().b[21][1]++;
      }
      // Check for related records that prevent deletion
      const relatedRecords =
      /* istanbul ignore next */
      (cov_1vlzy1434f().s[83]++, []);
      // Check if product is referenced in purchase invoices
      const purchaseInvoiceItemsCount =
      /* istanbul ignore next */
      (cov_1vlzy1434f().s[84]++, await _prisma.prisma.purchaseInvoiceItem.count({
        where: {
          productId: id
        }
      }));
      /* istanbul ignore next */
      cov_1vlzy1434f().s[85]++;
      if (purchaseInvoiceItemsCount > 0) {
        /* istanbul ignore next */
        cov_1vlzy1434f().b[22][0]++;
        cov_1vlzy1434f().s[86]++;
        relatedRecords.push(`${purchaseInvoiceItemsCount} purchase invoice item(s)`);
      } else
      /* istanbul ignore next */
      {
        cov_1vlzy1434f().b[22][1]++;
      }
      // Check if product is referenced in sales invoices
      const salesInvoiceItemsCount =
      /* istanbul ignore next */
      (cov_1vlzy1434f().s[87]++, await _prisma.prisma.invoiceItem.count({
        where: {
          productId: id
        }
      }));
      /* istanbul ignore next */
      cov_1vlzy1434f().s[88]++;
      if (salesInvoiceItemsCount > 0) {
        /* istanbul ignore next */
        cov_1vlzy1434f().b[23][0]++;
        cov_1vlzy1434f().s[89]++;
        relatedRecords.push(`${salesInvoiceItemsCount} sales invoice item(s)`);
      } else
      /* istanbul ignore next */
      {
        cov_1vlzy1434f().b[23][1]++;
      }
      // Check if product is referenced in quotations
      const quotationItemsCount =
      /* istanbul ignore next */
      (cov_1vlzy1434f().s[90]++, await _prisma.prisma.quotationItem.count({
        where: {
          productId: id
        }
      }));
      /* istanbul ignore next */
      cov_1vlzy1434f().s[91]++;
      if (quotationItemsCount > 0) {
        /* istanbul ignore next */
        cov_1vlzy1434f().b[24][0]++;
        cov_1vlzy1434f().s[92]++;
        relatedRecords.push(`${quotationItemsCount} quotation item(s)`);
      } else
      /* istanbul ignore next */
      {
        cov_1vlzy1434f().b[24][1]++;
      }
      // If any related records exist, prevent deletion
      cov_1vlzy1434f().s[93]++;
      if (relatedRecords.length > 0) {
        /* istanbul ignore next */
        cov_1vlzy1434f().b[25][0]++;
        cov_1vlzy1434f().s[94]++;
        return _server.NextResponse.json({
          success: false,
          message: `Cannot delete product "${existingProduct.name}" because it is referenced in: ${relatedRecords.join(", ")}. Please remove these references first.`,
          relatedRecords: {
            purchaseInvoiceItems: purchaseInvoiceItemsCount,
            salesInvoiceItems: salesInvoiceItemsCount,
            quotationItems: quotationItemsCount
          }
        }, {
          status: 409
        });
      } else
      /* istanbul ignore next */
      {
        cov_1vlzy1434f().b[25][1]++;
      }
      // Use a transaction to delete inventory items and then the product
      cov_1vlzy1434f().s[95]++;
      await _prisma.prisma.$transaction(async tx => {
        /* istanbul ignore next */
        cov_1vlzy1434f().f[11]++;
        cov_1vlzy1434f().s[96]++;
        // Delete all inventory items associated with this product
        await tx.inventoryItem.deleteMany({
          where: {
            productId: id
          }
        });
        // Then, delete the product itself
        /* istanbul ignore next */
        cov_1vlzy1434f().s[97]++;
        await tx.product.delete({
          where: {
            id
          }
        });
      });
      // Invalidate product cache
      /* istanbul ignore next */
      cov_1vlzy1434f().s[98]++;
      await _cache1.cacheService.invalidatePattern("products:*");
      /* istanbul ignore next */
      cov_1vlzy1434f().s[99]++;
      await _cache1.cacheService.invalidateInventory();
      // Revalidate Next.js cached pages
      /* istanbul ignore next */
      cov_1vlzy1434f().s[100]++;
      (0, _cache.revalidateTag)("products");
      /* istanbul ignore next */
      cov_1vlzy1434f().s[101]++;
      (0, _cache.revalidateTag)("inventory");
      /* istanbul ignore next */
      cov_1vlzy1434f().s[102]++;
      (0, _cache.revalidateTag)(`product-${paramId}`);
      /* istanbul ignore next */
      cov_1vlzy1434f().s[103]++;
      (0, _cache.revalidatePath)("/inventory");
      /* istanbul ignore next */
      cov_1vlzy1434f().s[104]++;
      (0, _cache.revalidatePath)("/products");
      // Real-time updates now handled by polling system
      /* istanbul ignore next */
      cov_1vlzy1434f().s[105]++;
      return _server.NextResponse.json({
        success: true,
        message: "Product deleted successfully"
      });
    } catch (error) {
      /* istanbul ignore next */
      cov_1vlzy1434f().s[106]++;
      // Handle foreign key constraint violations
      if (error instanceof _client.Prisma.PrismaClientKnownRequestError) {
        /* istanbul ignore next */
        cov_1vlzy1434f().b[26][0]++;
        cov_1vlzy1434f().s[107]++;
        if (error.code === "P2003") {
          /* istanbul ignore next */
          cov_1vlzy1434f().b[27][0]++;
          // Foreign key constraint violation
          const constraintName =
          /* istanbul ignore next */
          (cov_1vlzy1434f().s[108]++,
          /* istanbul ignore next */
          (cov_1vlzy1434f().b[28][0]++, error.meta?.target) ||
          /* istanbul ignore next */
          (cov_1vlzy1434f().b[28][1]++, ""));
          // Determine which relation is causing the constraint violation
          let relationMessage =
          /* istanbul ignore next */
          (cov_1vlzy1434f().s[109]++, "it is referenced in other records");
          /* istanbul ignore next */
          cov_1vlzy1434f().s[110]++;
          if (constraintName.includes("PurchaseInvoiceItem")) {
            /* istanbul ignore next */
            cov_1vlzy1434f().b[29][0]++;
            cov_1vlzy1434f().s[111]++;
            relationMessage = "it is referenced in purchase invoice records";
          } else {
            /* istanbul ignore next */
            cov_1vlzy1434f().b[29][1]++;
            cov_1vlzy1434f().s[112]++;
            if (constraintName.includes("SalesInvoiceItem")) {
              /* istanbul ignore next */
              cov_1vlzy1434f().b[30][0]++;
              cov_1vlzy1434f().s[113]++;
              relationMessage = "it is referenced in sales invoice records";
            } else {
              /* istanbul ignore next */
              cov_1vlzy1434f().b[30][1]++;
              cov_1vlzy1434f().s[114]++;
              if (constraintName.includes("InventoryTransaction")) {
                /* istanbul ignore next */
                cov_1vlzy1434f().b[31][0]++;
                cov_1vlzy1434f().s[115]++;
                relationMessage = "it is referenced in inventory transaction records";
              } else
              /* istanbul ignore next */
              {
                cov_1vlzy1434f().b[31][1]++;
              }
            }
          }
          /* istanbul ignore next */
          cov_1vlzy1434f().s[116]++;
          return _server.NextResponse.json({
            success: false,
            message: `Cannot delete this product because ${relationMessage}.`,
            error: "FOREIGN_KEY_CONSTRAINT"
          }, {
            status: 409
          });
        } else
        /* istanbul ignore next */
        {
          cov_1vlzy1434f().b[27][1]++;
        }
      } else
      /* istanbul ignore next */
      {
        cov_1vlzy1434f().b[26][1]++;
      }
      cov_1vlzy1434f().s[117]++;
      throw error; // Re-throw for the outer catch block
    }
  } catch (error) {
    /* istanbul ignore next */
    cov_1vlzy1434f().s[118]++;
    console.error(`Error deleting product:`, error);
    /* istanbul ignore next */
    cov_1vlzy1434f().s[119]++;
    return _server.NextResponse.json({
      success: false,
      message: "Error deleting product",
      error: error instanceof Error ?
      /* istanbul ignore next */
      (cov_1vlzy1434f().b[32][0]++, error.message) :
      /* istanbul ignore next */
      (cov_1vlzy1434f().b[32][1]++, String(error))
    }, {
      status: 500
    });
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJERUxFVEUiLCJjb3ZfMXZsenkxNDM0ZiIsImYiLCJzIiwiR0VUIiwiUFVUIiwiZ2V0RGVmYXVsdFByb2R1Y3QiLCJpZCIsIm5hbWUiLCJza3UiLCJkZXNjcmlwdGlvbiIsInByaWNlIiwid2VpZ2h0ZWRBdmVyYWdlQ29zdCIsImNhdGVnb3J5X25hbWUiLCJpbnZlbnRvcnkiLCJpbnZlbnRvcnlJdGVtcyIsImNhdGVnb3J5IiwiYmFyY29kZSIsImNhdGVnb3J5SWQiLCJjcmVhdGVkQXQiLCJEYXRlIiwidXBkYXRlZEF0Iiwic2hvcElkIiwibWluU3RvY2tMZXZlbCIsInJlcSIsInBhcmFtcyIsInBhcmFtSWQiLCJwYXJzZUludCIsImlzTmFOIiwiYiIsIl9zZXJ2ZXIiLCJOZXh0UmVzcG9uc2UiLCJqc29uIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJwcm9kdWN0IiwiX3ByaXNtYSIsInNhZmVRdWVyeSIsInByb2R1Y3REYXRhIiwicHJpc21hIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaW5jbHVkZSIsInNob3AiLCJtYXAiLCJpdGVtIiwicXVhbnRpdHkiLCJzaG9wX2lkIiwic2hvcF9uYW1lIiwic2hvcF9sb2NhdGlvbiIsImxvY2F0aW9uIiwic2hvcF9zcGVjaWZpY19jb3N0Iiwic2hvcFNwZWNpZmljQ29zdCIsImRhdGEiLCJlcnJvciIsImNvbnNvbGUiLCJ1c2VySWQiLCJoZWFkZXJzIiwiZ2V0IiwiZXhpc3RpbmdQcm9kdWN0IiwiZGF0YVRvVXBkYXRlIiwidW5kZWZpbmVkIiwiYmFzZVByaWNlIiwicmV0YWlsUHJpY2UiLCJjb25uZWN0IiwiZGlzY29ubmVjdCIsInVwZGF0ZWRQcm9kdWN0IiwidXBkYXRlIiwiY2hhbmdlcyIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwia2V5IiwidHlwZWRLZXkiLCJvbGQiLCJuZXciLCJsZW5ndGgiLCJhdWRpdExvZyIsImNyZWF0ZSIsImFjdGlvbiIsImVudGl0eSIsImVudGl0eUlkIiwiZGV0YWlscyIsImF1ZGl0RXJyb3IiLCJfY2FjaGUxIiwiY2FjaGVTZXJ2aWNlIiwiaW52YWxpZGF0ZUludmVudG9yeSIsIl9jYWNoZSIsInJldmFsaWRhdGVUYWciLCJyZXZhbGlkYXRlUGF0aCIsIkVycm9yIiwiU3RyaW5nIiwicmVsYXRlZFJlY29yZHMiLCJwdXJjaGFzZUludm9pY2VJdGVtc0NvdW50IiwicHVyY2hhc2VJbnZvaWNlSXRlbSIsImNvdW50IiwicHJvZHVjdElkIiwicHVzaCIsInNhbGVzSW52b2ljZUl0ZW1zQ291bnQiLCJpbnZvaWNlSXRlbSIsInF1b3RhdGlvbkl0ZW1zQ291bnQiLCJxdW90YXRpb25JdGVtIiwiam9pbiIsInB1cmNoYXNlSW52b2ljZUl0ZW1zIiwic2FsZXNJbnZvaWNlSXRlbXMiLCJxdW90YXRpb25JdGVtcyIsIiR0cmFuc2FjdGlvbiIsInR4IiwiaW52ZW50b3J5SXRlbSIsImRlbGV0ZU1hbnkiLCJkZWxldGUiLCJpbnZhbGlkYXRlUGF0dGVybiIsIl9jbGllbnQiLCJQcmlzbWEiLCJQcmlzbWFDbGllbnRLbm93blJlcXVlc3RFcnJvciIsImNvZGUiLCJjb25zdHJhaW50TmFtZSIsIm1ldGEiLCJ0YXJnZXQiLCJyZWxhdGlvbk1lc3NhZ2UiLCJpbmNsdWRlcyJdLCJzb3VyY2VzIjpbIi9Vc2Vycy9zYWNoaW4vRG9jdW1lbnRzL21kLXNwb3J0cy0vc3JjL2FwcC9hcGkvcHJvZHVjdHMvW2lkXS9yb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgcmV2YWxpZGF0ZVRhZywgcmV2YWxpZGF0ZVBhdGggfSBmcm9tICduZXh0L2NhY2hlJztcbmltcG9ydCB7IHByaXNtYSwgc2FmZVF1ZXJ5IH0gZnJvbSAnQC9saWIvcHJpc21hJztcbmltcG9ydCB7IFByaXNtYSB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcblxuaW1wb3J0IHsgY2FjaGVTZXJ2aWNlIH0gZnJvbSAnQC9saWIvY2FjaGUnO1xuXG4vLyBEZWZhdWx0IGZhbGxiYWNrIGZvciBhIHNpbmdsZSBwcm9kdWN0XG5jb25zdCBnZXREZWZhdWx0UHJvZHVjdCA9IChpZDogbnVtYmVyKSA9PiAoe1xuICAgIGlkLFxuICAgIG5hbWU6ICdTYW1wbGUgUHJvZHVjdCcsXG4gICAgc2t1OiBgU0tVLSR7aWR9YCxcbiAgICBkZXNjcmlwdGlvbjogJ1Byb2R1Y3QgZGVzY3JpcHRpb24gbm90IGF2YWlsYWJsZScsXG4gICAgcHJpY2U6IDEwMDAsXG4gICAgd2VpZ2h0ZWRBdmVyYWdlQ29zdDogODAwLFxuICAgIGNhdGVnb3J5X25hbWU6ICdHZW5lcmFsJyxcbiAgICBpbnZlbnRvcnk6IFtdLFxuICAgIGludmVudG9yeUl0ZW1zOiBbXSxcbiAgICBjYXRlZ29yeTogbnVsbCxcbiAgICBiYXJjb2RlOiBudWxsLFxuICAgIGNhdGVnb3J5SWQ6IG51bGwsXG4gICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICBzaG9wSWQ6IG51bGwsXG4gICAgbWluU3RvY2tMZXZlbDogbnVsbCxcbn0pO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKFxuICAgIHJlcTogTmV4dFJlcXVlc3QsXG4gICAgeyBwYXJhbXMgfTogeyBwYXJhbXM6IHsgaWQ6IHN0cmluZyB9IH1cbikge1xuICAgIGNvbnN0IHsgaWQ6IHBhcmFtSWQgfSA9IHBhcmFtcztcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBpZCA9IHBhcnNlSW50KHBhcmFtSWQpO1xuXG4gICAgICAgIGlmIChpc05hTihpZCkpIHtcbiAgICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgcHJvZHVjdCBJRCdcbiAgICAgICAgICAgIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgc2FmZVF1ZXJ5KFxuICAgICAgICAgICAgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIEdldCBwcm9kdWN0IHdpdGggaXRzIGNhdGVnb3J5XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvZHVjdERhdGEgPSBhd2FpdCBwcmlzbWEucHJvZHVjdC5maW5kVW5pcXVlKHtcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZlbnRvcnlJdGVtczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvcDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFwcm9kdWN0RGF0YSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBGb3JtYXQgdGhlIHByb2R1Y3QgZGF0YVxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnByb2R1Y3REYXRhLFxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeV9uYW1lOiBwcm9kdWN0RGF0YS5jYXRlZ29yeT8ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgaW52ZW50b3J5OiBwcm9kdWN0RGF0YS5pbnZlbnRvcnlJdGVtcy5tYXAoaXRlbSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGl0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogaXRlbS5xdWFudGl0eSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3BfaWQ6IGl0ZW0uc2hvcElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvcF9uYW1lOiBpdGVtLnNob3AubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3BfbG9jYXRpb246IGl0ZW0uc2hvcC5sb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3Bfc3BlY2lmaWNfY29zdDogaXRlbS5zaG9wU3BlY2lmaWNDb3N0IHx8IDBcbiAgICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXREZWZhdWx0UHJvZHVjdChwYXJzZUludChwYXJhbUlkKSksXG4gICAgICAgICAgICBgRmFpbGVkIHRvIGZldGNoIHByb2R1Y3Qgd2l0aCBJRCAke3BhcmFtSWR9YFxuICAgICAgICApO1xuXG4gICAgICAgIGlmICghcHJvZHVjdCkge1xuICAgICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgUHJvZHVjdCB3aXRoIElEICR7cGFyYW1JZH0gbm90IGZvdW5kYFxuICAgICAgICAgICAgfSwgeyBzdGF0dXM6IDQwNCB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgZGF0YTogcHJvZHVjdFxuICAgICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBmZXRjaGluZyBwcm9kdWN0OmAsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBkYXRhOiBnZXREZWZhdWx0UHJvZHVjdChwYXJzZUludChwYXJhbUlkKSlcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUFVUKFxuICAgIHJlcTogTmV4dFJlcXVlc3QsXG4gICAgeyBwYXJhbXMgfTogeyBwYXJhbXM6IHsgaWQ6IHN0cmluZyB9IH1cbikge1xuICAgIGNvbnN0IHsgaWQ6IHBhcmFtSWQgfSA9IHBhcmFtcztcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBpZCA9IHBhcnNlSW50KHBhcmFtSWQpO1xuICAgICAgICBpZiAoaXNOYU4oaWQpKSB7XG4gICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0ludmFsaWQgcHJvZHVjdCBJRCcgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHByb2R1Y3REYXRhID0gYXdhaXQgcmVxLmpzb24oKTtcbiAgICAgICAgY29uc3QgdXNlcklkID0gcmVxLmhlYWRlcnMuZ2V0KCd4LXVzZXItaWQnKTsgLy8gQXNzdW1pbmcgeW91IHBhc3MgdXNlcklkIGluIGhlYWRlcnNcblxuICAgICAgICAvLyBGZXRjaCBleGlzdGluZyBwcm9kdWN0IGZpcnN0IHRvIGNvbXBhcmUgY2hhbmdlcyBmb3IgYXVkaXQgbG9nXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nUHJvZHVjdCA9IGF3YWl0IHByaXNtYS5wcm9kdWN0LmZpbmRVbmlxdWUoe1xuICAgICAgICAgICAgd2hlcmU6IHsgaWQgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIWV4aXN0aW5nUHJvZHVjdCkge1xuICAgICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IGBQcm9kdWN0IHdpdGggSUQgJHtpZH0gbm90IGZvdW5kYCB9LCB7IHN0YXR1czogNDA0IH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUHJlcGFyZSBkYXRhIGZvciB1cGRhdGUsIG9ubHkgaW5jbHVkaW5nIGZpZWxkcyBwcmVzZW50IGluIHByb2R1Y3REYXRhXG4gICAgICAgIGNvbnN0IGRhdGFUb1VwZGF0ZTogUHJpc21hLlByb2R1Y3RVcGRhdGVJbnB1dCA9IHt9O1xuICAgICAgICBpZiAocHJvZHVjdERhdGEubmFtZSAhPT0gdW5kZWZpbmVkKSBkYXRhVG9VcGRhdGUubmFtZSA9IHByb2R1Y3REYXRhLm5hbWU7XG4gICAgICAgIGlmIChwcm9kdWN0RGF0YS5za3UgIT09IHVuZGVmaW5lZCkgZGF0YVRvVXBkYXRlLnNrdSA9IHByb2R1Y3REYXRhLnNrdTtcbiAgICAgICAgaWYgKHByb2R1Y3REYXRhLmJhcmNvZGUgIT09IHVuZGVmaW5lZCkgZGF0YVRvVXBkYXRlLmJhcmNvZGUgPSBwcm9kdWN0RGF0YS5iYXJjb2RlIHx8IG51bGw7XG4gICAgICAgIGlmIChwcm9kdWN0RGF0YS5kZXNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkKSBkYXRhVG9VcGRhdGUuZGVzY3JpcHRpb24gPSBwcm9kdWN0RGF0YS5kZXNjcmlwdGlvbiB8fCBudWxsO1xuICAgICAgICBpZiAocHJvZHVjdERhdGEuYmFzZVByaWNlICE9PSB1bmRlZmluZWQpIGRhdGFUb1VwZGF0ZS53ZWlnaHRlZEF2ZXJhZ2VDb3N0ID0gcHJvZHVjdERhdGEuYmFzZVByaWNlOyAvLyBBc3N1bWluZyBiYXNlUHJpY2UgbWFwcyB0byBXQUNcbiAgICAgICAgaWYgKHByb2R1Y3REYXRhLnJldGFpbFByaWNlICE9PSB1bmRlZmluZWQpIGRhdGFUb1VwZGF0ZS5wcmljZSA9IHByb2R1Y3REYXRhLnJldGFpbFByaWNlO1xuICAgICAgICBpZiAocHJvZHVjdERhdGEuY2F0ZWdvcnlJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBkYXRhVG9VcGRhdGUuY2F0ZWdvcnkgPSBwcm9kdWN0RGF0YS5jYXRlZ29yeUlkID8geyBjb25uZWN0OiB7IGlkOiBwYXJzZUludChwcm9kdWN0RGF0YS5jYXRlZ29yeUlkKSB9IH0gOiB7IGRpc2Nvbm5lY3Q6IHRydWUgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHVwZGF0ZWRQcm9kdWN0ID0gYXdhaXQgcHJpc21hLnByb2R1Y3QudXBkYXRlKHtcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICAgICAgICBkYXRhOiBkYXRhVG9VcGRhdGVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQXVkaXQgTG9nIEdlbmVyYXRpb25cbiAgICAgICAgY29uc3QgY2hhbmdlczogUmVjb3JkPHN0cmluZywgeyBvbGQ6IGFueSwgbmV3OiBhbnkgfT4gPSB7fTtcbiAgICAgICAgKE9iamVjdC5rZXlzKGRhdGFUb1VwZGF0ZSkgYXMgQXJyYXk8a2V5b2YgdHlwZW9mIGRhdGFUb1VwZGF0ZT4pLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgIC8vIFR5cGUgYXNzZXJ0aW9uIGZvciBleGlzdGluZ1Byb2R1Y3Qga2V5c1xuICAgICAgICAgICAgY29uc3QgdHlwZWRLZXkgPSBrZXkgYXMga2V5b2YgdHlwZW9mIGV4aXN0aW5nUHJvZHVjdDtcbiAgICAgICAgICAgIGlmIChleGlzdGluZ1Byb2R1Y3RbdHlwZWRLZXldICE9PSB1cGRhdGVkUHJvZHVjdFt0eXBlZEtleV0pIHtcbiAgICAgICAgICAgICAgICBjaGFuZ2VzW3R5cGVkS2V5XSA9IHtcbiAgICAgICAgICAgICAgICAgICAgb2xkOiBleGlzdGluZ1Byb2R1Y3RbdHlwZWRLZXldLFxuICAgICAgICAgICAgICAgICAgICBuZXc6IHVwZGF0ZWRQcm9kdWN0W3R5cGVkS2V5XVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhjaGFuZ2VzKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHByaXNtYS5hdWRpdExvZy5jcmVhdGUoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IHVzZXJJZCA/IHBhcnNlSW50KHVzZXJJZCwgMTApIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ1VQREFURV9QUk9EVUNUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0eTogJ1Byb2R1Y3QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5SWQ6IGlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsczogY2hhbmdlc1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGNhdGNoIChhdWRpdEVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBhdWRpdCBsb2cgZm9yIHByb2R1Y3QgdXBkYXRlOicsIGF1ZGl0RXJyb3IpO1xuICAgICAgICAgICAgICAgIC8vIERvIG5vdCBmYWlsIHRoZSBtYWluIG9wZXJhdGlvbiBpZiBhdWRpdCBsb2dnaW5nIGZhaWxzXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJbnZhbGlkYXRlIGludmVudG9yeSBjYWNoZVxuICAgICAgICBhd2FpdCBjYWNoZVNlcnZpY2UuaW52YWxpZGF0ZUludmVudG9yeSgpO1xuXG4gICAgICAgIC8vIFJldmFsaWRhdGUgTmV4dC5qcyBjYWNoZWQgcGFnZXNcbiAgICAgICAgcmV2YWxpZGF0ZVRhZygncHJvZHVjdHMnKTtcbiAgICAgICAgcmV2YWxpZGF0ZVRhZygnaW52ZW50b3J5Jyk7XG4gICAgICAgIHJldmFsaWRhdGVUYWcoYHByb2R1Y3QtJHtwYXJhbUlkfWApO1xuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ludmVudG9yeScpO1xuICAgICAgICByZXZhbGlkYXRlUGF0aCgnL3Byb2R1Y3RzJyk7XG5cbiAgICAgICAgLy8gUmVhbC10aW1lIHVwZGF0ZXMgbm93IGhhbmRsZWQgYnkgcG9sbGluZyBzeXN0ZW1cblxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdQcm9kdWN0IHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgICAgIGRhdGE6IHVwZGF0ZWRQcm9kdWN0XG4gICAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHVwZGF0aW5nIHByb2R1Y3Q6YCwgZXJyb3IpO1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiAnRXJyb3IgdXBkYXRpbmcgcHJvZHVjdCcsXG4gICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpXG4gICAgICAgIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gICAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gREVMRVRFKFxuICAgIHJlcTogTmV4dFJlcXVlc3QsXG4gICAgeyBwYXJhbXMgfTogeyBwYXJhbXM6IHsgaWQ6IHN0cmluZyB9IH1cbikge1xuICAgIGNvbnN0IHsgaWQ6IHBhcmFtSWQgfSA9IHBhcmFtcztcbiAgICB0cnkge1xuICAgICAgICAvLyBFbnN1cmUgcGFyYW1zLmlkIGlzIHByb3Blcmx5IGF3YWl0ZWQgaW4gTmV4dC5qcyAxNCtcbiAgICAgICAgY29uc3QgaWQgPSBwYXJzZUludChwYXJhbUlkKTtcblxuICAgICAgICBpZiAoaXNOYU4oaWQpKSB7XG4gICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIHByb2R1Y3QgSUQnXG4gICAgICAgICAgICB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHByb2R1Y3QgZXhpc3RzIGZpcnN0XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ1Byb2R1Y3QgPSBhd2FpdCBwcmlzbWEucHJvZHVjdC5maW5kVW5pcXVlKHtcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBpZCB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKCFleGlzdGluZ1Byb2R1Y3QpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYFByb2R1Y3Qgd2l0aCBJRCAke3BhcmFtSWR9IG5vdCBmb3VuZGBcbiAgICAgICAgICAgICAgICB9LCB7IHN0YXR1czogNDA0IH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgcmVsYXRlZCByZWNvcmRzIHRoYXQgcHJldmVudCBkZWxldGlvblxuICAgICAgICAgICAgY29uc3QgcmVsYXRlZFJlY29yZHMgPSBbXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgcHJvZHVjdCBpcyByZWZlcmVuY2VkIGluIHB1cmNoYXNlIGludm9pY2VzXG4gICAgICAgICAgICBjb25zdCBwdXJjaGFzZUludm9pY2VJdGVtc0NvdW50ID0gYXdhaXQgcHJpc21hLnB1cmNoYXNlSW52b2ljZUl0ZW0uY291bnQoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7IHByb2R1Y3RJZDogaWQgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChwdXJjaGFzZUludm9pY2VJdGVtc0NvdW50ID4gMCkge1xuICAgICAgICAgICAgICAgIHJlbGF0ZWRSZWNvcmRzLnB1c2goYCR7cHVyY2hhc2VJbnZvaWNlSXRlbXNDb3VudH0gcHVyY2hhc2UgaW52b2ljZSBpdGVtKHMpYCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHByb2R1Y3QgaXMgcmVmZXJlbmNlZCBpbiBzYWxlcyBpbnZvaWNlc1xuICAgICAgICAgICAgY29uc3Qgc2FsZXNJbnZvaWNlSXRlbXNDb3VudCA9IGF3YWl0IHByaXNtYS5pbnZvaWNlSXRlbS5jb3VudCh7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgcHJvZHVjdElkOiBpZCB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHNhbGVzSW52b2ljZUl0ZW1zQ291bnQgPiAwKSB7XG4gICAgICAgICAgICAgICAgcmVsYXRlZFJlY29yZHMucHVzaChgJHtzYWxlc0ludm9pY2VJdGVtc0NvdW50fSBzYWxlcyBpbnZvaWNlIGl0ZW0ocylgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgcHJvZHVjdCBpcyByZWZlcmVuY2VkIGluIHF1b3RhdGlvbnNcbiAgICAgICAgICAgIGNvbnN0IHF1b3RhdGlvbkl0ZW1zQ291bnQgPSBhd2FpdCBwcmlzbWEucXVvdGF0aW9uSXRlbS5jb3VudCh7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgcHJvZHVjdElkOiBpZCB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHF1b3RhdGlvbkl0ZW1zQ291bnQgPiAwKSB7XG4gICAgICAgICAgICAgICAgcmVsYXRlZFJlY29yZHMucHVzaChgJHtxdW90YXRpb25JdGVtc0NvdW50fSBxdW90YXRpb24gaXRlbShzKWApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBJZiBhbnkgcmVsYXRlZCByZWNvcmRzIGV4aXN0LCBwcmV2ZW50IGRlbGV0aW9uXG4gICAgICAgICAgICBpZiAocmVsYXRlZFJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgQ2Fubm90IGRlbGV0ZSBwcm9kdWN0IFwiJHtleGlzdGluZ1Byb2R1Y3QubmFtZX1cIiBiZWNhdXNlIGl0IGlzIHJlZmVyZW5jZWQgaW46ICR7cmVsYXRlZFJlY29yZHMuam9pbignLCAnKX0uIFBsZWFzZSByZW1vdmUgdGhlc2UgcmVmZXJlbmNlcyBmaXJzdC5gLFxuICAgICAgICAgICAgICAgICAgICByZWxhdGVkUmVjb3Jkczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHVyY2hhc2VJbnZvaWNlSXRlbXM6IHB1cmNoYXNlSW52b2ljZUl0ZW1zQ291bnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBzYWxlc0ludm9pY2VJdGVtczogc2FsZXNJbnZvaWNlSXRlbXNDb3VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RhdGlvbkl0ZW1zOiBxdW90YXRpb25JdGVtc0NvdW50XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCB7IHN0YXR1czogNDA5IH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBVc2UgYSB0cmFuc2FjdGlvbiB0byBkZWxldGUgaW52ZW50b3J5IGl0ZW1zIGFuZCB0aGVuIHRoZSBwcm9kdWN0XG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEuJHRyYW5zYWN0aW9uKGFzeW5jICh0eCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBhbGwgaW52ZW50b3J5IGl0ZW1zIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHByb2R1Y3RcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5pbnZlbnRvcnlJdGVtLmRlbGV0ZU1hbnkoe1xuICAgICAgICAgICAgICAgICAgICB3aGVyZTogeyBwcm9kdWN0SWQ6IGlkIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIFRoZW4sIGRlbGV0ZSB0aGUgcHJvZHVjdCBpdHNlbGZcbiAgICAgICAgICAgICAgICBhd2FpdCB0eC5wcm9kdWN0LmRlbGV0ZSh7XG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBJbnZhbGlkYXRlIHByb2R1Y3QgY2FjaGVcbiAgICAgICAgICAgIGF3YWl0IGNhY2hlU2VydmljZS5pbnZhbGlkYXRlUGF0dGVybigncHJvZHVjdHM6KicpO1xuICAgICAgICAgICAgYXdhaXQgY2FjaGVTZXJ2aWNlLmludmFsaWRhdGVJbnZlbnRvcnkoKTtcblxuICAgICAgICAgICAgLy8gUmV2YWxpZGF0ZSBOZXh0LmpzIGNhY2hlZCBwYWdlc1xuICAgICAgICAgICAgcmV2YWxpZGF0ZVRhZygncHJvZHVjdHMnKTtcbiAgICAgICAgICAgIHJldmFsaWRhdGVUYWcoJ2ludmVudG9yeScpO1xuICAgICAgICAgICAgcmV2YWxpZGF0ZVRhZyhgcHJvZHVjdC0ke3BhcmFtSWR9YCk7XG4gICAgICAgICAgICByZXZhbGlkYXRlUGF0aCgnL2ludmVudG9yeScpO1xuICAgICAgICAgICAgcmV2YWxpZGF0ZVBhdGgoJy9wcm9kdWN0cycpO1xuXG4gICAgICAgICAgICAvLyBSZWFsLXRpbWUgdXBkYXRlcyBub3cgaGFuZGxlZCBieSBwb2xsaW5nIHN5c3RlbVxuXG4gICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ1Byb2R1Y3QgZGVsZXRlZCBzdWNjZXNzZnVsbHknXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIC8vIEhhbmRsZSBmb3JlaWduIGtleSBjb25zdHJhaW50IHZpb2xhdGlvbnNcbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFByaXNtYS5QcmlzbWFDbGllbnRLbm93blJlcXVlc3RFcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5jb2RlID09PSAnUDIwMDMnKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZvcmVpZ24ga2V5IGNvbnN0cmFpbnQgdmlvbGF0aW9uXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnN0cmFpbnROYW1lID0gZXJyb3IubWV0YT8udGFyZ2V0IGFzIHN0cmluZyB8fCAnJztcblxuICAgICAgICAgICAgICAgICAgICAvLyBEZXRlcm1pbmUgd2hpY2ggcmVsYXRpb24gaXMgY2F1c2luZyB0aGUgY29uc3RyYWludCB2aW9sYXRpb25cbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlbGF0aW9uTWVzc2FnZSA9ICdpdCBpcyByZWZlcmVuY2VkIGluIG90aGVyIHJlY29yZHMnO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25zdHJhaW50TmFtZS5pbmNsdWRlcygnUHVyY2hhc2VJbnZvaWNlSXRlbScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWxhdGlvbk1lc3NhZ2UgPSAnaXQgaXMgcmVmZXJlbmNlZCBpbiBwdXJjaGFzZSBpbnZvaWNlIHJlY29yZHMnO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvbnN0cmFpbnROYW1lLmluY2x1ZGVzKCdTYWxlc0ludm9pY2VJdGVtJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uTWVzc2FnZSA9ICdpdCBpcyByZWZlcmVuY2VkIGluIHNhbGVzIGludm9pY2UgcmVjb3Jkcyc7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY29uc3RyYWludE5hbWUuaW5jbHVkZXMoJ0ludmVudG9yeVRyYW5zYWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uTWVzc2FnZSA9ICdpdCBpcyByZWZlcmVuY2VkIGluIGludmVudG9yeSB0cmFuc2FjdGlvbiByZWNvcmRzJztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBDYW5ub3QgZGVsZXRlIHRoaXMgcHJvZHVjdCBiZWNhdXNlICR7cmVsYXRpb25NZXNzYWdlfS5gLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6ICdGT1JFSUdOX0tFWV9DT05TVFJBSU5UJ1xuICAgICAgICAgICAgICAgICAgICB9LCB7IHN0YXR1czogNDA5IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7IC8vIFJlLXRocm93IGZvciB0aGUgb3V0ZXIgY2F0Y2ggYmxvY2tcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGRlbGV0aW5nIHByb2R1Y3Q6YCwgZXJyb3IpO1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiAnRXJyb3IgZGVsZXRpbmcgcHJvZHVjdCcsXG4gICAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpXG4gICAgICAgIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gICAgfVxufSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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a0gsY0FBQSxDQUFlSSxRQUFRLENBQUMscUJBQXFCO2NBQUE7Y0FBQXhILGNBQUEsR0FBQTRCLENBQUE7Y0FBQTVCLGNBQUEsR0FBQUUsQ0FBQTtjQUNwRHFILGVBQUEsR0FBa0I7WUFDdEIsT0FBTztjQUFBO2NBQUF2SCxjQUFBLEdBQUE0QixDQUFBO2NBQUE1QixjQUFBLEdBQUFFLENBQUE7Y0FBQSxJQUFJa0gsY0FBQSxDQUFlSSxRQUFRLENBQUMseUJBQXlCO2dCQUFBO2dCQUFBeEgsY0FBQSxHQUFBNEIsQ0FBQTtnQkFBQTVCLGNBQUEsR0FBQUUsQ0FBQTtnQkFDeERxSCxlQUFBLEdBQWtCO2NBQ3RCO2NBQUE7Y0FBQTtnQkFBQXZILGNBQUEsR0FBQTRCLENBQUE7Y0FBQTtZQUFBO1VBQUE7VUFBQTtVQUFBNUIsY0FBQSxHQUFBRSxDQUFBO1VBRUEsT0FBTzJCLE9BQUEsQ0FBQUMsWUFBWSxDQUFDQyxJQUFJLENBQUM7WUFDckJDLE9BQUEsRUFBUztZQUNUQyxPQUFBLEVBQVMsc0NBQXNDc0YsZUFBQSxHQUFrQjtZQUNqRWpFLEtBQUEsRUFBTztVQUNYLEdBQUc7WUFBRXBCLE1BQUEsRUFBUTtVQUFJO1FBQ3JCO1FBQUE7UUFBQTtVQUFBbEMsY0FBQSxHQUFBNEIsQ0FBQTtRQUFBO01BQ0o7TUFBQTtNQUFBO1FBQUE1QixjQUFBLEdBQUE0QixDQUFBO01BQUE7TUFBQTVCLGNBQUEsR0FBQUUsQ0FBQTtNQUVBLE1BQU1vRCxLQUFBLEVBQU87SUFDakI7RUFDSixFQUFFLE9BQU9BLEtBQUEsRUFBTztJQUFBO0lBQUF0RCxjQUFBLEdBQUFFLENBQUE7SUFDWnFELE9BQUEsQ0FBUUQsS0FBSyxDQUFDLHlCQUF5QixFQUFFQSxLQUFBO0lBQUE7SUFBQXRELGNBQUEsR0FBQUUsQ0FBQTtJQUN6QyxPQUFPMkIsT0FBQSxDQUFBQyxZQUFZLENBQUNDLElBQUksQ0FBQztNQUNyQkMsT0FBQSxFQUFTO01BQ1RDLE9BQUEsRUFBUztNQUNUcUIsS0FBQSxFQUFPQSxLQUFBLFlBQWlCb0MsS0FBQTtNQUFBO01BQUEsQ0FBQTFGLGNBQUEsR0FBQTRCLENBQUEsV0FBUTBCLEtBQUEsQ0FBTXJCLE9BQU87TUFBQTtNQUFBLENBQUFqQyxjQUFBLEdBQUE0QixDQUFBLFdBQUcrRCxNQUFBLENBQU9yQyxLQUFBO0lBQzNELEdBQUc7TUFBRXBCLE1BQUEsRUFBUTtJQUFJO0VBQ3JCO0FBQ0oiLCJpZ25vcmVMaXN0IjpbXX0=