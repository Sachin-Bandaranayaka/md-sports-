da1215d691423b43386f85393865bd4c
"use strict";

/* istanbul ignore next */
function cov_3v9t3pht5() {
  var path = "/Users/sachin/Documents/md-sports-/src/app/api/inventory/summary/route.ts";
  var hash = "535893e238f14582d0ef43a08994bb98f3498ee1";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Users/sachin/Documents/md-sports-/src/app/api/inventory/summary/route.ts",
    statementMap: {
      "0": {
        start: {
          line: 2,
          column: 0
        },
        end: {
          line: 4,
          column: 3
        }
      },
      "1": {
        start: {
          line: 5,
          column: 0
        },
        end: {
          line: 10,
          column: 3
        }
      },
      "2": {
        start: {
          line: 8,
          column: 8
        },
        end: {
          line: 8,
          column: 19
        }
      },
      "3": {
        start: {
          line: 11,
          column: 16
        },
        end: {
          line: 11,
          column: 38
        }
      },
      "4": {
        start: {
          line: 12,
          column: 16
        },
        end: {
          line: 12,
          column: 49
        }
      },
      "5": {
        start: {
          line: 13,
          column: 14
        },
        end: {
          line: 13,
          column: 45
        }
      },
      "6": {
        start: {
          line: 14,
          column: 15
        },
        end: {
          line: 14,
          column: 47
        }
      },
      "7": {
        start: {
          line: 15,
          column: 21
        },
        end: {
          line: 15,
          column: 59
        }
      },
      "8": {
        start: {
          line: 17,
          column: 23
        },
        end: {
          line: 17,
          column: 25
        }
      },
      "9": {
        start: {
          line: 19,
          column: 4
        },
        end: {
          line: 211,
          column: 7
        }
      },
      "10": {
        start: {
          line: 20,
          column: 8
        },
        end: {
          line: 208,
          column: 9
        }
      },
      "11": {
        start: {
          line: 21,
          column: 26
        },
        end: {
          line: 21,
          column: 86
        }
      },
      "12": {
        start: {
          line: 22,
          column: 12
        },
        end: {
          line: 28,
          column: 13
        }
      },
      "13": {
        start: {
          line: 23,
          column: 16
        },
        end: {
          line: 27,
          column: 19
        }
      },
      "14": {
        start: {
          line: 29,
          column: 28
        },
        end: {
          line: 29,
          column: 63
        }
      },
      "15": {
        start: {
          line: 30,
          column: 12
        },
        end: {
          line: 36,
          column: 13
        }
      },
      "16": {
        start: {
          line: 31,
          column: 16
        },
        end: {
          line: 35,
          column: 19
        }
      },
      "17": {
        start: {
          line: 37,
          column: 37
        },
        end: {
          line: 37,
          column: 57
        }
      },
      "18": {
        start: {
          line: 38,
          column: 25
        },
        end: {
          line: 38,
          column: 66
        }
      },
      "19": {
        start: {
          line: 39,
          column: 26
        },
        end: {
          line: 39,
          column: 83
        }
      },
      "20": {
        start: {
          line: 40,
          column: 27
        },
        end: {
          line: 40,
          column: 59
        }
      },
      "21": {
        start: {
          line: 41,
          column: 29
        },
        end: {
          line: 41,
          column: 63
        }
      },
      "22": {
        start: {
          line: 42,
          column: 27
        },
        end: {
          line: 42,
          column: 59
        }
      },
      "23": {
        start: {
          line: 43,
          column: 27
        },
        end: {
          line: 43,
          column: 53
        }
      },
      "24": {
        start: {
          line: 45,
          column: 29
        },
        end: {
          line: 52,
          column: 14
        }
      },
      "25": {
        start: {
          line: 54,
          column: 31
        },
        end: {
          line: 54,
          column: 70
        }
      },
      "26": {
        start: {
          line: 55,
          column: 12
        },
        end: {
          line: 60,
          column: 13
        }
      },
      "27": {
        start: {
          line: 56,
          column: 33
        },
        end: {
          line: 56,
          column: 70
        }
      },
      "28": {
        start: {
          line: 57,
          column: 16
        },
        end: {
          line: 57,
          column: 55
        }
      },
      "29": {
        start: {
          line: 58,
          column: 16
        },
        end: {
          line: 58,
          column: 119
        }
      },
      "30": {
        start: {
          line: 59,
          column: 16
        },
        end: {
          line: 59,
          column: 32
        }
      },
      "31": {
        start: {
          line: 61,
          column: 27
        },
        end: {
          line: 61,
          column: 45
        }
      },
      "32": {
        start: {
          line: 63,
          column: 36
        },
        end: {
          line: 65,
          column: 13
        }
      },
      "33": {
        start: {
          line: 66,
          column: 32
        },
        end: {
          line: 66,
          column: 34
        }
      },
      "34": {
        start: {
          line: 67,
          column: 29
        },
        end: {
          line: 67,
          column: 30
        }
      },
      "35": {
        start: {
          line: 69,
          column: 12
        },
        end: {
          line: 73,
          column: 13
        }
      },
      "36": {
        start: {
          line: 70,
          column: 16
        },
        end: {
          line: 70,
          column: 104
        }
      },
      "37": {
        start: {
          line: 71,
          column: 16
        },
        end: {
          line: 71,
          column: 63
        }
      },
      "38": {
        start: {
          line: 72,
          column: 16
        },
        end: {
          line: 72,
          column: 32
        }
      },
      "39": {
        start: {
          line: 75,
          column: 12
        },
        end: {
          line: 79,
          column: 13
        }
      },
      "40": {
        start: {
          line: 76,
          column: 16
        },
        end: {
          line: 76,
          column: 64
        }
      },
      "41": {
        start: {
          line: 77,
          column: 16
        },
        end: {
          line: 77,
          column: 43
        }
      },
      "42": {
        start: {
          line: 78,
          column: 16
        },
        end: {
          line: 78,
          column: 29
        }
      },
      "43": {
        start: {
          line: 81,
          column: 12
        },
        end: {
          line: 85,
          column: 13
        }
      },
      "44": {
        start: {
          line: 82,
          column: 16
        },
        end: {
          line: 82,
          column: 69
        }
      },
      "45": {
        start: {
          line: 83,
          column: 16
        },
        end: {
          line: 83,
          column: 51
        }
      },
      "46": {
        start: {
          line: 84,
          column: 16
        },
        end: {
          line: 84,
          column: 29
        }
      },
      "47": {
        start: {
          line: 86,
          column: 32
        },
        end: {
          line: 86,
          column: 61
        }
      },
      "48": {
        start: {
          line: 88,
          column: 49
        },
        end: {
          line: 170,
          column: 14
        }
      },
      "49": {
        start: {
          line: 91,
          column: 41
        },
        end: {
          line: 120,
          column: 11
        }
      },
      "50": {
        start: {
          line: 121,
          column: 42
        },
        end: {
          line: 123,
          column: 21
        }
      },
      "51": {
        start: {
          line: 124,
          column: 41
        },
        end: {
          line: 124,
          column: 51
        }
      },
      "52": {
        start: {
          line: 126,
          column: 20
        },
        end: {
          line: 130,
          column: 21
        }
      },
      "53": {
        start: {
          line: 127,
          column: 24
        },
        end: {
          line: 127,
          column: 79
        }
      },
      "54": {
        start: {
          line: 128,
          column: 24
        },
        end: {
          line: 128,
          column: 53
        }
      },
      "55": {
        start: {
          line: 129,
          column: 24
        },
        end: {
          line: 129,
          column: 41
        }
      },
      "56": {
        start: {
          line: 132,
          column: 20
        },
        end: {
          line: 132,
          column: 114
        }
      },
      "57": {
        start: {
          line: 133,
          column: 20
        },
        end: {
          line: 133,
          column: 56
        }
      },
      "58": {
        start: {
          line: 134,
          column: 20
        },
        end: {
          line: 134,
          column: 94
        }
      },
      "59": {
        start: {
          line: 138,
          column: 37
        },
        end: {
          line: 160,
          column: 11
        }
      },
      "60": {
        start: {
          line: 161,
          column: 38
        },
        end: {
          line: 163,
          column: 21
        }
      },
      "61": {
        start: {
          line: 164,
          column: 20
        },
        end: {
          line: 167,
          column: 21
        }
      },
      "62": {
        start: {
          line: 165,
          column: 24
        },
        end: {
          line: 165,
          column: 71
        }
      },
      "63": {
        start: {
          line: 166,
          column: 24
        },
        end: {
          line: 166,
          column: 49
        }
      },
      "64": {
        start: {
          line: 168,
          column: 20
        },
        end: {
          line: 168,
          column: 86
        }
      },
      "65": {
        start: {
          line: 171,
          column: 26
        },
        end: {
          line: 171,
          column: 64
        }
      },
      "66": {
        start: {
          line: 173,
          column: 34
        },
        end: {
          line: 183,
          column: 19
        }
      },
      "67": {
        start: {
          line: 173,
          column: 61
        },
        end: {
          line: 183,
          column: 17
        }
      },
      "68": {
        start: {
          line: 184,
          column: 33
        },
        end: {
          line: 193,
          column: 13
        }
      },
      "69": {
        start: {
          line: 195,
          column: 12
        },
        end: {
          line: 195,
          column: 101
        }
      },
      "70": {
        start: {
          line: 196,
          column: 29
        },
        end: {
          line: 196,
          column: 68
        }
      },
      "71": {
        start: {
          line: 197,
          column: 12
        },
        end: {
          line: 197,
          column: 52
        }
      },
      "72": {
        start: {
          line: 198,
          column: 12
        },
        end: {
          line: 198,
          column: 115
        }
      },
      "73": {
        start: {
          line: 199,
          column: 12
        },
        end: {
          line: 199,
          column: 28
        }
      },
      "74": {
        start: {
          line: 201,
          column: 12
        },
        end: {
          line: 201,
          column: 70
        }
      },
      "75": {
        start: {
          line: 202,
          column: 12
        },
        end: {
          line: 207,
          column: 15
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 7,
            column: 9
          },
          end: {
            line: 7,
            column: 10
          }
        },
        loc: {
          start: {
            line: 7,
            column: 20
          },
          end: {
            line: 9,
            column: 5
          }
        },
        line: 7
      },
      "1": {
        name: "GET",
        decl: {
          start: {
            line: 18,
            column: 15
          },
          end: {
            line: 18,
            column: 18
          }
        },
        loc: {
          start: {
            line: 18,
            column: 28
          },
          end: {
            line: 212,
            column: 1
          }
        },
        line: 18
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 19,
            column: 67
          },
          end: {
            line: 19,
            column: 68
          }
        },
        loc: {
          start: {
            line: 19,
            column: 77
          },
          end: {
            line: 209,
            column: 5
          }
        },
        line: 19
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 89,
            column: 71
          },
          end: {
            line: 89,
            column: 72
          }
        },
        loc: {
          start: {
            line: 89,
            column: 81
          },
          end: {
            line: 135,
            column: 17
          }
        },
        line: 89
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 136,
            column: 72
          },
          end: {
            line: 136,
            column: 73
          }
        },
        loc: {
          start: {
            line: 136,
            column: 82
          },
          end: {
            line: 169,
            column: 17
          }
        },
        line: 136
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 173,
            column: 52
          },
          end: {
            line: 173,
            column: 53
          }
        },
        loc: {
          start: {
            line: 173,
            column: 61
          },
          end: {
            line: 183,
            column: 17
          }
        },
        line: 173
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 22,
            column: 12
          },
          end: {
            line: 28,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 22,
            column: 12
          },
          end: {
            line: 28,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 22
      },
      "1": {
        loc: {
          start: {
            line: 30,
            column: 12
          },
          end: {
            line: 36,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 30,
            column: 12
          },
          end: {
            line: 36,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 30
      },
      "2": {
        loc: {
          start: {
            line: 38,
            column: 34
          },
          end: {
            line: 38,
            column: 65
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 38,
            column: 34
          },
          end: {
            line: 38,
            column: 58
          }
        }, {
          start: {
            line: 38,
            column: 62
          },
          end: {
            line: 38,
            column: 65
          }
        }],
        line: 38
      },
      "3": {
        loc: {
          start: {
            line: 39,
            column: 44
          },
          end: {
            line: 39,
            column: 77
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 39,
            column: 44
          },
          end: {
            line: 39,
            column: 69
          }
        }, {
          start: {
            line: 39,
            column: 73
          },
          end: {
            line: 39,
            column: 77
          }
        }],
        line: 39
      },
      "4": {
        loc: {
          start: {
            line: 40,
            column: 27
          },
          end: {
            line: 40,
            column: 59
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 40,
            column: 27
          },
          end: {
            line: 40,
            column: 53
          }
        }, {
          start: {
            line: 40,
            column: 57
          },
          end: {
            line: 40,
            column: 59
          }
        }],
        line: 40
      },
      "5": {
        loc: {
          start: {
            line: 41,
            column: 29
          },
          end: {
            line: 41,
            column: 63
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 41,
            column: 29
          },
          end: {
            line: 41,
            column: 57
          }
        }, {
          start: {
            line: 41,
            column: 61
          },
          end: {
            line: 41,
            column: 63
          }
        }],
        line: 41
      },
      "6": {
        loc: {
          start: {
            line: 42,
            column: 27
          },
          end: {
            line: 42,
            column: 59
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 42,
            column: 27
          },
          end: {
            line: 42,
            column: 53
          }
        }, {
          start: {
            line: 42,
            column: 57
          },
          end: {
            line: 42,
            column: 59
          }
        }],
        line: 42
      },
      "7": {
        loc: {
          start: {
            line: 55,
            column: 12
          },
          end: {
            line: 60,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 55,
            column: 12
          },
          end: {
            line: 60,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 55
      },
      "8": {
        loc: {
          start: {
            line: 69,
            column: 12
          },
          end: {
            line: 73,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 69,
            column: 12
          },
          end: {
            line: 73,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 69
      },
      "9": {
        loc: {
          start: {
            line: 75,
            column: 12
          },
          end: {
            line: 79,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 75,
            column: 12
          },
          end: {
            line: 79,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 75
      },
      "10": {
        loc: {
          start: {
            line: 81,
            column: 12
          },
          end: {
            line: 85,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 81,
            column: 12
          },
          end: {
            line: 85,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 81
      },
      "11": {
        loc: {
          start: {
            line: 126,
            column: 20
          },
          end: {
            line: 130,
            column: 21
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 126,
            column: 20
          },
          end: {
            line: 130,
            column: 21
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 126
      },
      "12": {
        loc: {
          start: {
            line: 164,
            column: 20
          },
          end: {
            line: 167,
            column: 21
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 164,
            column: 20
          },
          end: {
            line: 167,
            column: 21
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 164
      },
      "13": {
        loc: {
          start: {
            line: 171,
            column: 35
          },
          end: {
            line: 171,
            column: 63
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 171,
            column: 35
          },
          end: {
            line: 171,
            column: 56
          }
        }, {
          start: {
            line: 171,
            column: 60
          },
          end: {
            line: 171,
            column: 63
          }
        }],
        line: 171
      },
      "14": {
        loc: {
          start: {
            line: 177,
            column: 30
          },
          end: {
            line: 177,
            column: 62
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 177,
            column: 30
          },
          end: {
            line: 177,
            column: 43
          }
        }, {
          start: {
            line: 177,
            column: 47
          },
          end: {
            line: 177,
            column: 62
          }
        }],
        line: 177
      },
      "15": {
        loc: {
          start: {
            line: 179,
            column: 44
          },
          end: {
            line: 179,
            column: 67
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 179,
            column: 44
          },
          end: {
            line: 179,
            column: 60
          }
        }, {
          start: {
            line: 179,
            column: 64
          },
          end: {
            line: 179,
            column: 67
          }
        }],
        line: 179
      },
      "16": {
        loc: {
          start: {
            line: 180,
            column: 52
          },
          end: {
            line: 180,
            column: 81
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 180,
            column: 52
          },
          end: {
            line: 180,
            column: 74
          }
        }, {
          start: {
            line: 180,
            column: 78
          },
          end: {
            line: 180,
            column: 81
          }
        }],
        line: 180
      },
      "17": {
        loc: {
          start: {
            line: 182,
            column: 40
          },
          end: {
            line: 182,
            column: 62
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 182,
            column: 40
          },
          end: {
            line: 182,
            column: 55
          }
        }, {
          start: {
            line: 182,
            column: 59
          },
          end: {
            line: 182,
            column: 62
          }
        }],
        line: 182
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0,
      "66": 0,
      "67": 0,
      "68": 0,
      "69": 0,
      "70": 0,
      "71": 0,
      "72": 0,
      "73": 0,
      "74": 0,
      "75": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0, 0],
      "13": [0, 0],
      "14": [0, 0],
      "15": [0, 0],
      "16": [0, 0],
      "17": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["/Users/sachin/Documents/md-sports-/src/app/api/inventory/summary/route.ts"],
      sourcesContent: ["import { NextRequest, NextResponse } from 'next/server';\nimport { prisma } from '@/lib/prisma';\nimport { verifyToken } from '@/lib/auth';\nimport { cacheService, CACHE_CONFIG } from '@/lib/cache';\nimport { measureAsync } from '@/lib/performance';\n\n// Cache for 10 seconds\nconst CACHE_DURATION = 10;\n\nexport async function GET(request: NextRequest) {\n  return measureAsync('inventory-summary-api', async () => {\n    try {\n      const token = request.headers.get('authorization')?.replace('Bearer ', '');\n      if (!token) {\n        return NextResponse.json({ error: 'No token provided' }, { status: 401 });\n      }\n\n      const decoded = await verifyToken(token);\n      if (!decoded) {\n        return NextResponse.json({ error: 'Invalid token: signature verification failed' }, { status: 401 });\n      }\n\n      const { searchParams } = new URL(request.url);\n      const page = parseInt(searchParams.get('page') || '1');\n      const limit = Math.min(parseInt(searchParams.get('limit') || '10'), 50); // Cap at 50\n      const search = searchParams.get('search') || '';\n      const category = searchParams.get('category') || '';\n      const status = searchParams.get('status') || '';\n      const shopId = searchParams.get('shopId');\n\n      // Generate cache key\n      const cacheKey = cacheService.generateKey(CACHE_CONFIG.KEYS.INVENTORY_SUMMARY, {\n        page,\n        limit,\n        search,\n        category,\n        status,\n        shopId\n      });\n\n      // Try to get from cache first\n      const cachedData = await cacheService.get(cacheKey);\n      if (cachedData) {\n        const response = NextResponse.json(cachedData);\n        response.headers.set('X-Cache', 'HIT');\n        response.headers.set('Cache-Control', `public, s-maxage=${CACHE_DURATION}, stale-while-revalidate=60`);\n        return response;\n      }\n\n      const offset = (page - 1) * limit;\n\n      // Build dynamic WHERE conditions\n      const whereConditions: string[] = ['1=1']; // Always true base condition\n      const queryParams: any[] = [];\n      let paramIndex = 1;\n\n      // Search filter\n      if (search) {\n        whereConditions.push(`(p.name ILIKE $${paramIndex} OR p.sku ILIKE $${paramIndex + 1})`);\n        queryParams.push(`%${search}%`, `%${search}%`);\n        paramIndex += 2;\n      }\n\n      // Category filter\n      if (category) {\n        whereConditions.push(`c.name = $${paramIndex}`);\n        queryParams.push(category);\n        paramIndex++;\n      }\n\n      // Shop filter\n      if (shopId) {\n        whereConditions.push(`ii.\"shopId\" = $${paramIndex}`);\n        queryParams.push(parseInt(shopId));\n        paramIndex++;\n      }\n\n      const whereClause = whereConditions.join(' AND ');\n\n      // Execute queries in parallel\n      const [inventoryData, countResult] = await Promise.all([\n        measureAsync('inventory-main-query', async () => {\n          // Main query with aggregation and status calculation\n          let inventoryQuery = `\n            WITH inventory_summary AS (\n              SELECT \n                p.id,\n                p.name,\n                p.sku,\n                p.price as \"retailPrice\",\n                p.weightedaveragecost as \"costPrice\",\n                c.name as category,\n                COALESCE(SUM(ii.quantity), 0) as total_quantity,\n                COALESCE(p.weightedaveragecost, 0) as weighted_avg_cost,\n                COUNT(DISTINCT ii.\"shopId\") as shop_count,\n                COALESCE(p.min_stock_level, 10) as min_stock_level\n              FROM \"Product\" p\n              LEFT JOIN \"Category\" c ON p.\"categoryId\" = c.id\n              LEFT JOIN \"InventoryItem\" ii ON p.id = ii.\"productId\"\n              WHERE ${whereClause}\n              GROUP BY p.id, p.name, p.sku, p.price, p.weightedaveragecost, c.name, p.min_stock_level\n            ),\n            status_calculation AS (\n              SELECT *,\n                CASE \n                  WHEN total_quantity = 0 THEN 'Out of Stock'\n                  WHEN total_quantity <= min_stock_level THEN 'Low Stock'\n                  ELSE 'In Stock'\n                END as status\n              FROM inventory_summary\n            )\n            SELECT * FROM status_calculation\n          `;\n\n          let mainQueryParams = [...queryParams];\n          let mainParamIndex = paramIndex;\n\n          // Add status filter if specified\n          if (status) {\n            inventoryQuery += ` WHERE status = $${mainParamIndex}`;\n            mainQueryParams.push(status);\n            mainParamIndex++;\n          }\n\n          // Add ordering and pagination\n          inventoryQuery += ` ORDER BY name ASC LIMIT $${mainParamIndex} OFFSET $${mainParamIndex + 1}`;\n          mainQueryParams.push(limit, offset);\n\n          return prisma.$queryRawUnsafe(inventoryQuery, ...mainQueryParams);\n        }),\n\n        measureAsync('inventory-count-query', async () => {\n          // Count query for pagination\n          let countQuery = `\n            WITH inventory_summary AS (\n              SELECT \n                p.id,\n                COALESCE(SUM(ii.quantity), 0) as total_quantity,\n                COALESCE(p.min_stock_level, 10) as min_stock_level\n              FROM \"Product\" p\n              LEFT JOIN \"Category\" c ON p.\"categoryId\" = c.id\n              LEFT JOIN \"InventoryItem\" ii ON p.id = ii.\"productId\"\n              WHERE ${whereClause}\n              GROUP BY p.id, p.min_stock_level\n            ),\n            status_calculation AS (\n              SELECT *,\n                CASE \n                  WHEN total_quantity = 0 THEN 'Out of Stock'\n                  WHEN total_quantity <= min_stock_level THEN 'Low Stock'\n                  ELSE 'In Stock'\n                END as status\n              FROM inventory_summary\n            )\n            SELECT COUNT(*) as total FROM status_calculation\n          `;\n\n          let countParams = [...queryParams];\n          if (status) {\n            countQuery += ` WHERE status = $${paramIndex}`;\n            countParams.push(status);\n          }\n\n          return prisma.$queryRawUnsafe(countQuery, ...countParams) as Promise<any[]>;\n        })\n      ]);\n\n      const total = parseInt(countResult[0]?.total || '0');\n\n      // Format the response\n      const formattedData = (inventoryData as any[]).map(item => ({\n        id: item.id,\n        name: item.name,\n        sku: item.sku,\n        category: item.category || 'Uncategorized',\n        stock: parseInt(item.total_quantity),\n        retailPrice: parseFloat(item.retailPrice || '0'),\n        weightedAverageCost: parseFloat(item.weighted_avg_cost || '0'),\n        status: item.status,\n        shopCount: parseInt(item.shop_count || '0')\n      }));\n\n      const responseData = {\n        success: true,\n        data: formattedData,\n        pagination: {\n          page,\n          limit,\n          total,\n          totalPages: Math.ceil(total / limit)\n        }\n      };\n\n      // Cache the response\n      await cacheService.set(cacheKey, responseData, CACHE_CONFIG.TTL.INVENTORY);\n\n      const response = NextResponse.json(responseData);\n      response.headers.set('X-Cache', 'MISS');\n      response.headers.set('Cache-Control', `public, s-maxage=${CACHE_DURATION}, stale-while-revalidate=60`);\n\n      return response;\n\n    } catch (error) {\n      console.error('Error fetching inventory summary:', error);\n      return NextResponse.json(\n        { success: false, error: 'Failed to fetch inventory summary' },\n        { status: 500 }\n      );\n    }\n  }, { endpoint: 'inventory-summary' });\n}"],
      names: ["GET", "CACHE_DURATION", "request", "measureAsync", "token", "headers", "get", "replace", "NextResponse", "json", "error", "status", "decoded", "verifyToken", "searchParams", "URL", "url", "page", "parseInt", "limit", "Math", "min", "search", "category", "shopId", "cacheKey", "cacheService", "generateKey", "CACHE_CONFIG", "KEYS", "INVENTORY_SUMMARY", "cachedData", "response", "set", "offset", "whereConditions", "queryParams", "paramIndex", "push", "whereClause", "join", "inventoryData", "countResult", "Promise", "all", "inventoryQuery", "mainQueryParams", "mainParamIndex", "prisma", "$queryRawUnsafe", "countQuery", "countParams", "total", "formattedData", "map", "item", "id", "name", "sku", "stock", "total_quantity", "retailPrice", "parseFloat", "weightedAverageCost", "weighted_avg_cost", "shopCount", "shop_count", "responseData", "success", "data", "pagination", "totalPages", "ceil", "TTL", "INVENTORY", "console", "endpoint"],
      mappings: "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"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "535893e238f14582d0ef43a08994bb98f3498ee1"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_3v9t3pht5 = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_3v9t3pht5();
cov_3v9t3pht5().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
/* istanbul ignore next */
cov_3v9t3pht5().s[1]++;
Object.defineProperty(exports, "GET", {
  enumerable: true,
  get: function () {
    /* istanbul ignore next */
    cov_3v9t3pht5().f[0]++;
    cov_3v9t3pht5().s[2]++;
    return GET;
  }
});
const _server =
/* istanbul ignore next */
(cov_3v9t3pht5().s[3]++, require("next/server"));
const _prisma =
/* istanbul ignore next */
(cov_3v9t3pht5().s[4]++, require("../../../../lib/prisma"));
const _auth =
/* istanbul ignore next */
(cov_3v9t3pht5().s[5]++, require("../../../../lib/auth"));
const _cache =
/* istanbul ignore next */
(cov_3v9t3pht5().s[6]++, require("../../../../lib/cache"));
const _performance =
/* istanbul ignore next */
(cov_3v9t3pht5().s[7]++, require("../../../../lib/performance"));
// Cache for 10 seconds
const CACHE_DURATION =
/* istanbul ignore next */
(cov_3v9t3pht5().s[8]++, 10);
async function GET(request) {
  /* istanbul ignore next */
  cov_3v9t3pht5().f[1]++;
  cov_3v9t3pht5().s[9]++;
  return (0, _performance.measureAsync)("inventory-summary-api", async () => {
    /* istanbul ignore next */
    cov_3v9t3pht5().f[2]++;
    cov_3v9t3pht5().s[10]++;
    try {
      const token =
      /* istanbul ignore next */
      (cov_3v9t3pht5().s[11]++, request.headers.get("authorization")?.replace("Bearer ", ""));
      /* istanbul ignore next */
      cov_3v9t3pht5().s[12]++;
      if (!token) {
        /* istanbul ignore next */
        cov_3v9t3pht5().b[0][0]++;
        cov_3v9t3pht5().s[13]++;
        return _server.NextResponse.json({
          error: "No token provided"
        }, {
          status: 401
        });
      } else
      /* istanbul ignore next */
      {
        cov_3v9t3pht5().b[0][1]++;
      }
      const decoded =
      /* istanbul ignore next */
      (cov_3v9t3pht5().s[14]++, await (0, _auth.verifyToken)(token));
      /* istanbul ignore next */
      cov_3v9t3pht5().s[15]++;
      if (!decoded) {
        /* istanbul ignore next */
        cov_3v9t3pht5().b[1][0]++;
        cov_3v9t3pht5().s[16]++;
        return _server.NextResponse.json({
          error: "Invalid token: signature verification failed"
        }, {
          status: 401
        });
      } else
      /* istanbul ignore next */
      {
        cov_3v9t3pht5().b[1][1]++;
      }
      const {
        searchParams
      } =
      /* istanbul ignore next */
      (cov_3v9t3pht5().s[17]++, new URL(request.url));
      const page =
      /* istanbul ignore next */
      (cov_3v9t3pht5().s[18]++, parseInt(
      /* istanbul ignore next */
      (cov_3v9t3pht5().b[2][0]++, searchParams.get("page")) ||
      /* istanbul ignore next */
      (cov_3v9t3pht5().b[2][1]++, "1")));
      const limit =
      /* istanbul ignore next */
      (cov_3v9t3pht5().s[19]++, Math.min(parseInt(
      /* istanbul ignore next */
      (cov_3v9t3pht5().b[3][0]++, searchParams.get("limit")) ||
      /* istanbul ignore next */
      (cov_3v9t3pht5().b[3][1]++, "10")), 50)); // Cap at 50
      const search =
      /* istanbul ignore next */
      (cov_3v9t3pht5().s[20]++,
      /* istanbul ignore next */
      (cov_3v9t3pht5().b[4][0]++, searchParams.get("search")) ||
      /* istanbul ignore next */
      (cov_3v9t3pht5().b[4][1]++, ""));
      const category =
      /* istanbul ignore next */
      (cov_3v9t3pht5().s[21]++,
      /* istanbul ignore next */
      (cov_3v9t3pht5().b[5][0]++, searchParams.get("category")) ||
      /* istanbul ignore next */
      (cov_3v9t3pht5().b[5][1]++, ""));
      const status =
      /* istanbul ignore next */
      (cov_3v9t3pht5().s[22]++,
      /* istanbul ignore next */
      (cov_3v9t3pht5().b[6][0]++, searchParams.get("status")) ||
      /* istanbul ignore next */
      (cov_3v9t3pht5().b[6][1]++, ""));
      const shopId =
      /* istanbul ignore next */
      (cov_3v9t3pht5().s[23]++, searchParams.get("shopId"));
      // Generate cache key
      const cacheKey =
      /* istanbul ignore next */
      (cov_3v9t3pht5().s[24]++, _cache.cacheService.generateKey(_cache.CACHE_CONFIG.KEYS.INVENTORY_SUMMARY, {
        page,
        limit,
        search,
        category,
        status,
        shopId
      }));
      // Try to get from cache first
      const cachedData =
      /* istanbul ignore next */
      (cov_3v9t3pht5().s[25]++, await _cache.cacheService.get(cacheKey));
      /* istanbul ignore next */
      cov_3v9t3pht5().s[26]++;
      if (cachedData) {
        /* istanbul ignore next */
        cov_3v9t3pht5().b[7][0]++;
        const response =
        /* istanbul ignore next */
        (cov_3v9t3pht5().s[27]++, _server.NextResponse.json(cachedData));
        /* istanbul ignore next */
        cov_3v9t3pht5().s[28]++;
        response.headers.set("X-Cache", "HIT");
        /* istanbul ignore next */
        cov_3v9t3pht5().s[29]++;
        response.headers.set("Cache-Control", `public, s-maxage=${CACHE_DURATION}, stale-while-revalidate=60`);
        /* istanbul ignore next */
        cov_3v9t3pht5().s[30]++;
        return response;
      } else
      /* istanbul ignore next */
      {
        cov_3v9t3pht5().b[7][1]++;
      }
      const offset =
      /* istanbul ignore next */
      (cov_3v9t3pht5().s[31]++, (page - 1) * limit);
      // Build dynamic WHERE conditions
      const whereConditions =
      /* istanbul ignore next */
      (cov_3v9t3pht5().s[32]++, ["1=1"]); // Always true base condition
      const queryParams =
      /* istanbul ignore next */
      (cov_3v9t3pht5().s[33]++, []);
      let paramIndex =
      /* istanbul ignore next */
      (cov_3v9t3pht5().s[34]++, 1);
      // Search filter
      /* istanbul ignore next */
      cov_3v9t3pht5().s[35]++;
      if (search) {
        /* istanbul ignore next */
        cov_3v9t3pht5().b[8][0]++;
        cov_3v9t3pht5().s[36]++;
        whereConditions.push(`(p.name ILIKE $${paramIndex} OR p.sku ILIKE $${paramIndex + 1})`);
        /* istanbul ignore next */
        cov_3v9t3pht5().s[37]++;
        queryParams.push(`%${search}%`, `%${search}%`);
        /* istanbul ignore next */
        cov_3v9t3pht5().s[38]++;
        paramIndex += 2;
      } else
      /* istanbul ignore next */
      {
        cov_3v9t3pht5().b[8][1]++;
      }
      // Category filter
      cov_3v9t3pht5().s[39]++;
      if (category) {
        /* istanbul ignore next */
        cov_3v9t3pht5().b[9][0]++;
        cov_3v9t3pht5().s[40]++;
        whereConditions.push(`c.name = $${paramIndex}`);
        /* istanbul ignore next */
        cov_3v9t3pht5().s[41]++;
        queryParams.push(category);
        /* istanbul ignore next */
        cov_3v9t3pht5().s[42]++;
        paramIndex++;
      } else
      /* istanbul ignore next */
      {
        cov_3v9t3pht5().b[9][1]++;
      }
      // Shop filter
      cov_3v9t3pht5().s[43]++;
      if (shopId) {
        /* istanbul ignore next */
        cov_3v9t3pht5().b[10][0]++;
        cov_3v9t3pht5().s[44]++;
        whereConditions.push(`ii."shopId" = $${paramIndex}`);
        /* istanbul ignore next */
        cov_3v9t3pht5().s[45]++;
        queryParams.push(parseInt(shopId));
        /* istanbul ignore next */
        cov_3v9t3pht5().s[46]++;
        paramIndex++;
      } else
      /* istanbul ignore next */
      {
        cov_3v9t3pht5().b[10][1]++;
      }
      const whereClause =
      /* istanbul ignore next */
      (cov_3v9t3pht5().s[47]++, whereConditions.join(" AND "));
      // Execute queries in parallel
      const [inventoryData, countResult] =
      /* istanbul ignore next */
      (cov_3v9t3pht5().s[48]++, await Promise.all([(0, _performance.measureAsync)("inventory-main-query", async () => {
        /* istanbul ignore next */
        cov_3v9t3pht5().f[3]++;
        // Main query with aggregation and status calculation
        let inventoryQuery =
        /* istanbul ignore next */
        (cov_3v9t3pht5().s[49]++, `
            WITH inventory_summary AS (
              SELECT 
                p.id,
                p.name,
                p.sku,
                p.price as "retailPrice",
                p.weightedaveragecost as "costPrice",
                c.name as category,
                COALESCE(SUM(ii.quantity), 0) as total_quantity,
                COALESCE(p.weightedaveragecost, 0) as weighted_avg_cost,
                COUNT(DISTINCT ii."shopId") as shop_count,
                COALESCE(p.min_stock_level, 10) as min_stock_level
              FROM "Product" p
              LEFT JOIN "Category" c ON p."categoryId" = c.id
              LEFT JOIN "InventoryItem" ii ON p.id = ii."productId"
              WHERE ${whereClause}
              GROUP BY p.id, p.name, p.sku, p.price, p.weightedaveragecost, c.name, p.min_stock_level
            ),
            status_calculation AS (
              SELECT *,
                CASE 
                  WHEN total_quantity = 0 THEN 'Out of Stock'
                  WHEN total_quantity <= min_stock_level THEN 'Low Stock'
                  ELSE 'In Stock'
                END as status
              FROM inventory_summary
            )
            SELECT * FROM status_calculation
          `);
        let mainQueryParams =
        /* istanbul ignore next */
        (cov_3v9t3pht5().s[50]++, [...queryParams]);
        let mainParamIndex =
        /* istanbul ignore next */
        (cov_3v9t3pht5().s[51]++, paramIndex);
        // Add status filter if specified
        /* istanbul ignore next */
        cov_3v9t3pht5().s[52]++;
        if (status) {
          /* istanbul ignore next */
          cov_3v9t3pht5().b[11][0]++;
          cov_3v9t3pht5().s[53]++;
          inventoryQuery += ` WHERE status = $${mainParamIndex}`;
          /* istanbul ignore next */
          cov_3v9t3pht5().s[54]++;
          mainQueryParams.push(status);
          /* istanbul ignore next */
          cov_3v9t3pht5().s[55]++;
          mainParamIndex++;
        } else
        /* istanbul ignore next */
        {
          cov_3v9t3pht5().b[11][1]++;
        }
        // Add ordering and pagination
        cov_3v9t3pht5().s[56]++;
        inventoryQuery += ` ORDER BY name ASC LIMIT $${mainParamIndex} OFFSET $${mainParamIndex + 1}`;
        /* istanbul ignore next */
        cov_3v9t3pht5().s[57]++;
        mainQueryParams.push(limit, offset);
        /* istanbul ignore next */
        cov_3v9t3pht5().s[58]++;
        return _prisma.prisma.$queryRawUnsafe(inventoryQuery, ...mainQueryParams);
      }), (0, _performance.measureAsync)("inventory-count-query", async () => {
        /* istanbul ignore next */
        cov_3v9t3pht5().f[4]++;
        // Count query for pagination
        let countQuery =
        /* istanbul ignore next */
        (cov_3v9t3pht5().s[59]++, `
            WITH inventory_summary AS (
              SELECT 
                p.id,
                COALESCE(SUM(ii.quantity), 0) as total_quantity,
                COALESCE(p.min_stock_level, 10) as min_stock_level
              FROM "Product" p
              LEFT JOIN "Category" c ON p."categoryId" = c.id
              LEFT JOIN "InventoryItem" ii ON p.id = ii."productId"
              WHERE ${whereClause}
              GROUP BY p.id, p.min_stock_level
            ),
            status_calculation AS (
              SELECT *,
                CASE 
                  WHEN total_quantity = 0 THEN 'Out of Stock'
                  WHEN total_quantity <= min_stock_level THEN 'Low Stock'
                  ELSE 'In Stock'
                END as status
              FROM inventory_summary
            )
            SELECT COUNT(*) as total FROM status_calculation
          `);
        let countParams =
        /* istanbul ignore next */
        (cov_3v9t3pht5().s[60]++, [...queryParams]);
        /* istanbul ignore next */
        cov_3v9t3pht5().s[61]++;
        if (status) {
          /* istanbul ignore next */
          cov_3v9t3pht5().b[12][0]++;
          cov_3v9t3pht5().s[62]++;
          countQuery += ` WHERE status = $${paramIndex}`;
          /* istanbul ignore next */
          cov_3v9t3pht5().s[63]++;
          countParams.push(status);
        } else
        /* istanbul ignore next */
        {
          cov_3v9t3pht5().b[12][1]++;
        }
        cov_3v9t3pht5().s[64]++;
        return _prisma.prisma.$queryRawUnsafe(countQuery, ...countParams);
      })]));
      const total =
      /* istanbul ignore next */
      (cov_3v9t3pht5().s[65]++, parseInt(
      /* istanbul ignore next */
      (cov_3v9t3pht5().b[13][0]++, countResult[0]?.total) ||
      /* istanbul ignore next */
      (cov_3v9t3pht5().b[13][1]++, "0")));
      // Format the response
      const formattedData =
      /* istanbul ignore next */
      (cov_3v9t3pht5().s[66]++, inventoryData.map(item => {
        /* istanbul ignore next */
        cov_3v9t3pht5().f[5]++;
        cov_3v9t3pht5().s[67]++;
        return {
          id: item.id,
          name: item.name,
          sku: item.sku,
          category:
          /* istanbul ignore next */
          (cov_3v9t3pht5().b[14][0]++, item.category) ||
          /* istanbul ignore next */
          (cov_3v9t3pht5().b[14][1]++, "Uncategorized"),
          stock: parseInt(item.total_quantity),
          retailPrice: parseFloat(
          /* istanbul ignore next */
          (cov_3v9t3pht5().b[15][0]++, item.retailPrice) ||
          /* istanbul ignore next */
          (cov_3v9t3pht5().b[15][1]++, "0")),
          weightedAverageCost: parseFloat(
          /* istanbul ignore next */
          (cov_3v9t3pht5().b[16][0]++, item.weighted_avg_cost) ||
          /* istanbul ignore next */
          (cov_3v9t3pht5().b[16][1]++, "0")),
          status: item.status,
          shopCount: parseInt(
          /* istanbul ignore next */
          (cov_3v9t3pht5().b[17][0]++, item.shop_count) ||
          /* istanbul ignore next */
          (cov_3v9t3pht5().b[17][1]++, "0"))
        };
      }));
      const responseData =
      /* istanbul ignore next */
      (cov_3v9t3pht5().s[68]++, {
        success: true,
        data: formattedData,
        pagination: {
          page,
          limit,
          total,
          totalPages: Math.ceil(total / limit)
        }
      });
      // Cache the response
      /* istanbul ignore next */
      cov_3v9t3pht5().s[69]++;
      await _cache.cacheService.set(cacheKey, responseData, _cache.CACHE_CONFIG.TTL.INVENTORY);
      const response =
      /* istanbul ignore next */
      (cov_3v9t3pht5().s[70]++, _server.NextResponse.json(responseData));
      /* istanbul ignore next */
      cov_3v9t3pht5().s[71]++;
      response.headers.set("X-Cache", "MISS");
      /* istanbul ignore next */
      cov_3v9t3pht5().s[72]++;
      response.headers.set("Cache-Control", `public, s-maxage=${CACHE_DURATION}, stale-while-revalidate=60`);
      /* istanbul ignore next */
      cov_3v9t3pht5().s[73]++;
      return response;
    } catch (error) {
      /* istanbul ignore next */
      cov_3v9t3pht5().s[74]++;
      console.error("Error fetching inventory summary:", error);
      /* istanbul ignore next */
      cov_3v9t3pht5().s[75]++;
      return _server.NextResponse.json({
        success: false,
        error: "Failed to fetch inventory summary"
      }, {
        status: 500
      });
    }
  }, {
    endpoint: "inventory-summary"
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfM3Y5dDNwaHQ1IiwiYWN0dWFsQ292ZXJhZ2UiLCJzIiwiR0VUIiwiQ0FDSEVfRFVSQVRJT04iLCJyZXF1ZXN0IiwiZiIsIl9wZXJmb3JtYW5jZSIsIm1lYXN1cmVBc3luYyIsInRva2VuIiwiaGVhZGVycyIsImdldCIsInJlcGxhY2UiLCJiIiwiX3NlcnZlciIsIk5leHRSZXNwb25zZSIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsImRlY29kZWQiLCJfYXV0aCIsInZlcmlmeVRva2VuIiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwicGFnZSIsInBhcnNlSW50IiwibGltaXQiLCJNYXRoIiwibWluIiwic2VhcmNoIiwiY2F0ZWdvcnkiLCJzaG9wSWQiLCJjYWNoZUtleSIsIl9jYWNoZSIsImNhY2hlU2VydmljZSIsImdlbmVyYXRlS2V5IiwiQ0FDSEVfQ09ORklHIiwiS0VZUyIsIklOVkVOVE9SWV9TVU1NQVJZIiwiY2FjaGVkRGF0YSIsInJlc3BvbnNlIiwic2V0Iiwib2Zmc2V0Iiwid2hlcmVDb25kaXRpb25zIiwicXVlcnlQYXJhbXMiLCJwYXJhbUluZGV4IiwicHVzaCIsIndoZXJlQ2xhdXNlIiwiam9pbiIsImludmVudG9yeURhdGEiLCJjb3VudFJlc3VsdCIsIlByb21pc2UiLCJhbGwiLCJpbnZlbnRvcnlRdWVyeSIsIm1haW5RdWVyeVBhcmFtcyIsIm1haW5QYXJhbUluZGV4IiwiX3ByaXNtYSIsInByaXNtYSIsIiRxdWVyeVJhd1Vuc2FmZSIsImNvdW50UXVlcnkiLCJjb3VudFBhcmFtcyIsInRvdGFsIiwiZm9ybWF0dGVkRGF0YSIsIm1hcCIsIml0ZW0iLCJpZCIsIm5hbWUiLCJza3UiLCJzdG9jayIsInRvdGFsX3F1YW50aXR5IiwicmV0YWlsUHJpY2UiLCJwYXJzZUZsb2F0Iiwid2VpZ2h0ZWRBdmVyYWdlQ29zdCIsIndlaWdodGVkX2F2Z19jb3N0Iiwic2hvcENvdW50Iiwic2hvcF9jb3VudCIsInJlc3BvbnNlRGF0YSIsInN1Y2Nlc3MiLCJkYXRhIiwicGFnaW5hdGlvbiIsInRvdGFsUGFnZXMiLCJjZWlsIiwiVFRMIiwiSU5WRU5UT1JZIiwiY29uc29sZSIsImVuZHBvaW50Il0sInNvdXJjZXMiOlsiL1VzZXJzL3NhY2hpbi9Eb2N1bWVudHMvbWQtc3BvcnRzLS9zcmMvYXBwL2FwaS9pbnZlbnRvcnkvc3VtbWFyeS9yb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSAnQC9saWIvcHJpc21hJztcbmltcG9ydCB7IHZlcmlmeVRva2VuIH0gZnJvbSAnQC9saWIvYXV0aCc7XG5pbXBvcnQgeyBjYWNoZVNlcnZpY2UsIENBQ0hFX0NPTkZJRyB9IGZyb20gJ0AvbGliL2NhY2hlJztcbmltcG9ydCB7IG1lYXN1cmVBc3luYyB9IGZyb20gJ0AvbGliL3BlcmZvcm1hbmNlJztcblxuLy8gQ2FjaGUgZm9yIDEwIHNlY29uZHNcbmNvbnN0IENBQ0hFX0RVUkFUSU9OID0gMTA7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgcmV0dXJuIG1lYXN1cmVBc3luYygnaW52ZW50b3J5LXN1bW1hcnktYXBpJywgYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0b2tlbiA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ2F1dGhvcml6YXRpb24nKT8ucmVwbGFjZSgnQmVhcmVyICcsICcnKTtcbiAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdObyB0b2tlbiBwcm92aWRlZCcgfSwgeyBzdGF0dXM6IDQwMSB9KTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGVjb2RlZCA9IGF3YWl0IHZlcmlmeVRva2VuKHRva2VuKTtcbiAgICAgIGlmICghZGVjb2RlZCkge1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgdG9rZW46IHNpZ25hdHVyZSB2ZXJpZmljYXRpb24gZmFpbGVkJyB9LCB7IHN0YXR1czogNDAxIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XG4gICAgICBjb25zdCBwYWdlID0gcGFyc2VJbnQoc2VhcmNoUGFyYW1zLmdldCgncGFnZScpIHx8ICcxJyk7XG4gICAgICBjb25zdCBsaW1pdCA9IE1hdGgubWluKHBhcnNlSW50KHNlYXJjaFBhcmFtcy5nZXQoJ2xpbWl0JykgfHwgJzEwJyksIDUwKTsgLy8gQ2FwIGF0IDUwXG4gICAgICBjb25zdCBzZWFyY2ggPSBzZWFyY2hQYXJhbXMuZ2V0KCdzZWFyY2gnKSB8fCAnJztcbiAgICAgIGNvbnN0IGNhdGVnb3J5ID0gc2VhcmNoUGFyYW1zLmdldCgnY2F0ZWdvcnknKSB8fCAnJztcbiAgICAgIGNvbnN0IHN0YXR1cyA9IHNlYXJjaFBhcmFtcy5nZXQoJ3N0YXR1cycpIHx8ICcnO1xuICAgICAgY29uc3Qgc2hvcElkID0gc2VhcmNoUGFyYW1zLmdldCgnc2hvcElkJyk7XG5cbiAgICAgIC8vIEdlbmVyYXRlIGNhY2hlIGtleVxuICAgICAgY29uc3QgY2FjaGVLZXkgPSBjYWNoZVNlcnZpY2UuZ2VuZXJhdGVLZXkoQ0FDSEVfQ09ORklHLktFWVMuSU5WRU5UT1JZX1NVTU1BUlksIHtcbiAgICAgICAgcGFnZSxcbiAgICAgICAgbGltaXQsXG4gICAgICAgIHNlYXJjaCxcbiAgICAgICAgY2F0ZWdvcnksXG4gICAgICAgIHN0YXR1cyxcbiAgICAgICAgc2hvcElkXG4gICAgICB9KTtcblxuICAgICAgLy8gVHJ5IHRvIGdldCBmcm9tIGNhY2hlIGZpcnN0XG4gICAgICBjb25zdCBjYWNoZWREYXRhID0gYXdhaXQgY2FjaGVTZXJ2aWNlLmdldChjYWNoZUtleSk7XG4gICAgICBpZiAoY2FjaGVkRGF0YSkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IE5leHRSZXNwb25zZS5qc29uKGNhY2hlZERhdGEpO1xuICAgICAgICByZXNwb25zZS5oZWFkZXJzLnNldCgnWC1DYWNoZScsICdISVQnKTtcbiAgICAgICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoJ0NhY2hlLUNvbnRyb2wnLCBgcHVibGljLCBzLW1heGFnZT0ke0NBQ0hFX0RVUkFUSU9OfSwgc3RhbGUtd2hpbGUtcmV2YWxpZGF0ZT02MGApO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG9mZnNldCA9IChwYWdlIC0gMSkgKiBsaW1pdDtcblxuICAgICAgLy8gQnVpbGQgZHluYW1pYyBXSEVSRSBjb25kaXRpb25zXG4gICAgICBjb25zdCB3aGVyZUNvbmRpdGlvbnM6IHN0cmluZ1tdID0gWycxPTEnXTsgLy8gQWx3YXlzIHRydWUgYmFzZSBjb25kaXRpb25cbiAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1zOiBhbnlbXSA9IFtdO1xuICAgICAgbGV0IHBhcmFtSW5kZXggPSAxO1xuXG4gICAgICAvLyBTZWFyY2ggZmlsdGVyXG4gICAgICBpZiAoc2VhcmNoKSB7XG4gICAgICAgIHdoZXJlQ29uZGl0aW9ucy5wdXNoKGAocC5uYW1lIElMSUtFICQke3BhcmFtSW5kZXh9IE9SIHAuc2t1IElMSUtFICQke3BhcmFtSW5kZXggKyAxfSlgKTtcbiAgICAgICAgcXVlcnlQYXJhbXMucHVzaChgJSR7c2VhcmNofSVgLCBgJSR7c2VhcmNofSVgKTtcbiAgICAgICAgcGFyYW1JbmRleCArPSAyO1xuICAgICAgfVxuXG4gICAgICAvLyBDYXRlZ29yeSBmaWx0ZXJcbiAgICAgIGlmIChjYXRlZ29yeSkge1xuICAgICAgICB3aGVyZUNvbmRpdGlvbnMucHVzaChgYy5uYW1lID0gJCR7cGFyYW1JbmRleH1gKTtcbiAgICAgICAgcXVlcnlQYXJhbXMucHVzaChjYXRlZ29yeSk7XG4gICAgICAgIHBhcmFtSW5kZXgrKztcbiAgICAgIH1cblxuICAgICAgLy8gU2hvcCBmaWx0ZXJcbiAgICAgIGlmIChzaG9wSWQpIHtcbiAgICAgICAgd2hlcmVDb25kaXRpb25zLnB1c2goYGlpLlwic2hvcElkXCIgPSAkJHtwYXJhbUluZGV4fWApO1xuICAgICAgICBxdWVyeVBhcmFtcy5wdXNoKHBhcnNlSW50KHNob3BJZCkpO1xuICAgICAgICBwYXJhbUluZGV4Kys7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHdoZXJlQ2xhdXNlID0gd2hlcmVDb25kaXRpb25zLmpvaW4oJyBBTkQgJyk7XG5cbiAgICAgIC8vIEV4ZWN1dGUgcXVlcmllcyBpbiBwYXJhbGxlbFxuICAgICAgY29uc3QgW2ludmVudG9yeURhdGEsIGNvdW50UmVzdWx0XSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgbWVhc3VyZUFzeW5jKCdpbnZlbnRvcnktbWFpbi1xdWVyeScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAvLyBNYWluIHF1ZXJ5IHdpdGggYWdncmVnYXRpb24gYW5kIHN0YXR1cyBjYWxjdWxhdGlvblxuICAgICAgICAgIGxldCBpbnZlbnRvcnlRdWVyeSA9IGBcbiAgICAgICAgICAgIFdJVEggaW52ZW50b3J5X3N1bW1hcnkgQVMgKFxuICAgICAgICAgICAgICBTRUxFQ1QgXG4gICAgICAgICAgICAgICAgcC5pZCxcbiAgICAgICAgICAgICAgICBwLm5hbWUsXG4gICAgICAgICAgICAgICAgcC5za3UsXG4gICAgICAgICAgICAgICAgcC5wcmljZSBhcyBcInJldGFpbFByaWNlXCIsXG4gICAgICAgICAgICAgICAgcC53ZWlnaHRlZGF2ZXJhZ2Vjb3N0IGFzIFwiY29zdFByaWNlXCIsXG4gICAgICAgICAgICAgICAgYy5uYW1lIGFzIGNhdGVnb3J5LFxuICAgICAgICAgICAgICAgIENPQUxFU0NFKFNVTShpaS5xdWFudGl0eSksIDApIGFzIHRvdGFsX3F1YW50aXR5LFxuICAgICAgICAgICAgICAgIENPQUxFU0NFKHAud2VpZ2h0ZWRhdmVyYWdlY29zdCwgMCkgYXMgd2VpZ2h0ZWRfYXZnX2Nvc3QsXG4gICAgICAgICAgICAgICAgQ09VTlQoRElTVElOQ1QgaWkuXCJzaG9wSWRcIikgYXMgc2hvcF9jb3VudCxcbiAgICAgICAgICAgICAgICBDT0FMRVNDRShwLm1pbl9zdG9ja19sZXZlbCwgMTApIGFzIG1pbl9zdG9ja19sZXZlbFxuICAgICAgICAgICAgICBGUk9NIFwiUHJvZHVjdFwiIHBcbiAgICAgICAgICAgICAgTEVGVCBKT0lOIFwiQ2F0ZWdvcnlcIiBjIE9OIHAuXCJjYXRlZ29yeUlkXCIgPSBjLmlkXG4gICAgICAgICAgICAgIExFRlQgSk9JTiBcIkludmVudG9yeUl0ZW1cIiBpaSBPTiBwLmlkID0gaWkuXCJwcm9kdWN0SWRcIlxuICAgICAgICAgICAgICBXSEVSRSAke3doZXJlQ2xhdXNlfVxuICAgICAgICAgICAgICBHUk9VUCBCWSBwLmlkLCBwLm5hbWUsIHAuc2t1LCBwLnByaWNlLCBwLndlaWdodGVkYXZlcmFnZWNvc3QsIGMubmFtZSwgcC5taW5fc3RvY2tfbGV2ZWxcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBzdGF0dXNfY2FsY3VsYXRpb24gQVMgKFxuICAgICAgICAgICAgICBTRUxFQ1QgKixcbiAgICAgICAgICAgICAgICBDQVNFIFxuICAgICAgICAgICAgICAgICAgV0hFTiB0b3RhbF9xdWFudGl0eSA9IDAgVEhFTiAnT3V0IG9mIFN0b2NrJ1xuICAgICAgICAgICAgICAgICAgV0hFTiB0b3RhbF9xdWFudGl0eSA8PSBtaW5fc3RvY2tfbGV2ZWwgVEhFTiAnTG93IFN0b2NrJ1xuICAgICAgICAgICAgICAgICAgRUxTRSAnSW4gU3RvY2snXG4gICAgICAgICAgICAgICAgRU5EIGFzIHN0YXR1c1xuICAgICAgICAgICAgICBGUk9NIGludmVudG9yeV9zdW1tYXJ5XG4gICAgICAgICAgICApXG4gICAgICAgICAgICBTRUxFQ1QgKiBGUk9NIHN0YXR1c19jYWxjdWxhdGlvblxuICAgICAgICAgIGA7XG5cbiAgICAgICAgICBsZXQgbWFpblF1ZXJ5UGFyYW1zID0gWy4uLnF1ZXJ5UGFyYW1zXTtcbiAgICAgICAgICBsZXQgbWFpblBhcmFtSW5kZXggPSBwYXJhbUluZGV4O1xuXG4gICAgICAgICAgLy8gQWRkIHN0YXR1cyBmaWx0ZXIgaWYgc3BlY2lmaWVkXG4gICAgICAgICAgaWYgKHN0YXR1cykge1xuICAgICAgICAgICAgaW52ZW50b3J5UXVlcnkgKz0gYCBXSEVSRSBzdGF0dXMgPSAkJHttYWluUGFyYW1JbmRleH1gO1xuICAgICAgICAgICAgbWFpblF1ZXJ5UGFyYW1zLnB1c2goc3RhdHVzKTtcbiAgICAgICAgICAgIG1haW5QYXJhbUluZGV4Kys7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gQWRkIG9yZGVyaW5nIGFuZCBwYWdpbmF0aW9uXG4gICAgICAgICAgaW52ZW50b3J5UXVlcnkgKz0gYCBPUkRFUiBCWSBuYW1lIEFTQyBMSU1JVCAkJHttYWluUGFyYW1JbmRleH0gT0ZGU0VUICQke21haW5QYXJhbUluZGV4ICsgMX1gO1xuICAgICAgICAgIG1haW5RdWVyeVBhcmFtcy5wdXNoKGxpbWl0LCBvZmZzZXQpO1xuXG4gICAgICAgICAgcmV0dXJuIHByaXNtYS4kcXVlcnlSYXdVbnNhZmUoaW52ZW50b3J5UXVlcnksIC4uLm1haW5RdWVyeVBhcmFtcyk7XG4gICAgICAgIH0pLFxuXG4gICAgICAgIG1lYXN1cmVBc3luYygnaW52ZW50b3J5LWNvdW50LXF1ZXJ5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIC8vIENvdW50IHF1ZXJ5IGZvciBwYWdpbmF0aW9uXG4gICAgICAgICAgbGV0IGNvdW50UXVlcnkgPSBgXG4gICAgICAgICAgICBXSVRIIGludmVudG9yeV9zdW1tYXJ5IEFTIChcbiAgICAgICAgICAgICAgU0VMRUNUIFxuICAgICAgICAgICAgICAgIHAuaWQsXG4gICAgICAgICAgICAgICAgQ09BTEVTQ0UoU1VNKGlpLnF1YW50aXR5KSwgMCkgYXMgdG90YWxfcXVhbnRpdHksXG4gICAgICAgICAgICAgICAgQ09BTEVTQ0UocC5taW5fc3RvY2tfbGV2ZWwsIDEwKSBhcyBtaW5fc3RvY2tfbGV2ZWxcbiAgICAgICAgICAgICAgRlJPTSBcIlByb2R1Y3RcIiBwXG4gICAgICAgICAgICAgIExFRlQgSk9JTiBcIkNhdGVnb3J5XCIgYyBPTiBwLlwiY2F0ZWdvcnlJZFwiID0gYy5pZFxuICAgICAgICAgICAgICBMRUZUIEpPSU4gXCJJbnZlbnRvcnlJdGVtXCIgaWkgT04gcC5pZCA9IGlpLlwicHJvZHVjdElkXCJcbiAgICAgICAgICAgICAgV0hFUkUgJHt3aGVyZUNsYXVzZX1cbiAgICAgICAgICAgICAgR1JPVVAgQlkgcC5pZCwgcC5taW5fc3RvY2tfbGV2ZWxcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBzdGF0dXNfY2FsY3VsYXRpb24gQVMgKFxuICAgICAgICAgICAgICBTRUxFQ1QgKixcbiAgICAgICAgICAgICAgICBDQVNFIFxuICAgICAgICAgICAgICAgICAgV0hFTiB0b3RhbF9xdWFudGl0eSA9IDAgVEhFTiAnT3V0IG9mIFN0b2NrJ1xuICAgICAgICAgICAgICAgICAgV0hFTiB0b3RhbF9xdWFudGl0eSA8PSBtaW5fc3RvY2tfbGV2ZWwgVEhFTiAnTG93IFN0b2NrJ1xuICAgICAgICAgICAgICAgICAgRUxTRSAnSW4gU3RvY2snXG4gICAgICAgICAgICAgICAgRU5EIGFzIHN0YXR1c1xuICAgICAgICAgICAgICBGUk9NIGludmVudG9yeV9zdW1tYXJ5XG4gICAgICAgICAgICApXG4gICAgICAgICAgICBTRUxFQ1QgQ09VTlQoKikgYXMgdG90YWwgRlJPTSBzdGF0dXNfY2FsY3VsYXRpb25cbiAgICAgICAgICBgO1xuXG4gICAgICAgICAgbGV0IGNvdW50UGFyYW1zID0gWy4uLnF1ZXJ5UGFyYW1zXTtcbiAgICAgICAgICBpZiAoc3RhdHVzKSB7XG4gICAgICAgICAgICBjb3VudFF1ZXJ5ICs9IGAgV0hFUkUgc3RhdHVzID0gJCR7cGFyYW1JbmRleH1gO1xuICAgICAgICAgICAgY291bnRQYXJhbXMucHVzaChzdGF0dXMpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBwcmlzbWEuJHF1ZXJ5UmF3VW5zYWZlKGNvdW50UXVlcnksIC4uLmNvdW50UGFyYW1zKSBhcyBQcm9taXNlPGFueVtdPjtcbiAgICAgICAgfSlcbiAgICAgIF0pO1xuXG4gICAgICBjb25zdCB0b3RhbCA9IHBhcnNlSW50KGNvdW50UmVzdWx0WzBdPy50b3RhbCB8fCAnMCcpO1xuXG4gICAgICAvLyBGb3JtYXQgdGhlIHJlc3BvbnNlXG4gICAgICBjb25zdCBmb3JtYXR0ZWREYXRhID0gKGludmVudG9yeURhdGEgYXMgYW55W10pLm1hcChpdGVtID0+ICh7XG4gICAgICAgIGlkOiBpdGVtLmlkLFxuICAgICAgICBuYW1lOiBpdGVtLm5hbWUsXG4gICAgICAgIHNrdTogaXRlbS5za3UsXG4gICAgICAgIGNhdGVnb3J5OiBpdGVtLmNhdGVnb3J5IHx8ICdVbmNhdGVnb3JpemVkJyxcbiAgICAgICAgc3RvY2s6IHBhcnNlSW50KGl0ZW0udG90YWxfcXVhbnRpdHkpLFxuICAgICAgICByZXRhaWxQcmljZTogcGFyc2VGbG9hdChpdGVtLnJldGFpbFByaWNlIHx8ICcwJyksXG4gICAgICAgIHdlaWdodGVkQXZlcmFnZUNvc3Q6IHBhcnNlRmxvYXQoaXRlbS53ZWlnaHRlZF9hdmdfY29zdCB8fCAnMCcpLFxuICAgICAgICBzdGF0dXM6IGl0ZW0uc3RhdHVzLFxuICAgICAgICBzaG9wQ291bnQ6IHBhcnNlSW50KGl0ZW0uc2hvcF9jb3VudCB8fCAnMCcpXG4gICAgICB9KSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogZm9ybWF0dGVkRGF0YSxcbiAgICAgICAgcGFnaW5hdGlvbjoge1xuICAgICAgICAgIHBhZ2UsXG4gICAgICAgICAgbGltaXQsXG4gICAgICAgICAgdG90YWwsXG4gICAgICAgICAgdG90YWxQYWdlczogTWF0aC5jZWlsKHRvdGFsIC8gbGltaXQpXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8vIENhY2hlIHRoZSByZXNwb25zZVxuICAgICAgYXdhaXQgY2FjaGVTZXJ2aWNlLnNldChjYWNoZUtleSwgcmVzcG9uc2VEYXRhLCBDQUNIRV9DT05GSUcuVFRMLklOVkVOVE9SWSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gTmV4dFJlc3BvbnNlLmpzb24ocmVzcG9uc2VEYXRhKTtcbiAgICAgIHJlc3BvbnNlLmhlYWRlcnMuc2V0KCdYLUNhY2hlJywgJ01JU1MnKTtcbiAgICAgIHJlc3BvbnNlLmhlYWRlcnMuc2V0KCdDYWNoZS1Db250cm9sJywgYHB1YmxpYywgcy1tYXhhZ2U9JHtDQUNIRV9EVVJBVElPTn0sIHN0YWxlLXdoaWxlLXJldmFsaWRhdGU9NjBgKTtcblxuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGludmVudG9yeSBzdW1tYXJ5OicsIGVycm9yKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdGYWlsZWQgdG8gZmV0Y2ggaW52ZW50b3J5IHN1bW1hcnknIH0sXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICAgKTtcbiAgICB9XG4gIH0sIHsgZW5kcG9pbnQ6ICdpbnZlbnRvcnktc3VtbWFyeScgfSk7XG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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