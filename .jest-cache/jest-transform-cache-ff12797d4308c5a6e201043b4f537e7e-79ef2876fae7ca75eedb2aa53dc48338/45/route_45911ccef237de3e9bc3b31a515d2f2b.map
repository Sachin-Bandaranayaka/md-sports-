{"version":3,"names":["cov_1rvy6uschf","actualCoverage","s","POST","req","f","data","json","invoiceId","b","_server","NextResponse","success","message","status","_smsService","smsService","init","isConfigured","response","sendPaymentReminder","error","console"],"sources":["/Users/sachin/Documents/md-sports-/src/app/api/sms/reminder/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport { requirePermission } from '@/lib/utils/middleware';\nimport { smsService } from '@/services/smsService';\n\n// POST: Send a payment reminder\nexport async function POST(req: NextRequest) {\n    try {\n        const data = await req.json();\n        const { invoiceId } = data;\n\n        // Validate input\n        if (!invoiceId) {\n            return NextResponse.json(\n                { success: false, message: 'Invoice ID is required' },\n                { status: 400 }\n            );\n        }\n\n        // Initialize SMS service if needed\n        await smsService.init();\n\n        // Check if SMS service is configured\n        if (!smsService.isConfigured()) {\n            return NextResponse.json(\n                { success: false, message: 'SMS service is not configured or is disabled' },\n                { status: 400 }\n            );\n        }\n\n        // Send payment reminder\n        const response = await smsService.sendPaymentReminder(invoiceId);\n\n        if (response.status >= 200 && response.status < 300) {\n            return NextResponse.json({\n                success: true,\n                message: 'Payment reminder sent successfully',\n                data: response.data\n            });\n        } else {\n            return NextResponse.json(\n                { success: false, message: response.message },\n                { status: response.status }\n            );\n        }\n    } catch (error) {\n        console.error('Error sending payment reminder:', error);\n        return NextResponse.json(\n            { success: false, message: 'Failed to send payment reminder' },\n            { status: 500 }\n        );\n    }\n} "],"mappings":"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","ignoreList":[]}