{"version":3,"names":["PermissionGuard","children","cov_1o1j67ucjt","f","user","isLoading","s","_useAuth","useAuth","checkRoutePermission","_usePermission","usePermission","router","_navigation","useRouter","_react","useEffect","b","push","hasAccess","console","warn","_jsxruntime","jsx","className","Fragment"],"sources":["/Users/sachin/Documents/md-sports-/src/components/auth/PermissionGuard.tsx"],"sourcesContent":["'use client';\n\nimport { ReactNode, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { usePermission } from '@/hooks/usePermission';\nimport { useAuth } from '@/hooks/useAuth';\n\ninterface PermissionGuardProps {\n    children: ReactNode;\n}\n\nexport default function PermissionGuard({ children }: PermissionGuardProps) {\n    const { user, isLoading } = useAuth();\n    const { checkRoutePermission } = usePermission();\n    const router = useRouter();\n\n    useEffect(() => {\n        // If authentication is still loading, do nothing\n        if (isLoading) return;\n\n        // Redirect to login if user is not authenticated\n        if (!user) {\n            router.push('/login');\n            return;\n        }\n\n        // Check permission for current route\n        const hasAccess = checkRoutePermission();\n        if (!hasAccess) {\n            console.warn('Access denied: Insufficient permissions');\n            router.push('/dashboard');\n        }\n    }, [user, isLoading, router, checkRoutePermission]);\n\n    // Show nothing while checking authentication or permissions\n    if (isLoading || !user) {\n        return (\n            <div className=\"flex items-center justify-center min-h-screen\">\n                <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary\"></div>\n            </div>\n        );\n    }\n\n    // Render children if user has necessary permissions\n    return <>{children}</>;\n}"],"mappings":"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","ignoreList":[]}