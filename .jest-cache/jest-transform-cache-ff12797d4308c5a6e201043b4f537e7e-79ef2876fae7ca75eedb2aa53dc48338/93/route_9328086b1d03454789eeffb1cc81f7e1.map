{"version":3,"names":["cov_iag3t2ub8","actualCoverage","s","POST","req","f","data","json","invoiceId","b","_server","NextResponse","success","message","status","_smsService","smsService","init","isConfigured","response","sendInvoiceNotification","error","console"],"sources":["/Users/sachin/Documents/md-sports-/src/app/api/sms/invoice/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport { requirePermission } from '@/lib/utils/middleware';\nimport { smsService } from '@/services/smsService';\n\n// POST: Send an invoice notification\nexport async function POST(req: NextRequest) {\n    try {\n        const data = await req.json();\n        const { invoiceId } = data;\n\n        // Validate input\n        if (!invoiceId) {\n            return NextResponse.json(\n                { success: false, message: 'Invoice ID is required' },\n                { status: 400 }\n            );\n        }\n\n        // Initialize SMS service if needed\n        await smsService.init();\n\n        // Check if SMS service is configured\n        if (!smsService.isConfigured()) {\n            return NextResponse.json(\n                { success: false, message: 'SMS service is not configured or is disabled' },\n                { status: 400 }\n            );\n        }\n\n        // Send invoice notification\n        const response = await smsService.sendInvoiceNotification(invoiceId);\n\n        if (response.status >= 200 && response.status < 300) {\n            return NextResponse.json({\n                success: true,\n                message: 'Invoice notification sent successfully',\n                data: response.data\n            });\n        } else {\n            return NextResponse.json(\n                { success: false, message: response.message },\n                { status: response.status }\n            );\n        }\n    } catch (error) {\n        console.error('Error sending invoice notification:', error);\n        return NextResponse.json(\n            { success: false, message: 'Failed to send invoice notification' },\n            { status: 500 }\n        );\n    }\n} "],"mappings":"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","ignoreList":[]}