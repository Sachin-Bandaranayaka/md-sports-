a75a256eb75d8a9957bd8f3399c4a62a
// Fixed Purchase Invoices Integration Test Suite
// This file contains the corrected version of purchaseInvoices.test.ts
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _globals = require("@jest/globals");
const _client = require("@prisma/client");
const _http = require("http");
const _express = /*#__PURE__*/ _interop_require_default(require("express"));
const _prisma = /*#__PURE__*/ _interop_require_default(require("../../src/lib/prisma"));
const _purchaseInvoiceService = require("../../src/services/purchaseInvoiceService");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Create a proper test database instance
const testPrisma = new _client.PrismaClient({
    datasources: {
        db: {
            url: process.env.TEST_DATABASE_URL || process.env.DATABASE_URL
        }
    }
});
// Mock the prisma import to use our test instance
_globals.jest.mock("@/lib/prisma", ()=>({
        __esModule: true,
        default: testPrisma
    }));
describe("Purchase Invoices Integration Tests", ()=>{
    let app;
    let server;
    let purchaseInvoiceService;
    // Test data
    let testSupplier;
    let testProduct;
    let testUser;
    let testCategory;
    beforeAll(async ()=>{
        // Setup Express app for API testing
        app = (0, _express.default)();
        app.use(_express.default.json());
        // Setup test server
        server = (0, _http.createServer)(app);
        // Initialize service
        purchaseInvoiceService = new _purchaseInvoiceService.PurchaseInvoiceService();
        // Connect to test database
        try {
            await _prisma.default.$connect();
            console.log("Connected to test database");
        } catch (error) {
            console.error("Failed to connect to test database:", error);
            throw error;
        }
    });
    beforeEach(async ()=>{
        // Clean up database before each test
        try {
            // Delete in correct order to respect foreign key constraints
            await _prisma.default.purchaseInvoiceItem.deleteMany({});
            await _prisma.default.purchaseInvoice.deleteMany({});
            await _prisma.default.inventoryItem.deleteMany({});
            await _prisma.default.product.deleteMany({});
            await _prisma.default.category.deleteMany({});
            await _prisma.default.supplier.deleteMany({});
            await _prisma.default.user.deleteMany({});
            console.log("Database cleaned up successfully");
        } catch (error) {
            console.warn("Cleanup warning:", error.message);
        // Continue with test setup even if cleanup fails
        }
        // Create test data
        try {
            // Create test category
            testCategory = await _prisma.default.category.create({
                data: {
                    name: "Test Category",
                    description: "Category for testing"
                }
            });
            // Create test user
            testUser = await _prisma.default.user.create({
                data: {
                    email: "test@example.com",
                    password: "hashed-password",
                    role: "ADMIN",
                    isActive: true
                }
            });
            // Create test supplier
            testSupplier = await _prisma.default.supplier.create({
                data: {
                    name: "Test Supplier",
                    email: "supplier@example.com",
                    phone: "1234567890",
                    address: "123 Test Street",
                    isActive: true
                }
            });
            // Create test product
            testProduct = await _prisma.default.product.create({
                data: {
                    name: "Test Product",
                    sku: "TEST-001",
                    price: 99.99,
                    cost: 50.00,
                    categoryId: testCategory.id,
                    status: _client.ProductStatus.ACTIVE,
                    description: "Test product for purchase invoice testing"
                }
            });
            console.log("Test data created successfully");
        } catch (error) {
            console.error("Failed to create test data:", error);
            throw error;
        }
    });
    afterEach(async ()=>{
        // Clean up after each test
        try {
            await _prisma.default.purchaseInvoiceItem.deleteMany({});
            await _prisma.default.purchaseInvoice.deleteMany({});
            await _prisma.default.inventoryItem.deleteMany({});
            await _prisma.default.product.deleteMany({});
            await _prisma.default.category.deleteMany({});
            await _prisma.default.supplier.deleteMany({});
            await _prisma.default.user.deleteMany({});
        } catch (error) {
            console.warn("Cleanup error:", error.message);
        }
    });
    afterAll(async ()=>{
        // Final cleanup and disconnect
        try {
            await _prisma.default.purchaseInvoiceItem.deleteMany({});
            await _prisma.default.purchaseInvoice.deleteMany({});
            await _prisma.default.inventoryItem.deleteMany({});
            await _prisma.default.product.deleteMany({});
            await _prisma.default.category.deleteMany({});
            await _prisma.default.supplier.deleteMany({});
            await _prisma.default.user.deleteMany({});
        } catch (error) {
            console.warn("Final cleanup error:", error.message);
        } finally{
            await _prisma.default.$disconnect();
            console.log("Disconnected from test database");
        }
        // Close server
        if (server) {
            server.close();
        }
    });
    describe("Purchase Invoice Creation", ()=>{
        it("should create a purchase invoice successfully", async ()=>{
            // Arrange
            const invoiceData = {
                supplierId: testSupplier.id,
                invoiceNumber: "PI-001",
                invoiceDate: new Date(),
                dueDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),
                status: _client.PurchaseInvoiceStatus.PENDING,
                subtotal: 500.00,
                taxAmount: 50.00,
                totalAmount: 550.00,
                notes: "Test purchase invoice",
                createdBy: testUser.id
            };
            // Act
            const result = await purchaseInvoiceService.createPurchaseInvoice(invoiceData);
            // Assert
            expect(result).toBeDefined();
            expect(result.id).toBeDefined();
            expect(result.invoiceNumber).toBe("PI-001");
            expect(result.supplierId).toBe(testSupplier.id);
            expect(result.status).toBe(_client.PurchaseInvoiceStatus.PENDING);
            expect(result.totalAmount).toBe(550.00);
            // Verify in database
            const dbInvoice = await _prisma.default.purchaseInvoice.findUnique({
                where: {
                    id: result.id
                }
            });
            expect(dbInvoice).toBeDefined();
            expect(dbInvoice?.invoiceNumber).toBe("PI-001");
        });
        it("should create purchase invoice with items", async ()=>{
            // Arrange
            const invoiceData = {
                supplierId: testSupplier.id,
                invoiceNumber: "PI-002",
                invoiceDate: new Date(),
                dueDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),
                status: _client.PurchaseInvoiceStatus.PENDING,
                createdBy: testUser.id,
                items: [
                    {
                        productId: testProduct.id,
                        quantity: 10,
                        unitCost: 50.00,
                        totalCost: 500.00
                    }
                ]
            };
            // Act
            const result = await purchaseInvoiceService.createPurchaseInvoiceWithItems(invoiceData);
            // Assert
            expect(result).toBeDefined();
            expect(result.id).toBeDefined();
            // Verify items were created
            const invoiceItems = await _prisma.default.purchaseInvoiceItem.findMany({
                where: {
                    purchaseInvoiceId: result.id
                }
            });
            expect(invoiceItems).toHaveLength(1);
            expect(invoiceItems[0].productId).toBe(testProduct.id);
            expect(invoiceItems[0].quantity).toBe(10);
            expect(invoiceItems[0].unitCost).toBe(50.00);
        });
        it("should validate required fields", async ()=>{
            // Arrange
            const invalidData = {
                // Missing required fields
                invoiceNumber: "PI-003"
            };
            // Act & Assert
            await expect(purchaseInvoiceService.createPurchaseInvoice(invalidData)).rejects.toThrow();
        });
        it("should prevent duplicate invoice numbers", async ()=>{
            // Arrange
            const invoiceData1 = {
                supplierId: testSupplier.id,
                invoiceNumber: "PI-DUPLICATE",
                invoiceDate: new Date(),
                dueDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),
                status: _client.PurchaseInvoiceStatus.PENDING,
                subtotal: 100.00,
                totalAmount: 100.00,
                createdBy: testUser.id
            };
            const invoiceData2 = {
                ...invoiceData1
            };
            // Act
            await purchaseInvoiceService.createPurchaseInvoice(invoiceData1);
            // Assert
            await expect(purchaseInvoiceService.createPurchaseInvoice(invoiceData2)).rejects.toThrow(/unique constraint/i);
        });
    });
    describe("Purchase Invoice Retrieval", ()=>{
        let testInvoice;
        beforeEach(async ()=>{
            // Create a test invoice for retrieval tests
            testInvoice = await _prisma.default.purchaseInvoice.create({
                data: {
                    supplierId: testSupplier.id,
                    invoiceNumber: "PI-RETRIEVE-001",
                    invoiceDate: new Date(),
                    dueDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),
                    status: _client.PurchaseInvoiceStatus.PENDING,
                    subtotal: 200.00,
                    taxAmount: 20.00,
                    totalAmount: 220.00,
                    createdBy: testUser.id
                }
            });
        });
        it("should retrieve purchase invoice by ID", async ()=>{
            // Act
            const result = await purchaseInvoiceService.getPurchaseInvoiceById(testInvoice.id);
            // Assert
            expect(result).toBeDefined();
            expect(result?.id).toBe(testInvoice.id);
            expect(result?.invoiceNumber).toBe("PI-RETRIEVE-001");
            expect(result?.totalAmount).toBe(220.00);
        });
        it("should retrieve purchase invoice with supplier details", async ()=>{
            // Act
            const result = await purchaseInvoiceService.getPurchaseInvoiceWithDetails(testInvoice.id);
            // Assert
            expect(result).toBeDefined();
            expect(result?.supplier).toBeDefined();
            expect(result?.supplier.name).toBe("Test Supplier");
        });
        it("should return null for non-existent invoice", async ()=>{
            // Act
            const result = await purchaseInvoiceService.getPurchaseInvoiceById(99999);
            // Assert
            expect(result).toBeNull();
        });
        it("should retrieve all purchase invoices with pagination", async ()=>{
            // Arrange - Create additional invoices
            await _prisma.default.purchaseInvoice.createMany({
                data: [
                    {
                        supplierId: testSupplier.id,
                        invoiceNumber: "PI-PAGE-001",
                        invoiceDate: new Date(),
                        dueDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),
                        status: _client.PurchaseInvoiceStatus.PENDING,
                        subtotal: 100.00,
                        totalAmount: 100.00,
                        createdBy: testUser.id
                    },
                    {
                        supplierId: testSupplier.id,
                        invoiceNumber: "PI-PAGE-002",
                        invoiceDate: new Date(),
                        dueDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),
                        status: _client.PurchaseInvoiceStatus.PENDING,
                        subtotal: 150.00,
                        totalAmount: 150.00,
                        createdBy: testUser.id
                    }
                ]
            });
            // Act
            const result = await purchaseInvoiceService.getPurchaseInvoices({
                page: 1,
                limit: 2
            });
            // Assert
            expect(result.invoices).toHaveLength(2);
            expect(result.total).toBeGreaterThanOrEqual(3);
            expect(result.page).toBe(1);
            expect(result.limit).toBe(2);
        });
    });
    describe("Purchase Invoice Updates", ()=>{
        let testInvoice;
        beforeEach(async ()=>{
            testInvoice = await _prisma.default.purchaseInvoice.create({
                data: {
                    supplierId: testSupplier.id,
                    invoiceNumber: "PI-UPDATE-001",
                    invoiceDate: new Date(),
                    dueDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),
                    status: _client.PurchaseInvoiceStatus.PENDING,
                    subtotal: 300.00,
                    totalAmount: 300.00,
                    createdBy: testUser.id
                }
            });
        });
        it("should update purchase invoice status", async ()=>{
            // Act
            const result = await purchaseInvoiceService.updatePurchaseInvoiceStatus(testInvoice.id, _client.PurchaseInvoiceStatus.APPROVED);
            // Assert
            expect(result.status).toBe(_client.PurchaseInvoiceStatus.APPROVED);
            // Verify in database
            const dbInvoice = await _prisma.default.purchaseInvoice.findUnique({
                where: {
                    id: testInvoice.id
                }
            });
            expect(dbInvoice?.status).toBe(_client.PurchaseInvoiceStatus.APPROVED);
        });
        it("should update purchase invoice details", async ()=>{
            // Arrange
            const updateData = {
                notes: "Updated notes",
                subtotal: 350.00,
                taxAmount: 35.00,
                totalAmount: 385.00
            };
            // Act
            const result = await purchaseInvoiceService.updatePurchaseInvoice(testInvoice.id, updateData);
            // Assert
            expect(result.notes).toBe("Updated notes");
            expect(result.totalAmount).toBe(385.00);
        });
        it("should prevent updating approved invoices", async ()=>{
            // Arrange - First approve the invoice
            await purchaseInvoiceService.updatePurchaseInvoiceStatus(testInvoice.id, _client.PurchaseInvoiceStatus.APPROVED);
            // Act & Assert
            await expect(purchaseInvoiceService.updatePurchaseInvoice(testInvoice.id, {
                notes: "Should not be allowed"
            })).rejects.toThrow(/cannot be modified/i);
        });
    });
    describe("Purchase Invoice Deletion", ()=>{
        let testInvoice;
        beforeEach(async ()=>{
            testInvoice = await _prisma.default.purchaseInvoice.create({
                data: {
                    supplierId: testSupplier.id,
                    invoiceNumber: "PI-DELETE-001",
                    invoiceDate: new Date(),
                    dueDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),
                    status: _client.PurchaseInvoiceStatus.PENDING,
                    subtotal: 100.00,
                    totalAmount: 100.00,
                    createdBy: testUser.id
                }
            });
        });
        it("should soft delete purchase invoice", async ()=>{
            // Act
            const result = await purchaseInvoiceService.deletePurchaseInvoice(testInvoice.id);
            // Assert
            expect(result).toBe(true);
            // Verify soft deletion
            const dbInvoice = await _prisma.default.purchaseInvoice.findUnique({
                where: {
                    id: testInvoice.id
                }
            });
            expect(dbInvoice?.isDeleted).toBe(true);
        });
        it("should prevent deletion of approved invoices", async ()=>{
            // Arrange
            await purchaseInvoiceService.updatePurchaseInvoiceStatus(testInvoice.id, _client.PurchaseInvoiceStatus.APPROVED);
            // Act & Assert
            await expect(purchaseInvoiceService.deletePurchaseInvoice(testInvoice.id)).rejects.toThrow(/cannot be deleted/i);
        });
    });
    describe("Purchase Invoice Search and Filtering", ()=>{
        beforeEach(async ()=>{
            // Create multiple test invoices with different statuses and dates
            await _prisma.default.purchaseInvoice.createMany({
                data: [
                    {
                        supplierId: testSupplier.id,
                        invoiceNumber: "PI-SEARCH-001",
                        invoiceDate: new Date("2024-01-01"),
                        dueDate: new Date("2024-01-31"),
                        status: _client.PurchaseInvoiceStatus.PENDING,
                        subtotal: 100.00,
                        totalAmount: 100.00,
                        createdBy: testUser.id
                    },
                    {
                        supplierId: testSupplier.id,
                        invoiceNumber: "PI-SEARCH-002",
                        invoiceDate: new Date("2024-02-01"),
                        dueDate: new Date("2024-02-28"),
                        status: _client.PurchaseInvoiceStatus.APPROVED,
                        subtotal: 200.00,
                        totalAmount: 200.00,
                        createdBy: testUser.id
                    },
                    {
                        supplierId: testSupplier.id,
                        invoiceNumber: "PI-SEARCH-003",
                        invoiceDate: new Date("2024-03-01"),
                        dueDate: new Date("2024-03-31"),
                        status: _client.PurchaseInvoiceStatus.PAID,
                        subtotal: 300.00,
                        totalAmount: 300.00,
                        createdBy: testUser.id
                    }
                ]
            });
        });
        it("should search invoices by invoice number", async ()=>{
            // Act
            const result = await purchaseInvoiceService.searchPurchaseInvoices({
                invoiceNumber: "PI-SEARCH-002"
            });
            // Assert
            expect(result).toHaveLength(1);
            expect(result[0].invoiceNumber).toBe("PI-SEARCH-002");
        });
        it("should filter invoices by status", async ()=>{
            // Act
            const result = await purchaseInvoiceService.searchPurchaseInvoices({
                status: _client.PurchaseInvoiceStatus.APPROVED
            });
            // Assert
            expect(result).toHaveLength(1);
            expect(result[0].status).toBe(_client.PurchaseInvoiceStatus.APPROVED);
        });
        it("should filter invoices by date range", async ()=>{
            // Act
            const result = await purchaseInvoiceService.searchPurchaseInvoices({
                dateFrom: new Date("2024-02-01"),
                dateTo: new Date("2024-03-31")
            });
            // Assert
            expect(result).toHaveLength(2);
            expect(result.every((invoice)=>invoice.invoiceDate >= new Date("2024-02-01") && invoice.invoiceDate <= new Date("2024-03-31"))).toBe(true);
        });
        it("should filter invoices by supplier", async ()=>{
            // Act
            const result = await purchaseInvoiceService.searchPurchaseInvoices({
                supplierId: testSupplier.id
            });
            // Assert
            expect(result.length).toBeGreaterThanOrEqual(3);
            expect(result.every((invoice)=>invoice.supplierId === testSupplier.id)).toBe(true);
        });
    });
    describe("Purchase Invoice Business Logic", ()=>{
        it("should calculate totals correctly", async ()=>{
            // Arrange
            const invoiceData = {
                supplierId: testSupplier.id,
                invoiceNumber: "PI-CALC-001",
                invoiceDate: new Date(),
                dueDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),
                status: _client.PurchaseInvoiceStatus.PENDING,
                createdBy: testUser.id,
                items: [
                    {
                        productId: testProduct.id,
                        quantity: 5,
                        unitCost: 20.00,
                        totalCost: 100.00
                    },
                    {
                        productId: testProduct.id,
                        quantity: 3,
                        unitCost: 30.00,
                        totalCost: 90.00
                    }
                ],
                taxRate: 0.10 // 10% tax
            };
            // Act
            const result = await purchaseInvoiceService.createPurchaseInvoiceWithCalculations(invoiceData);
            // Assert
            expect(result.subtotal).toBe(190.00); // 100 + 90
            expect(result.taxAmount).toBe(19.00); // 190 * 0.10
            expect(result.totalAmount).toBe(209.00); // 190 + 19
        });
        it("should update inventory when invoice is approved", async ()=>{
            // Arrange
            const invoice = await _prisma.default.purchaseInvoice.create({
                data: {
                    supplierId: testSupplier.id,
                    invoiceNumber: "PI-INVENTORY-001",
                    invoiceDate: new Date(),
                    dueDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),
                    status: _client.PurchaseInvoiceStatus.PENDING,
                    subtotal: 500.00,
                    totalAmount: 500.00,
                    createdBy: testUser.id
                }
            });
            await _prisma.default.purchaseInvoiceItem.create({
                data: {
                    purchaseInvoiceId: invoice.id,
                    productId: testProduct.id,
                    quantity: 10,
                    unitCost: 50.00,
                    totalCost: 500.00
                }
            });
            // Act
            await purchaseInvoiceService.approvePurchaseInvoice(invoice.id);
            // Assert
            const inventoryItems = await _prisma.default.inventoryItem.findMany({
                where: {
                    productId: testProduct.id
                }
            });
            expect(inventoryItems).toHaveLength(1);
            expect(inventoryItems[0].quantity).toBe(10);
            expect(inventoryItems[0].unitCost).toBe(50.00);
        });
    });
    describe("Error Handling and Edge Cases", ()=>{
        it("should handle concurrent invoice creation", async ()=>{
            // Arrange
            const invoiceData = {
                supplierId: testSupplier.id,
                invoiceNumber: "PI-CONCURRENT-001",
                invoiceDate: new Date(),
                dueDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),
                status: _client.PurchaseInvoiceStatus.PENDING,
                subtotal: 100.00,
                totalAmount: 100.00,
                createdBy: testUser.id
            };
            // Act - Create multiple invoices concurrently
            const promises = Array(3).fill(null).map((_, index)=>purchaseInvoiceService.createPurchaseInvoice({
                    ...invoiceData,
                    invoiceNumber: `PI-CONCURRENT-${index + 1}`
                }));
            const results = await Promise.allSettled(promises);
            // Assert
            const successful = results.filter((r)=>r.status === "fulfilled");
            expect(successful).toHaveLength(3);
        });
        it("should handle invalid product references", async ()=>{
            // Arrange
            const invoiceData = {
                supplierId: testSupplier.id,
                invoiceNumber: "PI-INVALID-001",
                invoiceDate: new Date(),
                dueDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),
                status: _client.PurchaseInvoiceStatus.PENDING,
                createdBy: testUser.id,
                items: [
                    {
                        productId: 99999,
                        quantity: 1,
                        unitCost: 10.00,
                        totalCost: 10.00
                    }
                ]
            };
            // Act & Assert
            await expect(purchaseInvoiceService.createPurchaseInvoiceWithItems(invoiceData)).rejects.toThrow();
        });
        it("should handle database transaction failures", async ()=>{
            // This test would require more sophisticated mocking to simulate transaction failures
            // For now, we'll test that the service handles basic validation errors
            // Arrange
            const invalidData = {
                // Missing required supplierId
                invoiceNumber: "PI-INVALID-002",
                invoiceDate: new Date(),
                status: _client.PurchaseInvoiceStatus.PENDING
            };
            // Act & Assert
            await expect(purchaseInvoiceService.createPurchaseInvoice(invalidData)).rejects.toThrow();
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zYWNoaW4vRG9jdW1lbnRzL21kLXNwb3J0cy0vdGVzdHMvaW50ZWdyYXRpb24vcHVyY2hhc2VJbnZvaWNlcy50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEZpeGVkIFB1cmNoYXNlIEludm9pY2VzIEludGVncmF0aW9uIFRlc3QgU3VpdGVcbi8vIFRoaXMgZmlsZSBjb250YWlucyB0aGUgY29ycmVjdGVkIHZlcnNpb24gb2YgcHVyY2hhc2VJbnZvaWNlcy50ZXN0LnRzXG5cbmltcG9ydCB7IGplc3QgfSBmcm9tICdAamVzdC9nbG9iYWxzJztcbmltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcbmltcG9ydCByZXF1ZXN0IGZyb20gJ3N1cGVydGVzdCc7XG5pbXBvcnQgeyBjcmVhdGVTZXJ2ZXIgfSBmcm9tICdodHRwJztcbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuXG4vLyBDcmVhdGUgYSBwcm9wZXIgdGVzdCBkYXRhYmFzZSBpbnN0YW5jZVxuY29uc3QgdGVzdFByaXNtYSA9IG5ldyBQcmlzbWFDbGllbnQoe1xuICBkYXRhc291cmNlczoge1xuICAgIGRiOiB7XG4gICAgICB1cmw6IHByb2Nlc3MuZW52LlRFU1RfREFUQUJBU0VfVVJMIHx8IHByb2Nlc3MuZW52LkRBVEFCQVNFX1VSTFxuICAgIH1cbiAgfVxufSk7XG5cbi8vIE1vY2sgdGhlIHByaXNtYSBpbXBvcnQgdG8gdXNlIG91ciB0ZXN0IGluc3RhbmNlXG5qZXN0Lm1vY2soJ0AvbGliL3ByaXNtYScsICgpID0+ICh7XG4gIF9fZXNNb2R1bGU6IHRydWUsXG4gIGRlZmF1bHQ6IHRlc3RQcmlzbWEsXG59KSk7XG5cbi8vIEltcG9ydCBhZnRlciBtb2NraW5nXG5pbXBvcnQgcHJpc21hIGZyb20gJ0AvbGliL3ByaXNtYSc7XG5pbXBvcnQgeyBQdXJjaGFzZUludm9pY2VTZXJ2aWNlIH0gZnJvbSAnQC9zZXJ2aWNlcy9wdXJjaGFzZUludm9pY2VTZXJ2aWNlJztcbmltcG9ydCB7IFByb2R1Y3RTdGF0dXMsIFB1cmNoYXNlSW52b2ljZVN0YXR1cyB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcblxuZGVzY3JpYmUoJ1B1cmNoYXNlIEludm9pY2VzIEludGVncmF0aW9uIFRlc3RzJywgKCkgPT4ge1xuICBsZXQgYXBwOiBleHByZXNzLkFwcGxpY2F0aW9uO1xuICBsZXQgc2VydmVyOiBhbnk7XG4gIGxldCBwdXJjaGFzZUludm9pY2VTZXJ2aWNlOiBQdXJjaGFzZUludm9pY2VTZXJ2aWNlO1xuICBcbiAgLy8gVGVzdCBkYXRhXG4gIGxldCB0ZXN0U3VwcGxpZXI6IGFueTtcbiAgbGV0IHRlc3RQcm9kdWN0OiBhbnk7XG4gIGxldCB0ZXN0VXNlcjogYW55O1xuICBsZXQgdGVzdENhdGVnb3J5OiBhbnk7XG5cbiAgYmVmb3JlQWxsKGFzeW5jICgpID0+IHtcbiAgICAvLyBTZXR1cCBFeHByZXNzIGFwcCBmb3IgQVBJIHRlc3RpbmdcbiAgICBhcHAgPSBleHByZXNzKCk7XG4gICAgYXBwLnVzZShleHByZXNzLmpzb24oKSk7XG4gICAgXG4gICAgLy8gU2V0dXAgdGVzdCBzZXJ2ZXJcbiAgICBzZXJ2ZXIgPSBjcmVhdGVTZXJ2ZXIoYXBwKTtcbiAgICBcbiAgICAvLyBJbml0aWFsaXplIHNlcnZpY2VcbiAgICBwdXJjaGFzZUludm9pY2VTZXJ2aWNlID0gbmV3IFB1cmNoYXNlSW52b2ljZVNlcnZpY2UoKTtcbiAgICBcbiAgICAvLyBDb25uZWN0IHRvIHRlc3QgZGF0YWJhc2VcbiAgICB0cnkge1xuICAgICAgYXdhaXQgcHJpc21hLiRjb25uZWN0KCk7XG4gICAgICBjb25zb2xlLmxvZygnQ29ubmVjdGVkIHRvIHRlc3QgZGF0YWJhc2UnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNvbm5lY3QgdG8gdGVzdCBkYXRhYmFzZTonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH0pO1xuXG4gIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgIC8vIENsZWFuIHVwIGRhdGFiYXNlIGJlZm9yZSBlYWNoIHRlc3RcbiAgICB0cnkge1xuICAgICAgLy8gRGVsZXRlIGluIGNvcnJlY3Qgb3JkZXIgdG8gcmVzcGVjdCBmb3JlaWduIGtleSBjb25zdHJhaW50c1xuICAgICAgYXdhaXQgcHJpc21hLnB1cmNoYXNlSW52b2ljZUl0ZW0uZGVsZXRlTWFueSh7fSk7XG4gICAgICBhd2FpdCBwcmlzbWEucHVyY2hhc2VJbnZvaWNlLmRlbGV0ZU1hbnkoe30pO1xuICAgICAgYXdhaXQgcHJpc21hLmludmVudG9yeUl0ZW0uZGVsZXRlTWFueSh7fSk7XG4gICAgICBhd2FpdCBwcmlzbWEucHJvZHVjdC5kZWxldGVNYW55KHt9KTtcbiAgICAgIGF3YWl0IHByaXNtYS5jYXRlZ29yeS5kZWxldGVNYW55KHt9KTtcbiAgICAgIGF3YWl0IHByaXNtYS5zdXBwbGllci5kZWxldGVNYW55KHt9KTtcbiAgICAgIGF3YWl0IHByaXNtYS51c2VyLmRlbGV0ZU1hbnkoe30pO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnRGF0YWJhc2UgY2xlYW5lZCB1cCBzdWNjZXNzZnVsbHknKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCdDbGVhbnVwIHdhcm5pbmc6JywgZXJyb3IubWVzc2FnZSk7XG4gICAgICAvLyBDb250aW51ZSB3aXRoIHRlc3Qgc2V0dXAgZXZlbiBpZiBjbGVhbnVwIGZhaWxzXG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIHRlc3QgZGF0YVxuICAgIHRyeSB7XG4gICAgICAvLyBDcmVhdGUgdGVzdCBjYXRlZ29yeVxuICAgICAgdGVzdENhdGVnb3J5ID0gYXdhaXQgcHJpc21hLmNhdGVnb3J5LmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBuYW1lOiAnVGVzdCBDYXRlZ29yeScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdDYXRlZ29yeSBmb3IgdGVzdGluZydcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIENyZWF0ZSB0ZXN0IHVzZXJcbiAgICAgIHRlc3RVc2VyID0gYXdhaXQgcHJpc21hLnVzZXIuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGVtYWlsOiAndGVzdEBleGFtcGxlLmNvbScsXG4gICAgICAgICAgcGFzc3dvcmQ6ICdoYXNoZWQtcGFzc3dvcmQnLFxuICAgICAgICAgIHJvbGU6ICdBRE1JTicsXG4gICAgICAgICAgaXNBY3RpdmU6IHRydWVcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIENyZWF0ZSB0ZXN0IHN1cHBsaWVyXG4gICAgICB0ZXN0U3VwcGxpZXIgPSBhd2FpdCBwcmlzbWEuc3VwcGxpZXIuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIG5hbWU6ICdUZXN0IFN1cHBsaWVyJyxcbiAgICAgICAgICBlbWFpbDogJ3N1cHBsaWVyQGV4YW1wbGUuY29tJyxcbiAgICAgICAgICBwaG9uZTogJzEyMzQ1Njc4OTAnLFxuICAgICAgICAgIGFkZHJlc3M6ICcxMjMgVGVzdCBTdHJlZXQnLFxuICAgICAgICAgIGlzQWN0aXZlOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBDcmVhdGUgdGVzdCBwcm9kdWN0XG4gICAgICB0ZXN0UHJvZHVjdCA9IGF3YWl0IHByaXNtYS5wcm9kdWN0LmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBuYW1lOiAnVGVzdCBQcm9kdWN0JyxcbiAgICAgICAgICBza3U6ICdURVNULTAwMScsXG4gICAgICAgICAgcHJpY2U6IDk5Ljk5LFxuICAgICAgICAgIGNvc3Q6IDUwLjAwLFxuICAgICAgICAgIGNhdGVnb3J5SWQ6IHRlc3RDYXRlZ29yeS5pZCxcbiAgICAgICAgICBzdGF0dXM6IFByb2R1Y3RTdGF0dXMuQUNUSVZFLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVGVzdCBwcm9kdWN0IGZvciBwdXJjaGFzZSBpbnZvaWNlIHRlc3RpbmcnXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBjb25zb2xlLmxvZygnVGVzdCBkYXRhIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgdGVzdCBkYXRhOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGFzeW5jICgpID0+IHtcbiAgICAvLyBDbGVhbiB1cCBhZnRlciBlYWNoIHRlc3RcbiAgICB0cnkge1xuICAgICAgYXdhaXQgcHJpc21hLnB1cmNoYXNlSW52b2ljZUl0ZW0uZGVsZXRlTWFueSh7fSk7XG4gICAgICBhd2FpdCBwcmlzbWEucHVyY2hhc2VJbnZvaWNlLmRlbGV0ZU1hbnkoe30pO1xuICAgICAgYXdhaXQgcHJpc21hLmludmVudG9yeUl0ZW0uZGVsZXRlTWFueSh7fSk7XG4gICAgICBhd2FpdCBwcmlzbWEucHJvZHVjdC5kZWxldGVNYW55KHt9KTtcbiAgICAgIGF3YWl0IHByaXNtYS5jYXRlZ29yeS5kZWxldGVNYW55KHt9KTtcbiAgICAgIGF3YWl0IHByaXNtYS5zdXBwbGllci5kZWxldGVNYW55KHt9KTtcbiAgICAgIGF3YWl0IHByaXNtYS51c2VyLmRlbGV0ZU1hbnkoe30pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0NsZWFudXAgZXJyb3I6JywgZXJyb3IubWVzc2FnZSk7XG4gICAgfVxuICB9KTtcblxuICBhZnRlckFsbChhc3luYyAoKSA9PiB7XG4gICAgLy8gRmluYWwgY2xlYW51cCBhbmQgZGlzY29ubmVjdFxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBwcmlzbWEucHVyY2hhc2VJbnZvaWNlSXRlbS5kZWxldGVNYW55KHt9KTtcbiAgICAgIGF3YWl0IHByaXNtYS5wdXJjaGFzZUludm9pY2UuZGVsZXRlTWFueSh7fSk7XG4gICAgICBhd2FpdCBwcmlzbWEuaW52ZW50b3J5SXRlbS5kZWxldGVNYW55KHt9KTtcbiAgICAgIGF3YWl0IHByaXNtYS5wcm9kdWN0LmRlbGV0ZU1hbnkoe30pO1xuICAgICAgYXdhaXQgcHJpc21hLmNhdGVnb3J5LmRlbGV0ZU1hbnkoe30pO1xuICAgICAgYXdhaXQgcHJpc21hLnN1cHBsaWVyLmRlbGV0ZU1hbnkoe30pO1xuICAgICAgYXdhaXQgcHJpc21hLnVzZXIuZGVsZXRlTWFueSh7fSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybignRmluYWwgY2xlYW51cCBlcnJvcjonLCBlcnJvci5tZXNzYWdlKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgYXdhaXQgcHJpc21hLiRkaXNjb25uZWN0KCk7XG4gICAgICBjb25zb2xlLmxvZygnRGlzY29ubmVjdGVkIGZyb20gdGVzdCBkYXRhYmFzZScpO1xuICAgIH1cbiAgICBcbiAgICAvLyBDbG9zZSBzZXJ2ZXJcbiAgICBpZiAoc2VydmVyKSB7XG4gICAgICBzZXJ2ZXIuY2xvc2UoKTtcbiAgICB9XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQdXJjaGFzZSBJbnZvaWNlIENyZWF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY3JlYXRlIGEgcHVyY2hhc2UgaW52b2ljZSBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBpbnZvaWNlRGF0YSA9IHtcbiAgICAgICAgc3VwcGxpZXJJZDogdGVzdFN1cHBsaWVyLmlkLFxuICAgICAgICBpbnZvaWNlTnVtYmVyOiAnUEktMDAxJyxcbiAgICAgICAgaW52b2ljZURhdGU6IG5ldyBEYXRlKCksXG4gICAgICAgIGR1ZURhdGU6IG5ldyBEYXRlKERhdGUubm93KCkgKyAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApLCAvLyAzMCBkYXlzIGZyb20gbm93XG4gICAgICAgIHN0YXR1czogUHVyY2hhc2VJbnZvaWNlU3RhdHVzLlBFTkRJTkcsXG4gICAgICAgIHN1YnRvdGFsOiA1MDAuMDAsXG4gICAgICAgIHRheEFtb3VudDogNTAuMDAsXG4gICAgICAgIHRvdGFsQW1vdW50OiA1NTAuMDAsXG4gICAgICAgIG5vdGVzOiAnVGVzdCBwdXJjaGFzZSBpbnZvaWNlJyxcbiAgICAgICAgY3JlYXRlZEJ5OiB0ZXN0VXNlci5pZFxuICAgICAgfTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwdXJjaGFzZUludm9pY2VTZXJ2aWNlLmNyZWF0ZVB1cmNoYXNlSW52b2ljZShpbnZvaWNlRGF0YSk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuaWQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVzdWx0Lmludm9pY2VOdW1iZXIpLnRvQmUoJ1BJLTAwMScpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5zdXBwbGllcklkKS50b0JlKHRlc3RTdXBwbGllci5pZCk7XG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1cykudG9CZShQdXJjaGFzZUludm9pY2VTdGF0dXMuUEVORElORyk7XG4gICAgICBleHBlY3QocmVzdWx0LnRvdGFsQW1vdW50KS50b0JlKDU1MC4wMCk7XG5cbiAgICAgIC8vIFZlcmlmeSBpbiBkYXRhYmFzZVxuICAgICAgY29uc3QgZGJJbnZvaWNlID0gYXdhaXQgcHJpc21hLnB1cmNoYXNlSW52b2ljZS5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IHJlc3VsdC5pZCB9XG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChkYkludm9pY2UpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoZGJJbnZvaWNlPy5pbnZvaWNlTnVtYmVyKS50b0JlKCdQSS0wMDEnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY3JlYXRlIHB1cmNoYXNlIGludm9pY2Ugd2l0aCBpdGVtcycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGludm9pY2VEYXRhID0ge1xuICAgICAgICBzdXBwbGllcklkOiB0ZXN0U3VwcGxpZXIuaWQsXG4gICAgICAgIGludm9pY2VOdW1iZXI6ICdQSS0wMDInLFxuICAgICAgICBpbnZvaWNlRGF0ZTogbmV3IERhdGUoKSxcbiAgICAgICAgZHVlRGF0ZTogbmV3IERhdGUoRGF0ZS5ub3coKSArIDMwICogMjQgKiA2MCAqIDYwICogMTAwMCksXG4gICAgICAgIHN0YXR1czogUHVyY2hhc2VJbnZvaWNlU3RhdHVzLlBFTkRJTkcsXG4gICAgICAgIGNyZWF0ZWRCeTogdGVzdFVzZXIuaWQsXG4gICAgICAgIGl0ZW1zOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgcHJvZHVjdElkOiB0ZXN0UHJvZHVjdC5pZCxcbiAgICAgICAgICAgIHF1YW50aXR5OiAxMCxcbiAgICAgICAgICAgIHVuaXRDb3N0OiA1MC4wMCxcbiAgICAgICAgICAgIHRvdGFsQ29zdDogNTAwLjAwXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9O1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHB1cmNoYXNlSW52b2ljZVNlcnZpY2UuY3JlYXRlUHVyY2hhc2VJbnZvaWNlV2l0aEl0ZW1zKGludm9pY2VEYXRhKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5pZCkudG9CZURlZmluZWQoKTtcbiAgICAgIFxuICAgICAgLy8gVmVyaWZ5IGl0ZW1zIHdlcmUgY3JlYXRlZFxuICAgICAgY29uc3QgaW52b2ljZUl0ZW1zID0gYXdhaXQgcHJpc21hLnB1cmNoYXNlSW52b2ljZUl0ZW0uZmluZE1hbnkoe1xuICAgICAgICB3aGVyZTogeyBwdXJjaGFzZUludm9pY2VJZDogcmVzdWx0LmlkIH1cbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KGludm9pY2VJdGVtcykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KGludm9pY2VJdGVtc1swXS5wcm9kdWN0SWQpLnRvQmUodGVzdFByb2R1Y3QuaWQpO1xuICAgICAgZXhwZWN0KGludm9pY2VJdGVtc1swXS5xdWFudGl0eSkudG9CZSgxMCk7XG4gICAgICBleHBlY3QoaW52b2ljZUl0ZW1zWzBdLnVuaXRDb3N0KS50b0JlKDUwLjAwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgcmVxdWlyZWQgZmllbGRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgaW52YWxpZERhdGEgPSB7XG4gICAgICAgIC8vIE1pc3NpbmcgcmVxdWlyZWQgZmllbGRzXG4gICAgICAgIGludm9pY2VOdW1iZXI6ICdQSS0wMDMnXG4gICAgICB9O1xuXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgcHVyY2hhc2VJbnZvaWNlU2VydmljZS5jcmVhdGVQdXJjaGFzZUludm9pY2UoaW52YWxpZERhdGEgYXMgYW55KVxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcHJldmVudCBkdXBsaWNhdGUgaW52b2ljZSBudW1iZXJzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgaW52b2ljZURhdGExID0ge1xuICAgICAgICBzdXBwbGllcklkOiB0ZXN0U3VwcGxpZXIuaWQsXG4gICAgICAgIGludm9pY2VOdW1iZXI6ICdQSS1EVVBMSUNBVEUnLFxuICAgICAgICBpbnZvaWNlRGF0ZTogbmV3IERhdGUoKSxcbiAgICAgICAgZHVlRGF0ZTogbmV3IERhdGUoRGF0ZS5ub3coKSArIDMwICogMjQgKiA2MCAqIDYwICogMTAwMCksXG4gICAgICAgIHN0YXR1czogUHVyY2hhc2VJbnZvaWNlU3RhdHVzLlBFTkRJTkcsXG4gICAgICAgIHN1YnRvdGFsOiAxMDAuMDAsXG4gICAgICAgIHRvdGFsQW1vdW50OiAxMDAuMDAsXG4gICAgICAgIGNyZWF0ZWRCeTogdGVzdFVzZXIuaWRcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGludm9pY2VEYXRhMiA9IHsgLi4uaW52b2ljZURhdGExIH07XG5cbiAgICAgIC8vIEFjdFxuICAgICAgYXdhaXQgcHVyY2hhc2VJbnZvaWNlU2VydmljZS5jcmVhdGVQdXJjaGFzZUludm9pY2UoaW52b2ljZURhdGExKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIHB1cmNoYXNlSW52b2ljZVNlcnZpY2UuY3JlYXRlUHVyY2hhc2VJbnZvaWNlKGludm9pY2VEYXRhMilcbiAgICAgICkucmVqZWN0cy50b1Rocm93KC91bmlxdWUgY29uc3RyYWludC9pKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1B1cmNoYXNlIEludm9pY2UgUmV0cmlldmFsJywgKCkgPT4ge1xuICAgIGxldCB0ZXN0SW52b2ljZTogYW55O1xuXG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICAvLyBDcmVhdGUgYSB0ZXN0IGludm9pY2UgZm9yIHJldHJpZXZhbCB0ZXN0c1xuICAgICAgdGVzdEludm9pY2UgPSBhd2FpdCBwcmlzbWEucHVyY2hhc2VJbnZvaWNlLmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBzdXBwbGllcklkOiB0ZXN0U3VwcGxpZXIuaWQsXG4gICAgICAgICAgaW52b2ljZU51bWJlcjogJ1BJLVJFVFJJRVZFLTAwMScsXG4gICAgICAgICAgaW52b2ljZURhdGU6IG5ldyBEYXRlKCksXG4gICAgICAgICAgZHVlRGF0ZTogbmV3IERhdGUoRGF0ZS5ub3coKSArIDMwICogMjQgKiA2MCAqIDYwICogMTAwMCksXG4gICAgICAgICAgc3RhdHVzOiBQdXJjaGFzZUludm9pY2VTdGF0dXMuUEVORElORyxcbiAgICAgICAgICBzdWJ0b3RhbDogMjAwLjAwLFxuICAgICAgICAgIHRheEFtb3VudDogMjAuMDAsXG4gICAgICAgICAgdG90YWxBbW91bnQ6IDIyMC4wMCxcbiAgICAgICAgICBjcmVhdGVkQnk6IHRlc3RVc2VyLmlkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXRyaWV2ZSBwdXJjaGFzZSBpbnZvaWNlIGJ5IElEJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwdXJjaGFzZUludm9pY2VTZXJ2aWNlLmdldFB1cmNoYXNlSW52b2ljZUJ5SWQodGVzdEludm9pY2UuaWQpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVzdWx0Py5pZCkudG9CZSh0ZXN0SW52b2ljZS5pZCk7XG4gICAgICBleHBlY3QocmVzdWx0Py5pbnZvaWNlTnVtYmVyKS50b0JlKCdQSS1SRVRSSUVWRS0wMDEnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQ/LnRvdGFsQW1vdW50KS50b0JlKDIyMC4wMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHJpZXZlIHB1cmNoYXNlIGludm9pY2Ugd2l0aCBzdXBwbGllciBkZXRhaWxzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwdXJjaGFzZUludm9pY2VTZXJ2aWNlLmdldFB1cmNoYXNlSW52b2ljZVdpdGhEZXRhaWxzKHRlc3RJbnZvaWNlLmlkKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHJlc3VsdD8uc3VwcGxpZXIpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVzdWx0Py5zdXBwbGllci5uYW1lKS50b0JlKCdUZXN0IFN1cHBsaWVyJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBudWxsIGZvciBub24tZXhpc3RlbnQgaW52b2ljZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHVyY2hhc2VJbnZvaWNlU2VydmljZS5nZXRQdXJjaGFzZUludm9pY2VCeUlkKDk5OTk5KTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlTnVsbCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXRyaWV2ZSBhbGwgcHVyY2hhc2UgaW52b2ljZXMgd2l0aCBwYWdpbmF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZSAtIENyZWF0ZSBhZGRpdGlvbmFsIGludm9pY2VzXG4gICAgICBhd2FpdCBwcmlzbWEucHVyY2hhc2VJbnZvaWNlLmNyZWF0ZU1hbnkoe1xuICAgICAgICBkYXRhOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgc3VwcGxpZXJJZDogdGVzdFN1cHBsaWVyLmlkLFxuICAgICAgICAgICAgaW52b2ljZU51bWJlcjogJ1BJLVBBR0UtMDAxJyxcbiAgICAgICAgICAgIGludm9pY2VEYXRlOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgZHVlRGF0ZTogbmV3IERhdGUoRGF0ZS5ub3coKSArIDMwICogMjQgKiA2MCAqIDYwICogMTAwMCksXG4gICAgICAgICAgICBzdGF0dXM6IFB1cmNoYXNlSW52b2ljZVN0YXR1cy5QRU5ESU5HLFxuICAgICAgICAgICAgc3VidG90YWw6IDEwMC4wMCxcbiAgICAgICAgICAgIHRvdGFsQW1vdW50OiAxMDAuMDAsXG4gICAgICAgICAgICBjcmVhdGVkQnk6IHRlc3RVc2VyLmlkXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBzdXBwbGllcklkOiB0ZXN0U3VwcGxpZXIuaWQsXG4gICAgICAgICAgICBpbnZvaWNlTnVtYmVyOiAnUEktUEFHRS0wMDInLFxuICAgICAgICAgICAgaW52b2ljZURhdGU6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICBkdWVEYXRlOiBuZXcgRGF0ZShEYXRlLm5vdygpICsgMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwKSxcbiAgICAgICAgICAgIHN0YXR1czogUHVyY2hhc2VJbnZvaWNlU3RhdHVzLlBFTkRJTkcsXG4gICAgICAgICAgICBzdWJ0b3RhbDogMTUwLjAwLFxuICAgICAgICAgICAgdG90YWxBbW91bnQ6IDE1MC4wMCxcbiAgICAgICAgICAgIGNyZWF0ZWRCeTogdGVzdFVzZXIuaWRcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHB1cmNoYXNlSW52b2ljZVNlcnZpY2UuZ2V0UHVyY2hhc2VJbnZvaWNlcyh7XG4gICAgICAgIHBhZ2U6IDEsXG4gICAgICAgIGxpbWl0OiAyXG4gICAgICB9KTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0Lmludm9pY2VzKS50b0hhdmVMZW5ndGgoMik7XG4gICAgICBleHBlY3QocmVzdWx0LnRvdGFsKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDMpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5wYWdlKS50b0JlKDEpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5saW1pdCkudG9CZSgyKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1B1cmNoYXNlIEludm9pY2UgVXBkYXRlcycsICgpID0+IHtcbiAgICBsZXQgdGVzdEludm9pY2U6IGFueTtcblxuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgdGVzdEludm9pY2UgPSBhd2FpdCBwcmlzbWEucHVyY2hhc2VJbnZvaWNlLmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBzdXBwbGllcklkOiB0ZXN0U3VwcGxpZXIuaWQsXG4gICAgICAgICAgaW52b2ljZU51bWJlcjogJ1BJLVVQREFURS0wMDEnLFxuICAgICAgICAgIGludm9pY2VEYXRlOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIGR1ZURhdGU6IG5ldyBEYXRlKERhdGUubm93KCkgKyAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApLFxuICAgICAgICAgIHN0YXR1czogUHVyY2hhc2VJbnZvaWNlU3RhdHVzLlBFTkRJTkcsXG4gICAgICAgICAgc3VidG90YWw6IDMwMC4wMCxcbiAgICAgICAgICB0b3RhbEFtb3VudDogMzAwLjAwLFxuICAgICAgICAgIGNyZWF0ZWRCeTogdGVzdFVzZXIuaWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHVwZGF0ZSBwdXJjaGFzZSBpbnZvaWNlIHN0YXR1cycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHVyY2hhc2VJbnZvaWNlU2VydmljZS51cGRhdGVQdXJjaGFzZUludm9pY2VTdGF0dXMoXG4gICAgICAgIHRlc3RJbnZvaWNlLmlkLFxuICAgICAgICBQdXJjaGFzZUludm9pY2VTdGF0dXMuQVBQUk9WRURcbiAgICAgICk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0dXMpLnRvQmUoUHVyY2hhc2VJbnZvaWNlU3RhdHVzLkFQUFJPVkVEKTtcbiAgICAgIFxuICAgICAgLy8gVmVyaWZ5IGluIGRhdGFiYXNlXG4gICAgICBjb25zdCBkYkludm9pY2UgPSBhd2FpdCBwcmlzbWEucHVyY2hhc2VJbnZvaWNlLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogdGVzdEludm9pY2UuaWQgfVxuICAgICAgfSk7XG4gICAgICBleHBlY3QoZGJJbnZvaWNlPy5zdGF0dXMpLnRvQmUoUHVyY2hhc2VJbnZvaWNlU3RhdHVzLkFQUFJPVkVEKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdXBkYXRlIHB1cmNoYXNlIGludm9pY2UgZGV0YWlscycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7XG4gICAgICAgIG5vdGVzOiAnVXBkYXRlZCBub3RlcycsXG4gICAgICAgIHN1YnRvdGFsOiAzNTAuMDAsXG4gICAgICAgIHRheEFtb3VudDogMzUuMDAsXG4gICAgICAgIHRvdGFsQW1vdW50OiAzODUuMDBcbiAgICAgIH07XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHVyY2hhc2VJbnZvaWNlU2VydmljZS51cGRhdGVQdXJjaGFzZUludm9pY2UoXG4gICAgICAgIHRlc3RJbnZvaWNlLmlkLFxuICAgICAgICB1cGRhdGVEYXRhXG4gICAgICApO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQubm90ZXMpLnRvQmUoJ1VwZGF0ZWQgbm90ZXMnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQudG90YWxBbW91bnQpLnRvQmUoMzg1LjAwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcHJldmVudCB1cGRhdGluZyBhcHByb3ZlZCBpbnZvaWNlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2UgLSBGaXJzdCBhcHByb3ZlIHRoZSBpbnZvaWNlXG4gICAgICBhd2FpdCBwdXJjaGFzZUludm9pY2VTZXJ2aWNlLnVwZGF0ZVB1cmNoYXNlSW52b2ljZVN0YXR1cyhcbiAgICAgICAgdGVzdEludm9pY2UuaWQsXG4gICAgICAgIFB1cmNoYXNlSW52b2ljZVN0YXR1cy5BUFBST1ZFRFxuICAgICAgKTtcblxuICAgICAgLy8gQWN0ICYgQXNzZXJ0XG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIHB1cmNoYXNlSW52b2ljZVNlcnZpY2UudXBkYXRlUHVyY2hhc2VJbnZvaWNlKHRlc3RJbnZvaWNlLmlkLCB7XG4gICAgICAgICAgbm90ZXM6ICdTaG91bGQgbm90IGJlIGFsbG93ZWQnXG4gICAgICAgIH0pXG4gICAgICApLnJlamVjdHMudG9UaHJvdygvY2Fubm90IGJlIG1vZGlmaWVkL2kpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUHVyY2hhc2UgSW52b2ljZSBEZWxldGlvbicsICgpID0+IHtcbiAgICBsZXQgdGVzdEludm9pY2U6IGFueTtcblxuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgdGVzdEludm9pY2UgPSBhd2FpdCBwcmlzbWEucHVyY2hhc2VJbnZvaWNlLmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBzdXBwbGllcklkOiB0ZXN0U3VwcGxpZXIuaWQsXG4gICAgICAgICAgaW52b2ljZU51bWJlcjogJ1BJLURFTEVURS0wMDEnLFxuICAgICAgICAgIGludm9pY2VEYXRlOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIGR1ZURhdGU6IG5ldyBEYXRlKERhdGUubm93KCkgKyAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApLFxuICAgICAgICAgIHN0YXR1czogUHVyY2hhc2VJbnZvaWNlU3RhdHVzLlBFTkRJTkcsXG4gICAgICAgICAgc3VidG90YWw6IDEwMC4wMCxcbiAgICAgICAgICB0b3RhbEFtb3VudDogMTAwLjAwLFxuICAgICAgICAgIGNyZWF0ZWRCeTogdGVzdFVzZXIuaWRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNvZnQgZGVsZXRlIHB1cmNoYXNlIGludm9pY2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHB1cmNoYXNlSW52b2ljZVNlcnZpY2UuZGVsZXRlUHVyY2hhc2VJbnZvaWNlKHRlc3RJbnZvaWNlLmlkKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKHRydWUpO1xuICAgICAgXG4gICAgICAvLyBWZXJpZnkgc29mdCBkZWxldGlvblxuICAgICAgY29uc3QgZGJJbnZvaWNlID0gYXdhaXQgcHJpc21hLnB1cmNoYXNlSW52b2ljZS5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IHRlc3RJbnZvaWNlLmlkIH1cbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KGRiSW52b2ljZT8uaXNEZWxldGVkKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBwcmV2ZW50IGRlbGV0aW9uIG9mIGFwcHJvdmVkIGludm9pY2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgYXdhaXQgcHVyY2hhc2VJbnZvaWNlU2VydmljZS51cGRhdGVQdXJjaGFzZUludm9pY2VTdGF0dXMoXG4gICAgICAgIHRlc3RJbnZvaWNlLmlkLFxuICAgICAgICBQdXJjaGFzZUludm9pY2VTdGF0dXMuQVBQUk9WRURcbiAgICAgICk7XG5cbiAgICAgIC8vIEFjdCAmIEFzc2VydFxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBwdXJjaGFzZUludm9pY2VTZXJ2aWNlLmRlbGV0ZVB1cmNoYXNlSW52b2ljZSh0ZXN0SW52b2ljZS5pZClcbiAgICAgICkucmVqZWN0cy50b1Rocm93KC9jYW5ub3QgYmUgZGVsZXRlZC9pKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1B1cmNoYXNlIEludm9pY2UgU2VhcmNoIGFuZCBGaWx0ZXJpbmcnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICAvLyBDcmVhdGUgbXVsdGlwbGUgdGVzdCBpbnZvaWNlcyB3aXRoIGRpZmZlcmVudCBzdGF0dXNlcyBhbmQgZGF0ZXNcbiAgICAgIGF3YWl0IHByaXNtYS5wdXJjaGFzZUludm9pY2UuY3JlYXRlTWFueSh7XG4gICAgICAgIGRhdGE6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBzdXBwbGllcklkOiB0ZXN0U3VwcGxpZXIuaWQsXG4gICAgICAgICAgICBpbnZvaWNlTnVtYmVyOiAnUEktU0VBUkNILTAwMScsXG4gICAgICAgICAgICBpbnZvaWNlRGF0ZTogbmV3IERhdGUoJzIwMjQtMDEtMDEnKSxcbiAgICAgICAgICAgIGR1ZURhdGU6IG5ldyBEYXRlKCcyMDI0LTAxLTMxJyksXG4gICAgICAgICAgICBzdGF0dXM6IFB1cmNoYXNlSW52b2ljZVN0YXR1cy5QRU5ESU5HLFxuICAgICAgICAgICAgc3VidG90YWw6IDEwMC4wMCxcbiAgICAgICAgICAgIHRvdGFsQW1vdW50OiAxMDAuMDAsXG4gICAgICAgICAgICBjcmVhdGVkQnk6IHRlc3RVc2VyLmlkXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBzdXBwbGllcklkOiB0ZXN0U3VwcGxpZXIuaWQsXG4gICAgICAgICAgICBpbnZvaWNlTnVtYmVyOiAnUEktU0VBUkNILTAwMicsXG4gICAgICAgICAgICBpbnZvaWNlRGF0ZTogbmV3IERhdGUoJzIwMjQtMDItMDEnKSxcbiAgICAgICAgICAgIGR1ZURhdGU6IG5ldyBEYXRlKCcyMDI0LTAyLTI4JyksXG4gICAgICAgICAgICBzdGF0dXM6IFB1cmNoYXNlSW52b2ljZVN0YXR1cy5BUFBST1ZFRCxcbiAgICAgICAgICAgIHN1YnRvdGFsOiAyMDAuMDAsXG4gICAgICAgICAgICB0b3RhbEFtb3VudDogMjAwLjAwLFxuICAgICAgICAgICAgY3JlYXRlZEJ5OiB0ZXN0VXNlci5pZFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgc3VwcGxpZXJJZDogdGVzdFN1cHBsaWVyLmlkLFxuICAgICAgICAgICAgaW52b2ljZU51bWJlcjogJ1BJLVNFQVJDSC0wMDMnLFxuICAgICAgICAgICAgaW52b2ljZURhdGU6IG5ldyBEYXRlKCcyMDI0LTAzLTAxJyksXG4gICAgICAgICAgICBkdWVEYXRlOiBuZXcgRGF0ZSgnMjAyNC0wMy0zMScpLFxuICAgICAgICAgICAgc3RhdHVzOiBQdXJjaGFzZUludm9pY2VTdGF0dXMuUEFJRCxcbiAgICAgICAgICAgIHN1YnRvdGFsOiAzMDAuMDAsXG4gICAgICAgICAgICB0b3RhbEFtb3VudDogMzAwLjAwLFxuICAgICAgICAgICAgY3JlYXRlZEJ5OiB0ZXN0VXNlci5pZFxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNlYXJjaCBpbnZvaWNlcyBieSBpbnZvaWNlIG51bWJlcicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHVyY2hhc2VJbnZvaWNlU2VydmljZS5zZWFyY2hQdXJjaGFzZUludm9pY2VzKHtcbiAgICAgICAgaW52b2ljZU51bWJlcjogJ1BJLVNFQVJDSC0wMDInXG4gICAgICB9KTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QocmVzdWx0WzBdLmludm9pY2VOdW1iZXIpLnRvQmUoJ1BJLVNFQVJDSC0wMDInKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZmlsdGVyIGludm9pY2VzIGJ5IHN0YXR1cycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHVyY2hhc2VJbnZvaWNlU2VydmljZS5zZWFyY2hQdXJjaGFzZUludm9pY2VzKHtcbiAgICAgICAgc3RhdHVzOiBQdXJjaGFzZUludm9pY2VTdGF0dXMuQVBQUk9WRURcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0uc3RhdHVzKS50b0JlKFB1cmNoYXNlSW52b2ljZVN0YXR1cy5BUFBST1ZFRCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGZpbHRlciBpbnZvaWNlcyBieSBkYXRlIHJhbmdlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwdXJjaGFzZUludm9pY2VTZXJ2aWNlLnNlYXJjaFB1cmNoYXNlSW52b2ljZXMoe1xuICAgICAgICBkYXRlRnJvbTogbmV3IERhdGUoJzIwMjQtMDItMDEnKSxcbiAgICAgICAgZGF0ZVRvOiBuZXcgRGF0ZSgnMjAyNC0wMy0zMScpXG4gICAgICB9KTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVMZW5ndGgoMik7XG4gICAgICBleHBlY3QocmVzdWx0LmV2ZXJ5KGludm9pY2UgPT4gXG4gICAgICAgIGludm9pY2UuaW52b2ljZURhdGUgPj0gbmV3IERhdGUoJzIwMjQtMDItMDEnKSAmJlxuICAgICAgICBpbnZvaWNlLmludm9pY2VEYXRlIDw9IG5ldyBEYXRlKCcyMDI0LTAzLTMxJylcbiAgICAgICkpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGZpbHRlciBpbnZvaWNlcyBieSBzdXBwbGllcicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHVyY2hhc2VJbnZvaWNlU2VydmljZS5zZWFyY2hQdXJjaGFzZUludm9pY2VzKHtcbiAgICAgICAgc3VwcGxpZXJJZDogdGVzdFN1cHBsaWVyLmlkXG4gICAgICB9KTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0Lmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgzKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZXZlcnkoaW52b2ljZSA9PiBpbnZvaWNlLnN1cHBsaWVySWQgPT09IHRlc3RTdXBwbGllci5pZCkpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQdXJjaGFzZSBJbnZvaWNlIEJ1c2luZXNzIExvZ2ljJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIHRvdGFscyBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBpbnZvaWNlRGF0YSA9IHtcbiAgICAgICAgc3VwcGxpZXJJZDogdGVzdFN1cHBsaWVyLmlkLFxuICAgICAgICBpbnZvaWNlTnVtYmVyOiAnUEktQ0FMQy0wMDEnLFxuICAgICAgICBpbnZvaWNlRGF0ZTogbmV3IERhdGUoKSxcbiAgICAgICAgZHVlRGF0ZTogbmV3IERhdGUoRGF0ZS5ub3coKSArIDMwICogMjQgKiA2MCAqIDYwICogMTAwMCksXG4gICAgICAgIHN0YXR1czogUHVyY2hhc2VJbnZvaWNlU3RhdHVzLlBFTkRJTkcsXG4gICAgICAgIGNyZWF0ZWRCeTogdGVzdFVzZXIuaWQsXG4gICAgICAgIGl0ZW1zOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgcHJvZHVjdElkOiB0ZXN0UHJvZHVjdC5pZCxcbiAgICAgICAgICAgIHF1YW50aXR5OiA1LFxuICAgICAgICAgICAgdW5pdENvc3Q6IDIwLjAwLFxuICAgICAgICAgICAgdG90YWxDb3N0OiAxMDAuMDBcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHByb2R1Y3RJZDogdGVzdFByb2R1Y3QuaWQsXG4gICAgICAgICAgICBxdWFudGl0eTogMyxcbiAgICAgICAgICAgIHVuaXRDb3N0OiAzMC4wMCxcbiAgICAgICAgICAgIHRvdGFsQ29zdDogOTAuMDBcbiAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIHRheFJhdGU6IDAuMTAgLy8gMTAlIHRheFxuICAgICAgfTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwdXJjaGFzZUludm9pY2VTZXJ2aWNlLmNyZWF0ZVB1cmNoYXNlSW52b2ljZVdpdGhDYWxjdWxhdGlvbnMoaW52b2ljZURhdGEpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VidG90YWwpLnRvQmUoMTkwLjAwKTsgLy8gMTAwICsgOTBcbiAgICAgIGV4cGVjdChyZXN1bHQudGF4QW1vdW50KS50b0JlKDE5LjAwKTsgLy8gMTkwICogMC4xMFxuICAgICAgZXhwZWN0KHJlc3VsdC50b3RhbEFtb3VudCkudG9CZSgyMDkuMDApOyAvLyAxOTAgKyAxOVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB1cGRhdGUgaW52ZW50b3J5IHdoZW4gaW52b2ljZSBpcyBhcHByb3ZlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGludm9pY2UgPSBhd2FpdCBwcmlzbWEucHVyY2hhc2VJbnZvaWNlLmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBzdXBwbGllcklkOiB0ZXN0U3VwcGxpZXIuaWQsXG4gICAgICAgICAgaW52b2ljZU51bWJlcjogJ1BJLUlOVkVOVE9SWS0wMDEnLFxuICAgICAgICAgIGludm9pY2VEYXRlOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIGR1ZURhdGU6IG5ldyBEYXRlKERhdGUubm93KCkgKyAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApLFxuICAgICAgICAgIHN0YXR1czogUHVyY2hhc2VJbnZvaWNlU3RhdHVzLlBFTkRJTkcsXG4gICAgICAgICAgc3VidG90YWw6IDUwMC4wMCxcbiAgICAgICAgICB0b3RhbEFtb3VudDogNTAwLjAwLFxuICAgICAgICAgIGNyZWF0ZWRCeTogdGVzdFVzZXIuaWRcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHByaXNtYS5wdXJjaGFzZUludm9pY2VJdGVtLmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBwdXJjaGFzZUludm9pY2VJZDogaW52b2ljZS5pZCxcbiAgICAgICAgICBwcm9kdWN0SWQ6IHRlc3RQcm9kdWN0LmlkLFxuICAgICAgICAgIHF1YW50aXR5OiAxMCxcbiAgICAgICAgICB1bml0Q29zdDogNTAuMDAsXG4gICAgICAgICAgdG90YWxDb3N0OiA1MDAuMDBcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgYXdhaXQgcHVyY2hhc2VJbnZvaWNlU2VydmljZS5hcHByb3ZlUHVyY2hhc2VJbnZvaWNlKGludm9pY2UuaWQpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGNvbnN0IGludmVudG9yeUl0ZW1zID0gYXdhaXQgcHJpc21hLmludmVudG9yeUl0ZW0uZmluZE1hbnkoe1xuICAgICAgICB3aGVyZTogeyBwcm9kdWN0SWQ6IHRlc3RQcm9kdWN0LmlkIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBleHBlY3QoaW52ZW50b3J5SXRlbXMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChpbnZlbnRvcnlJdGVtc1swXS5xdWFudGl0eSkudG9CZSgxMCk7XG4gICAgICBleHBlY3QoaW52ZW50b3J5SXRlbXNbMF0udW5pdENvc3QpLnRvQmUoNTAuMDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRXJyb3IgSGFuZGxpbmcgYW5kIEVkZ2UgQ2FzZXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY29uY3VycmVudCBpbnZvaWNlIGNyZWF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgaW52b2ljZURhdGEgPSB7XG4gICAgICAgIHN1cHBsaWVySWQ6IHRlc3RTdXBwbGllci5pZCxcbiAgICAgICAgaW52b2ljZU51bWJlcjogJ1BJLUNPTkNVUlJFTlQtMDAxJyxcbiAgICAgICAgaW52b2ljZURhdGU6IG5ldyBEYXRlKCksXG4gICAgICAgIGR1ZURhdGU6IG5ldyBEYXRlKERhdGUubm93KCkgKyAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApLFxuICAgICAgICBzdGF0dXM6IFB1cmNoYXNlSW52b2ljZVN0YXR1cy5QRU5ESU5HLFxuICAgICAgICBzdWJ0b3RhbDogMTAwLjAwLFxuICAgICAgICB0b3RhbEFtb3VudDogMTAwLjAwLFxuICAgICAgICBjcmVhdGVkQnk6IHRlc3RVc2VyLmlkXG4gICAgICB9O1xuXG4gICAgICAvLyBBY3QgLSBDcmVhdGUgbXVsdGlwbGUgaW52b2ljZXMgY29uY3VycmVudGx5XG4gICAgICBjb25zdCBwcm9taXNlcyA9IEFycmF5KDMpLmZpbGwobnVsbCkubWFwKChfLCBpbmRleCkgPT4gXG4gICAgICAgIHB1cmNoYXNlSW52b2ljZVNlcnZpY2UuY3JlYXRlUHVyY2hhc2VJbnZvaWNlKHtcbiAgICAgICAgICAuLi5pbnZvaWNlRGF0YSxcbiAgICAgICAgICBpbnZvaWNlTnVtYmVyOiBgUEktQ09OQ1VSUkVOVC0ke2luZGV4ICsgMX1gXG4gICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKHByb21pc2VzKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBjb25zdCBzdWNjZXNzZnVsID0gcmVzdWx0cy5maWx0ZXIociA9PiByLnN0YXR1cyA9PT0gJ2Z1bGZpbGxlZCcpO1xuICAgICAgZXhwZWN0KHN1Y2Nlc3NmdWwpLnRvSGF2ZUxlbmd0aCgzKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGludmFsaWQgcHJvZHVjdCByZWZlcmVuY2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgaW52b2ljZURhdGEgPSB7XG4gICAgICAgIHN1cHBsaWVySWQ6IHRlc3RTdXBwbGllci5pZCxcbiAgICAgICAgaW52b2ljZU51bWJlcjogJ1BJLUlOVkFMSUQtMDAxJyxcbiAgICAgICAgaW52b2ljZURhdGU6IG5ldyBEYXRlKCksXG4gICAgICAgIGR1ZURhdGU6IG5ldyBEYXRlKERhdGUubm93KCkgKyAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApLFxuICAgICAgICBzdGF0dXM6IFB1cmNoYXNlSW52b2ljZVN0YXR1cy5QRU5ESU5HLFxuICAgICAgICBjcmVhdGVkQnk6IHRlc3RVc2VyLmlkLFxuICAgICAgICBpdGVtczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHByb2R1Y3RJZDogOTk5OTksIC8vIE5vbi1leGlzdGVudCBwcm9kdWN0XG4gICAgICAgICAgICBxdWFudGl0eTogMSxcbiAgICAgICAgICAgIHVuaXRDb3N0OiAxMC4wMCxcbiAgICAgICAgICAgIHRvdGFsQ29zdDogMTAuMDBcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH07XG5cbiAgICAgIC8vIEFjdCAmIEFzc2VydFxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBwdXJjaGFzZUludm9pY2VTZXJ2aWNlLmNyZWF0ZVB1cmNoYXNlSW52b2ljZVdpdGhJdGVtcyhpbnZvaWNlRGF0YSlcbiAgICAgICkucmVqZWN0cy50b1Rocm93KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBkYXRhYmFzZSB0cmFuc2FjdGlvbiBmYWlsdXJlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFRoaXMgdGVzdCB3b3VsZCByZXF1aXJlIG1vcmUgc29waGlzdGljYXRlZCBtb2NraW5nIHRvIHNpbXVsYXRlIHRyYW5zYWN0aW9uIGZhaWx1cmVzXG4gICAgICAvLyBGb3Igbm93LCB3ZSdsbCB0ZXN0IHRoYXQgdGhlIHNlcnZpY2UgaGFuZGxlcyBiYXNpYyB2YWxpZGF0aW9uIGVycm9yc1xuICAgICAgXG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBpbnZhbGlkRGF0YSA9IHtcbiAgICAgICAgLy8gTWlzc2luZyByZXF1aXJlZCBzdXBwbGllcklkXG4gICAgICAgIGludm9pY2VOdW1iZXI6ICdQSS1JTlZBTElELTAwMicsXG4gICAgICAgIGludm9pY2VEYXRlOiBuZXcgRGF0ZSgpLFxuICAgICAgICBzdGF0dXM6IFB1cmNoYXNlSW52b2ljZVN0YXR1cy5QRU5ESU5HXG4gICAgICB9O1xuXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgcHVyY2hhc2VJbnZvaWNlU2VydmljZS5jcmVhdGVQdXJjaGFzZUludm9pY2UoaW52YWxpZERhdGEgYXMgYW55KVxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwibmFtZXMiOlsidGVzdFByaXNtYSIsIlByaXNtYUNsaWVudCIsImRhdGFzb3VyY2VzIiwiZGIiLCJ1cmwiLCJwcm9jZXNzIiwiZW52IiwiVEVTVF9EQVRBQkFTRV9VUkwiLCJEQVRBQkFTRV9VUkwiLCJqZXN0IiwibW9jayIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiZGVzY3JpYmUiLCJhcHAiLCJzZXJ2ZXIiLCJwdXJjaGFzZUludm9pY2VTZXJ2aWNlIiwidGVzdFN1cHBsaWVyIiwidGVzdFByb2R1Y3QiLCJ0ZXN0VXNlciIsInRlc3RDYXRlZ29yeSIsImJlZm9yZUFsbCIsImV4cHJlc3MiLCJ1c2UiLCJqc29uIiwiY3JlYXRlU2VydmVyIiwiUHVyY2hhc2VJbnZvaWNlU2VydmljZSIsInByaXNtYSIsIiRjb25uZWN0IiwiY29uc29sZSIsImxvZyIsImVycm9yIiwiYmVmb3JlRWFjaCIsInB1cmNoYXNlSW52b2ljZUl0ZW0iLCJkZWxldGVNYW55IiwicHVyY2hhc2VJbnZvaWNlIiwiaW52ZW50b3J5SXRlbSIsInByb2R1Y3QiLCJjYXRlZ29yeSIsInN1cHBsaWVyIiwidXNlciIsIndhcm4iLCJtZXNzYWdlIiwiY3JlYXRlIiwiZGF0YSIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsImVtYWlsIiwicGFzc3dvcmQiLCJyb2xlIiwiaXNBY3RpdmUiLCJwaG9uZSIsImFkZHJlc3MiLCJza3UiLCJwcmljZSIsImNvc3QiLCJjYXRlZ29yeUlkIiwiaWQiLCJzdGF0dXMiLCJQcm9kdWN0U3RhdHVzIiwiQUNUSVZFIiwiYWZ0ZXJFYWNoIiwiYWZ0ZXJBbGwiLCIkZGlzY29ubmVjdCIsImNsb3NlIiwiaXQiLCJpbnZvaWNlRGF0YSIsInN1cHBsaWVySWQiLCJpbnZvaWNlTnVtYmVyIiwiaW52b2ljZURhdGUiLCJEYXRlIiwiZHVlRGF0ZSIsIm5vdyIsIlB1cmNoYXNlSW52b2ljZVN0YXR1cyIsIlBFTkRJTkciLCJzdWJ0b3RhbCIsInRheEFtb3VudCIsInRvdGFsQW1vdW50Iiwibm90ZXMiLCJjcmVhdGVkQnkiLCJyZXN1bHQiLCJjcmVhdGVQdXJjaGFzZUludm9pY2UiLCJleHBlY3QiLCJ0b0JlRGVmaW5lZCIsInRvQmUiLCJkYkludm9pY2UiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJpdGVtcyIsInByb2R1Y3RJZCIsInF1YW50aXR5IiwidW5pdENvc3QiLCJ0b3RhbENvc3QiLCJjcmVhdGVQdXJjaGFzZUludm9pY2VXaXRoSXRlbXMiLCJpbnZvaWNlSXRlbXMiLCJmaW5kTWFueSIsInB1cmNoYXNlSW52b2ljZUlkIiwidG9IYXZlTGVuZ3RoIiwiaW52YWxpZERhdGEiLCJyZWplY3RzIiwidG9UaHJvdyIsImludm9pY2VEYXRhMSIsImludm9pY2VEYXRhMiIsInRlc3RJbnZvaWNlIiwiZ2V0UHVyY2hhc2VJbnZvaWNlQnlJZCIsImdldFB1cmNoYXNlSW52b2ljZVdpdGhEZXRhaWxzIiwidG9CZU51bGwiLCJjcmVhdGVNYW55IiwiZ2V0UHVyY2hhc2VJbnZvaWNlcyIsInBhZ2UiLCJsaW1pdCIsImludm9pY2VzIiwidG90YWwiLCJ0b0JlR3JlYXRlclRoYW5PckVxdWFsIiwidXBkYXRlUHVyY2hhc2VJbnZvaWNlU3RhdHVzIiwiQVBQUk9WRUQiLCJ1cGRhdGVEYXRhIiwidXBkYXRlUHVyY2hhc2VJbnZvaWNlIiwiZGVsZXRlUHVyY2hhc2VJbnZvaWNlIiwiaXNEZWxldGVkIiwiUEFJRCIsInNlYXJjaFB1cmNoYXNlSW52b2ljZXMiLCJkYXRlRnJvbSIsImRhdGVUbyIsImV2ZXJ5IiwiaW52b2ljZSIsImxlbmd0aCIsInRheFJhdGUiLCJjcmVhdGVQdXJjaGFzZUludm9pY2VXaXRoQ2FsY3VsYXRpb25zIiwiYXBwcm92ZVB1cmNoYXNlSW52b2ljZSIsImludmVudG9yeUl0ZW1zIiwicHJvbWlzZXMiLCJBcnJheSIsImZpbGwiLCJtYXAiLCJfIiwiaW5kZXgiLCJyZXN1bHRzIiwiUHJvbWlzZSIsImFs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