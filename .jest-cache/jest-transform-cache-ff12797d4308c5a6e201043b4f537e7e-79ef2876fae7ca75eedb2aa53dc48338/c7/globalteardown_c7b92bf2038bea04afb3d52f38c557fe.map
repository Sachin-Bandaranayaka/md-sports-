{"version":3,"sources":["/Users/sachin/Documents/md-sports-/tests/setup/global-teardown.js"],"sourcesContent":["const { PrismaClient } = require('@prisma/client');\n\nmodule.exports = async () => {\n  console.log('üßπ Starting Jest global teardown...');\n  \n  // Clean up test database if needed\n  if (process.env.SETUP_TEST_DB === 'true') {\n    const prisma = new PrismaClient();\n    \n    try {\n      await prisma.$connect();\n      \n      // Clean up test data\n      await cleanupTestData(prisma);\n      \n      console.log('üóëÔ∏è Test data cleaned up');\n      \n    } catch (error) {\n      console.error('‚ùå Test cleanup failed:', error);\n      // Don't throw to avoid failing the teardown\n    } finally {\n      await prisma.$disconnect();\n    }\n  }\n  \n  console.log('‚úÖ Jest global teardown completed');\n};\n\nasync function cleanupTestData(prisma) {\n  try {\n    // Clean up Jest-specific test data\n    await prisma.shop.deleteMany({\n      where: {\n        id: 'test-shop-jest'\n      }\n    });\n    \n    // Clean up any other test artifacts\n    await prisma.user.deleteMany({\n      where: {\n        email: {\n          endsWith: '@jest.test'\n        }\n      }\n    });\n    \n  } catch (error) {\n    console.warn('‚ö†Ô∏è Cleanup warning:', error.message);\n  }\n}"],"names":["PrismaClient","require","module","exports","console","log","process","env","SETUP_TEST_DB","prisma","$connect","cleanupTestData","error","$disconnect","shop","deleteMany","where","id","user","email","endsWith","warn","message"],"mappings":";AAAA,MAAM,EAAEA,YAAY,EAAE,GAAGC,QAAQ;AAEjCC,OAAOC,OAAO,GAAG;IACfC,QAAQC,GAAG,CAAC;IAEZ,mCAAmC;IACnC,IAAIC,QAAQC,GAAG,CAACC,aAAa,KAAK,QAAQ;QACxC,MAAMC,SAAS,IAAIT;QAEnB,IAAI;YACF,MAAMS,OAAOC,QAAQ;YAErB,qBAAqB;YACrB,MAAMC,gBAAgBF;YAEtBL,QAAQC,GAAG,CAAC;QAEd,EAAE,OAAOO,OAAO;YACdR,QAAQQ,KAAK,CAAC,0BAA0BA;QACxC,4CAA4C;QAC9C,SAAU;YACR,MAAMH,OAAOI,WAAW;QAC1B;IACF;IAEAT,QAAQC,GAAG,CAAC;AACd;AAEA,eAAeM,gBAAgBF,MAAM;IACnC,IAAI;QACF,mCAAmC;QACnC,MAAMA,OAAOK,IAAI,CAACC,UAAU,CAAC;YAC3BC,OAAO;gBACLC,IAAI;YACN;QACF;QAEA,oCAAoC;QACpC,MAAMR,OAAOS,IAAI,CAACH,UAAU,CAAC;YAC3BC,OAAO;gBACLG,OAAO;oBACLC,UAAU;gBACZ;YACF;QACF;IAEF,EAAE,OAAOR,OAAO;QACdR,QAAQiB,IAAI,CAAC,uBAAuBT,MAAMU,OAAO;IACnD;AACF"}