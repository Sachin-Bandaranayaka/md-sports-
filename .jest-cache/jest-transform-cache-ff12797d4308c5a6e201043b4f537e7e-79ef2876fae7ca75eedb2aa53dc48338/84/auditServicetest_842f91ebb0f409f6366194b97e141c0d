b8e31219ccd9a8ab552baa1a3f5c50c2
"use strict";
// Mock Prisma
jest.mock("@/lib/prisma", ()=>({
        prisma: {
            auditLog: {
                findMany: jest.fn(),
                count: jest.fn(),
                create: jest.fn(),
                findUnique: jest.fn(),
                update: jest.fn()
            },
            user: {
                findMany: jest.fn()
            },
            product: {
                create: jest.fn(),
                update: jest.fn()
            },
            customer: {
                create: jest.fn(),
                update: jest.fn()
            }
        }
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _auditService = require("../../services/auditService");
const _prisma = require("../../lib/prisma");
describe("AuditService", ()=>{
    let auditService;
    const mockPrisma = _prisma.prisma;
    beforeEach(()=>{
        auditService = _auditService.AuditService.getInstance();
        jest.clearAllMocks();
    });
    afterEach(()=>{
        jest.resetAllMocks();
    });
    describe("getRecycleBinItems", ()=>{
        const mockAuditLogItems = [
            {
                id: 1,
                entity: "product",
                entityId: 123,
                action: "DELETE",
                userId: "user1",
                createdAt: new Date("2024-01-15T10:00:00Z"),
                details: {
                    isDeleted: true,
                    canRecover: true,
                    deletedAt: "2024-01-15T10:00:00Z",
                    deletedBy: "user1",
                    originalData: {
                        name: "Test Product",
                        price: 100
                    }
                }
            },
            {
                id: 2,
                entity: "customer",
                entityId: 456,
                action: "DELETE",
                userId: "user2",
                createdAt: new Date("2024-01-16T11:00:00Z"),
                details: {
                    isDeleted: true,
                    canRecover: true,
                    deletedAt: "2024-01-16T11:00:00Z",
                    deletedBy: "user2",
                    originalData: {
                        name: "Test Customer",
                        email: "test@example.com"
                    }
                }
            }
        ];
        const mockUsers = [
            {
                id: "user1",
                name: "John Doe",
                email: "john@example.com"
            },
            {
                id: "user2",
                name: "Jane Smith",
                email: "jane@example.com"
            }
        ];
        beforeEach(()=>{
            mockPrisma.auditLog.findMany.mockResolvedValue(mockAuditLogItems);
            mockPrisma.auditLog.count.mockResolvedValue(2);
            mockPrisma.user.findMany.mockResolvedValue(mockUsers);
        });
        it("should return all recycle bin items without filters", async ()=>{
            const result = await auditService.getRecycleBinItems();
            expect(result.items).toHaveLength(2);
            expect(result.total).toBe(2);
            expect(result.items[0].entity).toBe("product");
            expect(result.items[1].entity).toBe("customer");
            expect(mockPrisma.auditLog.findMany).toHaveBeenCalledWith({
                where: {},
                orderBy: {
                    createdAt: "desc"
                },
                take: 50,
                skip: 0
            });
        });
        it("should filter by entity type", async ()=>{
            const result = await auditService.getRecycleBinItems("product");
            expect(mockPrisma.auditLog.findMany).toHaveBeenCalledWith({
                where: {
                    entity: "product"
                },
                orderBy: {
                    createdAt: "desc"
                },
                take: 50,
                skip: 0
            });
        });
        it("should filter by date range", async ()=>{
            const dateFrom = "2024-01-15T00:00:00Z";
            const dateTo = "2024-01-15T23:59:59Z";
            await auditService.getRecycleBinItems(undefined, 50, 0, dateFrom, dateTo);
            const expectedEndDate = new Date(dateTo);
            expectedEndDate.setDate(expectedEndDate.getDate() + 1);
            expect(mockPrisma.auditLog.findMany).toHaveBeenCalledWith({
                where: {
                    createdAt: {
                        gte: new Date(dateFrom),
                        lt: expectedEndDate
                    }
                },
                orderBy: {
                    createdAt: "desc"
                },
                take: 50,
                skip: 0
            });
        });
        it("should filter by entity and date range combined", async ()=>{
            const dateFrom = "2024-01-15T00:00:00Z";
            const dateTo = "2024-01-16T23:59:59Z";
            await auditService.getRecycleBinItems("product", 20, 10, dateFrom, dateTo);
            const expectedEndDate = new Date(dateTo);
            expectedEndDate.setDate(expectedEndDate.getDate() + 1);
            expect(mockPrisma.auditLog.findMany).toHaveBeenCalledWith({
                where: {
                    entity: "product",
                    createdAt: {
                        gte: new Date(dateFrom),
                        lt: expectedEndDate
                    }
                },
                orderBy: {
                    createdAt: "desc"
                },
                take: 20,
                skip: 10
            });
        });
        it("should include user details for deleted items", async ()=>{
            const result = await auditService.getRecycleBinItems();
            expect(result.items[0].deletedByUser).toEqual({
                id: "user1",
                name: "John Doe",
                email: "john@example.com"
            });
            expect(result.items[1].deletedByUser).toEqual({
                id: "user2",
                name: "Jane Smith",
                email: "jane@example.com"
            });
        });
    });
    describe("getAuditEntries", ()=>{
        const mockAuditEntries = [
            {
                id: 1,
                entity: "product",
                entityId: 123,
                action: "CREATE",
                userId: "user1",
                createdAt: new Date("2024-01-15T10:00:00Z"),
                details: {
                    name: "Test Product"
                }
            },
            {
                id: 2,
                entity: "customer",
                entityId: 456,
                action: "UPDATE",
                userId: "user2",
                createdAt: new Date("2024-01-16T11:00:00Z"),
                details: {
                    name: "Updated Customer"
                }
            }
        ];
        beforeEach(()=>{
            mockPrisma.auditLog.findMany.mockResolvedValue(mockAuditEntries);
            mockPrisma.auditLog.count.mockResolvedValue(2);
        });
        it("should return all audit entries without filters", async ()=>{
            const result = await auditService.getAuditEntries();
            expect(result.items).toHaveLength(2);
            expect(result.total).toBe(2);
            expect(mockPrisma.auditLog.findMany).toHaveBeenCalledWith({
                where: {},
                orderBy: {
                    createdAt: "desc"
                },
                skip: 0,
                take: 50
            });
        });
        it("should filter by entity type", async ()=>{
            await auditService.getAuditEntries("product");
            expect(mockPrisma.auditLog.findMany).toHaveBeenCalledWith({
                where: {
                    entity: "product"
                },
                orderBy: {
                    createdAt: "desc"
                },
                skip: 0,
                take: 50
            });
        });
        it("should filter by date range", async ()=>{
            const dateFrom = "2024-01-15T00:00:00Z";
            const dateTo = "2024-01-15T23:59:59Z";
            await auditService.getAuditEntries(undefined, 50, 0, dateFrom, dateTo);
            const expectedEndDate = new Date(dateTo);
            expectedEndDate.setDate(expectedEndDate.getDate() + 1);
            expect(mockPrisma.auditLog.findMany).toHaveBeenCalledWith({
                where: {
                    createdAt: {
                        gte: new Date(dateFrom),
                        lt: expectedEndDate
                    }
                },
                orderBy: {
                    createdAt: "desc"
                },
                skip: 0,
                take: 50
            });
        });
        it("should filter by entity and date range combined", async ()=>{
            const dateFrom = "2024-01-15T00:00:00Z";
            const dateTo = "2024-01-16T23:59:59Z";
            await auditService.getAuditEntries("customer", 20, 10, dateFrom, dateTo);
            const expectedEndDate = new Date(dateTo);
            expectedEndDate.setDate(expectedEndDate.getDate() + 1);
            expect(mockPrisma.auditLog.findMany).toHaveBeenCalledWith({
                where: {
                    entity: "customer",
                    createdAt: {
                        gte: new Date(dateFrom),
                        lt: expectedEndDate
                    }
                },
                orderBy: {
                    createdAt: "desc"
                },
                skip: 10,
                take: 20
            });
        });
    });
    describe("getEntityHistory", ()=>{
        const mockEntityHistory = [
            {
                id: 1,
                entity: "product",
                entityId: 123,
                action: "CREATE",
                userId: "user1",
                createdAt: new Date("2024-01-15T10:00:00Z"),
                details: {
                    name: "Test Product"
                }
            },
            {
                id: 2,
                entity: "product",
                entityId: 123,
                action: "UPDATE",
                userId: "user2",
                createdAt: new Date("2024-01-16T11:00:00Z"),
                details: {
                    name: "Updated Product"
                }
            }
        ];
        beforeEach(()=>{
            mockPrisma.auditLog.findMany.mockResolvedValue(mockEntityHistory);
        });
        it("should return entity history without date filters", async ()=>{
            const result = await auditService.getEntityHistory("product", 123);
            expect(result).toHaveLength(2);
            expect(mockPrisma.auditLog.findMany).toHaveBeenCalledWith({
                where: {
                    entity: "product",
                    entityId: 123
                },
                include: {
                    user: {
                        select: {
                            id: true,
                            name: true,
                            email: true
                        }
                    },
                    deletedByUser: {
                        select: {
                            id: true,
                            name: true,
                            email: true
                        }
                    },
                    recoveredByUser: {
                        select: {
                            id: true,
                            name: true,
                            email: true
                        }
                    }
                },
                orderBy: {
                    createdAt: "desc"
                },
                take: 20
            });
        });
        it("should filter entity history by date range", async ()=>{
            const dateFrom = "2024-01-15T00:00:00Z";
            const dateTo = "2024-01-16T23:59:59Z";
            await auditService.getEntityHistory("product", 123, 10, dateFrom, dateTo);
            const expectedEndDate = new Date(dateTo);
            expectedEndDate.setDate(expectedEndDate.getDate() + 1);
            expect(mockPrisma.auditLog.findMany).toHaveBeenCalledWith({
                where: {
                    entity: "product",
                    entityId: 123,
                    createdAt: {
                        gte: new Date(dateFrom),
                        lt: expectedEndDate
                    }
                },
                include: {
                    user: {
                        select: {
                            id: true,
                            name: true,
                            email: true
                        }
                    },
                    deletedByUser: {
                        select: {
                            id: true,
                            name: true,
                            email: true
                        }
                    },
                    recoveredByUser: {
                        select: {
                            id: true,
                            name: true,
                            email: true
                        }
                    }
                },
                orderBy: {
                    createdAt: "desc"
                },
                take: 10
            });
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zYWNoaW4vRG9jdW1lbnRzL21kLXNwb3J0cy0vc3JjL19fdGVzdHNfXy9zZXJ2aWNlcy9hdWRpdFNlcnZpY2UudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBdWRpdFNlcnZpY2UgfSBmcm9tICdAL3NlcnZpY2VzL2F1ZGl0U2VydmljZSc7XG5pbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XG5cbi8vIE1vY2sgUHJpc21hXG5qZXN0Lm1vY2soJ0AvbGliL3ByaXNtYScsICgpID0+ICh7XG4gIHByaXNtYToge1xuICAgIGF1ZGl0TG9nOiB7XG4gICAgICBmaW5kTWFueTogamVzdC5mbigpLFxuICAgICAgY291bnQ6IGplc3QuZm4oKSxcbiAgICAgIGNyZWF0ZTogamVzdC5mbigpLFxuICAgICAgZmluZFVuaXF1ZTogamVzdC5mbigpLFxuICAgICAgdXBkYXRlOiBqZXN0LmZuKCksXG4gICAgfSxcbiAgICB1c2VyOiB7XG4gICAgICBmaW5kTWFueTogamVzdC5mbigpLFxuICAgIH0sXG4gICAgcHJvZHVjdDoge1xuICAgICAgY3JlYXRlOiBqZXN0LmZuKCksXG4gICAgICB1cGRhdGU6IGplc3QuZm4oKSxcbiAgICB9LFxuICAgIGN1c3RvbWVyOiB7XG4gICAgICBjcmVhdGU6IGplc3QuZm4oKSxcbiAgICAgIHVwZGF0ZTogamVzdC5mbigpLFxuICAgIH0sXG4gIH0sXG59KSk7XG5cbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJ0AvbGliL3ByaXNtYSc7XG5cbmRlc2NyaWJlKCdBdWRpdFNlcnZpY2UnLCAoKSA9PiB7XG4gIGxldCBhdWRpdFNlcnZpY2U6IEF1ZGl0U2VydmljZTtcbiAgY29uc3QgbW9ja1ByaXNtYSA9IHByaXNtYSBhcyBqZXN0Lk1vY2tlZDx0eXBlb2YgcHJpc21hPjtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBhdWRpdFNlcnZpY2UgPSBBdWRpdFNlcnZpY2UuZ2V0SW5zdGFuY2UoKTtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBqZXN0LnJlc2V0QWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2dldFJlY3ljbGVCaW5JdGVtcycsICgpID0+IHtcbiAgICBjb25zdCBtb2NrQXVkaXRMb2dJdGVtcyA9IFtcbiAgICAgIHtcbiAgICAgICAgaWQ6IDEsXG4gICAgICAgIGVudGl0eTogJ3Byb2R1Y3QnLFxuICAgICAgICBlbnRpdHlJZDogMTIzLFxuICAgICAgICBhY3Rpb246ICdERUxFVEUnLFxuICAgICAgICB1c2VySWQ6ICd1c2VyMScsXG4gICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoJzIwMjQtMDEtMTVUMTA6MDA6MDBaJyksXG4gICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICBpc0RlbGV0ZWQ6IHRydWUsXG4gICAgICAgICAgY2FuUmVjb3ZlcjogdHJ1ZSxcbiAgICAgICAgICBkZWxldGVkQXQ6ICcyMDI0LTAxLTE1VDEwOjAwOjAwWicsXG4gICAgICAgICAgZGVsZXRlZEJ5OiAndXNlcjEnLFxuICAgICAgICAgIG9yaWdpbmFsRGF0YTogeyBuYW1lOiAnVGVzdCBQcm9kdWN0JywgcHJpY2U6IDEwMCB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaWQ6IDIsXG4gICAgICAgIGVudGl0eTogJ2N1c3RvbWVyJyxcbiAgICAgICAgZW50aXR5SWQ6IDQ1NixcbiAgICAgICAgYWN0aW9uOiAnREVMRVRFJyxcbiAgICAgICAgdXNlcklkOiAndXNlcjInLFxuICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCcyMDI0LTAxLTE2VDExOjAwOjAwWicpLFxuICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgaXNEZWxldGVkOiB0cnVlLFxuICAgICAgICAgIGNhblJlY292ZXI6IHRydWUsXG4gICAgICAgICAgZGVsZXRlZEF0OiAnMjAyNC0wMS0xNlQxMTowMDowMFonLFxuICAgICAgICAgIGRlbGV0ZWRCeTogJ3VzZXIyJyxcbiAgICAgICAgICBvcmlnaW5hbERhdGE6IHsgbmFtZTogJ1Rlc3QgQ3VzdG9tZXInLCBlbWFpbDogJ3Rlc3RAZXhhbXBsZS5jb20nIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIF07XG5cbiAgICBjb25zdCBtb2NrVXNlcnMgPSBbXG4gICAgICB7IGlkOiAndXNlcjEnLCBuYW1lOiAnSm9obiBEb2UnLCBlbWFpbDogJ2pvaG5AZXhhbXBsZS5jb20nIH0sXG4gICAgICB7IGlkOiAndXNlcjInLCBuYW1lOiAnSmFuZSBTbWl0aCcsIGVtYWlsOiAnamFuZUBleGFtcGxlLmNvbScgfSxcbiAgICBdO1xuXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAobW9ja1ByaXNtYS5hdWRpdExvZy5maW5kTWFueSBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tBdWRpdExvZ0l0ZW1zKTtcbiAgICAgIChtb2NrUHJpc21hLmF1ZGl0TG9nLmNvdW50IGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoMik7XG4gICAgICAobW9ja1ByaXNtYS51c2VyLmZpbmRNYW55IGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUobW9ja1VzZXJzKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGFsbCByZWN5Y2xlIGJpbiBpdGVtcyB3aXRob3V0IGZpbHRlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhdWRpdFNlcnZpY2UuZ2V0UmVjeWNsZUJpbkl0ZW1zKCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuaXRlbXMpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICAgIGV4cGVjdChyZXN1bHQudG90YWwpLnRvQmUoMik7XG4gICAgICBleHBlY3QocmVzdWx0Lml0ZW1zWzBdLmVudGl0eSkudG9CZSgncHJvZHVjdCcpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5pdGVtc1sxXS5lbnRpdHkpLnRvQmUoJ2N1c3RvbWVyJyk7XG4gICAgICBleHBlY3QobW9ja1ByaXNtYS5hdWRpdExvZy5maW5kTWFueSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB3aGVyZToge30sXG4gICAgICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfSxcbiAgICAgICAgdGFrZTogNTAsXG4gICAgICAgIHNraXA6IDAsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZmlsdGVyIGJ5IGVudGl0eSB0eXBlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYXVkaXRTZXJ2aWNlLmdldFJlY3ljbGVCaW5JdGVtcygncHJvZHVjdCcpO1xuXG4gICAgICBleHBlY3QobW9ja1ByaXNtYS5hdWRpdExvZy5maW5kTWFueSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB3aGVyZTogeyBlbnRpdHk6ICdwcm9kdWN0JyB9LFxuICAgICAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0sXG4gICAgICAgIHRha2U6IDUwLFxuICAgICAgICBza2lwOiAwLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGZpbHRlciBieSBkYXRlIHJhbmdlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZGF0ZUZyb20gPSAnMjAyNC0wMS0xNVQwMDowMDowMFonO1xuICAgICAgY29uc3QgZGF0ZVRvID0gJzIwMjQtMDEtMTVUMjM6NTk6NTlaJztcbiAgICAgIFxuICAgICAgYXdhaXQgYXVkaXRTZXJ2aWNlLmdldFJlY3ljbGVCaW5JdGVtcyh1bmRlZmluZWQsIDUwLCAwLCBkYXRlRnJvbSwgZGF0ZVRvKTtcblxuICAgICAgY29uc3QgZXhwZWN0ZWRFbmREYXRlID0gbmV3IERhdGUoZGF0ZVRvKTtcbiAgICAgIGV4cGVjdGVkRW5kRGF0ZS5zZXREYXRlKGV4cGVjdGVkRW5kRGF0ZS5nZXREYXRlKCkgKyAxKTtcblxuICAgICAgZXhwZWN0KG1vY2tQcmlzbWEuYXVkaXRMb2cuZmluZE1hbnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBjcmVhdGVkQXQ6IHtcbiAgICAgICAgICAgIGd0ZTogbmV3IERhdGUoZGF0ZUZyb20pLFxuICAgICAgICAgICAgbHQ6IGV4cGVjdGVkRW5kRGF0ZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0sXG4gICAgICAgIHRha2U6IDUwLFxuICAgICAgICBza2lwOiAwLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGZpbHRlciBieSBlbnRpdHkgYW5kIGRhdGUgcmFuZ2UgY29tYmluZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBkYXRlRnJvbSA9ICcyMDI0LTAxLTE1VDAwOjAwOjAwWic7XG4gICAgICBjb25zdCBkYXRlVG8gPSAnMjAyNC0wMS0xNlQyMzo1OTo1OVonO1xuICAgICAgXG4gICAgICBhd2FpdCBhdWRpdFNlcnZpY2UuZ2V0UmVjeWNsZUJpbkl0ZW1zKCdwcm9kdWN0JywgMjAsIDEwLCBkYXRlRnJvbSwgZGF0ZVRvKTtcblxuICAgICAgY29uc3QgZXhwZWN0ZWRFbmREYXRlID0gbmV3IERhdGUoZGF0ZVRvKTtcbiAgICAgIGV4cGVjdGVkRW5kRGF0ZS5zZXREYXRlKGV4cGVjdGVkRW5kRGF0ZS5nZXREYXRlKCkgKyAxKTtcblxuICAgICAgZXhwZWN0KG1vY2tQcmlzbWEuYXVkaXRMb2cuZmluZE1hbnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBlbnRpdHk6ICdwcm9kdWN0JyxcbiAgICAgICAgICBjcmVhdGVkQXQ6IHtcbiAgICAgICAgICAgIGd0ZTogbmV3IERhdGUoZGF0ZUZyb20pLFxuICAgICAgICAgICAgbHQ6IGV4cGVjdGVkRW5kRGF0ZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0sXG4gICAgICAgIHRha2U6IDIwLFxuICAgICAgICBza2lwOiAxMCxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBpbmNsdWRlIHVzZXIgZGV0YWlscyBmb3IgZGVsZXRlZCBpdGVtcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGF1ZGl0U2VydmljZS5nZXRSZWN5Y2xlQmluSXRlbXMoKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5pdGVtc1swXS5kZWxldGVkQnlVc2VyKS50b0VxdWFsKHtcbiAgICAgICAgaWQ6ICd1c2VyMScsXG4gICAgICAgIG5hbWU6ICdKb2huIERvZScsXG4gICAgICAgIGVtYWlsOiAnam9obkBleGFtcGxlLmNvbScsXG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChyZXN1bHQuaXRlbXNbMV0uZGVsZXRlZEJ5VXNlcikudG9FcXVhbCh7XG4gICAgICAgIGlkOiAndXNlcjInLFxuICAgICAgICBuYW1lOiAnSmFuZSBTbWl0aCcsXG4gICAgICAgIGVtYWlsOiAnamFuZUBleGFtcGxlLmNvbScsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2dldEF1ZGl0RW50cmllcycsICgpID0+IHtcbiAgICBjb25zdCBtb2NrQXVkaXRFbnRyaWVzID0gW1xuICAgICAge1xuICAgICAgICBpZDogMSxcbiAgICAgICAgZW50aXR5OiAncHJvZHVjdCcsXG4gICAgICAgIGVudGl0eUlkOiAxMjMsXG4gICAgICAgIGFjdGlvbjogJ0NSRUFURScsXG4gICAgICAgIHVzZXJJZDogJ3VzZXIxJyxcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgnMjAyNC0wMS0xNVQxMDowMDowMFonKSxcbiAgICAgICAgZGV0YWlsczogeyBuYW1lOiAnVGVzdCBQcm9kdWN0JyB9LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaWQ6IDIsXG4gICAgICAgIGVudGl0eTogJ2N1c3RvbWVyJyxcbiAgICAgICAgZW50aXR5SWQ6IDQ1NixcbiAgICAgICAgYWN0aW9uOiAnVVBEQVRFJyxcbiAgICAgICAgdXNlcklkOiAndXNlcjInLFxuICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCcyMDI0LTAxLTE2VDExOjAwOjAwWicpLFxuICAgICAgICBkZXRhaWxzOiB7IG5hbWU6ICdVcGRhdGVkIEN1c3RvbWVyJyB9LFxuICAgICAgfSxcbiAgICBdO1xuXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAobW9ja1ByaXNtYS5hdWRpdExvZy5maW5kTWFueSBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tBdWRpdEVudHJpZXMpO1xuICAgICAgKG1vY2tQcmlzbWEuYXVkaXRMb2cuY291bnQgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSgyKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGFsbCBhdWRpdCBlbnRyaWVzIHdpdGhvdXQgZmlsdGVycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGF1ZGl0U2VydmljZS5nZXRBdWRpdEVudHJpZXMoKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5pdGVtcykudG9IYXZlTGVuZ3RoKDIpO1xuICAgICAgZXhwZWN0KHJlc3VsdC50b3RhbCkudG9CZSgyKTtcbiAgICAgIGV4cGVjdChtb2NrUHJpc21hLmF1ZGl0TG9nLmZpbmRNYW55KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHdoZXJlOiB7fSxcbiAgICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9LFxuICAgICAgICBza2lwOiAwLFxuICAgICAgICB0YWtlOiA1MCxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBmaWx0ZXIgYnkgZW50aXR5IHR5cGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBhdWRpdFNlcnZpY2UuZ2V0QXVkaXRFbnRyaWVzKCdwcm9kdWN0Jyk7XG5cbiAgICAgIGV4cGVjdChtb2NrUHJpc21hLmF1ZGl0TG9nLmZpbmRNYW55KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHdoZXJlOiB7IGVudGl0eTogJ3Byb2R1Y3QnIH0sXG4gICAgICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfSxcbiAgICAgICAgc2tpcDogMCxcbiAgICAgICAgdGFrZTogNTAsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZmlsdGVyIGJ5IGRhdGUgcmFuZ2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBkYXRlRnJvbSA9ICcyMDI0LTAxLTE1VDAwOjAwOjAwWic7XG4gICAgICBjb25zdCBkYXRlVG8gPSAnMjAyNC0wMS0xNVQyMzo1OTo1OVonO1xuICAgICAgXG4gICAgICBhd2FpdCBhdWRpdFNlcnZpY2UuZ2V0QXVkaXRFbnRyaWVzKHVuZGVmaW5lZCwgNTAsIDAsIGRhdGVGcm9tLCBkYXRlVG8pO1xuXG4gICAgICBjb25zdCBleHBlY3RlZEVuZERhdGUgPSBuZXcgRGF0ZShkYXRlVG8pO1xuICAgICAgZXhwZWN0ZWRFbmREYXRlLnNldERhdGUoZXhwZWN0ZWRFbmREYXRlLmdldERhdGUoKSArIDEpO1xuXG4gICAgICBleHBlY3QobW9ja1ByaXNtYS5hdWRpdExvZy5maW5kTWFueSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIGNyZWF0ZWRBdDoge1xuICAgICAgICAgICAgZ3RlOiBuZXcgRGF0ZShkYXRlRnJvbSksXG4gICAgICAgICAgICBsdDogZXhwZWN0ZWRFbmREYXRlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfSxcbiAgICAgICAgc2tpcDogMCxcbiAgICAgICAgdGFrZTogNTAsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZmlsdGVyIGJ5IGVudGl0eSBhbmQgZGF0ZSByYW5nZSBjb21iaW5lZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGRhdGVGcm9tID0gJzIwMjQtMDEtMTVUMDA6MDA6MDBaJztcbiAgICAgIGNvbnN0IGRhdGVUbyA9ICcyMDI0LTAxLTE2VDIzOjU5OjU5Wic7XG4gICAgICBcbiAgICAgIGF3YWl0IGF1ZGl0U2VydmljZS5nZXRBdWRpdEVudHJpZXMoJ2N1c3RvbWVyJywgMjAsIDEwLCBkYXRlRnJvbSwgZGF0ZVRvKTtcblxuICAgICAgY29uc3QgZXhwZWN0ZWRFbmREYXRlID0gbmV3IERhdGUoZGF0ZVRvKTtcbiAgICAgIGV4cGVjdGVkRW5kRGF0ZS5zZXREYXRlKGV4cGVjdGVkRW5kRGF0ZS5nZXREYXRlKCkgKyAxKTtcblxuICAgICAgZXhwZWN0KG1vY2tQcmlzbWEuYXVkaXRMb2cuZmluZE1hbnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBlbnRpdHk6ICdjdXN0b21lcicsXG4gICAgICAgICAgY3JlYXRlZEF0OiB7XG4gICAgICAgICAgICBndGU6IG5ldyBEYXRlKGRhdGVGcm9tKSxcbiAgICAgICAgICAgIGx0OiBleHBlY3RlZEVuZERhdGUsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9LFxuICAgICAgICBza2lwOiAxMCxcbiAgICAgICAgdGFrZTogMjAsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2dldEVudGl0eUhpc3RvcnknLCAoKSA9PiB7XG4gICAgY29uc3QgbW9ja0VudGl0eUhpc3RvcnkgPSBbXG4gICAgICB7XG4gICAgICAgIGlkOiAxLFxuICAgICAgICBlbnRpdHk6ICdwcm9kdWN0JyxcbiAgICAgICAgZW50aXR5SWQ6IDEyMyxcbiAgICAgICAgYWN0aW9uOiAnQ1JFQVRFJyxcbiAgICAgICAgdXNlcklkOiAndXNlcjEnLFxuICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCcyMDI0LTAxLTE1VDEwOjAwOjAwWicpLFxuICAgICAgICBkZXRhaWxzOiB7IG5hbWU6ICdUZXN0IFByb2R1Y3QnIH0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBpZDogMixcbiAgICAgICAgZW50aXR5OiAncHJvZHVjdCcsXG4gICAgICAgIGVudGl0eUlkOiAxMjMsXG4gICAgICAgIGFjdGlvbjogJ1VQREFURScsXG4gICAgICAgIHVzZXJJZDogJ3VzZXIyJyxcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgnMjAyNC0wMS0xNlQxMTowMDowMFonKSxcbiAgICAgICAgZGV0YWlsczogeyBuYW1lOiAnVXBkYXRlZCBQcm9kdWN0JyB9LFxuICAgICAgfSxcbiAgICBdO1xuXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAobW9ja1ByaXNtYS5hdWRpdExvZy5maW5kTWFueSBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tFbnRpdHlIaXN0b3J5KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGVudGl0eSBoaXN0b3J5IHdpdGhvdXQgZGF0ZSBmaWx0ZXJzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYXVkaXRTZXJ2aWNlLmdldEVudGl0eUhpc3RvcnkoJ3Byb2R1Y3QnLCAxMjMpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVMZW5ndGgoMik7XG4gICAgICBleHBlY3QobW9ja1ByaXNtYS5hdWRpdExvZy5maW5kTWFueSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIGVudGl0eTogJ3Byb2R1Y3QnLFxuICAgICAgICAgIGVudGl0eUlkOiAxMjMsXG4gICAgICAgIH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICAgIG5hbWU6IHRydWUsXG4gICAgICAgICAgICAgIGVtYWlsOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRlbGV0ZWRCeVVzZXI6IHtcbiAgICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgZW1haWw6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVjb3ZlcmVkQnlVc2VyOiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICAgIG5hbWU6IHRydWUsXG4gICAgICAgICAgICAgIGVtYWlsOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0sXG4gICAgICAgIHRha2U6IDIwLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGZpbHRlciBlbnRpdHkgaGlzdG9yeSBieSBkYXRlIHJhbmdlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZGF0ZUZyb20gPSAnMjAyNC0wMS0xNVQwMDowMDowMFonO1xuICAgICAgY29uc3QgZGF0ZVRvID0gJzIwMjQtMDEtMTZUMjM6NTk6NTlaJztcbiAgICAgIFxuICAgICAgYXdhaXQgYXVkaXRTZXJ2aWNlLmdldEVudGl0eUhpc3RvcnkoJ3Byb2R1Y3QnLCAxMjMsIDEwLCBkYXRlRnJvbSwgZGF0ZVRvKTtcblxuICAgICAgY29uc3QgZXhwZWN0ZWRFbmREYXRlID0gbmV3IERhdGUoZGF0ZVRvKTtcbiAgICAgIGV4cGVjdGVkRW5kRGF0ZS5zZXREYXRlKGV4cGVjdGVkRW5kRGF0ZS5nZXREYXRlKCkgKyAxKTtcblxuICAgICAgZXhwZWN0KG1vY2tQcmlzbWEuYXVkaXRMb2cuZmluZE1hbnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBlbnRpdHk6ICdwcm9kdWN0JyxcbiAgICAgICAgICBlbnRpdHlJZDogMTIzLFxuICAgICAgICAgIGNyZWF0ZWRBdDoge1xuICAgICAgICAgICAgZ3RlOiBuZXcgRGF0ZShkYXRlRnJvbSksXG4gICAgICAgICAgICBsdDogZXhwZWN0ZWRFbmREYXRlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICAgIG5hbWU6IHRydWUsXG4gICAgICAgICAgICAgIGVtYWlsOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRlbGV0ZWRCeVVzZXI6IHtcbiAgICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgZW1haWw6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVjb3ZlcmVkQnlVc2VyOiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICAgIG5hbWU6IHRydWUsXG4gICAgICAgICAgICAgIGVtYWlsOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0sXG4gICAgICAgIHRha2U6IDEwLFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7Il0sIm5hbWVzIjpbImplc3QiLCJtb2NrIiwicHJpc21hIiwiYXVkaXRMb2ciLCJmaW5kTWFueSIsImZuIiwiY291bnQiLCJjcmVhdGUiLCJmaW5kVW5pcXVlIiwidXBkYXRlIiwidXNlciIsInByb2R1Y3QiLCJjdXN0b21lciIsImRlc2NyaWJlIiwiYXVkaXRTZXJ2aWNlIiwibW9ja1ByaXNtYSIsImJlZm9yZUVhY2giLCJBdWRpdFNlcnZpY2UiLCJnZXRJbnN0YW5jZSIsImNsZWFyQWxsTW9ja3MiLCJhZnRlckVhY2giLCJyZXNldEFsbE1vY2tzIiwibW9ja0F1ZGl0TG9nSXRlbXMiLCJpZCIsImVudGl0eSIsImVudGl0eUlkIiwiYWN0aW9uIiwidXNlcklkIiwiY3JlYXRlZEF0IiwiRGF0ZSIsImRldGFpbHMiLCJpc0RlbGV0ZWQiLCJjYW5SZWNvdmVyIiwiZGVsZXRlZEF0IiwiZGVsZXRlZEJ5Iiwib3JpZ2luYWxEYXRhIiwibmFtZSIsInByaWNlIiwiZW1haWwiLCJtb2NrVXNlcnMiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsIml0IiwicmVzdWx0IiwiZ2V0UmVjeWNsZUJpbkl0ZW1zIiwiZXhwZWN0IiwiaXRlbXMiLCJ0b0hhdmVMZW5ndGgiLCJ0b3RhbCIsInRvQmUiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsIndoZXJlIiwib3JkZXJCeSIsInRha2UiLCJza2lwIiwiZGF0ZUZyb20iLCJkYXRlVG8iLCJ1bmRlZmluZWQiLCJleHBlY3RlZEVuZERhdGUiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImd0ZSIsImx0IiwiZGVsZXRlZEJ5VXNlciIsInRvRXF1YWwiLCJtb2NrQXVkaXRFbnRyaWVzIiwiZ2V0QXVkaXRFbnRyaWVzIiwibW9ja0VudGl0eUhpc3RvcnkiLCJnZXRFbnRpdHlIaXN0b3J5IiwiaW5jbHVkZSIsInNlbGVjdCIsInJlY292ZXJlZEJ5VXNlciJdLCJtYXBwaW5ncyI6IjtBQUdBLGNBQWM7QUFDZEEsS0FBS0MsSUFBSSxDQUFDLGdCQUFnQixJQUFPLENBQUE7UUFDL0JDLFFBQVE7WUFDTkMsVUFBVTtnQkFD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