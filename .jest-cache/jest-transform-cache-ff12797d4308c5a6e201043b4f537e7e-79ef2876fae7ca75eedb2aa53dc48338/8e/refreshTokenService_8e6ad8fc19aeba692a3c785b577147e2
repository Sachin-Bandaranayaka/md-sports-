98dbd910cc8f1d3308300e072a40774d
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    cleanupRefreshTokens: function() {
        return cleanupRefreshTokens;
    },
    generateRefreshToken: function() {
        return generateRefreshToken;
    },
    revokeAllUserRefreshTokens: function() {
        return revokeAllUserRefreshTokens;
    },
    revokeRefreshToken: function() {
        return revokeRefreshToken;
    },
    verifyRefreshToken: function() {
        return verifyRefreshToken;
    }
});
const _prisma = /*#__PURE__*/ _interop_require_default(require("../lib/prisma"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Configuration
const REFRESH_TOKEN_EXPIRES_IN_DAYS = 30;
// Generate a secure random token using Web Crypto API
const generateSecureToken = (length = 40)=>{
    // Use Web Crypto API which is supported in Edge Runtime
    if (typeof crypto !== "undefined") {
        const bytes = new Uint8Array(length);
        crypto.getRandomValues(bytes);
        return Array.from(bytes).map((byte)=>byte.toString(16).padStart(2, "0")).join("");
    }
    // Fallback (less secure but works everywhere)
    return Array.from({
        length
    }, ()=>Math.floor(Math.random() * 16).toString(16)).join("");
};
const generateRefreshToken = async (userId)=>{
    try {
        // Verify prisma client is initialized
        if (!_prisma.default || !_prisma.default.refreshToken) {
            console.error("Prisma client or RefreshToken model not available");
            throw new Error("Database client not initialized correctly");
        }
        // Log for debugging
        console.log("Generating refresh token for user ID:", userId);
        // Generate a random token
        const token = generateSecureToken(40);
        // Calculate expiration date (30 days from now)
        const expiresAt = new Date();
        expiresAt.setDate(expiresAt.getDate() + REFRESH_TOKEN_EXPIRES_IN_DAYS);
        // Log the token details before creating
        console.log("Preparing to create refresh token with:", {
            userId,
            token: token.substring(0, 10) + "...",
            expiresAt
        });
        // Store the token in the database
        const createdToken = await _prisma.default.refreshToken.create({
            data: {
                userId,
                token,
                expiresAt,
                updatedAt: new Date()
            }
        });
        console.log("Successfully created refresh token with ID:", createdToken.id);
        return token;
    } catch (error) {
        // More detailed error logging
        console.error("Error generating refresh token:", error);
        if (error instanceof Error) {
            console.error("Error message:", error.message);
            console.error("Error stack:", error.stack);
        }
        throw new Error("Failed to generate refresh token");
    }
};
const verifyRefreshToken = async (token)=>{
    try {
        // Verify prisma client is initialized
        if (!_prisma.default || !_prisma.default.refreshToken) {
            console.error("Prisma client or RefreshToken model not available");
            return null;
        }
        // Find the token in the database
        const refreshToken = await _prisma.default.refreshToken.findUnique({
            where: {
                token
            }
        });
        // Check if token exists and is not revoked
        if (!refreshToken || refreshToken.isRevoked) {
            console.log("Token not found or revoked:", token.substring(0, 10) + "...");
            return null;
        }
        // Check if token is expired
        if (new Date() > refreshToken.expiresAt) {
            console.log("Token expired:", token.substring(0, 10) + "...");
            // Revoke expired token
            await _prisma.default.refreshToken.update({
                where: {
                    id: refreshToken.id
                },
                data: {
                    isRevoked: true
                }
            });
            return null;
        }
        return refreshToken.userId;
    } catch (error) {
        console.error("Error verifying refresh token:", error);
        return null;
    }
};
const revokeRefreshToken = async (token)=>{
    try {
        // Verify prisma client is initialized
        if (!_prisma.default || !_prisma.default.refreshToken) {
            console.error("Prisma client or RefreshToken model not available");
            return false;
        }
        await _prisma.default.refreshToken.updateMany({
            where: {
                token
            },
            data: {
                isRevoked: true
            }
        });
        return true;
    } catch (error) {
        console.error("Error revoking refresh token:", error);
        return false;
    }
};
const revokeAllUserRefreshTokens = async (userId)=>{
    try {
        // Verify prisma client is initialized
        if (!_prisma.default || !_prisma.default.refreshToken) {
            console.error("Prisma client or RefreshToken model not available");
            return false;
        }
        await _prisma.default.refreshToken.updateMany({
            where: {
                userId
            },
            data: {
                isRevoked: true
            }
        });
        return true;
    } catch (error) {
        console.error("Error revoking user refresh tokens:", error);
        return false;
    }
};
const cleanupRefreshTokens = async ()=>{
    try {
        // Verify prisma client is initialized
        if (!_prisma.default || !_prisma.default.refreshToken) {
            console.error("Prisma client or RefreshToken model not available");
            return;
        }
        const now = new Date();
        await _prisma.default.refreshToken.deleteMany({
            where: {
                OR: [
                    {
                        expiresAt: {
                            lt: now
                        }
                    },
                    {
                        isRevoked: true
                    }
                ]
            }
        });
    } catch (error) {
        console.error("Error cleaning up refresh tokens:", error);
    }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zYWNoaW4vRG9jdW1lbnRzL21kLXNwb3J0cy0vc3JjL3NlcnZpY2VzL3JlZnJlc2hUb2tlblNlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHByaXNtYSBmcm9tICdAL2xpYi9wcmlzbWEnO1xuXG4vLyBDb25maWd1cmF0aW9uXG5jb25zdCBSRUZSRVNIX1RPS0VOX0VYUElSRVNfSU5fREFZUyA9IDMwO1xuXG4vLyBHZW5lcmF0ZSBhIHNlY3VyZSByYW5kb20gdG9rZW4gdXNpbmcgV2ViIENyeXB0byBBUElcbmNvbnN0IGdlbmVyYXRlU2VjdXJlVG9rZW4gPSAobGVuZ3RoID0gNDApOiBzdHJpbmcgPT4ge1xuICAgIC8vIFVzZSBXZWIgQ3J5cHRvIEFQSSB3aGljaCBpcyBzdXBwb3J0ZWQgaW4gRWRnZSBSdW50aW1lXG4gICAgaWYgKHR5cGVvZiBjcnlwdG8gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKTtcbiAgICAgICAgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhieXRlcyk7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKGJ5dGVzKVxuICAgICAgICAgICAgLm1hcChieXRlID0+IGJ5dGUudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsICcwJykpXG4gICAgICAgICAgICAuam9pbignJyk7XG4gICAgfVxuXG4gICAgLy8gRmFsbGJhY2sgKGxlc3Mgc2VjdXJlIGJ1dCB3b3JrcyBldmVyeXdoZXJlKVxuICAgIHJldHVybiBBcnJheS5mcm9tKFxuICAgICAgICB7IGxlbmd0aCB9LFxuICAgICAgICAoKSA9PiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxNikudG9TdHJpbmcoMTYpXG4gICAgKS5qb2luKCcnKTtcbn07XG5cbi8qKlxuICogR2VuZXJhdGUgYSBuZXcgcmVmcmVzaCB0b2tlbiBmb3IgYSB1c2VyXG4gKi9cbmV4cG9ydCBjb25zdCBnZW5lcmF0ZVJlZnJlc2hUb2tlbiA9IGFzeW5jICh1c2VySWQ6IG51bWJlcik6IFByb21pc2U8c3RyaW5nPiA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gVmVyaWZ5IHByaXNtYSBjbGllbnQgaXMgaW5pdGlhbGl6ZWRcbiAgICAgICAgaWYgKCFwcmlzbWEgfHwgIXByaXNtYS5yZWZyZXNoVG9rZW4pIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1ByaXNtYSBjbGllbnQgb3IgUmVmcmVzaFRva2VuIG1vZGVsIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRGF0YWJhc2UgY2xpZW50IG5vdCBpbml0aWFsaXplZCBjb3JyZWN0bHknKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIExvZyBmb3IgZGVidWdnaW5nXG4gICAgICAgIGNvbnNvbGUubG9nKCdHZW5lcmF0aW5nIHJlZnJlc2ggdG9rZW4gZm9yIHVzZXIgSUQ6JywgdXNlcklkKTtcblxuICAgICAgICAvLyBHZW5lcmF0ZSBhIHJhbmRvbSB0b2tlblxuICAgICAgICBjb25zdCB0b2tlbiA9IGdlbmVyYXRlU2VjdXJlVG9rZW4oNDApO1xuXG4gICAgICAgIC8vIENhbGN1bGF0ZSBleHBpcmF0aW9uIGRhdGUgKDMwIGRheXMgZnJvbSBub3cpXG4gICAgICAgIGNvbnN0IGV4cGlyZXNBdCA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGV4cGlyZXNBdC5zZXREYXRlKGV4cGlyZXNBdC5nZXREYXRlKCkgKyBSRUZSRVNIX1RPS0VOX0VYUElSRVNfSU5fREFZUyk7XG5cbiAgICAgICAgLy8gTG9nIHRoZSB0b2tlbiBkZXRhaWxzIGJlZm9yZSBjcmVhdGluZ1xuICAgICAgICBjb25zb2xlLmxvZygnUHJlcGFyaW5nIHRvIGNyZWF0ZSByZWZyZXNoIHRva2VuIHdpdGg6Jywge1xuICAgICAgICAgICAgdXNlcklkLFxuICAgICAgICAgICAgdG9rZW46IHRva2VuLnN1YnN0cmluZygwLCAxMCkgKyAnLi4uJyxcbiAgICAgICAgICAgIGV4cGlyZXNBdCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gU3RvcmUgdGhlIHRva2VuIGluIHRoZSBkYXRhYmFzZVxuICAgICAgICBjb25zdCBjcmVhdGVkVG9rZW4gPSBhd2FpdCBwcmlzbWEucmVmcmVzaFRva2VuLmNyZWF0ZSh7XG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgdXNlcklkLFxuICAgICAgICAgICAgICAgIHRva2VuLFxuICAgICAgICAgICAgICAgIGV4cGlyZXNBdCxcbiAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zb2xlLmxvZygnU3VjY2Vzc2Z1bGx5IGNyZWF0ZWQgcmVmcmVzaCB0b2tlbiB3aXRoIElEOicsIGNyZWF0ZWRUb2tlbi5pZCk7XG5cbiAgICAgICAgcmV0dXJuIHRva2VuO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIE1vcmUgZGV0YWlsZWQgZXJyb3IgbG9nZ2luZ1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZW5lcmF0aW5nIHJlZnJlc2ggdG9rZW46JywgZXJyb3IpO1xuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbWVzc2FnZTonLCBlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN0YWNrOicsIGVycm9yLnN0YWNrKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBnZW5lcmF0ZSByZWZyZXNoIHRva2VuJyk7XG4gICAgfVxufTtcblxuLyoqXG4gKiBWZXJpZnkgYSByZWZyZXNoIHRva2VuIGFuZCByZXR1cm4gdGhlIGFzc29jaWF0ZWQgdXNlciBJRCBpZiB2YWxpZFxuICovXG5leHBvcnQgY29uc3QgdmVyaWZ5UmVmcmVzaFRva2VuID0gYXN5bmMgKHRva2VuOiBzdHJpbmcpOiBQcm9taXNlPG51bWJlciB8IG51bGw+ID0+IHtcbiAgICB0cnkge1xuICAgICAgICAvLyBWZXJpZnkgcHJpc21hIGNsaWVudCBpcyBpbml0aWFsaXplZFxuICAgICAgICBpZiAoIXByaXNtYSB8fCAhcHJpc21hLnJlZnJlc2hUb2tlbikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignUHJpc21hIGNsaWVudCBvciBSZWZyZXNoVG9rZW4gbW9kZWwgbm90IGF2YWlsYWJsZScpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGaW5kIHRoZSB0b2tlbiBpbiB0aGUgZGF0YWJhc2VcbiAgICAgICAgY29uc3QgcmVmcmVzaFRva2VuID0gYXdhaXQgcHJpc21hLnJlZnJlc2hUb2tlbi5maW5kVW5pcXVlKHtcbiAgICAgICAgICAgIHdoZXJlOiB7IHRva2VuIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIHRva2VuIGV4aXN0cyBhbmQgaXMgbm90IHJldm9rZWRcbiAgICAgICAgaWYgKCFyZWZyZXNoVG9rZW4gfHwgcmVmcmVzaFRva2VuLmlzUmV2b2tlZCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1Rva2VuIG5vdCBmb3VuZCBvciByZXZva2VkOicsIHRva2VuLnN1YnN0cmluZygwLCAxMCkgKyAnLi4uJyk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGlmIHRva2VuIGlzIGV4cGlyZWRcbiAgICAgICAgaWYgKG5ldyBEYXRlKCkgPiByZWZyZXNoVG9rZW4uZXhwaXJlc0F0KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnVG9rZW4gZXhwaXJlZDonLCB0b2tlbi5zdWJzdHJpbmcoMCwgMTApICsgJy4uLicpO1xuXG4gICAgICAgICAgICAvLyBSZXZva2UgZXhwaXJlZCB0b2tlblxuICAgICAgICAgICAgYXdhaXQgcHJpc21hLnJlZnJlc2hUb2tlbi51cGRhdGUoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiByZWZyZXNoVG9rZW4uaWQgfSxcbiAgICAgICAgICAgICAgICBkYXRhOiB7IGlzUmV2b2tlZDogdHJ1ZSB9LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlZnJlc2hUb2tlbi51c2VySWQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdmVyaWZ5aW5nIHJlZnJlc2ggdG9rZW46JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59O1xuXG4vKipcbiAqIFJldm9rZSBhIHNwZWNpZmljIHJlZnJlc2ggdG9rZW5cbiAqL1xuZXhwb3J0IGNvbnN0IHJldm9rZVJlZnJlc2hUb2tlbiA9IGFzeW5jICh0b2tlbjogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gVmVyaWZ5IHByaXNtYSBjbGllbnQgaXMgaW5pdGlhbGl6ZWRcbiAgICAgICAgaWYgKCFwcmlzbWEgfHwgIXByaXNtYS5yZWZyZXNoVG9rZW4pIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1ByaXNtYSBjbGllbnQgb3IgUmVmcmVzaFRva2VuIG1vZGVsIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHByaXNtYS5yZWZyZXNoVG9rZW4udXBkYXRlTWFueSh7XG4gICAgICAgICAgICB3aGVyZTogeyB0b2tlbiB9LFxuICAgICAgICAgICAgZGF0YTogeyBpc1Jldm9rZWQ6IHRydWUgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmV2b2tpbmcgcmVmcmVzaCB0b2tlbjonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59O1xuXG4vKipcbiAqIFJldm9rZSBhbGwgcmVmcmVzaCB0b2tlbnMgZm9yIGEgc3BlY2lmaWMgdXNlclxuICovXG5leHBvcnQgY29uc3QgcmV2b2tlQWxsVXNlclJlZnJlc2hUb2tlbnMgPSBhc3luYyAodXNlcklkOiBudW1iZXIpOiBQcm9taXNlPGJvb2xlYW4+ID0+IHtcbiAgICB0cnkge1xuICAgICAgICAvLyBWZXJpZnkgcHJpc21hIGNsaWVudCBpcyBpbml0aWFsaXplZFxuICAgICAgICBpZiAoIXByaXNtYSB8fCAhcHJpc21hLnJlZnJlc2hUb2tlbikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignUHJpc21hIGNsaWVudCBvciBSZWZyZXNoVG9rZW4gbW9kZWwgbm90IGF2YWlsYWJsZScpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgcHJpc21hLnJlZnJlc2hUb2tlbi51cGRhdGVNYW55KHtcbiAgICAgICAgICAgIHdoZXJlOiB7IHVzZXJJZCB9LFxuICAgICAgICAgICAgZGF0YTogeyBpc1Jldm9rZWQ6IHRydWUgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmV2b2tpbmcgdXNlciByZWZyZXNoIHRva2VuczonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59O1xuXG4vKipcbiAqIENsZWFuIHVwIGV4cGlyZWQgYW5kIHJldm9rZWQgdG9rZW5zXG4gKiBOb3RlOiBUaGlzIHNob3VsZCBiZSBydW4gcGVyaW9kaWNhbGx5IHZpYSBhIGNyb24gam9iXG4gKi9cbmV4cG9ydCBjb25zdCBjbGVhbnVwUmVmcmVzaFRva2VucyA9IGFzeW5jICgpOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICB0cnkge1xuICAgICAgICAvLyBWZXJpZnkgcHJpc21hIGNsaWVudCBpcyBpbml0aWFsaXplZFxuICAgICAgICBpZiAoIXByaXNtYSB8fCAhcHJpc21hLnJlZnJlc2hUb2tlbikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignUHJpc21hIGNsaWVudCBvciBSZWZyZXNoVG9rZW4gbW9kZWwgbm90IGF2YWlsYWJsZScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcblxuICAgICAgICBhd2FpdCBwcmlzbWEucmVmcmVzaFRva2VuLmRlbGV0ZU1hbnkoe1xuICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgICBPUjogW1xuICAgICAgICAgICAgICAgICAgICB7IGV4cGlyZXNBdDogeyBsdDogbm93IH0gfSxcbiAgICAgICAgICAgICAgICAgICAgeyBpc1Jldm9rZWQ6IHRydWUgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2xlYW5pbmcgdXAgcmVmcmVzaCB0b2tlbnM6JywgZXJyb3IpO1xuICAgIH1cbn07ICJdLCJuYW1lcyI6WyJjbGVhbnVwUmVmcmVzaFRva2VucyIsImdlbmVyYXRlUmVmcmVzaFRva2VuIiwicmV2b2tlQWxsVXNlclJlZnJlc2hUb2tlbnMiLCJyZXZva2VSZWZyZXNoVG9rZW4iLCJ2ZXJpZnlSZWZyZXNoVG9rZW4iLCJSRUZSRVNIX1RPS0VOX0VYUElSRVNfSU5fREFZUyIsImdlbmVyYXRlU2VjdXJlVG9rZW4iLCJsZW5ndGgiLCJjcnlwdG8iLCJieXRlcyIsIlVpbnQ4QXJyYXkiLCJnZXRSYW5kb21WYWx1ZXMiLCJBcnJheSIsImZyb20iLCJtYXAiLCJieXRlIiwidG9TdHJpbmciLCJwYWRTdGFydCIsImpvaW4iLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJ1c2VySWQiLCJwcmlzbWEiLCJyZWZyZXNoVG9rZW4iLCJjb25zb2xlIiwiZXJyb3IiLCJFcnJvciIsImxvZyIsInRva2VuIiwiZXhwaXJlc0F0IiwiRGF0ZSIsInNldERhdGUiLCJnZXREYXRlIiwic3Vic3RyaW5nIiwiY3JlYXRlZFRva2VuIiwiY3JlYXRlIiwiZGF0YSIsInVwZGF0ZWRBdCIsImlkIiwibWVzc2FnZSIsInN0YWNrIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaXNSZXZva2VkIiwidXBkYXRlIiwidXBkYXRlTWFueSIsIm5vdyIsImRlbGV0ZU1hbnkiLCJPUiIsImx0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztJQXVLYUEsb0JBQW9CO2VBQXBCQTs7SUE3SUFDLG9CQUFvQjtlQUFwQkE7O0lBcUhBQywwQkFBMEI7ZUFBMUJBOztJQXZCQUMsa0JBQWtCO2VBQWxCQTs7SUExQ0FDLGtCQUFrQjtlQUFsQkE7OzsrREE5RU07Ozs7OztBQUVuQixnQkFBZ0I7QUFDaEIsTUFBTUMsZ0NBQWdDO0FBRXRDLHNEQUFzRDtBQUN0RCxNQUFNQyxzQkFBc0IsQ0FBQ0MsU0FBUyxFQUFFO0lBQ3BDLHdEQUF3RDtJQUN4RCxJQUFJLE9BQU9DLFdBQVcsYUFBYTtRQUMvQixNQUFNQyxRQUFRLElBQUlDLFdBQVdIO1FBQzdCQyxPQUFPRyxlQUFlLENBQUNGO1FBQ3ZCLE9BQU9HLE1BQU1DLElBQUksQ0FBQ0osT0FDYkssR0FBRyxDQUFDQyxDQUFBQSxPQUFRQSxLQUFLQyxRQUFRLENBQUMsSUFBSUMsUUFBUSxDQUFDLEdBQUcsTUFDMUNDLElBQUksQ0FBQztJQUNkO0lBRUEsOENBQThDO0lBQzlDLE9BQU9OLE1BQU1DLElBQUksQ0FDYjtRQUFFTjtJQUFPLEdBQ1QsSUFBTVksS0FBS0MsS0FBSyxDQUFDRCxLQUFLRSxNQUFNLEtBQUssSUFBSUwsUUFBUSxDQUFDLEtBQ2hERSxJQUFJLENBQUM7QUFDWDtBQUtPLE1BQU1qQix1QkFBdUIsT0FBT3FC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