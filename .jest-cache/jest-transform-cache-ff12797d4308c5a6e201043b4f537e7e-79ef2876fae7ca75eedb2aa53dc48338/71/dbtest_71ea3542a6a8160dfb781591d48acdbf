cd5cd3b26b6473b97c4a2f458884fa40
// Fixed Database connection and configuration tests
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _globals = require("@jest/globals");
const _db = require("../../src/lib/db");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
// Mock Prisma operations
const mockPrismaOperations = {
    findMany: _globals.jest.fn(),
    findUnique: _globals.jest.fn(),
    findFirst: _globals.jest.fn(),
    create: _globals.jest.fn(),
    update: _globals.jest.fn(),
    delete: _globals.jest.fn(),
    count: _globals.jest.fn(),
    aggregate: _globals.jest.fn(),
    upsert: _globals.jest.fn(),
    deleteMany: _globals.jest.fn(),
    updateMany: _globals.jest.fn()
};
const mockPrisma = {
    user: {
        ...mockPrismaOperations
    },
    product: {
        ...mockPrismaOperations
    },
    customer: {
        ...mockPrismaOperations
    },
    invoice: {
        ...mockPrismaOperations
    },
    inventoryItem: {
        ...mockPrismaOperations
    },
    category: {
        ...mockPrismaOperations
    },
    supplier: {
        ...mockPrismaOperations
    },
    purchaseInvoice: {
        ...mockPrismaOperations
    },
    purchaseInvoiceItem: {
        ...mockPrismaOperations
    },
    salesInvoice: {
        ...mockPrismaOperations
    },
    salesInvoiceItem: {
        ...mockPrismaOperations
    },
    $connect: _globals.jest.fn(),
    $disconnect: _globals.jest.fn(),
    $transaction: _globals.jest.fn(),
    $executeRaw: _globals.jest.fn(),
    $queryRaw: _globals.jest.fn(),
    $on: _globals.jest.fn(),
    $use: _globals.jest.fn()
};
// Mock prisma module
_globals.jest.mock("@/lib/prisma", ()=>({
        __esModule: true,
        default: mockPrisma
    }));
// Mock the process.env for database configuration
const originalEnv = process.env;
beforeAll(()=>{
    process.env = {
        ...originalEnv,
        DATABASE_URL: "postgresql://test:test@localhost:5432/test_db",
        NODE_ENV: "test"
    };
});
afterAll(()=>{
    process.env = originalEnv;
});
describe("Database Library", ()=>{
    beforeEach(()=>{
        _globals.jest.clearAllMocks();
    });
    describe("db export", ()=>{
        it("should export db as the prisma client", ()=>{
            expect(_db.db).toBeDefined();
            expect(_db.db).toBe(mockPrisma);
        });
        it("should have user methods", ()=>{
            expect(_db.db.user).toBeDefined();
            expect(_db.db.user.findMany).toBeDefined();
            expect(_db.db.user.findUnique).toBeDefined();
            expect(_db.db.user.create).toBeDefined();
            expect(_db.db.user.update).toBeDefined();
            expect(_db.db.user.delete).toBeDefined();
        });
        it("should have product methods", ()=>{
            expect(_db.db.product).toBeDefined();
            expect(_db.db.product.findMany).toBeDefined();
            expect(_db.db.product.findUnique).toBeDefined();
            expect(_db.db.product.create).toBeDefined();
            expect(_db.db.product.update).toBeDefined();
            expect(_db.db.product.delete).toBeDefined();
        });
        it("should have connection methods", ()=>{
            expect(_db.db.$connect).toBeDefined();
            expect(_db.db.$disconnect).toBeDefined();
            expect(_db.db.$transaction).toBeDefined();
        });
    });
    describe("prisma export", ()=>{
        it("should export prisma as the same client", ()=>{
            expect(_db.prisma).toBeDefined();
            expect(_db.prisma).toBe(mockPrisma);
            expect(_db.prisma).toBe(_db.db);
        });
    });
    describe("default export", ()=>{
        it("should export db as default", async ()=>{
            const defaultExport = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../src/lib/db")));
            expect(defaultExport.default).toBeDefined();
            expect(defaultExport.default).toBe(_db.db);
            expect(defaultExport.default).toBe(mockPrisma);
        });
    });
    describe("database operations", ()=>{
        it("should allow user queries", async ()=>{
            const mockUser = {
                id: 1,
                name: "Test User",
                email: "test@example.com"
            };
            mockPrisma.user.findUnique.mockResolvedValue(mockUser);
            const result = await _db.db.user.findUnique({
                where: {
                    id: 1
                }
            });
            expect(result).toEqual(mockUser);
            expect(mockPrisma.user.findUnique).toHaveBeenCalledWith({
                where: {
                    id: 1
                }
            });
        });
        it("should allow product queries", async ()=>{
            const mockProduct = {
                id: "product1",
                name: "Test Product"
            };
            mockPrisma.product.findUnique.mockResolvedValue(mockProduct);
            const result = await _db.db.product.findUnique({
                where: {
                    id: "product1"
                }
            });
            expect(result).toEqual(mockProduct);
            expect(mockPrisma.product.findUnique).toHaveBeenCalledWith({
                where: {
                    id: "product1"
                }
            });
        });
        it("should allow transactions", async ()=>{
            const mockResult = {
                success: true
            };
            mockPrisma.$transaction.mockResolvedValue(mockResult);
            const transactionFn = _globals.jest.fn().mockResolvedValue(mockResult);
            const result = await _db.db.$transaction(transactionFn);
            expect(result).toEqual(mockResult);
            expect(mockPrisma.$transaction).toHaveBeenCalledWith(transactionFn);
        });
        it("should handle connection operations", async ()=>{
            mockPrisma.$connect.mockResolvedValue(undefined);
            mockPrisma.$disconnect.mockResolvedValue(undefined);
            await _db.db.$connect();
            await _db.db.$disconnect();
            expect(mockPrisma.$connect).toHaveBeenCalled();
            expect(mockPrisma.$disconnect).toHaveBeenCalled();
        });
    });
    describe("error handling", ()=>{
        it("should propagate database errors", async ()=>{
            const dbError = new Error("Database connection failed");
            mockPrisma.user.findUnique.mockRejectedValue(dbError);
            await expect(_db.db.user.findUnique({
                where: {
                    id: 1
                }
            })).rejects.toThrow("Database connection failed");
        });
        it("should propagate transaction errors", async ()=>{
            const transactionError = new Error("Transaction failed");
            mockPrisma.$transaction.mockRejectedValue(transactionError);
            const transactionFn = _globals.jest.fn();
            await expect(_db.db.$transaction(transactionFn)).rejects.toThrow("Transaction failed");
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zYWNoaW4vRG9jdW1lbnRzL21kLXNwb3J0cy0vdGVzdHMvdW5pdC9kYi50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEZpeGVkIERhdGFiYXNlIGNvbm5lY3Rpb24gYW5kIGNvbmZpZ3VyYXRpb24gdGVzdHNcblxuaW1wb3J0IHsgamVzdCB9IGZyb20gJ0BqZXN0L2dsb2JhbHMnO1xuXG4vLyBNb2NrIFByaXNtYSBvcGVyYXRpb25zXG5jb25zdCBtb2NrUHJpc21hT3BlcmF0aW9ucyA9IHtcbiAgZmluZE1hbnk6IGplc3QuZm4oKSxcbiAgZmluZFVuaXF1ZTogamVzdC5mbigpLFxuICBmaW5kRmlyc3Q6IGplc3QuZm4oKSxcbiAgY3JlYXRlOiBqZXN0LmZuKCksXG4gIHVwZGF0ZTogamVzdC5mbigpLFxuICBkZWxldGU6IGplc3QuZm4oKSxcbiAgY291bnQ6IGplc3QuZm4oKSxcbiAgYWdncmVnYXRlOiBqZXN0LmZuKCksXG4gIHVwc2VydDogamVzdC5mbigpLFxuICBkZWxldGVNYW55OiBqZXN0LmZuKCksXG4gIHVwZGF0ZU1hbnk6IGplc3QuZm4oKSxcbn07XG5cbmNvbnN0IG1vY2tQcmlzbWEgPSB7XG4gIHVzZXI6IHsgLi4ubW9ja1ByaXNtYU9wZXJhdGlvbnMgfSxcbiAgcHJvZHVjdDogeyAuLi5tb2NrUHJpc21hT3BlcmF0aW9ucyB9LFxuICBjdXN0b21lcjogeyAuLi5tb2NrUHJpc21hT3BlcmF0aW9ucyB9LFxuICBpbnZvaWNlOiB7IC4uLm1vY2tQcmlzbWFPcGVyYXRpb25zIH0sXG4gIGludmVudG9yeUl0ZW06IHsgLi4ubW9ja1ByaXNtYU9wZXJhdGlvbnMgfSxcbiAgY2F0ZWdvcnk6IHsgLi4ubW9ja1ByaXNtYU9wZXJhdGlvbnMgfSxcbiAgc3VwcGxpZXI6IHsgLi4ubW9ja1ByaXNtYU9wZXJhdGlvbnMgfSxcbiAgcHVyY2hhc2VJbnZvaWNlOiB7IC4uLm1vY2tQcmlzbWFPcGVyYXRpb25zIH0sXG4gIHB1cmNoYXNlSW52b2ljZUl0ZW06IHsgLi4ubW9ja1ByaXNtYU9wZXJhdGlvbnMgfSxcbiAgc2FsZXNJbnZvaWNlOiB7IC4uLm1vY2tQcmlzbWFPcGVyYXRpb25zIH0sXG4gIHNhbGVzSW52b2ljZUl0ZW06IHsgLi4ubW9ja1ByaXNtYU9wZXJhdGlvbnMgfSxcbiAgJGNvbm5lY3Q6IGplc3QuZm4oKSxcbiAgJGRpc2Nvbm5lY3Q6IGplc3QuZm4oKSxcbiAgJHRyYW5zYWN0aW9uOiBqZXN0LmZuKCksXG4gICRleGVjdXRlUmF3OiBqZXN0LmZuKCksXG4gICRxdWVyeVJhdzogamVzdC5mbigpLFxuICAkb246IGplc3QuZm4oKSxcbiAgJHVzZTogamVzdC5mbigpLFxufTtcblxuLy8gTW9jayBwcmlzbWEgbW9kdWxlXG5qZXN0Lm1vY2soJ0AvbGliL3ByaXNtYScsICgpID0+ICh7XG4gIF9fZXNNb2R1bGU6IHRydWUsXG4gIGRlZmF1bHQ6IG1vY2tQcmlzbWEsXG59KSk7XG5cbi8vIE1vY2sgdGhlIHByb2Nlc3MuZW52IGZvciBkYXRhYmFzZSBjb25maWd1cmF0aW9uXG5jb25zdCBvcmlnaW5hbEVudiA9IHByb2Nlc3MuZW52O1xuYmVmb3JlQWxsKCgpID0+IHtcbiAgcHJvY2Vzcy5lbnYgPSB7XG4gICAgLi4ub3JpZ2luYWxFbnYsXG4gICAgREFUQUJBU0VfVVJMOiAncG9zdGdyZXNxbDovL3Rlc3Q6dGVzdEBsb2NhbGhvc3Q6NTQzMi90ZXN0X2RiJyxcbiAgICBOT0RFX0VOVjogJ3Rlc3QnLFxuICB9O1xufSk7XG5cbmFmdGVyQWxsKCgpID0+IHtcbiAgcHJvY2Vzcy5lbnYgPSBvcmlnaW5hbEVudjtcbn0pO1xuXG5pbXBvcnQgeyBkYiwgcHJpc21hIH0gZnJvbSAnQC9saWIvZGInO1xuXG5kZXNjcmliZSgnRGF0YWJhc2UgTGlicmFyeScsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdkYiBleHBvcnQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBleHBvcnQgZGIgYXMgdGhlIHByaXNtYSBjbGllbnQnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoZGIpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoZGIpLnRvQmUobW9ja1ByaXNtYSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgdXNlciBtZXRob2RzJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KGRiLnVzZXIpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoZGIudXNlci5maW5kTWFueSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChkYi51c2VyLmZpbmRVbmlxdWUpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoZGIudXNlci5jcmVhdGUpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoZGIudXNlci51cGRhdGUpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoZGIudXNlci5kZWxldGUpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgcHJvZHVjdCBtZXRob2RzJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KGRiLnByb2R1Y3QpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoZGIucHJvZHVjdC5maW5kTWFueSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChkYi5wcm9kdWN0LmZpbmRVbmlxdWUpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoZGIucHJvZHVjdC5jcmVhdGUpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoZGIucHJvZHVjdC51cGRhdGUpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoZGIucHJvZHVjdC5kZWxldGUpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgY29ubmVjdGlvbiBtZXRob2RzJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KGRiLiRjb25uZWN0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGRiLiRkaXNjb25uZWN0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGRiLiR0cmFuc2FjdGlvbikudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3ByaXNtYSBleHBvcnQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBleHBvcnQgcHJpc21hIGFzIHRoZSBzYW1lIGNsaWVudCcsICgpID0+IHtcbiAgICAgIGV4cGVjdChwcmlzbWEpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocHJpc21hKS50b0JlKG1vY2tQcmlzbWEpO1xuICAgICAgZXhwZWN0KHByaXNtYSkudG9CZShkYik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdkZWZhdWx0IGV4cG9ydCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGV4cG9ydCBkYiBhcyBkZWZhdWx0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZGVmYXVsdEV4cG9ydCA9IGF3YWl0IGltcG9ydCgnQC9saWIvZGInKTtcbiAgICAgIGV4cGVjdChkZWZhdWx0RXhwb3J0LmRlZmF1bHQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoZGVmYXVsdEV4cG9ydC5kZWZhdWx0KS50b0JlKGRiKTtcbiAgICAgIGV4cGVjdChkZWZhdWx0RXhwb3J0LmRlZmF1bHQpLnRvQmUobW9ja1ByaXNtYSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdkYXRhYmFzZSBvcGVyYXRpb25zJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgYWxsb3cgdXNlciBxdWVyaWVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1VzZXIgPSB7IGlkOiAxLCBuYW1lOiAnVGVzdCBVc2VyJywgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyB9O1xuICAgICAgbW9ja1ByaXNtYS51c2VyLmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUobW9ja1VzZXIpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi51c2VyLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogMSB9IH0pO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG1vY2tVc2VyKTtcbiAgICAgIGV4cGVjdChtb2NrUHJpc21hLnVzZXIuZmluZFVuaXF1ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoeyB3aGVyZTogeyBpZDogMSB9IH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhbGxvdyBwcm9kdWN0IHF1ZXJpZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUHJvZHVjdCA9IHsgaWQ6ICdwcm9kdWN0MScsIG5hbWU6ICdUZXN0IFByb2R1Y3QnIH07XG4gICAgICBtb2NrUHJpc21hLnByb2R1Y3QuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUHJvZHVjdCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLnByb2R1Y3QuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGlkOiAncHJvZHVjdDEnIH0gfSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwobW9ja1Byb2R1Y3QpO1xuICAgICAgZXhwZWN0KG1vY2tQcmlzbWEucHJvZHVjdC5maW5kVW5pcXVlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7IHdoZXJlOiB7IGlkOiAncHJvZHVjdDEnIH0gfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFsbG93IHRyYW5zYWN0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tSZXN1bHQgPSB7IHN1Y2Nlc3M6IHRydWUgfTtcbiAgICAgIG1vY2tQcmlzbWEuJHRyYW5zYWN0aW9uLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tSZXN1bHQpO1xuXG4gICAgICBjb25zdCB0cmFuc2FjdGlvbkZuID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tSZXN1bHQpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuJHRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uRm4pO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG1vY2tSZXN1bHQpO1xuICAgICAgZXhwZWN0KG1vY2tQcmlzbWEuJHRyYW5zYWN0aW9uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh0cmFuc2FjdGlvbkZuKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNvbm5lY3Rpb24gb3BlcmF0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tQcmlzbWEuJGNvbm5lY3QubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKTtcbiAgICAgIG1vY2tQcmlzbWEuJGRpc2Nvbm5lY3QubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKTtcblxuICAgICAgYXdhaXQgZGIuJGNvbm5lY3QoKTtcbiAgICAgIGF3YWl0IGRiLiRkaXNjb25uZWN0KCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChtb2NrUHJpc21hLiRjb25uZWN0KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QobW9ja1ByaXNtYS4kZGlzY29ubmVjdCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZXJyb3IgaGFuZGxpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBwcm9wYWdhdGUgZGF0YWJhc2UgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZGJFcnJvciA9IG5ldyBFcnJvcignRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQnKTtcbiAgICAgIG1vY2tQcmlzbWEudXNlci5maW5kVW5pcXVlLm1vY2tSZWplY3RlZFZhbHVlKGRiRXJyb3IpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoZGIudXNlci5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQ6IDEgfSB9KSkucmVqZWN0cy50b1Rocm93KCdEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBwcm9wYWdhdGUgdHJhbnNhY3Rpb24gZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdHJhbnNhY3Rpb25FcnJvciA9IG5ldyBFcnJvcignVHJhbnNhY3Rpb24gZmFpbGVkJyk7XG4gICAgICBtb2NrUHJpc21hLiR0cmFuc2FjdGlvbi5tb2NrUmVqZWN0ZWRWYWx1ZSh0cmFuc2FjdGlvbkVycm9yKTtcblxuICAgICAgY29uc3QgdHJhbnNhY3Rpb25GbiA9IGplc3QuZm4oKTtcbiAgICAgIGF3YWl0IGV4cGVjdChkYi4kdHJhbnNhY3Rpb24odHJhbnNhY3Rpb25GbikpLnJlamVjdHMudG9UaHJvdygnVHJhbnNhY3Rpb24gZmFpbGVkJyk7XG4gICAgfSk7XG4gIH0pO1xufSk7Il0sIm5hbWVzIjpbIm1vY2tQcmlzbWFPcGVyYXRpb25zIiwiZmluZE1hbnkiLCJqZXN0IiwiZm4iLCJmaW5kVW5pcXVlIiwiZmluZEZpcnN0IiwiY3JlYXRlIiwidXBkYXRlIiwiZGVsZXRlIiwiY291bnQiLCJhZ2dyZWdhdGUiLCJ1cHNlcnQiLCJkZWxldGVNYW55IiwidXBkYXRlTWFueSIsIm1vY2tQcmlzbWEiLCJ1c2VyIiwicHJvZHVjdCIsImN1c3RvbWVyIiwiaW52b2ljZSIsImludmVudG9yeUl0ZW0iLCJjYXRlZ29yeSIsInN1cHBsaWVyIiwicHVyY2hhc2VJbnZvaWNlIiwicHVyY2hhc2VJbnZvaWNlSXRlbSIsInNhbGVzSW52b2ljZSIsInNhbGVzSW52b2ljZUl0ZW0iLCIkY29ubmVjdCIsIiRkaXNjb25uZWN0IiwiJHRyYW5zYWN0aW9uIiwiJGV4ZWN1dGVSYXciLCIkcXVlcnlSYXciLCIkb24iLCIkdXNlIiwibW9jayIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0Iiwib3JpZ2luYWxFbnYiLCJwcm9jZXNzIiwiZW52IiwiYmVmb3JlQWxsIiwiREFUQUJBU0VfVVJMIiwiTk9ERV9FTlYiLCJhZnRlckFsbCIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJpdCIsImV4cGVjdCIsImRiIiwidG9CZURlZmluZWQiLCJ0b0JlIiwicHJpc21hIiwiZGVmYXVsdEV4cG9ydCIsIm1vY2tVc2VyIiwiaWQiLCJuYW1lIiwiZW1haWwiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsInJlc3VsdCIsIndoZXJlIiwidG9FcXVhbCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwibW9ja1Byb2R1Y3QiLCJtb2NrUmVzdWx0Iiwic3VjY2VzcyIsInRyYW5zYWN0aW9uRm4iLCJ1bmRlZmluZWQiLCJ0b0hhdmVCZWVuQ2FsbGVkIiwiZGJFcnJvciIsIkVycm9yIiwibW9ja1JlamVjdGVkVmFsdWUiLCJyZWplY3RzIiwidG9UaHJvdyIsInRyYW5zYWN0aW9uRXJyb3IiXSwibWFwcGluZ3MiOiJBQUFBLG9EQUFvRDs7Ozs7eUJBRS9CO29CQTBETTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBeEQzQix5QkFBeUI7QUFDekIsTUFBTUEsdUJBQXVCO0lBQzNCQyxVQUFVQyxhQUFJLENBQUNDLEVBQUU7SUFDakJDLFlBQVlGLGFBQUksQ0FBQ0MsRUFBRTtJQUNuQkUsV0FBV0gsYUFBSSxDQUFDQyxFQUFFO0lBQ2xCRyxRQUFRSixhQUFJLENBQUNDLEVBQUU7SUFDZkksUUFBUUwsYUFBSSxDQUFDQyxFQUFFO0lBQ2ZLLFFBQVFOLGFBQUksQ0FBQ0MsRUFBRTtJQUNmTSxPQUFPUCxhQUFJLENBQUNDLEVBQUU7SUFDZE8sV0FBV1IsYUFBSSxDQUFDQyxFQUFFO0lBQ2xCUSxRQUFRVCxhQUFJLENBQUNDLEVBQUU7SUFDZlMsWUFBWVYsYUFBSSxDQUFDQyxFQUFFO0lBQ25CVSxZQUFZWCxhQUFJLENBQUNDLEVBQUU7QUFDckI7QUFFQSxNQUFNVyxhQUFhO0lBQ2pCQyxNQUFNO1FBQUUsR0FBR2Ysb0JBQW9CO0lBQUM7SUFDaENnQixTQUFTO1FBQUUsR0FBR2hCLG9CQUFvQjtJQUFDO0lBQ25DaUIsVUFBVTtRQUFFLEdBQUdqQixvQkFBb0I7SUFBQztJQUNwQ2tCLFNBQVM7UUFB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