{"version":3,"names":["Quotations","getExpiryCountdown","expiryDate","cov_26h2yiin5c","f","s","b","today","Date","setHours","expiry","diffTime","getTime","diffDays","Math","ceil","router","_navigation","useRouter","quotations","setQuotations","_react","useState","loading","setLoading","error","setError","searchTerm","setSearchTerm","useEffect","fetchData","quotationsResponse","fetch","ok","Error","apiQuotations","json","transformedQuotations","map","q","customerName","customer","name","date","createdAt","validUntil","err","console","filteredQuotations","filter","quotation","quotationNumber","toLowerCase","includes","status","handleAddQuotation","push","handleEditQuotation","id","handleViewQuotation","handleDuplicateQuotation","_id","_quotationNumber","_createdAt","updatedAt","_updatedAt","quotationData","duplicatedQuotation","toISOString","split","now","response","method","headers","body","JSON","stringify","newQuotation","alert","handleDeleteQuotation","confirm","_jsxruntime","jsx","_MainLayout","default","jsxs","className","_Button","Button","variant","size","onClick","_lucidereact","Plus","Search","type","placeholder","value","onChange","e","target","window","location","reload","Fragment","length","FileText","scope","toLocaleDateString","expiryText","textColorClass","startsWith","total","toLocaleString","title","ExternalLink","Edit","Trash"],"sources":["/Users/sachin/Documents/md-sports-/src/app/quotations/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport MainLayout from '@/components/layout/MainLayout';\nimport { Button } from '@/components/ui/Button';\nimport { Search, Plus, Edit, Trash, FileText, ExternalLink } from 'lucide-react';\nimport { SalesQuotation } from '@/types';\nimport { useRouter } from 'next/navigation';\n\nconst getExpiryCountdown = (expiryDate?: string): string => {\n    if (!expiryDate) {\n        return 'No expiry date';\n    }\n\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    const expiry = new Date(expiryDate);\n    expiry.setHours(0, 0, 0, 0);\n\n    const diffTime = expiry.getTime() - today.getTime();\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n\n    if (diffDays < 0) {\n        return 'Expired';\n    }\n    if (diffDays === 0) {\n        return 'Expires today';\n    }\n    if (diffDays === 1) {\n        return 'Expires in 1 day';\n    }\n    return `Expires in ${diffDays} days`;\n}\n\nexport default function Quotations() {\n    const router = useRouter();\n    const [quotations, setQuotations] = useState<SalesQuotation[]>([]);\n    const [loading, setLoading] = useState<boolean>(true);\n    const [error, setError] = useState<string | null>(null);\n    const [searchTerm, setSearchTerm] = useState('');\n\n    // Fetch quotations from API\n    useEffect(() => {\n        const fetchData = async () => {\n            try {\n                setLoading(true);\n\n                // Fetch quotations\n                const quotationsResponse = await fetch('/api/quotations');\n                if (!quotationsResponse.ok) {\n                    throw new Error('Failed to fetch quotations');\n                }\n                const apiQuotations = await quotationsResponse.json();\n\n                // Transform API data to match SalesQuotation frontend type\n                const transformedQuotations = apiQuotations.map((q: any) => ({\n                    ...q,\n                    customerName: q.customer?.name || 'N/A', // Map from nested customer object\n                    date: q.createdAt, // Use createdAt for the main 'date'\n                    expiryDate: q.validUntil, // Map validUntil to expiryDate\n                    // Ensure all fields from SalesQuotation are present, copying from q\n                    // id, quotationNumber, customerId, items, subtotal, tax, discount, total, notes, status, createdAt are already in q\n                }));\n\n                setQuotations(transformedQuotations);\n\n                setError(null);\n            } catch (err) {\n                console.error('Error fetching data:', err);\n                setError('Failed to load data. Please try again later.');\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchData();\n    }, []);\n\n    // Filter quotations based on search term\n    const filteredQuotations = quotations.filter((quotation) =>\n        quotation.quotationNumber?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        (quotation.customer?.name || '').toLowerCase().includes(searchTerm.toLowerCase()) ||\n        quotation.status?.toLowerCase().includes(searchTerm.toLowerCase())\n    );\n\n    const handleAddQuotation = () => {\n        router.push('/quotations/create');\n    };\n\n    const handleEditQuotation = (quotation: SalesQuotation) => {\n        router.push(`/quotations/${quotation.id}/edit`);\n    };\n\n    const handleViewQuotation = (quotation: SalesQuotation) => {\n        router.push(`/quotations/${quotation.id}`);\n    };\n\n    const handleDuplicateQuotation = async (quotation: SalesQuotation) => {\n        try {\n            // Create a copy of the quotation without the id and with a new date\n            const { id: _id, quotationNumber: _quotationNumber, createdAt: _createdAt, updatedAt: _updatedAt, ...quotationData } = quotation;\n\n            const duplicatedQuotation = {\n                ...quotationData,\n                date: new Date().toISOString().split('T')[0],\n                expiryDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0]\n            };\n\n            const response = await fetch('/api/quotations', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(duplicatedQuotation)\n            });\n\n            if (!response.ok) {\n                throw new Error('Failed to duplicate quotation');\n            }\n\n            const newQuotation = await response.json();\n            setQuotations([...quotations, newQuotation]);\n\n            alert('Quotation duplicated successfully!');\n        } catch (err) {\n            console.error('Error duplicating quotation:', err);\n            alert('Failed to duplicate quotation. Please try again.');\n        }\n    };\n\n    const handleDeleteQuotation = async (id: string) => {\n        if (confirm('Are you sure you want to delete this quotation? This action cannot be undone.')) {\n            try {\n                const response = await fetch(`/api/quotations/${id}`, {\n                    method: 'DELETE'\n                });\n\n                if (!response.ok) {\n                    throw new Error('Failed to delete quotation');\n                }\n\n                setQuotations(quotations.filter(quotation => quotation.id !== id));\n            } catch (err) {\n                console.error('Error deleting quotation:', err);\n                alert('Failed to delete quotation. Please try again.');\n            }\n        }\n    };\n\n    return (\n        <MainLayout>\n            <div className=\"space-y-6\">\n                {/* Header with actions */}\n                <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-4\">\n                    <div>\n                        <h1 className=\"text-2xl font-bold text-black\">Sales Quotations</h1>\n                        <p className=\"text-black\">Manage your sales quotations and customer proposals</p>\n                    </div>\n                    <div className=\"flex gap-3\">\n                        <Button variant=\"primary\" size=\"sm\" onClick={handleAddQuotation}>\n                            <Plus className=\"w-4 h-4 mr-2\" />\n                            New Quotation\n                        </Button>\n                    </div>\n                </div>\n\n                {/* Search bar */}\n                <div className=\"bg-tertiary p-4 rounded-lg shadow-sm border border-gray-200\">\n                    <div className=\"relative\">\n                        <div className=\"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none\">\n                            <Search className=\"w-4 h-4 text-black\" />\n                        </div>\n                        <input\n                            type=\"text\"\n                            className=\"bg-white border border-gray-300 text-black text-sm rounded-lg focus:ring-primary focus:border-primary block w-full pl-10 p-2.5\"\n                            placeholder=\"Search quotations by number, customer or status...\"\n                            value={searchTerm}\n                            onChange={(e) => setSearchTerm(e.target.value)}\n                        />\n                    </div>\n                </div>\n\n                {/* Loading and error states */}\n                {loading && (\n                    <div className=\"text-center py-4\">\n                        <p className=\"text-black\">Loading quotations...</p>\n                    </div>\n                )}\n\n                {error && (\n                    <div className=\"text-center py-4\">\n                        <p className=\"text-red-500\">{error}</p>\n                        <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => window.location.reload()}\n                            className=\"mt-2\"\n                        >\n                            Retry\n                        </Button>\n                    </div>\n                )}\n\n                {/* Quotations table */}\n                {!loading && !error && (\n                    <>\n                        {filteredQuotations.length === 0 ? (\n                            <div className=\"text-center py-8 bg-tertiary rounded-lg\">\n                                <FileText className=\"mx-auto h-12 w-12 text-black opacity-40\" />\n                                <h3 className=\"mt-2 text-lg font-medium text-black\">No quotations found</h3>\n                                <p className=\"mt-1 text-black\">\n                                    {searchTerm ? 'Try adjusting your search term' : 'Create your first quotation to get started'}\n                                </p>\n                                {!searchTerm && (\n                                    <div className=\"mt-6\">\n                                        <Button variant=\"primary\" size=\"sm\" onClick={handleAddQuotation}>\n                                            <Plus className=\"w-4 h-4 mr-2\" />\n                                            New Quotation\n                                        </Button>\n                                    </div>\n                                )}\n                            </div>\n                        ) : (\n                            <div className=\"overflow-x-auto bg-tertiary rounded-lg border border-gray-200\">\n                                <table className=\"min-w-full divide-y divide-gray-200\">\n                                    <thead className=\"bg-gray-50\">\n                                        <tr>\n                                            <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider\">\n                                                Quotation #\n                                            </th>\n                                            <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider\">\n                                                Customer\n                                            </th>\n                                            <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider\">\n                                                Date\n                                            </th>\n                                            <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider\">\n                                                Total\n                                            </th>\n                                            <th scope=\"col\" className=\"px-6 py-3 text-right text-xs font-medium text-black uppercase tracking-wider\">\n                                                Actions\n                                            </th>\n                                        </tr>\n                                    </thead>\n                                    <tbody className=\"bg-white divide-y divide-gray-200\">\n                                        {filteredQuotations.map((quotation) => (\n                                            <tr key={quotation.id} className=\"hover:bg-gray-50\">\n                                                <td className=\"px-6 py-4 whitespace-nowrap\">\n                                                    <div className=\"flex items-center\">\n                                                        <button\n                                                            onClick={() => handleViewQuotation(quotation)}\n                                                            className=\"text-primary hover:text-primary-dark font-medium\"\n                                                        >\n                                                            {quotation.quotationNumber}\n                                                        </button>\n                                                    </div>\n                                                </td>\n                                                <td className=\"px-6 py-4 whitespace-nowrap\">\n                                                    <div className=\"text-sm text-black\">{quotation.customerName}</div>\n                                                </td>\n                                                <td className=\"px-6 py-4 whitespace-nowrap\">\n                                                    <div className=\"text-sm text-black\">\n                                                        {new Date(quotation.date).toLocaleDateString()}\n                                                    </div>\n                                                    {(() => {\n                                                        const expiryText = getExpiryCountdown(quotation.expiryDate);\n                                                        let textColorClass = 'text-black font-normal'; // Default class\n\n                                                        if (expiryText === 'Expires today' || expiryText === 'Expires in 1 day') {\n                                                            textColorClass = 'text-orange-600 font-medium';\n                                                        } else if (expiryText.startsWith('Expires in')) { // Covers > 1 day\n                                                            textColorClass = 'text-green-600 font-medium';\n                                                        } else if (expiryText === 'Expired') {\n                                                            textColorClass = 'text-red-700 font-medium';\n                                                        } else if (expiryText === 'No expiry date') {\n                                                            textColorClass = 'text-gray-500 font-normal';\n                                                        }\n\n                                                        return (\n                                                            <div className={`text-sm ${textColorClass}`}>\n                                                                {expiryText}\n                                                            </div>\n                                                        );\n                                                    })()}\n                                                </td>\n                                                <td className=\"px-6 py-4 whitespace-nowrap\">\n                                                    <div className=\"text-sm font-medium text-black\">\n                                                        {quotation.total.toLocaleString()}\n                                                    </div>\n                                                </td>\n                                                <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\n                                                    <div className=\"flex justify-end space-x-2\">\n                                                        <button\n                                                            onClick={() => handleViewQuotation(quotation)}\n                                                            className=\"text-blue-600 hover:text-blue-900\"\n                                                            title=\"View\"\n                                                        >\n                                                            <ExternalLink className=\"w-4 h-4\" />\n                                                        </button>\n                                                        <button\n                                                            onClick={() => handleEditQuotation(quotation)}\n                                                            className=\"text-indigo-600 hover:text-indigo-900\"\n                                                            title=\"Edit\"\n                                                        >\n                                                            <Edit className=\"w-4 h-4\" />\n                                                        </button>\n                                                        <button\n                                                            onClick={() => handleDeleteQuotation(quotation.id)}\n                                                            className=\"text-red-600 hover:text-red-900\"\n                                                            title=\"Delete\"\n                                                        >\n                                                            <Trash className=\"w-4 h-4\" />\n                                                        </button>\n                                                    </div>\n                                                </td>\n                                            </tr>\n                                        ))}\n                                    </tbody>\n                                </table>\n                            </div>\n                        )}\n                    </>\n                )}\n            </div>\n        </MainLayout>\n    );\n}"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}